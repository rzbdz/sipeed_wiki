{"/maixpy/doc/zh/gui/i18n.html":{"title":"MaixPy MaixCAM i18n(å›½é™…åŒ–) å¤šè¯­è¨€å®ç°","content":" title: MaixPy MaixCAM i18n(å›½é™…åŒ–) å¤šè¯­è¨€å®ç° ## i18n ï¼ˆå›½é™…åŒ–ï¼‰ç®€ä»‹ i18n æ˜¯å›½é™…åŒ–å•è¯ï¼ˆinternationalizationï¼‰çš„ç®€ç§°ï¼Œç›®çš„åœ¨ä¸æ ¹æ®ç”¨æˆ·çš„åœ°åŸŸæˆ–è€…å–œå¥½åˆ‡æ¢è¯­è¨€ã€‚ æˆ‘ä»¬å¸¸ç”¨çš„ ä¸­æ–‡ å’Œ è‹±æ–‡ è¿™ä¸ªå°±æ˜¯è¯­è¨€ï¼Œè¯­è¨€æœ‰å¯¹åº”çš„åœ°åŸŸç¼–ç ï¼ˆ LCIDï¼‰ï¼Œæ¯”å¦‚ä¸­æ–‡çš„åœ°åŸŸç¼–ç ä¸º`zh`ï¼Œè‹±æ–‡ä¸º`en`ï¼Œæ—¥æ–‡ä¸º`ja`ï¼Œå¦å¤–è¿˜æœ‰äºŒçº§åœ°åŸŸç¼–ç ï¼Œæ¯”å¦‚ç®€ä½“ä¸­æ–‡å¯¹åº”`zh cn`ï¼Œä¸€èˆ¬æˆ‘ä»¬å®ç°`zh`å³å¯ã€‚ åœ°åŸŸç¼–å·å¯ä»¥å‚è€ƒ[Windowsçš„åœ°åŸŸç¼–ç è¡¨](https://www.science.co.il/language/Locale codes.php) æˆ–è€…çœ‹ [wikipedia](https://en.wikipedia.org/wiki/Language_localisation)ã€‚ ## MaixPy MaixCAM ä¸­ä½¿ç”¨ i18n ç”¨æˆ·ä½¿ç”¨å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š * é¦–å…ˆç”¨æˆ·ä½¿ç”¨æ—¶ï¼Œåœ¨ç³»ç»Ÿè®¾ç½®ä¸­å¯ä»¥é€‰æ‹©ç³»ç»Ÿè¯­è¨€ï¼Œæ¯”å¦‚å‡ºå‚é»˜è®¤æ˜¯`en`å³è‹±æ–‡ã€‚ * ç„¶åç¨‹åºé€šè¿‡`maix.i18n.get_locale()`å¯ä»¥è·å¾—å½“å‰ç³»ç»Ÿè®¾ç½®çš„åœ°åŸŸã€‚ * ç¨‹åºæ ¹æ®ç³»ç»Ÿè®¾ç½®çš„åœ°åŸŸæ˜¾ç¤ºå¯¹åº”è¯­è¨€çš„å­—ç¬¦ä¸²ã€‚ å¯¹äºåº”ç”¨ç¨‹åºæ¥è¯´ï¼Œæ¯”è¾ƒéº»çƒ¦çš„åœ°æ–¹å°±åœ¨è¿™é‡Œçš„ç¬¬ä¸‰æ­¥ï¼Œå³æ ¹æ®åœ°åŸŸè®¾ç½®æŸ¥è¡¨è·å–å¯¹åº”çš„å­—ç¬¦ä¸²ï¼Œä¸‹é¢æä¾›ä¸¤ç§æ–¹æ³•ï¼Œæ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©ï¼š ### ä¸ä½¿ç”¨ç¿»è¯‘æ–‡ä»¶ï¼Œç›´æ¥ä½¿ç”¨å­—å…¸ å¦‚æœä½ çš„ç¨‹åºåªæœ‰å‡ ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥ç›´æ¥æ‰‹åŠ¨æŒ‡å®šç¿»è¯‘å­—å…¸ï¼š ```python from maix import i18n trans_dict { \"zh\": { \"hello\": \"ä½ å¥½\" }, \"en\": { } } trans i18n.Trans(trans_dict) tr trans.tr trans.set_locale(\"zh\") print(tr(\"hello\")) print(tr(\"my friend\")) ``` è¿™é‡Œç”¨`trans.set_locale(\"zh\")`ä¸´æ—¶è®¾ç½®è¯­è¨€ä¸ºä¸­æ–‡äº†ï¼Œ è¿è¡Œå°±ä¼šæ‰“å°`ä½ å¥½` å’Œ `my friend` äº†ï¼Œ å› ä¸ºæ²¡ç»™`my friend`å¡«åŠ ç¿»è¯‘ï¼Œæ‰€ä»¥åŸå°ä¸åŠ¨åœ°è¿”å›äº†ã€‚ ### è‡ªåŠ¨æ‰«æç”Ÿæˆå­—å…¸ï¼Œå¹¶ä¸”ä»ç¿»è¯‘æ–‡ä»¶åŠ è½½ è¿™ç§æ–¹æ³•æ¯”è¾ƒé€‚åˆæœ‰å¤§é‡éœ€è¦ç¿»è¯‘çš„å­—ç¬¦ä¸²çš„åœºæ™¯ã€‚ å‰é¢çš„æ–¹æ³•æˆ‘ä»¬æ‰‹åŠ¨æŒ‡å®šäº†å­—ç¬¦ä¸²ç¿»è¯‘ï¼Œåœ¨ç®€å•åœºæ™¯å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚æœå­—ç¬¦ä¸²å¤ªå¤šäº†ï¼Œæ‰‹åŠ¨æ”¹å­—å…¸å¾ˆå®¹æ˜“æ¼æ‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¨‹åºè‡ªåŠ¨å¸®æˆ‘ä»¬æ‰¾åˆ°éœ€è¦ç¿»è¯‘çš„å­—ç¬¦ä¸²å¹¶ç”Ÿæˆç¿»è¯‘æ–‡ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦ç¿»è¯‘ä¸€ä¸‹æ–‡ä»¶å°±å¥½äº†ã€‚ åœ¨ MaixPy ä¸­ï¼Œæä¾›äº†`maix.i18n.Trans` è¿™ä¸ªç±»ï¼Œå¯ä»¥ç”¨æ¥åŠ è½½å¤šç§è¯­è¨€çš„ç¿»è¯‘æ–‡ä»¶ï¼Œè°ƒç”¨å…¶æˆå‘˜å‡½æ•°`tr()`ï¼Œä¼ å…¥æƒ³è¦ç¿»è¯‘çš„æ–‡å­—å³å¯è·å¾—ç¿»è¯‘ï¼Œä¸¾ä¾‹ï¼š ```python from maix import i18n, err trans i18n.Trans() tr trans.tr e trans.load(\"locales\") err.check_raise(e, \"load translation yamls failed\") print(tr(\"hello\")) ``` è¿™é‡Œä»å½“å‰ç›®å½•ä¸‹çš„`locales`æ–‡ä»¶å¤¹åŠ è½½äº†ç¿»è¯‘æ–‡ä»¶ï¼Œç„¶åæ ¹æ®ç³»ç»Ÿçš„è¯­è¨€è®¾ç½®æ‰“å°`hello`ï¼Œæ¯”å¦‚ä¸­æ–‡å°±ä¼šæ‰“å°`ä½ å¥½`ã€‚ **ç¿»è¯‘æ–‡ä»¶**ï¼š æ—¢ç„¶è¿™é‡ŒåŠ è½½ç”¨åˆ°äº†ç¿»è¯‘æ–‡ä»¶ï¼Œè¿™äº›ç¿»è¯‘æ–‡ä»¶æ€ä¹ˆåˆ¶ä½œå‘¢ï¼Ÿ é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“æˆ‘ä»¬éœ€è¦ç¿»è¯‘é‚£äº›æ–‡å­—ï¼Œæ˜¾è€Œæ˜“è§ï¼Œå°±æ˜¯ä¸Šé¢æˆ‘ä»¬ç”¨å‡½æ•°`tr`è°ƒç”¨çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æœç´¢æºç ä¸­æ‰€æœ‰ç”¨åˆ°äº†`tr`å‡½æ•°çš„å­—ç¬¦ä¸²å³å¯è®¤ä¸ºæ˜¯æˆ‘ä»¬éœ€è¦ç¿»è¯‘çš„æ‰€æœ‰å­—ç¬¦ä¸²äº†ã€‚ æ‰€ä»¥ä½¿ç”¨æµç¨‹å¦‚ä¸‹ï¼š * å»ºç«‹ä¸€ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å­˜æ”¾ä»£ç å…¥å£`main.py`ï¼Œå¯ä»¥ä½¿ç”¨ `MaixVision`` æ‰“å¼€è¿™ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹æ–¹ä¾¿è¿è¡Œã€‚ * ç¼–å†™`main.py`ï¼Œè®©éœ€è¦ç¿»è¯‘çš„å­—ç¬¦ä¸²éƒ½ç”¨ä¸Šè¿°çš„`tr`å‡½æ•°è°ƒç”¨ã€‚ * MaixPy æä¾›äº†ä¸€ä¸ªæ‰«æå·¥å…·ï¼Œé¦–å…ˆç¡®ä¿å®‰è£…äº†`maixtool`ï¼ˆç”µè„‘é€šè¿‡ç³»ç»Ÿç»ˆç«¯ `pip install maixtool U` å‘½ä»¤æ¥å®‰è£…å‡çº§ï¼‰ã€‚ * ç„¶ååœ¨ç›®å½•ä¸‹ä»ç„¶ä½¿ç”¨ç”µè„‘ç»ˆç«¯æ‰§è¡Œ`maixtool i18n d . r`æ¥æ‰«æéœ€è¦ç¿»è¯‘çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”ç”Ÿæˆä¸€ä¸ª`locales`ç›®å½•ï¼Œé‡Œé¢åŒ…å«äº†ä¸­è‹±æ–‡ä¸¤ç§è¯­è¨€çš„ç¿»è¯‘æ–‡ä»¶ï¼Œå¦‚æœè¦æ›´å¤šè¯­è¨€ï¼Œæ‰§è¡Œ`maixtool i18n h`æŸ¥çœ‹å¸®åŠ©ã€‚ * ç”Ÿæˆçš„æ–‡ä»¶æ˜¯é”®å€¼å¯¹ç»„æˆçš„ï¼Œæ¯”å¦‚`zh.yaml`ä¸­çš„`hello: hello` çš„æ„æ€å°±æ˜¯å­—ç¬¦ä¸²`hello`ä¸­æ–‡ç¿»è¯‘æ˜¯`hello`ï¼Œè¿™æ˜¾ç„¶ä¸å¯¹ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ç¿»è¯‘ä¸€ä¸‹ï¼Œæ”¹æˆ`hello: ä½ å¥½`å³å¯ã€‚æ³¨æ„ç¼–è¾‘æ–‡ä»¶ä¸€å®šè¦ç”¨æ”¯æŒ `UTF 8` ç¼–ç çš„ç¼–è¾‘å™¨ï¼Œç‰¹åˆ«æ˜¯åœ¨`Windows`ä¸‹ä¸è¦å°†æ–‡ä»¶æ”¹ä¸º`GBK`ç¼–ç äº†ï¼Œä¸ç„¶ä¼šå‡ºé”™ï¼Œå¯ä»¥ç”¨ MaixVision æˆ–è€… VsCode ç¼–è¾‘ã€‚ * ç„¶åè¿è¡Œé¡¹ç›®ï¼Œæˆ–è€…æ‰“åŒ…é¡¹ç›®ä¸ºå®‰è£…åŒ…éƒ½å¯ä»¥ï¼Œè®°å¾—æŠŠ `locales` ç›®å½•ä¹Ÿä¸€èµ·æ‰“åŒ…è¿›å»ã€‚ * å¦‚æœåé¢åˆæ›´æ–°äº†æºç ï¼Œéœ€è¦å†æ¬¡æ‰§è¡Œ`maixtool`å‘½ä»¤æ›´æ–°æ–‡ä»¶ï¼Œæ›´æ–°ä¼šå¯¹ä¹‹å‰å·²ç»ç¿»è¯‘äº†çš„æ–‡ä»¶æ›´æ–°ï¼Œå¦‚æœä½ æ‹…å¿ƒç¨‹åºä¸å°å¿ƒå°†ä¹‹å‰çš„é”™è¯¯è¦†ç›–ï¼Œå¯ä»¥å…ˆè‡ªè¡Œå¤‡ä»½ä¸€ä»½ï¼Œç¡®è®¤æ— è¯¯åå†åˆ é™¤å¤‡ä»½ã€‚ è¿™æ ·ä½ çš„ç¨‹åºå°±ä¼šæ ¹æ®ç³»ç»Ÿè¯­è¨€è®¾ç½®æ›´æ”¹è¯­è¨€äº†ï¼Œå¦‚æœä½ è°ƒè¯•ç¨‹åºä¹Ÿå¯ä»¥æ‰‹åŠ¨è°ƒç”¨`trans.set_locale(\"zh\")`æ¥æ‰‹åŠ¨ä¸´æ—¶åˆ‡æ¢è¯­è¨€ã€‚ ## æ˜¾ç¤ºç¿»è¯‘åˆ°ç•Œé¢ å‰é¢çš„ä¾‹å­éƒ½æ˜¯åœ¨è°ƒç”¨`print`å‡½æ•°æ‰“å°ï¼Œå¦‚æœæƒ³æ˜¾ç¤ºåˆ°ç•Œé¢ä¸Šï¼Œè¿˜æœ‰ä¸€æ­¥è¦åšï¼Œå°±æ˜¯éœ€è¦å­—åº“æ”¯æŒï¼Œå¯¹äºè‹±æ–‡æ¥è¯´é»˜è®¤éƒ½æ”¯æŒäº†ï¼Œå¯æ˜¯å¯¹äºä¸­æ–‡è¿™ç§å­—åº“åºå¤§çš„è¯­è¨€ï¼Œé»˜è®¤æ˜¯ä¸æ”¯æŒçš„ã€‚ æ¯”å¦‚ï¼š ```python from maix import i18n, image, display, app, time trans_dict { \"zh\": { \"hello\": \"ä½ å¥½\" }, \"en\": { } } trans i18n.Trans(trans_dict) tr trans.tr trans.set_locale(\"zh\") disp display.Display() img image.Image(disp.width(), disp.height()) img.draw_string(10, 10, tr(\"hello\"), image.COLOR_WHITE, scale 2) disp.show(img) while not app.need_exit(): time.sleep_ms(100) ``` è¿è¡Œä¼šå‘ç°æ˜¾ç¤ºäº†ä¸€å †`?`ï¼Œå› ä¸ºæ²¡æœ‰ä¸­æ–‡å­—åº“ï¼Œå¯¹äº`image`æ¨¡å—ï¼Œå¯ä»¥åŠ è½½å­—åº“ï¼Œç³»ç»Ÿå†…ç½®äº†ä¸€ä¸ªä¸­æ–‡å­—åº“ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ä½ è‡ªå·±çš„å­—åº“ï¼š ```python from maix import i18n, image, display, app, time trans_dict { \"zh\": { \"hello\": \"ä½ å¥½\" }, \"en\": { } } trans i18n.Trans(trans_dict) tr trans.tr trans.set_locale(\"zh\") disp display.Display() image.load_font(\"sourcehansans\", \"/maixapp/share/font/SourceHanSansCN Regular.otf\", size 24) image.set_default_font(\"sourcehansans\") img image.Image(disp.width(), disp.height()) img.draw_string(10, 10, tr(\"hello\"), image.COLOR_WHITE, scale 2) disp.show(img) while not app.need_exit(): time.sleep_ms(100) ```"},"/maixpy/doc/zh/index.html":{"title":"MaixCAM MaixPy å¿«é€Ÿå¼€å§‹","content":" title: MaixCAM MaixPy å¿«é€Ÿå¼€å§‹ <style> #head_links table { width: 100%; display: table; } @media screen and (max width: 900px){ #head_links th, #head_links td { /* padding: 8px; */ font size: 0.9em; padding: 0.1em 0.05em; } } </style> <div id \"head_links\"> èµ„æºæ±‡æ€» é“¾æ¥ : : : : MaixPy æ•™ç¨‹æ–‡æ¡£ ğŸ“– [wiki.sipeed.com/maixpy](https://wiki.sipeed.com/maixpy) MaixPy ä¾‹ç¨‹å’Œæºç  <img src \"/static/image/github fill.svg\" style \"height: 1.5em;vertical align: middle;\"> [github.com/sipeed/MaixPy](https://github.com/sipeed/MaixPy) MaixCAM ç¡¬ä»¶èµ„æ–™ ğŸ“· [wiki.sipeed.com/maixcam](https://wiki.sipeed.com/maixcam) MaixPy API æ–‡æ¡£ ğŸ“š [wiki.sipeed.com/maixpy/api/](https://wiki.sipeed.com/maixpy/api/index.html) MaixPy è§†é¢‘å’Œæ•™ç¨‹ ğŸ’¿ [Bç«™æœ MaixCAM æˆ– MaixPy](https://search.bilibili.com/all?keyword maixcam&from_source webtop_search&spm_id_from 333.1007&search_source 5) MaixHub åº”ç”¨å•†åº— ğŸ“¦ [maixhub.com/app](https://maixhub.com/app) MaixHub åˆ†äº«å¹¿åœº ğŸ² [maixhub.com/share](https://maixhub.com/share) </div> <div style \"font size: 1.2em;padding:1em; text align:center; color: white\"> <div style \"padding: 1em 0 0 0\"> <a target \"_blank\" style \"color: white; font size: 0.9em; border radius: 0.3em; padding: 0.5em; background color: #c33d45\" href \"https://item.taobao.com/item.htm?id 784724795837\">æ·˜å®</a> <a target \"_blank\" style \"color: white; font size: 0.9em; border radius: 0.3em; padding: 0.5em; background color: #c33d45\" href \"https://www.aliexpress.com/store/911876460\">é€Ÿå–é€š</a> </div> </div> <br> > å…³äº MaixPy ä»‹ç»è¯·çœ‹ [MaixPy å®˜ç½‘é¦–é¡µ](../../index.html) > å–œæ¬¢ MaixPy è¯·ç»™ [ MaixPy é¡¹ç›®](https://github.com/sipeed/MaixPy) ç‚¹ä¸ª Star â­ï¸ ä»¥é¼“åŠ±æˆ‘ä»¬å¼€å‘æ›´å¤šåŠŸèƒ½ã€‚ ## å†™åœ¨å‰é¢ * è¯·**ä»”ç»†**é˜…è¯»æŒ‰ç…§ä¸‹é¢æ–‡æ¡£çš„æ­¥éª¤ï¼Œä¸è¦é—æ¼å†…å®¹ï¼Œå¯¹æ¯”è¿›è¡Œæ“ä½œã€‚ * **å·¦è¾¹ç›®å½•**è¯·ä»”ç»†æŸ¥çœ‹ï¼ŒåŸºç¡€éƒ¨åˆ†ä¸€å®šè¦è€å¿ƒé˜…è¯»å®Œã€‚ * **æé—®å‰**å…ˆåœ¨å·¦è¾¹ç›®å½•ä»”ç»†æŸ¥æ‰¾æ–‡æ¡£ï¼Œä»¥åŠçœ‹[FAQ](./faq.html)ã€‚ * æœ¬æ–‡æ¡£æ˜¯`MaixPy v4 æ•™ç¨‹æ–‡æ¡£`ï¼Œæ³¨æ„ä¸ [MaixPy v1](https://wiki.sipeed.com/soft/maixpy/zh/index.html)ï¼ˆk210ç³»åˆ—ï¼‰åŒºåˆ«å¼€ï¼Œå‹¿é”™çœ‹æ–‡æ¡£ã€‚ * ä¹Ÿå¯ä»¥å‚è€ƒä¸‹é¢çš„è§†é¢‘ä¸Šæ‰‹æ•™ç¨‹ï¼Œæ³¨æ„è§†é¢‘å†…å®¹æœ‰æ›´æ­£åœ¨**è¯„è®ºåŒºå’Œå¼¹å¹•ä¼šè¡¥å……ï¼Œä»¥æœ€æ–°çš„æ–‡æ¡£ä¸ºå‡†**ï¼Œæ›´å¤šè§†é¢‘æ•™ç¨‹å¯ä»¥åˆ° B ç«™æœç´¢ MaixCAMã€‚ <iframe src \"//player.bilibili.com/player.html?isOutside true&aid 112865415531014&bvid BV1vcvweCEEe&cid 500001630687957&p 1\" scrolling \"no\" border \"0\" frameborder \"no\" framespacing \"0\" allowfullscreen \"true\" style \"min height:20em; width: 90%\"></iframe> ## è·å¾— MaixCAM è®¾å¤‡ * **MaixCAM**ï¼šåœ¨ [Sipeed æ·˜å®](https://item.taobao.com/item.htm?id 784724795837) æˆ–è€… [Sipeed é€Ÿå–é€š](https://www.aliexpress.com/store/911876460) åº—é“ºè´­ä¹° <a href \"https://wiki.sipeed.com/maixcam\" target \"_blank\">MaixCAM</a> ã€‚ **å»ºè®®è´­ä¹°å¸¦ `TF å¡`ã€`æ‘„åƒå¤´`ã€`2.3å¯¸è§¦æ‘¸å±`ã€`å¤–å£³`ã€`Type C æ•°æ®çº¿`ã€ `Type Cä¸€è½¬äºŒå°æ¿`ã€`4Pä¸²å£åº§å­+çº¿`çš„å¥—é¤**ï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨å’Œå¼€å‘ï¼Œ**åé¢çš„æ•™ç¨‹éƒ½é»˜è®¤ä½ å·²ç»æœ‰äº†è¿™äº›é…ä»¶**ï¼ˆåŒ…æ‹¬å±å¹•ï¼‰ã€‚ **å¼ºçƒˆå»ºè®®ä¹°å¸¦å±å¹•çš„å¥—é¤ï¼Œä¼šå¤§å¤§æå‡å¼€å‘ä½“éªŒ**ï¼Œå¦‚æœä½ å®é™…éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸éœ€è¦å±å¹•ï¼Œå¯ä»¥å…ˆç”¨å¸¦å±å¹•çš„å…¥é—¨å’Œå¼€å‘ï¼Œæœ€åå†å»æ‰å±å¹•æˆ–è€…è´­ä¹°ä¸å¸¦å±å¹•çš„é‡äº§ã€‚ * **ç”µæº**ï¼š ä¸€ä¸ªç¨³å®šçš„ä¾›ç”µæ–¹å¼ï¼ŒMaixCAM éœ€è¦ `5v 500mA` çš„ç¨³å®šä¾›ç”µï¼Œå¦‚æœä¾›ç”µä¸è¶³å¯èƒ½ä¼šå¯¼è‡´æ— æ³•å¼€æœºï¼Œæˆ–è€…è¿è¡Œè¿‡ç¨‹ä¸­æ­»æœºç­‰æƒ…å†µã€‚ç‰¹åˆ«æ˜¯æœ‰äº›ç”µè„‘çš„ USB å£ä¾›ç”µå¯èƒ½ä¸ç¨³å®šã€‚ * **TF è¯»å¡å™¨**: ç”¨æ¥çƒ§å½•ç³»ç»Ÿï¼Œå¿…å¤‡ã€‚ * **USBè½¬ä¸²å£æ¨¡å—**: å¦‚æœä½ æƒ³è¦ç”µè„‘å’Œ MaixCAM ä¹‹é—´ä¸²å£é€šä¿¡ï¼Œéœ€è¦å¤‡ä¸€ä¸ªï¼Œæ·˜å®éšä¾¿ä¹°ä¸€ä¸ªå°±è¡Œï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨ Sipeed åº—é‡Œä¸€èµ·ä¹°ï¼Œæ¯”å¦‚è¿™ä¸ª[åŒä¸²å£è½¬USBæ¨¡å—](https://item.taobao.com/item.htm?spm a1z10.5 c s.w4002 24984936573.13.73cc59d6AkB9bS&id 610365562537)ã€‚ >! æ³¨æ„ï¼Œç›®å‰åªæ”¯æŒ MaixCAM å¼€å‘æ¿ï¼Œå…¶å®ƒåŒå‹å·èŠ¯ç‰‡çš„å¼€å‘æ¿å‡ä¸æ”¯æŒï¼ŒåŒ…æ‹¬ Sipeed çš„åŒå‹å·èŠ¯ç‰‡å¼€å‘æ¿ï¼Œè¯·æ³¨æ„ä¸è¦ä¹°é”™é€ æˆä¸å¿…è¦çš„æ—¶é—´å’Œé‡‘é’±æµªè´¹ã€‚ ## ä½¿ç”¨æ— å±å¹•ç‰ˆæœ¬ å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ— å±å¹•ç‰ˆæœ¬ï¼Œè¯·çœ‹[å¿«é€Ÿå¼€å§‹ï¼ˆæ— å±å¹•ç‰ˆæœ¬ï¼‰](./README_no_screen.html)æ–‡æ¡£ã€‚ ## ä¸Šæ‰‹é…ç½® ### å‡†å¤‡ TF é•œåƒå¡å’Œæ’å…¥åˆ°è®¾å¤‡ å¦‚æœä½ ä¹°çš„å¥—é¤é‡Œé¢æœ‰ TF å¡ï¼Œé‡Œé¢å·²ç»æœ‰å‡ºå‚é•œåƒäº†ï¼Œå¦‚æœå‡ºå‚æ—¶ TF å¡æ²¡æœ‰å®‰è£…åˆ°è®¾å¤‡ï¼Œéœ€è¦å…ˆå°å¿ƒæ‰“å¼€å¤–å£³ï¼ˆæ³¨æ„é‡Œé¢æœ‰æ’çº¿è¿æ¥ä¸è¦æ‰¯æ–­äº†ï¼‰ï¼Œç„¶åæ’å…¥ TF å¡ã€‚å¦å¤–å› ä¸ºå‡ºå‚çš„å›ºä»¶å¯èƒ½æ¯”è¾ƒè€æ—§ï¼Œ**åŠ¡å¿…**æŒ‰ç…§[å‡çº§å’Œçƒ§å½•ç³»ç»Ÿ](https://wiki.sipeed.com/maixpy/doc/zh/basic/os.html)å…ˆå°†ç³»ç»Ÿå‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œå¦åˆ™å¯èƒ½ä¼šé‡åˆ°æŸäº›åº”ç”¨ å’Œ API æ— æ³•ä½¿ç”¨çš„é—®é¢˜ã€‚ å¦‚æœæ²¡ä¹° TF å¡ï¼Œåˆ™éœ€è¦å°†ç³»ç»Ÿçƒ§å½•è¿›è‡ªå¤‡çš„ TF å¡ä¸­ï¼Œçƒ§å½•æ–¹æ³•è¯·çœ‹[å‡çº§å’Œçƒ§å½•ç³»ç»Ÿ](./basic/os.html)ï¼Œç„¶åå†å®‰è£…åˆ°æ¿å­ã€‚ ### ä¸Šç”µå¼€æœº ä½¿ç”¨ `Type C` æ•°æ®çº¿è¿æ¥ `MaixCAM` è®¾å¤‡ç»™è®¾å¤‡ä¾›ç”µï¼Œç­‰å¾…è®¾å¤‡å¼€æœºï¼Œå¼€æœºä¼šè¿›å…¥åŠŸèƒ½é€‰æ‹©ç•Œé¢ã€‚ ![maixcam_font](../../static/image/maixcam_font.png) å¦‚æœå±å¹•æ²¡æœ‰æ˜¾ç¤º * è¯·ç¡®è®¤è´­ä¹°äº†é…å¥—çš„ TF å¡ï¼Œå¦‚æœç¡®è®¤æœ‰ TF å¡ï¼Œå¹¶ä¸”å·²ç»æ’å…¥åˆ°è®¾å¤‡ï¼Œå¯ä»¥**å°è¯•[æ›´æ–°åˆ°æœ€æ–°çš„ç³»ç»Ÿ](./basic/os.html)**ã€‚ * å¦‚æœä½ æ²¡æœ‰è´­ä¹° TF å¡å¥—é¤ï¼Œä½ éœ€è¦æŒ‰ç…§[å‡çº§å’Œçƒ§å½•ç³»ç»Ÿ](./basic/os.html)çš„æ–¹æ³•çƒ§å½•æœ€æ–°çš„ç³»ç»Ÿåˆ° TF å¡ã€‚ * å¦å¤–è¯·ç¡®è®¤å±å¹•å’Œæ‘„åƒå¤´çš„æ’çº¿æ²¡æœ‰æ¾åŠ¨ï¼Œå±å¹•çš„æ’çº¿åœ¨æ‹†å¼€å¤–å£³æ—¶å¾ˆå®¹æ˜“è„±è½ï¼Œéœ€è¦æ³¨æ„ã€‚ ### è”ç½‘ é¦–æ¬¡è¿è¡Œéœ€è¦è¿æ¥ç½‘ç»œï¼Œåé¢ä¼šæ¿€æ´»è®¾å¤‡å’Œä½¿ç”¨ IDE ä¼šç”¨åˆ°ã€‚ å¦‚æœæ²¡æœ‰è·¯ç”±å™¨å¯ä»¥ç”¨æ‰‹æœºå¼€ä¸€ä¸ªçƒ­ç‚¹ã€‚ è®¾å¤‡ä¸Šç‚¹å‡» `è®¾ç½®`(`Settings`)ï¼Œé€‰æ‹©`WiFi`ï¼Œæœ‰ä¸¤ç§æ–¹æ³•è¿æ¥ `WiFi` çƒ­ç‚¹ï¼š * æ‰«æ WiFi åˆ†äº«ç ï¼š * ä½¿ç”¨æ‰‹æœºåˆ†äº«`WiFi`çƒ­ç‚¹äºŒç»´ç ï¼Œæˆ–è€…åˆ°[maixhub.com/wifi](https://maixhub.com/wifi) ç”Ÿæˆä¸€ä¸ªäºŒç»´ç ã€‚ * ç‚¹å‡»`æ‰«æäºŒç»´ç `æŒ‰é’®ï¼Œä¼šå‡ºç°æ‘„åƒå¤´çš„ç”»é¢ï¼Œæ‰«æå‰é¢ç”Ÿæˆçš„äºŒç»´ç è¿›è¡Œè¿æ¥ã€‚ * æœç´¢çƒ­ç‚¹ï¼š * ç‚¹å‡» `æ‰«æ` æŒ‰é’®å¼€å§‹æ‰«æå‘¨å›´ `WiFi`ï¼Œ å¯ä»¥å¤šæ¬¡ç‚¹å‡»åˆ·æ–°åˆ—è¡¨ã€‚ * æ‰¾åˆ°ä½ çš„ WiFi çƒ­ç‚¹ã€‚ * è¾“å…¥å¯†ç ç‚¹å‡»`è¿æ¥`æŒ‰é’®è¿›è¡Œè¿æ¥ã€‚ ç„¶åç­‰å¾…è·å–åˆ° `IP` åœ°å€ï¼Œè¿™å¯èƒ½éœ€è¦ `10` åˆ° `30` ç§’ï¼Œå¦‚æœç•Œé¢æ²¡æœ‰åˆ·æ–°å¯ä»¥é€€å‡º`WiFi`åŠŸèƒ½é‡æ–°è¿›å…¥æŸ¥çœ‹ï¼Œæˆ–è€…åœ¨`è®¾ç½®` > `è®¾å¤‡ä¿¡æ¯` ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ° `IP` ä¿¡æ¯ã€‚ ### å‡çº§è¿è¡Œåº“ **è¿™ä¸€æ­¥å¾ˆé‡è¦ ï¼ï¼ï¼** è¿™ä¸€æ­¥å¦‚æœä¸åšå¥½ï¼Œå…¶å®ƒåº”ç”¨å’ŒåŠŸèƒ½å¯èƒ½æ— æ³•è¿è¡Œï¼ˆæ¯”å¦‚é—ªé€€ç­‰ï¼‰ã€‚ * é¦–å…ˆä¿è¯ä¸Šä¸€æ­¥è¿æ¥ WiFi å·²ç»å®Œæˆï¼Œå¹¶ä¸”è·å–åˆ° IP åœ°å€èƒ½è®¿é—®å…¬ç½‘ã€‚ * è®¾å¤‡ä¸Šç‚¹å‡» `è®¾ç½®`(`Settings`)ï¼Œé€‰æ‹©`å®‰è£…è¿è¡Œåº“`ã€‚ * å®‰è£…å®Œæˆåå¯ä»¥çœ‹åˆ°æ›´æ–°åˆ°äº†æœ€æ–°ç‰ˆæœ¬ï¼Œç„¶åé€€å‡ºå³å¯ã€‚ å¦‚æœæ˜¾ç¤º`Request failed` æˆ–è€…`è¯·æ±‚å¤±è´¥`ï¼Œè¯·å…ˆæ£€æŸ¥ç½‘ç»œæ˜¯å¦å·²ç»è¿æ¥ï¼Œéœ€è¦èƒ½è¿æ¥åˆ°äº’è”ç½‘ï¼Œå¦‚æœè¿˜ä¸è¡Œï¼Œè¯·æ‹ç…§è”ç³»å®¢æœå¤„ç†å³å¯ã€‚ ### ä½¿ç”¨å†…ç½®åº”ç”¨ å†…ç½®äº†å¾ˆå¤šåº”ç”¨ï¼Œæ¯”å¦‚ æ‰¾è‰²å—ï¼ŒAI æ£€æµ‹å™¨ï¼Œå·¡çº¿ç­‰ç­‰ï¼Œæ‰¾è‰²å—ä¸¾ä¾‹ï¼š <video playsinline controls autoplay loop muted preload class \"pl 6 pb 4 self end\" src \"/static/video/find_blobs.mp4\" type \"video/mp4\" style \"width:95%\"> Classifier Result video </video> å…¶å®ƒçš„è¯·è‡ªè¡Œæ‘¸ç´¢ï¼Œä»¥åè¿˜ä¼šæ›´æ–°æ›´å¤šåº”ç”¨ï¼Œä½¿ç”¨æ–‡æ¡£ä»¥åŠåº”ç”¨æ›´æ–°è¯·çœ‹ [MaixHub åº”ç”¨å•†åº—](https://maixhub.com/app) ã€‚ **æ³¨æ„ï¼šåº”ç”¨åªåŒ…å«äº† MaixPy èƒ½å®ç°çš„ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼Œä½¿ç”¨ MaixPy èƒ½åˆ›é€ æ›´å¤šåŠŸèƒ½**ã€‚ ## ä½œä¸ºä¸²å£æ¨¡å—ä½¿ç”¨ > å¦‚æœæ˜¯æƒ³æŠŠè®¾å¤‡å½“æˆä¸»æ§ä½¿ç”¨ï¼ˆæˆ–è€…ä½ è¿˜ä¸æ‡‚ä»€ä¹ˆæ˜¯ä¸²å£æ¨¡å—ï¼‰å¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ã€‚ å†…ç½®çš„å„ç§åº”ç”¨å¯ä»¥ç›´æ¥å½“æˆä¸²å£æ¨¡å—ä½¿ç”¨ï¼Œæ¯”å¦‚`æ‰¾è‰²å—`ã€`æ‰¾äººè„¸`ã€`æ‰¾äºŒç»´ç `ç­‰ç­‰ï¼Œ æ³¨æ„è¿™é‡Œä¸²å£ä»…èƒ½ç›´æ¥å’Œå…¶å®ƒå•ç‰‡æœºè¿æ¥ï¼Œ**å¦‚æœè¦å’Œç”µè„‘ä¸²å£é€šä¿¡è¯·è‡ªå¤‡ä¸€ä¸ª USB è½¬ä¸²å£æ¨¡å—**ã€‚ ä½¿ç”¨æ–¹æ³•ï¼š * ç¡¬ä»¶è¿æ¥ï¼š å¯ä»¥ç»™è®¾å¤‡æ¥ä¸Š`Type Cä¸€è½¬äºŒå°æ¿`ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å°†è®¾å¤‡é€šè¿‡ä¸²å£è¿æ¥åˆ°ä½ çš„ä¸»æ§ä¸Šäº†ï¼Œæ¯”å¦‚`Arduino`ã€`æ ‘è“æ´¾`ã€`STM32`ç­‰ç­‰ã€‚ * æ‰“å¼€ä½ æƒ³ç”¨çš„åº”ç”¨ï¼Œæ¯”å¦‚äºŒç»´ç è¯†åˆ«ï¼Œå½“è®¾å¤‡æ‰«æåˆ°äºŒç»´ç å°±ä¼šé€šè¿‡ä¸²å£æŠŠç»“æœå‘é€ç»™ä½ çš„ä¸»æ§äº†ã€‚ > å‘é€çš„ä¸²å£æ³¢ç‰¹ç‡æ˜¯ `115200`ï¼Œæ•°æ®æ ¼å¼æ˜¯ `8N1`ï¼Œåè®®éµå¾ª [Maix ä¸²å£é€šä¿¡åè®®æ ‡å‡†](https://github.com/sipeed/MaixCDK/blob/master/docs/doc/convention/protocol.md)ï¼Œå¯ä»¥åœ¨[MaixHub APP](https://maixhub.com/app) æ‰¾åˆ°å¯¹åº”çš„åº”ç”¨ä»‹ç»æŸ¥çœ‹åè®®ã€‚ > å¦‚æœåº”ç”¨æ²¡æœ‰åšä¸²å£è¾“å‡ºç»“æœï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±åŸºäºå¯¹åº”åŠŸèƒ½çš„ä¾‹ç¨‹ï¼Œè‡ªè¡ŒæŒ‰ç…§[ä¸²å£ä½¿ç”¨æ–‡æ¡£](./peripheral/uart.html)æ·»åŠ ä¸²å£è¾“å‡ºç»“æœã€‚ ## å‡†å¤‡è¿æ¥ç”µè„‘å’Œè®¾å¤‡ ä¸ºäº†åé¢ç”µè„‘ï¼ˆPCï¼‰èƒ½å’Œ è®¾å¤‡ï¼ˆMaixCAMï¼‰é€šä¿¡ï¼Œæˆ‘ä»¬è¦è®©å®ƒä»¬åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…ï¼Œæä¾›äº†ä¸¤ç§æ–¹å¼ï¼š * **æ–¹æ³•ä¸€ (å¼ºçƒˆæ¨è)**ï¼šæ— çº¿è¿æ¥ï¼Œ è®¾å¤‡ä½¿ç”¨ WiFi è¿æ¥åˆ°ç”µè„‘è¿æ¥çš„åŒä¸€ä¸ªè·¯ç”±å™¨æˆ–è€… WiFi çƒ­ç‚¹ä¸‹ï¼š åœ¨è®¾å¤‡çš„`è®¾ç½® > WiFi è®¾ç½®`ä¸­è¿æ¥åˆ°ä½ çš„ WiFi å³å¯ã€‚ï¼ˆWiFi å¦‚æœå‡ºç°ç”»é¢å¡é¡¿æˆ–è€…å»¶è¿Ÿé«˜çš„é—®é¢˜å¯ä»¥å°è¯•ä¸‹é¢çš„æ–¹æ³•äºŒä½¿ç”¨æœ‰çº¿è¿æ¥ã€‚ï¼‰ * **æ–¹æ³•äºŒ**ï¼šæœ‰çº¿è¿æ¥ï¼Œ è®¾å¤‡é€šè¿‡ USB çº¿è¿æ¥åˆ°ç”µè„‘ï¼Œè®¾å¤‡ä¼šè™šæ‹Ÿæˆä¸€ä¸ª USB ç½‘å¡ï¼Œè¿™æ ·å’Œç”µè„‘å°±é€šè¿‡ USB åœ¨åŒä¸€å±€åŸŸç½‘äº†ã€‚æ¨èå…ˆç”¨ WiFi å¼€å§‹æ˜¯å› ä¸ºæœ‰çº¿è™½ç„¶ä¼ è¾“ç¨³å®šä½†æ˜¯å¯èƒ½ä¼šé‡åˆ°çº¿ç¼†ä¸è‰¯ï¼Œæ¥è§¦ä¸è‰¯ï¼Œé©±åŠ¨ç­‰é—®é¢˜ï¼Œé‡åˆ°é—®é¢˜ä¹Ÿå¯ä»¥åœ¨ [FAQ](./faq.html) ä¸­æ‰¾å¸¸è§é—®é¢˜ã€‚ .. details::æ–¹æ³•äºŒåœ¨ä¸åŒç”µè„‘ç³»ç»Ÿä¸­é©±åŠ¨å®‰è£…æ–¹æ³•ï¼š :open: true é»˜è®¤ä¼šæœ‰ä¸¤ç§ USB è™šæ‹Ÿç½‘å¡é©±åŠ¨ï¼ˆNCM å’Œ RNDISé©±åŠ¨ï¼‰ï¼Œä»¥æ»¡è¶³ä¸åŒç³»ç»Ÿçš„éœ€æ±‚ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨è®¾å¤‡ç«¯`è®¾ç½®`åº”ç”¨ > `USBè®¾ç½®` é‡Œé¢å…³æ‰ä¸ç”¨çš„è™šæ‹Ÿç½‘å¡ï¼š * **Windows**: windows æ‰€æœ‰ç³»ç»Ÿä¼šè‡ªåŠ¨å®‰è£… RNDIS é©±åŠ¨ï¼Œ ä»… Win11 ä¼šè‡ªåŠ¨å®‰è£… NCM é©±åŠ¨ï¼Œä¸¤ç§é©±åŠ¨**æœ‰ä¸€ä¸ªèƒ½ç”¨å°±è¡Œ**ã€‚ * æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ > æ€§èƒ½ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªè™šæ‹Ÿçš„ä»¥å¤ªç½‘ï¼Œå¹¶ä¸”å¯ä»¥çœ‹åˆ° ip æ¯”å¦‚ `10.131.167.100` æ˜¯ç”µè„‘çš„ ip, è®¾å¤‡çš„ ip æ˜¯æœ€åä¸€ä½æ”¹ä¸º`1` å³ `10.131.167.1`ã€‚å¦‚æœæ˜¯ Win11 åˆ™ä¼šçœ‹åˆ°ä¸¤ä¸ªè™šæ‹Ÿç½‘å¡ï¼Œéšä¾¿é€‰æ‹©ä¸€ä¸ª IP ä½¿ç”¨å³å¯ã€‚ * å¦å¤–ä¹Ÿå¯ä»¥æ‰“å¼€ç”µè„‘çš„ `è®¾å¤‡ç®¡ç†å™¨`ï¼ˆæœç´¢æ æœç´¢`è®¾å¤‡ç®¡ç†å™¨`ï¼‰ï¼Œ RNDIS å’Œ NCM é©±åŠ¨è¢«æ­£ç¡®å®‰è£…çš„æ•ˆæœï¼š ![RNDIS ok](../../static/image/windows_rndis_ok.png) ![NCM ok](../../static/image/windows_ncm_ok.png) * **Linux**: æ— éœ€é¢å¤–è®¾ç½®ï¼Œæ’ä¸Š USB çº¿å³å¯ã€‚ ä½¿ç”¨ `ifconfig` æˆ–è€… `ip addr` æŸ¥çœ‹åˆ° `usb0` å’Œ `usb1` ç½‘å¡ï¼Œä¸¤ä¸ª IP éƒ½å¯ä»¥ä½¿ç”¨ï¼Œ**æ³¨æ„** è¿™é‡Œçœ‹åˆ°çš„ ip æ¯”å¦‚ `10.131.167.100` æ˜¯ç”µè„‘çš„ ip, è®¾å¤‡çš„ ip æ˜¯æœ€åä¸€ä½æ”¹ä¸º`1` å³ `10.131.167.1`ã€‚ * **MacOS**: åœ¨`ç³»ç»Ÿè®¾ç½®` >`ç½‘ç»œ`é‡Œé¢æŸ¥çœ‹åˆ° `usb` ç½‘å¡ï¼Œ**æ³¨æ„** è¿™é‡Œçœ‹åˆ°çš„ ip æ¯”å¦‚ `10.131.167.100` æ˜¯ç”µè„‘çš„ ip, è®¾å¤‡çš„ ip æ˜¯æœ€åä¸€ä½æ”¹ä¸º`1` å³ `10.131.167.1`ã€‚ ## å¼€å‘ç¯å¢ƒå‡†å¤‡ * é¦–å…ˆä¿è¯ä¸Šä¸€æ­¥ç”µè„‘å’Œè®¾å¤‡å·²ç»åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸­äº†ã€‚ * ä¸‹è½½ [MaixVision](https://wiki.sipeed.com/maixvision) å¹¶å®‰è£…ã€‚ * ä½¿ç”¨ Type C è¿æ¥è®¾å¤‡å’Œç”µè„‘ï¼Œæ‰“å¼€ MaixVisionï¼Œç‚¹å‡»å·¦ä¸‹è§’çš„`â€œè¿æ¥â€`æŒ‰é’®ï¼Œä¼šè‡ªåŠ¨æœç´¢è®¾å¤‡ï¼Œç¨ç­‰ä¸€ä¸‹å°±èƒ½çœ‹åˆ°è®¾å¤‡ï¼Œç‚¹å‡»è®¾å¤‡æœ‰ç‚¹çš„è¿æ¥æŒ‰é’®ä»¥è¿æ¥è®¾å¤‡ã€‚ å¦‚æœ**æ²¡æœ‰æ‰«æåˆ°è®¾å¤‡**ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨**è®¾å¤‡**çš„ `è®¾ç½® > è®¾å¤‡ä¿¡æ¯` ä¸­æŸ¥çœ‹è®¾å¤‡çš„ IP åœ°å€æ‰‹åŠ¨è¾“å…¥ï¼Œ ä¹Ÿå¯ä»¥åœ¨ [FAQ](./faq.html) ä¸­æ‰¾åˆ°è§£å†³æ–¹æ³•ã€‚ **è¿æ¥æˆåŠŸåï¼Œè®¾å¤‡çš„åŠŸèƒ½é€‰æ‹©ç•Œé¢ä¼šæ¶ˆå¤±ï¼Œå±å¹•ä¼šé»‘å±ï¼Œé‡Šæ”¾äº†æ‰€æœ‰ç¡¬ä»¶èµ„æºï¼Œå¦‚æœä»ç„¶æœ‰ç”»é¢æ˜¾ç¤ºï¼Œå¯ä»¥æ–­å¼€è¿æ¥é‡è¿ã€‚** è¿™é‡Œæœ‰ MaixVision çš„ä½¿ç”¨ç¤ºä¾‹è§†é¢‘: <video style \"width:100%\" controls muted preload src \"/static/video/maixvision.mp4\"></video> ## è¿è¡Œä¾‹ç¨‹ ç‚¹å‡» MaixVision å·¦ä¾§çš„`ç¤ºä¾‹ä»£ç `ï¼Œé€‰æ‹©ä¸€ä¸ªä¾‹ç¨‹ï¼Œç‚¹å‡»å·¦ä¸‹è§’`è¿è¡Œ`æŒ‰é’®å°†ä»£ç å‘é€åˆ°è®¾å¤‡ä¸Šè¿è¡Œã€‚ æ¯”å¦‚ï¼š * `hello_maix.py`ï¼Œç‚¹å‡»`è¿è¡Œ`æŒ‰é’®ï¼Œå°±èƒ½çœ‹åˆ° MaixVision ç»ˆç«¯æœ‰æ¥è‡ªè®¾å¤‡æ‰“å°çš„æ¶ˆæ¯ï¼Œä»¥åŠå³ä¸Šè§’å‡ºç°äº†å›¾åƒã€‚ * `camera_display.py`ï¼Œè¿™ä¸ªä¾‹ç¨‹ä¼šæ‰“å¼€æ‘„åƒå¤´å¹¶åœ¨å±å¹•ä¸Šæ˜¾ç¤ºæ‘„åƒå¤´çš„ç”»é¢ã€‚ ```python from maix import camera, display, app disp display.Display() # æ„é€ ä¸€ä¸ªæ˜¾ç¤ºå¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ–å±å¹• cam camera.Camera(640, 480) # æ„é€ ä¸€ä¸ªæ‘„åƒå¤´å¯¹è±¡ï¼Œæ‰‹åŠ¨è®¾ç½®äº†åˆ†è¾¨ç‡ä¸º 640x480, å¹¶åˆå§‹åŒ–æ‘„åƒå¤´ while not app.need_exit(): # ä¸€ç›´å¾ªç¯ï¼Œç›´åˆ°ç¨‹åºé€€å‡ºï¼ˆå¯ä»¥é€šè¿‡æŒ‰ä¸‹è®¾å¤‡çš„åŠŸèƒ½æŒ‰é”®é€€å‡ºæˆ–è€… MaixVision ç‚¹å‡»åœæ­¢æŒ‰é’®é€€å‡ºï¼‰ img cam.read() # è¯»å–æ‘„åƒå¤´ç”»é¢ä¿å­˜åˆ° img å˜é‡ï¼Œå¯ä»¥é€šè¿‡ print(img) æ¥æ‰“å° img çš„è¯¦æƒ… disp.show(img) # å°† img æ˜¾ç¤ºåˆ°å±å¹•ä¸Š ``` * `yolov5.py` ä¼šæ£€æµ‹æ‘„åƒå¤´ç”»é¢ä¸­çš„ç‰©ä½“æ¡†å‡ºæ¥å¹¶æ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼Œæ”¯æŒ 80 ç§ç‰©ä½“çš„æ£€æµ‹ï¼Œå…·ä½“è¯·çœ‹[YOLOv5/YOLOv8/YOLO11 ç‰©ä½“æ£€æµ‹](./vision/yolov5.html)ã€‚ å…¶å®ƒä¾‹ç¨‹å¯ä»¥è‡ªè¡Œå°è¯•ã€‚ > å¦‚æœä½ ä½¿ç”¨ç›¸æœºä¾‹ç¨‹é‡åˆ°äº†å›¾åƒæ˜¾ç¤ºå¡é¡¿ï¼Œå¯èƒ½æ˜¯ç½‘ç»œä¸é€šç•…ï¼Œæˆ–è€… USB çº¿è´¨é‡æˆ–è€…ä¸»æœº USB è´¨é‡å¤ªå·®é€ æˆï¼Œå¯ä»¥æ›´æ¢è¿æ¥æ–¹å¼æˆ–è€…æ›´æ¢çº¿ç¼†ã€ä¸»æœº USB å£æˆ–è€…ç”µè„‘ç­‰ã€‚ ## å®‰è£…åº”ç”¨åˆ°è®¾å¤‡ ä¸Šé¢æ˜¯åœ¨è®¾å¤‡ä¸­è¿è¡Œä»£ç ï¼Œ`MaixVision` æ–­å¼€åä»£ç å°±ä¼šåœæ­¢è¿è¡Œï¼Œå¦‚æœæƒ³è®©ä»£ç å‡ºç°åœ¨å¼€æœºèœå•ä¸­ï¼Œå¯ä»¥æ‰“åŒ…æˆåº”ç”¨å®‰è£…åˆ°è®¾å¤‡ä¸Šã€‚ ç‚¹å‡» `MaixVision` å·¦ä¸‹ä¾§çš„å®‰è£…åº”ç”¨æŒ‰é’®ï¼Œå¡«å†™åº”ç”¨ä¿¡æ¯ï¼Œä¼šå°†åº”ç”¨å®‰è£…åˆ°è®¾å¤‡ä¸Šï¼Œç„¶ååœ¨è®¾å¤‡ä¸Šå°±èƒ½çœ‹åˆ°åº”ç”¨äº†ã€‚ ä¹Ÿå¯ä»¥é€‰æ‹©æ‰“åŒ…åº”ç”¨ï¼Œå°†ä½ çš„åº”ç”¨åˆ†äº«åˆ°[MaixHub åº”ç”¨å•†åº—](https://maixhub.com/app)ã€‚ > é»˜è®¤ä¾‹ç¨‹æ²¡æœ‰æ˜¾å¼ç¼–å†™é€€å‡ºåŠŸèƒ½ï¼Œè¿›å…¥åº”ç”¨åæŒ‰ä¸‹è®¾å¤‡çš„åŠŸèƒ½æŒ‰é”®å³å¯é€€å‡ºåº”ç”¨ã€‚ï¼ˆå¯¹äº MaixCAM æ˜¯ user é”®ï¼‰ å¦‚æœæƒ³è®©ç¨‹åºå¼€æœºè‡ªå¯åŠ¨ï¼Œå¯ä»¥åœ¨ `è®¾ç½® > å¼€æœºå¯åŠ¨` ä¸­è®¾ç½®ã€‚ ## ä¸‹ä¸€æ­¥ çœ‹åˆ°è¿™é‡Œï¼Œå¦‚æœä½ è§‰å¾—ä¸é”™ï¼Œ**è¯·åŠ¡å¿…æ¥ [github](https://github.com/sipeed/MaixPy) ç»™ MaixPy å¼€æºé¡¹ç›®ç‚¹ä¸€ä¸ª starï¼ˆéœ€è¦å…ˆç™»å½• githubï¼‰, ä½ çš„ star å’Œè®¤åŒæ˜¯æˆ‘ä»¬ä¸æ–­ç»´æŠ¤å’Œæ·»åŠ æ–°åŠŸèƒ½çš„åŠ¨åŠ›ï¼** åˆ°è¿™é‡Œä½ å·²ç»ä½“éªŒäº†ä¸€éä½¿ç”¨å’Œå¼€å‘æµç¨‹äº†ï¼Œæ¥ä¸‹æ¥å¯ä»¥å­¦ä¹  `MaixPy` è¯­æ³•å’ŒåŠŸèƒ½ç›¸å…³çš„å†…å®¹ï¼Œè¯·æŒ‰ç…§å·¦è¾¹çš„ç›®å½•è¿›è¡Œå­¦ä¹ ï¼Œå¦‚æœé‡åˆ° `API` ä½¿ç”¨é—®é¢˜ï¼Œå¯ä»¥åœ¨[API æ–‡æ¡£](/api/)ä¸­æŸ¥æ‰¾ã€‚ å­¦ä¹ å‰æœ€å¥½å¸¦ç€è‡ªå·±å­¦ä¹ çš„ç›®çš„å­¦ï¼Œæ¯”å¦‚åšä¸€ä¸ªæœ‰è¶£çš„å°é¡¹ç›®ï¼Œè¿™æ ·å­¦ä¹ æ•ˆæœä¼šæ›´å¥½ï¼Œé¡¹ç›®å’Œç»éªŒéƒ½å¯ä»¥åˆ†äº«åˆ°[MaixHub åˆ†äº«å¹¿åœº](https://maixhub.com/share)ï¼Œä¼šè·å¾—ç°é‡‘å¥–åŠ±å“¦ï¼ ## å¸¸è§é—®é¢˜ FAQ é‡åˆ°é—®é¢˜å¯ä»¥ä¼˜å…ˆåœ¨ [FAQ](./faq.html) é‡Œé¢æ‰¾ï¼Œæ‰¾ä¸åˆ°å†åœ¨ä¸‹é¢çš„è®ºå›æˆ–è€…ç¾¤è¯¢é—®ï¼Œæˆ–è€…åœ¨ [MaixPy issue](https://github.com/sipeed/MaixPy/issues) æäº¤æºç é—®é¢˜ã€‚ ## åˆ†äº«äº¤æµ * **[MaixHub é¡¹ç›®å’Œç»éªŒåˆ†äº«](https://maixhub.com/share)** ï¼šåˆ†äº«ä½ çš„é¡¹ç›®å’Œç»éªŒï¼Œè·å¾—ç°é‡‘æ‰“èµï¼Œè·å¾—å®˜æ–¹æ‰“èµçš„åŸºæœ¬è¦æ±‚ï¼š * **å¯å¤ç°å‹**ï¼šè¾ƒä¸ºå®Œæ•´çš„é¡¹ç›®åˆ¶ä½œå¤ç°è¿‡ç¨‹ã€‚ * **ç‚«è€€å‹**ï¼šæ— è¯¦ç»†çš„é¡¹ç›®å¤ç°è¿‡ç¨‹ï¼Œä½†æ˜¯é¡¹ç›®å±•ç¤ºæ•ˆæœå¸å¼•äººã€‚ * Bug è§£å†³ç»éªŒå‹ï¼šè§£å†³äº†æŸä¸ªéš¾é¢˜çš„è¿‡ç¨‹å’Œå…·ä½“è§£å†³æ–¹æ³•åˆ†äº«ã€‚ * [MaixPy å®˜æ–¹è®ºå›](https://maixhub.com/discussion/maixpy)ï¼ˆæé—®å’Œäº¤æµï¼‰ * QQ ç¾¤ï¼š ï¼ˆå»ºè®®åœ¨ QQ ç¾¤æé—®å‰å…ˆå‘ä¸ªå¸–ï¼Œæ–¹ä¾¿ç¾¤å‹å¿«é€Ÿäº†è§£ä½ éœ€è¦äº†ä»€ä¹ˆé—®é¢˜ï¼Œå¤ç°è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼‰ * MaixPy (v4) AI è§†è§‰äº¤æµå¤§ç¾¤: 862340358 * Telegram: [MaixPy](https://t.me/maixpy) * MaixPy æºç é—®é¢˜: [MaixPy issue](https://github.com/sipeed/MaixPy/issues) * å•†ä¸šåˆä½œæˆ–æ‰¹é‡è´­ä¹°è¯·è”ç³» support@sipeed.com ã€‚"},"/maixpy/doc/zh/network/socket.html":{"title":"MaixPy MaixCAM ä½¿ç”¨ socket è¿›è¡Œ TCP/UDP é€šä¿¡","content":" title: MaixPy MaixCAM ä½¿ç”¨ socket è¿›è¡Œ TCP/UDP é€šä¿¡ ## socket ç®€ä»‹ socket å°±æ˜¯ TCP/UDP é€šä¿¡åœ¨è½¯ä»¶ä¸Šçš„å°è£…ï¼Œé€šè¿‡ socket æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œ TCP/UDP é€šä¿¡ã€‚ MaixPy ç”±äºåŸºäº Pythonï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å†…ç½®çš„`socket`åº“è¿›è¡Œé€šä¿¡ï¼Œæ›´å¤šæ–‡æ¡£å’Œä½¿ç”¨æ•™ç¨‹å¯ä»¥è‡ªè¡Œæœç´¢å­¦ä¹ ã€‚ è¿™é‡Œä»‹ç»ç®€å•çš„ä½¿ç”¨æ–¹æ³•ï¼Œé€šè¿‡è¿™äº›ç¤ºä¾‹ä»£ç ï¼Œä½ å¯ä»¥åœ¨ MaixPy MaixCAM ä¸Šè¿›è¡ŒåŸºæœ¬çš„ TCP å’Œ UDP é€šä¿¡ã€‚ è®°å¾—æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ IP åœ°å€å’Œç«¯å£å·ã€‚ ## socket TCP å®¢æˆ·ç«¯ è¿™é‡Œè¯·æ±‚ TCP æœåŠ¡å™¨ï¼Œå‘é€äº†ä¸€å¥æ¶ˆæ¯å¹¶ç­‰å¾…å›åº”ï¼Œç„¶åå…³é—­è¿æ¥ã€‚ ```python import socket def tcp_client(ip, port): client_socket socket.socket(socket.AF_INET, socket.SOCK_STREAM) server_address (ip, port) client_socket.connect(server_address) try: # å‘é€æ•°æ®åˆ°æœåŠ¡å™¨ message 'Hello, Server!' print(\"send:\", message) client_socket.sendall(message.encode('utf 8')) # æ¥æ”¶æœåŠ¡å™¨çš„å“åº” data client_socket.recv(1024) print('Received:', data.decode('utf 8')) finally: # å…³é—­è¿æ¥ client_socket.close() if __name__ \"__main__\": tcp_client(\"10.228.104.1\", 8080) ``` ## socket TCP æœåŠ¡ç«¯ è¿™é‡Œåˆ›å»ºä¸€ä¸ª socket æœåŠ¡å™¨ï¼Œå¹¶ä¸”ä¸åœç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ï¼Œå®¢æˆ·ç«¯è¿æ¥ååˆ›å»ºä¸€ä¸ªçº¿ç¨‹ç”¨ä»¥å’Œå®¢æˆ·ç«¯é€šä¿¡ï¼Œè¯»å–å®¢æˆ·ç«¯çš„ä¿¡æ¯å¹¶åŸæ ·å‘é€å›å»ã€‚ ```python import socket import threading local_ip \"0.0.0.0\" local_port 8080 def receiveThread(conn, addr): while True: print('read...') client_data conn.recv(1024) if not client_data: break print(client_data) conn.sendall(client_data) print(f\"client {addr} disconnected\") ip_port (local_ip,local_port) sk socket.socket(socket.AF_INET, socket.SOCK_STREAM) sk.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1) sk.bind(ip_port) sk.listen(50) print(\"accept now,wait for client\") while True: conn, addr sk.accept() print(f\"client {addr} connected\") # create new thread to communicate for this client t threading.Thread(target receiveThread,args (conn, addr)) t.daemon True t.start() ``` ## socket UDP å®¢æˆ·ç«¯ ```python import socket def udp_send(ip, port): # åˆ›å»º socket å¯¹è±¡ udp_socket socket.socket(socket.AF_INET, socket.SOCK_DGRAM) # å®šä¹‰æœåŠ¡å™¨çš„ IP åœ°å€å’Œç«¯å£å· server_address (ip, port) try: # å‘é€æ•°æ®åˆ°æœåŠ¡å™¨ message 'Hello, Server!' udp_socket.sendto(message.encode('utf 8'), server_address) finally: # å…³é—­è¿æ¥ udp_socket.close() # è°ƒç”¨å‡½æ•° udp_send(\"10.228.104.1\", 8080) ``` ## socket UDP æœåŠ¡å™¨ ```python import socket def udp_receive(ip, port): # åˆ›å»º socket å¯¹è±¡ udp_socket socket.socket(socket.AF_INET, socket.SOCK_DGRAM) # å®šä¹‰æœåŠ¡å™¨çš„ IP åœ°å€å’Œç«¯å£å· server_address (ip, port) # ç»‘å®šç«¯å£ udp_socket.bind(server_address) print('Waiting for a message...') while True: data, address udp_socket.recvfrom(1024) print('Received:', data.decode('utf 8')) print('From:', address) # å…³é—­è¿æ¥ udp_socket.close() # è°ƒç”¨å‡½æ•° udp_receive('0.0.0.0', 8080) ```"},"/maixpy/doc/zh/network/websocket.html":{"title":"MaixPy MaixCAM ä½¿ç”¨ websocket","content":" title: MaixPy MaixCAM ä½¿ç”¨ websocket ## ç®€ä»‹ ç±»ä¼¼ socketï¼Œä½¿ç”¨ websocket å¯ä»¥å®ç°é•¿é“¾æ¥é€šä¿¡ï¼ŒåŒæ—¶è¿˜æ”¯æŒå’Œ web é¡µé¢é€šä¿¡ã€‚ å› ä¸º MaixPy åŸºäº Pythonï¼Œæ‰€ä»¥ä½¿ç”¨ Python é€šç”¨çš„ `websockets` å’Œ `asyncio` æ¨¡å—å³å¯ï¼Œæ›´å¤šå†…å®¹å¯ä»¥è‡ªè¡Œæœç´¢å­¦ä¹ ã€‚ ## websocket å®¢æˆ·ç«¯ è¿æ¥æœåŠ¡å™¨å‘é€ 10 æ¬¡æ¶ˆæ¯å°±ç»“æŸï¼š ```python import asyncio import websockets import time async def send_msg(websocket): count 1 while count < 10: msg f\"hello {count}\" await websocket.send(msg) recv_text await websocket.recv() print(f\"receive: {recv_text}\", end \"\\n\") count + 1 time.sleep(1) await websocket.close(reason \"client exit\") async def main_logic(ip, port): async with websockets.connect(f'ws://{ip}:{port}') as websocket: await send_msg(websocket) ip \"10.228.104.100\" port 5678 asyncio.get_event_loop().run_until_complete(main_logic(ip, port)) ``` ## websocket æœåŠ¡ç«¯ æ¥å—å®¢æˆ·ç«¯çš„è¿æ¥å¹¶ä¸”å®¢æˆ·ç«¯å‘é€è¿‡æ¥æ¶ˆæ¯åï¼Œè¿”å›`ack for msg:` + å‘é€è¿‡æ¥çš„æ¶ˆæ¯ã€‚ ```python import asyncio import websockets import functools async def recv_msg(websocket): print(\"new client connected, recv_msg start\") while True: try: recv_text await websocket.recv() except Exception as e: print(\"receive failed\") break print(\"received:\", recv_text) response_text f\"ack for msg: {recv_text}\" await websocket.send(response_text) print(\"recv_msg end\") async def main_logic(websocket, path, other_param): await recv_msg(websocket) ip \"0.0.0.0\" port 5678 start_server websockets.serve(functools.partial(main_logic, other_param \"test_value\"), ip, port) print(\"start server\") asyncio.get_event_loop().run_until_complete(start_server) print(\"start server loop\") asyncio.get_event_loop().run_forever() ```"},"/maixpy/doc/zh/network/flask.html":{"title":"MaixPy MaixCAM ä½¿ç”¨ Flask å»ºç«‹ HTTP ç½‘é¡µæœåŠ¡å™¨","content":" title: MaixPy MaixCAM ä½¿ç”¨ Flask å»ºç«‹ HTTP ç½‘é¡µæœåŠ¡å™¨ ## ç®€ä»‹ MaixPy åŸºäº Pythonï¼Œ æ‰€ä»¥ä½ å¯ä»¥ä½¿ç”¨ Python åº“ Flaskï¼Œé€šè¿‡å®ƒå¯ä»¥å¿«é€Ÿå®ç°ä¸€ä¸ª Web ç½‘é¡µæœåŠ¡å™¨ï¼Œå› ä¸ºæ˜¯ Python é€šç”¨çš„ï¼Œå…·ä½“çš„ç”¨å¤„å’Œä½¿ç”¨æ–¹æ³•å¯ä»¥è‡ªè¡Œæœç´¢ï¼Œè¿™é‡Œä¸è¿‡å¤šé˜è¿°ã€‚ å¦‚æœä½ åªæ˜¯æƒ³åšä¸€ä¸ªæ˜¾ç¤ºæ‘„åƒå¤´å›¾åƒçš„é¡µé¢ï¼Œä¹Ÿå¯ä»¥å‚è€ƒ[JPEG ä¸²æµ](../video/jpeg_streaming.html) ä¸­çš„ HTTP å›¾åƒæœåŠ¡å™¨çš„æ–¹æ³•ã€‚ ## ç®€å•çš„ HTTP æœåŠ¡ä¾‹ç¨‹ è¿è¡Œä¸‹é¢çš„ç¨‹åºåï¼Œç”µè„‘æµè§ˆå™¨è®¿é—® `http://è®¾å¤‡ip:8000` å°±ä¼šæ˜¾ç¤º `hello world` å­—ç¬¦å’Œä¸€å¼ å›¾ç‰‡äº†ã€‚ ```python from flask import Flask, request, send_file import maix # we not use it but we import it to listening key event to exit this program app Flask(__name__) @app.route(\"/\", methods [\"GET\", \"POST\"]) def root(): print(\" \") print(request.remote_addr) print(f'headers:\\n{request.headers}') print(f'data: {request.data}') print(\" \") return 'hello world<br><img src \"/img\" style \"background color: black\">' @app.route(\"/<path:path>\") def hello(path): print(path) print(f'headers:\\n{request.headers}') print(f'data: {request.data}') print(\" \\n\\n\") return f\"hello from {path}\" @app.route(\"/img\") def img(): return send_file(\"/maixapp/share/icon/detector.png\") if __name__ \"__main__\": app.run(host \"0.0.0.0\", port 8000) ```"},"/maixpy/doc/zh/network/network_settings.html":{"title":"MaixPy MaixCAM ç½‘ç»œè®¾ç½® WiFi è®¾ç½®","content":" title: MaixPy MaixCAM ç½‘ç»œè®¾ç½® WiFi è®¾ç½® ## ç®€ä»‹ è¦è®© MaixCAM èƒ½å¤Ÿä½¿ç”¨ç½‘ç»œï¼Œé¦–å…ˆéœ€è¦ä½¿ç”¨ WiFi è¿æ¥åˆ°ç½‘ç»œã€‚ MaixCAM æä¾›äº†å‡ ç§æ–¹æ³•è¿æ¥ WiFi çƒ­ç‚¹ã€‚ ## ä½¿ç”¨å†…ç½®è®¾ç½®åº”ç”¨è¿æ¥ å¼€åŠåè¿›å…¥`è®¾ç½®`åº”ç”¨ï¼Œé€‰æ‹©`WiFi`åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡æ‰‹æœºåˆ†äº«`WiFi äºŒç»´ç `æˆ–è€…å†[maixhub.com/wifi](https://maixhub.com/wifi) ç”ŸæˆäºŒç»´ç ï¼Œç„¶åæ‰«ç è¿æ¥ã€‚ ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ‰«æ`WiFi`çƒ­ç‚¹ï¼Œç„¶åè¾“å…¥å¯†ç è¿›è¡Œè¿æ¥ã€‚ è¿æ¥æˆåŠŸç­‰å¾… DHCP è·å¾— IP åç•Œé¢ä¼šæ˜¾ç¤º IPã€‚ ## é€šè¿‡ MaixPy è¿æ¥ ```python from maix import network, err w network.wifi.Wifi() print(\"ip:\", w.get_ip()) SSID \"Sipeed_Guest\" PASSWORD \"qwert123\" print(\"connect to\", SSID) e w.connect(SSID, PASSWORD, wait True, timeout 60) err.check_raise(e, \"connect wifi failed\") print(\"ip:\", w.get_ip()) ``` ## DNS æœåŠ¡å™¨è®¾ç½® å®é™…ä½¿ç”¨æ—¶å‘ç°æœ‰äº›ç”¨æˆ·çš„è·¯ç”±å™¨ DNS è§£æå¯èƒ½è§£æä¸åˆ°æŸäº›åŸŸåï¼Œæ‰€ä»¥é»˜è®¤ç³»ç»Ÿä¸­åœ¨`/boot/resolv.conf`æ–‡ä»¶è®¾ç½®äº† DNS æœåŠ¡å™¨ ```shell nameserver 114.114.114.114 # China nameserver 223.5.5.5 # aliyun China nameserver 8.8.4.4 # google nameserver 8.8.8.8 # google nameserver 223.6.6.6 # aliyun China ``` ä¸€èˆ¬ä¸éœ€è¦ä¿®æ”¹ï¼Œå¦‚æœä½ çš„ DNS è§£æé‡åˆ°äº†é—®é¢˜å¯ä»¥ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ã€‚ å®é™…ç³»ç»Ÿç”¨çš„é…ç½®æ–‡ä»¶è·¯å¾„æ˜¯`/etc/resolv.conf`ï¼Œ è¿™ä¸ªæ–‡ä»¶åœ¨å¼€æœºæ—¶ä¼šè¢«è‡ªåŠ¨æ‹·è´åˆ°`/etc/resolv.conf`ï¼Œæ‰€ä»¥ä¿®æ”¹åç›´æ¥é‡å¯æœ€ç®€å•ã€‚ ä¸æƒ³é‡å¯çš„è¯éœ€è¦åŒæ—¶ä¿®æ”¹è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚"},"/maixpy/doc/zh/network/mqtt.html":{"title":"MaixPy MaixCAM ä½¿ç”¨ MQTT è®¢é˜…å‘å¸ƒæ¶ˆæ¯","content":" title: MaixPy MaixCAM ä½¿ç”¨ MQTT è®¢é˜…å‘å¸ƒæ¶ˆæ¯ ## MQTT ç®€ä»‹ ä½¿ç”¨ MQTT å¯ä»¥å¿«é€Ÿç®€å•åœ°ä½¿ç”¨ è®¢é˜… å‘å¸ƒ æ¨¡å‹æ¥è¿›è¡Œå®æ—¶é€šä¿¡ã€‚ ç³»ç»Ÿç»„æˆï¼š * MQTT æœåŠ¡å™¨ï¼ˆbrokerï¼‰ï¼Œè´Ÿè´£è½¬å‘æ¶ˆæ¯ã€‚ * MQTT å®¢æˆ·ç«¯ï¼Œä»æœåŠ¡å™¨è®¢é˜…ä¸»é¢˜ï¼Œå¹¶ä¸”æ¥æ”¶æ¶ˆæ¯ï¼Œä»¥åŠåƒæœåŠ¡å™¨ç‰¹å®šçš„ä¸»é¢˜å‘å¸ƒæ¶ˆæ¯ã€‚ é€šä¿¡è¿‡ç¨‹ï¼š * å®¢æˆ·ç«¯è¿æ¥ MQTT æœåŠ¡å™¨ã€‚ * å®¢æˆ·ç«¯è®¢é˜…è‡ªå·±æ„Ÿå…´è¶£çš„ä¸»é¢˜ï¼Œæ¯”å¦‚`topic1`ã€‚ * æœ‰å…¶å®ƒå®¢æˆ·ç«¯æˆ–è€…æœåŠ¡å™¨å‘å¸ƒ`topic1`è¿™ä¸ªä¸»é¢˜çš„ä¿¡æ¯æ—¶ï¼Œä¼šè¢«å®æ—¶æ¨é€åˆ°å®¢æˆ·ç«¯ã€‚ * å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ä¸»åŠ¨å‘ç‰¹å®šçš„ä¸»é¢˜æ¨é€æ¶ˆæ¯ï¼Œå…¶å®ƒè®¢é˜…äº†è¿™ä¸ªä¸»é¢˜çš„å®¢æˆ·ç«¯éƒ½ä¼šæ”¶åˆ°ï¼Œæ¯”å¦‚å‘è‡ªå·±è®¢é˜…äº†çš„`topic1`æ¨é€æ¶ˆæ¯è‡ªå·±ä¹Ÿä¼šæ”¶åˆ°ã€‚ ## MaixPy MaixCAM ä¸­ä½¿ç”¨ MQTT ä½¿ç”¨ `paho mqtt` è¿™ä¸ªæ¨¡å—å³å¯ï¼Œå…·ä½“ç”¨æ³•å¯ä»¥è‡ªè¡Œæœç´¢`paho mqtt`çš„ç”¨æ³•ï¼Œä¹Ÿå¯ä»¥å‚è€ƒ[MaixPy/examples](https://github.com/sipeed/MaixPy/tree/main/examples/network)ä¸­çš„ä¾‹ç¨‹ã€‚ å¦‚æœä½ ä½¿ç”¨äº†æ—©æœŸçš„ç³»ç»Ÿï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹`paho mqtt`è¿™ä¸ªåŒ…ï¼Œå®‰è£…æ–¹æ³•è§[æ·»åŠ é¢å¤–çš„ Python è½¯ä»¶åŒ…](../basic/python_pkgs.html)ã€‚"},"/maixpy/doc/zh/network/http.html":{"title":"MaixPy MaixCAM ä½¿ç”¨ http ç½‘ç»œé€šä¿¡","content":" title: MaixPy MaixCAM ä½¿ç”¨ http ç½‘ç»œé€šä¿¡ ## ç®€ä»‹ HTTP æ˜¯ä¸€ä¸ªåº”ç”¨å±‚ç½‘ç»œåè®®ï¼Œåº•å±‚åŸºäº TCPï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥å‘ç½‘ç»œæœåŠ¡å™¨å‘é€å’Œæ¥å—ä¿¡æ¯ï¼Œæ¯”å¦‚ä»ç½‘é¡µæœåŠ¡å™¨è·å–ç½‘é¡µå†…å®¹ç­‰ã€‚ æ›´å¤šä»‹ç»å¯ä»¥è‡ªè¡Œæœç´¢ HTTPã€‚ ## åœ¨ MaixPy ä½¿ç”¨ HTTP è¯·æ±‚ å› ä¸º MaixPy åŸºäº Pythonï¼Œ æ‰€ä»¥ç›´æ¥ä½¿ç”¨è‡ªå¸¦çš„ `requests` åº“å³å¯ï¼Œ`requests` åº“æ˜¯ä¸€ä¸ªéå¸¸å¥å…¨æ˜“ç”¨çš„åº“ï¼Œè¿™é‡Œå°±ä¸è¿›è¡Œè¿‡å¤šçš„ä»‹ç»ï¼Œè¯·è‡ªè¡Œæœç´¢ç›¸å…³æ–‡æ¡£å’Œæ•™ç¨‹ä½¿ç”¨ã€‚ è¿™é‡Œä¸¾ä¸ªä¾‹å­ï¼Œè·å–`https://example.com` çš„é¦–é¡µå†…å®¹ã€‚ ```python import requests url 'https://example.com' response requests.get(url) print(\"Response:\") print(\" status code:\", response.status_code) print(\"\") print(\" headers:\", response.headers) print(\"\") print(\" content:\", response.content) print(\"\") print(\" text:\", response.text) print(\"\") ```"},"/maixpy/doc/zh/video/record.html":{"title":"MaixCAM MaixPy å½•åƒ","content":" title: MaixCAM MaixPy å½•åƒ update: date: 2024 05 20 author: lxowalle version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## ç®€ä»‹ æœ¬æ–‡æ¡£æä¾›å½•åƒåŠŸèƒ½çš„ä½¿ç”¨æ–¹æ³• ## ç¤ºä¾‹ä¸€ ä¸€ä¸ªå½•å…¥`h265`æ ¼å¼è§†é¢‘çš„ç¤ºä¾‹ ```python from maix import video, image, camera, app, time cam camera.Camera(640, 480, image.Format.FMT_YVU420SP) e video.Encoder() f open('/root/output.h265', 'wb') record_ms 2000 start_ms time.ticks_ms() while not app.need_exit(): img cam.read() frame e.encode(img) print(frame.size()) f.write(frame.to_bytes()) if time.ticks_ms() start_ms > record_ms: app.set_exit_flag(True) ``` æ­¥éª¤ï¼š 1. å¯¼å…¥æ¨¡å—å¹¶åˆå§‹åŒ–æ‘„åƒå¤´ ```python from maix import video, image, camera, app, time cam camera.Camera(640, 480, image.Format.FMT_YVU420SP) ``` `camera.Cameraï¼ˆï¼‰`ç”¨æ¥åˆå§‹åŒ–æ‘„åƒå¤´ï¼Œ è¿™é‡Œåˆå§‹åŒ–æ‘„åƒå¤´åˆ†è¾¨ç‡ä¸º`640x480`ï¼Œæ³¨æ„ç›®å‰`Encoder`åªæ”¯æŒ`NV21`æ ¼å¼ï¼Œå› æ­¤è®¾ç½®å›¾åƒæ ¼å¼ä¸º`image.Format.FMT_YVU420SP`ã€‚ 2. åˆå§‹åŒ–`Encoder`æ¨¡å— ```python e video.Encoder() ``` `video.Encoder()`æ¨¡å—ç›®å‰åªæ”¯æŒå¤„ç†`image.Format.FMT_YVU420SP`æ ¼å¼å›¾åƒï¼Œæ”¯æŒ`h265`å’Œ`h264`ç¼–ç , é»˜è®¤ä¸º`h265`ç¼–ç ã€‚å¦‚æœä½ æƒ³ä½¿ç”¨`h264`ç¼–ç ï¼Œåˆ™å¯ä»¥ä¿®æ”¹åˆå§‹åŒ–å‚æ•°ä¸º` video.Encoder(type video.VideoType.VIDEO_H264_CBR)` æ³¨æ„ï¼ŒåŒæ—¶åªèƒ½å­˜åœ¨ä¸€ä¸ªç¼–ç å™¨ 3. ç¼–ç æ‘„åƒå¤´çš„å›¾åƒ ```python img cam.read() frame e.encode(img) ``` `img cam.read()`è¯»å–æ‘„åƒå¤´å›¾åƒå¹¶ä¿å­˜åˆ°`img` `frame e.encode(img)`å¯¹`img`ç¼–ç å¹¶ä¿å­˜ç»“æœåˆ°`frame` 4. ä¿å­˜ç¼–ç ç»“æœåˆ°æ–‡ä»¶ ```python f open('/root/output.h265', 'wb') f.write(frame.to_bytes(False)) ``` `f open(xxx)`æ‰“å¼€å¹¶åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ `f.write(frame.to_bytes(False))`å°†ç¼–ç ç»“æœ`frame`è½¬æ¢ä¸º`bytes`ç±»å‹ï¼Œç„¶åè°ƒç”¨`f.write()`å°†æ•°æ®å†™å…¥æ–‡ä»¶ä¸­ 5. å®šæ—¶2sé€€å‡º ```python record_ms 2000 start_ms time.ticks_ms() while not app.need_exit(): if time.ticks_ms() start_ms > record_ms: app.set_exit_flag(True) ``` è¿™é‡Œæ˜¯å®šæ—¶é€€å‡ºçš„åº”ç”¨é€»è¾‘ï¼Œè‡ªå·±çœ‹çœ‹å§ 6. å®Œæˆ ## ç¤ºä¾‹äºŒ ä¸€ä¸ªå½•å…¥`h265`æ ¼å¼è§†é¢‘çš„ç¤ºä¾‹ ```python from maix import video, time, image, camera, app cam camera.Camera(640, 480, image.Format.FMT_YVU420SP) e video.Encoder(capture True) e.bind_camera(cam) f open('/root/output.h265', 'wb') record_ms 2000 start_ms time.ticks_ms() while not app.need_exit(): frame e.encode() img e.capture() print(frame.size()) f.write(frame.to_bytes(True)) if time.ticks_ms() start_ms > record_ms: app.set_exit_flag(True) ``` ä¸ç¤ºä¾‹ä¸€ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºè°ƒç”¨äº†`Encoder`å¯¹è±¡çš„`bind_camera`æ–¹æ³•ï¼Œ`Encoder`ä¸»åŠ¨å–å›¾ï¼Œè¿™æ ·çš„ä¼˜ç‚¹æ˜¯å¯ä»¥å……åˆ†åˆ©ç”¨ç¡¬ä»¶ç‰¹æ€§ï¼Œå¢åŠ ç¼–ç é€Ÿç‡ ``` e video.Encoder(capture True) e.bind_camera(cam) frame e.encode() img e.capture() ``` `e video.Encoder(capture True)`ä½¿èƒ½äº†`capture`å‚æ•°ï¼Œè®©ç¼–ç æ—¶å¯ä»¥æŠ“å–ç¼–ç çš„å›¾åƒ `e.bind_camera(cam)`å°†æ‘„åƒå¤´ç»‘å®šåˆ°`Encoder`å¯¹è±¡ `frame e.encode()`ç¼–ç æ—¶ä¸éœ€è¦å†ä¼ å…¥`img`ï¼Œè€Œæ˜¯å†…éƒ¨ä»æ‘„åƒå¤´å–å›¾ `img e.capture()`ä»`Encoder`å¯¹è±¡ä¸­æŠ“å–ç¼–ç çš„å›¾åƒ ## è½¬æ¢ä¸ºMP4æ ¼å¼ å¦‚æœæƒ³è¦å½•åˆ¶`mp4`æ ¼å¼è§†é¢‘ï¼Œå¯ä»¥å…ˆå½•åˆ¶å¥½`H265`è§†é¢‘ï¼Œå†ä½¿ç”¨ç³»ç»Ÿå†…çš„`ffmpeg`å·¥å…·è½¬æ¢ä¸º`mp4`æ ¼å¼ ```python import os # Pack h265 to mp4 # /root/output.h265 æ˜¯h265æ–‡ä»¶è·¯å¾„ # /root/output.mp4 æ˜¯mp4æ–‡ä»¶è·¯å¾„ os.system('ffmpeg loglevel quiet i /root/output.h265 c:v copy c:a copy /root/output.mp4 y') ```"},"/maixpy/doc/zh/video/rtsp_streaming.html":{"title":"MaixCAM MaixPy è§†é¢‘æµ RTSP æ¨æµ","content":" title: MaixCAM MaixPy è§†é¢‘æµ RTSP æ¨æµ update: date: 2024 05 20 author: lxowalle version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## ç®€ä»‹ æœ¬æ–‡æ¡£æä¾›é€šè¿‡RTSPæ¨æµæ‘„åƒå¤´ç”»é¢çš„æ–¹æ³• ## ä½¿ç”¨æ–¹æ³• ```python from maix import time, rtsp, camera, image cam camera.Camera(2560, 1440, image.Format.FMT_YVU420SP) server rtsp.Rtsp() server.bind_camera(cam) server.start() print(server.get_url()) while True: time.sleep(1) ``` æ­¥éª¤ï¼š 1. å¯¼å…¥timeã€rtspã€cameraå’Œimageæ¨¡å— ```python from maix import time, rtsp, camera, image ``` 2. åˆå§‹åŒ–æ‘„åƒå¤´ ```python cam camera.Camera(2560, 1440, image.Format.FMT_YVU420SP) # åˆå§‹åŒ–æ‘„åƒå¤´ï¼Œè¾“å‡ºåˆ†è¾¨ç‡2560x1440 NV21æ ¼å¼ ``` æ³¨æ„RTSPæ¨¡å—ç›®å‰åªæ”¯æŒNV21æ ¼å¼ï¼Œ å› æ­¤æ‘„åƒå¤´éœ€è¦é…ç½®ä¸ºNV21æ ¼å¼è¾“å‡º 3. åˆå§‹åŒ–å¹¶å¯åŠ¨Rtspå¯¹è±¡ ```python server rtsp.Rtsp() server.bind_camera(cam) server.start() ``` `server rtsp.Rtsp()`ç”¨æ¥åˆ›å»ºä¸€ä¸ª`Rtsp`å¯¹è±¡ `server.bind_camera(cam)`ç”¨æ¥ç»‘å®šä¸€ä¸ª`Camera`å¯¹è±¡ï¼Œ ç»‘å®šååŸ`Camera`å¯¹è±¡å°†ä¸èƒ½å†ä½¿ç”¨ `server.start()`ç”¨æ¥å¯åŠ¨`rtsp`æ¨æµ 4. æ‰“å°å½“å‰RTSPæµçš„URL ```python print(server.get_url()) ``` `server.get_url()`ç”¨æ¥è·å–`RTSP`çš„`æ’­æ”¾åœ°å€`ã€‚ 6. å®Œæˆï¼Œè¿è¡Œä¸Šé¡»ä»£ç å, ä½ å¯ä»¥é€šè¿‡[VLC](https://www.videolan.org/vlc/)è½¯ä»¶æ’­æ”¾è§†é¢‘æµ, å·²æµ‹è¯•çš„`VLC`ç‰ˆæœ¬æ˜¯`3.0.20`. é»˜è®¤æ’­æ”¾åœ°å€ä¸º`rtsp://è®¾å¤‡çš„ip:8554/live` ## OSD é€šè¿‡OSDæ¥å®ç°ç”»çº¿ä¸ç”»æ¡† TODO"},"/maixpy/doc/zh/video/play.html":{"title":"MaixPy æ’­æ”¾è§†é¢‘","content":" title: MaixPy æ’­æ”¾è§†é¢‘ update: date: 2024 08 19 author: lxowalle version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## ç®€ä»‹ æœ¬æ–‡æ¡£æä¾›æ’­æ”¾è§†é¢‘åŠŸèƒ½çš„ä½¿ç”¨æ–¹æ³•ã€‚ `MaixPy`æ”¯æŒæ’­æ”¾`h264`ã€`mp4`ã€`flv`æ ¼å¼çš„è§†é¢‘ï¼Œéœ€è¦æ³¨æ„ç›®å‰åªæ”¯æŒ`avc`ç¼–ç çš„`mp4`å’Œ`flv`æ–‡ä»¶ ## æ’­æ”¾`MP4`è§†é¢‘ ä¸€ä¸ªæ’­æ”¾`mp4`è§†é¢‘çš„ç¤ºä¾‹ï¼Œè§†é¢‘æ–‡ä»¶è·¯å¾„ä¸º`/root/output.mp4` ```python from maix import video, display, app disp display.Display() d video.Decoder('/root/output.mp4') print(f'resolution: {d.width()}x{d.height()} bitrate: {d.bitrate()} fps: {d.fps()}') d.seek(0) while not app.need_exit(): ctx d.decode_video() if not ctx: d.seek(0) continue img ctx.image() disp.show(img) print(f'need wait : {ctx.duration_us()} us') ``` æ­¥éª¤ï¼š 1. å¯¼å…¥æ¨¡å—å¹¶åˆå§‹åŒ–æ‘„åƒå¤´ ```python from maix import video, display, app disp display.Display() ``` `disp display.Display()`ç”¨æ¥åˆå§‹åŒ–æ˜¾ç¤ºå±ï¼Œç”¨äºæ˜¾ç¤ºè§£ç çš„å›¾åƒ 2. åˆå§‹åŒ–`Decoder`æ¨¡å— ```python d video.Decoder('/root/output.mp4') ``` `d video.Decoder('/root/output.mp4')`ç”¨æ¥åˆå§‹åŒ–è§£ç å™¨ï¼Œå¹¶è®¾ç½®éœ€è¦æ’­æ”¾çš„è§†é¢‘æ–‡ä»¶è·¯å¾„ã€‚å¦‚æœä½ éœ€è¦æ’­æ”¾`flv`æ–‡ä»¶ï¼Œåˆ™å¯ä»¥å¡«å†™`flv`ä¸ºåç¼€çš„æ–‡ä»¶è·¯å¾„ï¼Œä¾‹å¦‚`{your_file_path}.flv`ï¼Œå¦‚æœä½ éœ€è¦æ’­æ”¾`h264`æ–‡ä»¶ï¼Œåˆ™å¯ä»¥å¡«å†™`h264`ä¸ºåç¼€çš„æ–‡ä»¶è·¯å¾„ï¼Œä¾‹å¦‚`{your_file_path}.h264` 3. è®¾ç½®è§£ç çš„ä½ç½® ```python d.seek(0) ``` å¯ä»¥ç”¨æ¥è®¾ç½®æ’­æ”¾è§†é¢‘çš„ä½ç½®ï¼Œå•ä½æ˜¯ç§’ 4. è·å–è§£ç åçš„å›¾åƒ ```python ctx d.decode_video() img ctx.image() ``` æ¯æ¬¡è°ƒç”¨éƒ½ä¼šè¿”å›ä¸€å¸§å›¾åƒçš„ä¸Šä¸‹æ–‡`ctx`ï¼Œé€šè¿‡`ctx.image()`è·å–`img`ã€‚ç›®å‰è§£ç ååªèƒ½æ”¯æŒè¾“å‡º`NV21`æ ¼å¼çš„å›¾åƒ 5. æ˜¾ç¤ºè§£ç åçš„å›¾åƒ ```python disp.show(img) ``` æ˜¾ç¤ºå›¾åƒæ—¶ä½¿ç”¨`ctx.duration_us()`å¯ä»¥è·å–æ¯å¸§å›¾åƒçš„æ—¶é•¿ï¼Œå•ä½æ˜¯å¾®ç§’ 6. å®Œæˆï¼Œæ›´å¤š`Decoder`çš„ç”¨æ³•è¯·çœ‹[APIæ–‡æ¡£](https://wiki.sipeed.com/maixpy/api/maix/video.html)"},"/maixpy/doc/zh/video/rtmp_streaming.html":{"title":"MaixCAM MaixPy è§†é¢‘æµ RTMP æ¨æµ","content":" title: MaixCAM MaixPy è§†é¢‘æµ RTMP æ¨æµ update: date: 2024 05 20 author: lxowalle version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## ç®€ä»‹ æœ¬æ–‡æ¡£æä¾›é€šè¿‡RTMPæ¨é€H264è§†é¢‘æµçš„æ–¹æ³• ## ä½¿ç”¨æ–¹æ³• ```python from maix import camera, time, rtmp, image cam camera.Camera(640, 480, image.Format.FMT_YVU420SP) # rtmp://192.168.0.30:1935/live/stream host '192.168.0.30' port 1935 app 'live' stream 'stream' bitrate 1000_000 r rtmp.Rtmp(host, port, app, stream, bitrate) r.bind_camera(cam) r.start() while True: time.sleep(1) ``` æ­¥éª¤ï¼š 1. å¯¼å…¥camera, time, rtmpå’Œimageæ¨¡å— ```python from maix import camera, time, rtmp, image ``` 2. åˆå§‹åŒ–æ‘„åƒå¤´ ```python cam camera.Camera(640, 480, image.Format.FMT_YVU420SP) # åˆå§‹åŒ–æ‘„åƒå¤´ï¼Œè¾“å‡ºåˆ†è¾¨ç‡640x480 NV21æ ¼å¼ ``` æ³¨æ„RTMPæ¨¡å—ç›®å‰åªæ”¯æŒNV21æ ¼å¼ï¼Œ å› æ­¤æ‘„åƒå¤´éœ€è¦é…ç½®ä¸ºNV21æ ¼å¼è¾“å‡º 3. åˆå§‹åŒ–å¹¶å¯åŠ¨Rtmpå¯¹è±¡ ```python r rtmp.Rtmp(host, port, app, stream, bitrate) r.bind_camera(cam) r.start() ``` `r rtmp.Rtmp(host, port, app, stream, bitrate)`ç”¨æ¥åˆ›å»ºä¸€ä¸ª`Rtmp`å¯¹è±¡ï¼Œå…¶ä¸­`host`æŒ‡rtmpæœåŠ¡å™¨çš„ipåœ°å€æˆ–è€…åŸŸåï¼Œ`app`æŒ‡rtmpæœåŠ¡å™¨å¼€æ”¾çš„åº”ç”¨åï¼Œ`stream`æŒ‡rtmpæµçš„åç§°ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæœ¬æ¬¡æ¨æµçš„å¯†é’¥ `r.bind_camera(cam)`ç”¨æ¥ç»‘å®šä¸€ä¸ª`Camera`å¯¹è±¡ï¼Œ ç»‘å®šååŸ`Camera`å¯¹è±¡å°†ä¸èƒ½å†ä½¿ç”¨ `r.start()`ç”¨æ¥å¯åŠ¨`rtmp`æ¨æµ 4. å®Œæˆ ## å‘Bilibiliæ¨æµæµ‹è¯• ### å¯åŠ¨bilibiliç›´æ’­ 1. ç‚¹å‡»ç›´æ’­ ![](../../../static/image/bilibili_click_live.png) 2. ç‚¹å‡»å¼€æ’­è®¾ç½® ![](../../../static/image/bilibili_click_live_setting.png) 3. é€šè¿‡`æˆ‘çš„ç›´æ’­é—´é“¾æ¥`æ‰¾åˆ°ç›´æ’­åœ°å€ ![](../../../static/image/bilibili_check_live_link.png) 4. å¾€ä¸‹ç¿»ï¼Œé€‰æ‹©ä¸€ä¸ª`åˆ†ç±»`ï¼Œå†ç‚¹å‡»å¼€å§‹ç›´æ’­ ![](../../../static/image/bilibili_live_start.png) 5. æ‰§è¡Œæ­¥éª¤4åï¼Œå¯ä»¥çœ‹åˆ° ![](../../../static/image/bilibili_check_rtmp_url.png) ç›´æ’­æœåŠ¡å™¨çš„åœ°å€ä¸ºï¼š`rtmp://live push.bilivideo.com/live bvc` ä¸²æµå¯†é’¥ä¸ºï¼š`?streamname live_xxxx&key 1fbfxxxxxxxxxxxxxffe0&schedule rtmp&pflag 1` ç»„åˆèµ·æ¥çš„`rtmp`æ¨æµåœ°å€å°±æ˜¯ï¼š`rtmp://live push.bilivideo.com/live bvc/?streamname live_xxxx&key 1fbfxxxxxxxxxxxxxffe0&schedule rtmp&pflag 1` ### è¿è¡ŒRTMPå®¢æˆ·ç«¯ ```python from maix import camera, time, rtmp, image cam camera.Camera(640, 480, image.Format.FMT_YVU420SP) # rtmp://live push.bilivideo.com/live bvc/?streamname live_xxxx&key 1fbfxxxxxxxxxxxxxffe0&schedule rtmp&pflag 1 host 'live push.bilivideo.com' port 1935 app 'live bvc' stream '?streamname live_xxxx&key 1fbfxxxxxxxxxxxxxffe0&schedule rtmp&pflag 1' bitrate 1000_000 r rtmp.Rtmp(host, port, app, stream, bitrate) r.bind_camera(cam) r.start() while True: time.sleep(1) ``` ä¸Šé¢æ‹¿åˆ°bilibiliçš„æ¨æµåœ°å€ä¸º`rtmp://live push.bilivideo.com/live bvc/?streamname live_xxxx&key 1fbfxxxxxxxxxxxxxffe0&schedule rtmp&pflag 1` å¯ä»¥æ‹†å‡º 1. æœåŠ¡å™¨åœ°å€ä¸º`live push.bilivideo.com` 2. ç«¯å£å·ä¸º`1935`ï¼Œå³æ²¡æœ‰ç«¯å£å·åˆ™é»˜è®¤ä¸º`1935` 3. åº”ç”¨åä¸º`live bvc` 4. æµåç§°ä¸º`?streamname live_xxxx&key 1fbfxxxxxxxxxxxxxffe0&schedule rtmp&pflag 1` è¿è¡Œä»£ç ï¼Œå°±èƒ½åœ¨ç›´æ’­é—´çœ‹åˆ°`maixcam`çš„ç”»é¢äº†ï¼Œå¦‚æœå‘ç°ç›´æ’­æ²¡æœ‰æ˜¾ç¤ºï¼Œå¯ä»¥å°è¯•å…ˆå…³é—­ç›´æ’­é—´ï¼Œå†é‡æ–°æ‰“å¼€ç›´æ’­é—´ï¼Œå†è¿è¡Œä»£ç ã€‚ åŠ¨æ‰‹è¯•è¯•å§ï½"},"/maixpy/doc/zh/video/jpeg_streaming.html":{"title":"MaixCAM MaixPy è§†é¢‘æµ JPEG æ¨æµ / å‘é€å›¾ç‰‡åˆ°æœåŠ¡å™¨","content":" title: MaixCAM MaixPy è§†é¢‘æµ JPEG æ¨æµ / å‘é€å›¾ç‰‡åˆ°æœåŠ¡å™¨ update: date: 2024 04 03 author: neucrack version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ date: 2024 05 20 author: lxowalle version: 1.0.1 content: æ›´æ–°JPEG HTTPç”¨æ³• ## ç®€ä»‹ æœ‰æ—¶éœ€è¦å°†å›¾åƒå‘é€åˆ°æœåŠ¡å™¨ï¼Œæˆ–è€…å°†æ‘„åƒå¤´çš„è§†é¢‘æ¨é€åˆ°æœåŠ¡å™¨ï¼Œè¿™é‡Œæä¾›ä¸¤ç§æ–¹æ³•: ä¸€ä¸ªæœ€ç®€å•çš„æ–¹æ³•ï¼Œå³å‹ç¼©æˆ `JPEG` å›¾ç‰‡ï¼Œç„¶åä¸€å¼ ä¸€å¼ åœ°å‘é€åˆ°æœåŠ¡å™¨ã€‚æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ç§æœ€ç®€å•çš„æ–¹æ³•ï¼Œä¸ç®—å¾ˆæ­£è§„çš„è§†é¢‘æ¨æµæ–¹æ³•ï¼Œä¹Ÿä¸é€‚åˆé«˜åˆ†è¾¨ç‡é«˜å¸§ç‡çš„è§†é¢‘æµï¼Œå› ä¸ºè¿™åªæ˜¯ä¸€å¼ ä¸€å¼ å‘é€å›¾ç‰‡ï¼Œå¦‚æœè¦é«˜æ•ˆæ¨é€è§†é¢‘æµï¼Œè¯·ä½¿ç”¨åæ–‡çš„ `RTSP` æˆ–è€… `RTMP` æ¨¡å—ã€‚ å»ºç«‹ä¸€ä¸ªHTTPæœåŠ¡å™¨, è®©PCç«¯å¯ä»¥é€šè¿‡æµè§ˆå™¨ç›´æ¥è®¿é—® ## ä½œä¸ºå®¢æˆ·ç«¯æ¨æµçš„æ–¹æ³• ```python from maix import image import requests # create image img image.Image(640, 480, image.Format.FMT_RGB) # draw something img.draw_rect(60, 60, 80, 80, image.Color.from_rgb(255, 0, 0)) # convert to jpeg jpeg img.to_format(image.Format.FMT_JPEG) # image.Format.FMT_PNG # get jpeg bytes jpeg_bytes jpeg.to_bytes() # faster way, borrow memory from jpeg object, # but be carefully, when jpeg object is deleted, jpeg_bytes object MUST NOT be used, or program will crash # jpeg_bytes jpeg.to_bytes(copy False) # send image binary bytes to server url \"http://192.168.0.123:8080/upload\" res requests.post(url, data jpeg_bytes) print(res.status_code) print(res.text) ``` å¯ä»¥çœ‹åˆ°ï¼Œå…ˆå°†å›¾ç‰‡è½¬æ¢æˆäº† `JPEG` æ ¼å¼ï¼Œç„¶åå°† `JPEG` å›¾ç‰‡çš„äºŒè¿›åˆ¶æ•°æ®é€šè¿‡`TCP`å‘é€åˆ°æœåŠ¡å™¨ã€‚ ## ä½œä¸ºæœåŠ¡å™¨æ¨æµçš„æ–¹æ³• ```python from maix import camera, time, app, http html \"\"\"<!DOCTYPE html> <html> <head> <title>JPG Stream</title> </head> <body> <h1>MaixPy JPG Stream</h1> <img src \"/stream\" alt \"Stream\"> </body> </html>\"\"\" cam camera.Camera(320, 240) stream http.JpegStreamer() stream.set_html(html) stream.start() print(\"http://{}:{}\".format(stream.host(), stream.port())) while not app.need_exit(): t time.ticks_ms() img cam.read() jpg img.to_jpeg() stream.write(jpg) print(f\"time: {time.ticks_ms() t}ms, fps: {1000 / (time.ticks_ms() t)}\") ``` æ­¥éª¤ï¼š 1. å¯¼å…¥imageã€cameraå’Œhttpæ¨¡å— ```python from maix import image, camera, http ``` 2. åˆå§‹åŒ–æ‘„åƒå¤´ ```python cam camera.Camera(320, 240) # åˆå§‹åŒ–æ‘„åƒå¤´ï¼Œè¾“å‡ºåˆ†è¾¨ç‡320x240 RGBæ ¼å¼ ``` 3. åˆå§‹åŒ–Streamå¯¹è±¡ ```python stream http.JpegStreamer() stream.start() ``` `http.JpegStreamer()`ç”¨æ¥åˆ›å»ºä¸€ä¸ª`JpegStreamer`å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°†ä¼šå¯åŠ¨ä¸€ä¸ª`httpæœåŠ¡å™¨`ï¼Œç”¨æ¥å‘å®¢æˆ·ç«¯å‘å¸ƒ`jpeg`å›¾åƒæµ `stream.start()`ç”¨æ¥å¯åŠ¨`httpæœåŠ¡å™¨` 4. è‡ªå®šä¹‰htmlæ ·å¼ï¼ˆå¯é€‰ï¼‰ ```python html \"\"\"<!DOCTYPE html> <html> <head> <title>JPG Stream</title> </head> <body> <h1>MaixPy JPG Stream</h1> <img src \"/stream\" alt \"Stream\"> </body> </html>\"\"\" stream.set_html(html) ``` `html xxx`æ˜¯`html`ä»£ç ï¼Œå¯ä»¥ç”¨æ¥å®šåˆ¶è‡ªå·±çš„ç½‘é¡µé£æ ¼ã€‚æ³¨æ„æ ¸å¿ƒä»£ç æ˜¯`<img src \"/stream\" alt \"Stream\">`ï¼Œä¸€å®šä¸è¦æ¼äº†è¿™è¡Œä»£ç ã€‚ `stream.set_html(html)`ç”¨æ¥è®¾ç½®è‡ªå®šä¹‰çš„`html`ä»£ç ï¼Œè¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ã€‚é»˜è®¤æµè§ˆåœ°å€æ˜¯`http://è®¾å¤‡çš„ip:8000`ã€‚ 5. ä»æ‘„åƒå¤´è·å–å›¾ç‰‡å¹¶æ¨æµ ```python while 1: img cam.read() jpg img.to_jpeg() stream.write(jpg) ``` `img cam.read()`ä»æ‘„åƒå¤´è·å–ä¸€å¼ å›¾åƒï¼Œå½“åˆå§‹åŒ–çš„æ–¹å¼ä¸º`cam camera.Camera(320, 240)`æ—¶ï¼Œ`img`å¯¹è±¡æ˜¯ä¸€å¼ åˆ†è¾¨ç‡ä¸º320x240çš„RGBå›¾ã€‚ `jpg img.to_jpeg()`å°†å›¾åƒè½¬æ¢ä¸º`jpeg`æ ¼å¼ `stream.write(jpg)`å‘æœåŠ¡å™¨å†™å…¥å›¾åƒæ ¼å¼ï¼Œ`http`æœåŠ¡å™¨å°†ä¼šæŠŠè¿™ä¸ªå›¾åƒå‘é€åˆ°`http`å®¢æˆ·ç«¯ã€‚ 6. å®Œæˆï¼Œè¿è¡Œä¸Šé¡»ä»£ç å, ä½ å¯ä»¥é€šè¿‡æµè§ˆå™¨ç›´æ¥çœ‹åˆ°è§†é¢‘æµ, é»˜è®¤åœ°å€ä¸º`http://è®¾å¤‡çš„ip:8000`ã€‚æ‰“å¼€ä½ çš„æµè§ˆå™¨çœ‹çœ‹å§ï¼"},"/maixpy/doc/zh/faq.html":{"title":"MaixCAM MaixPy FAQ(å¸¸è§é—®é¢˜)","content":" title: MaixCAM MaixPy FAQ(å¸¸è§é—®é¢˜) >! æ­¤é¡µé¢åˆ—å‡ºäº† MaixPy ç›¸å…³çš„å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼Œå¦‚æœä½ é‡åˆ°äº†é—®é¢˜ï¼Œè¯·å…ˆåœ¨è¿™é‡Œæ‰¾å¯»ç­”æ¡ˆã€‚ > å¦å¤–è¿˜æœ‰å…¶å®ƒé€”å¾„ï¼š > * [MaixHub è®¨è®ºç‰ˆå—](https://maixhub.com/discussion): äº¤æµè®¨è®ºï¼Œæ”¯æŒçº¢åŒ…æ‰“èµã€‚ > * [MaixPy issue](https://github.com/sipeed/MaixPy/issues?q ): æºç ç›¸å…³é—®é¢˜ã€‚ > * [MaixCAM ç¡¬ä»¶ FAQ](https://wiki.sipeed.com/hardware/zh/maixcam/faq.html): MaixCAM ç¡¬ä»¶å¸¸è§é—®é¢˜ã€‚ ## MaixVision æ— æ³•æœç´¢åˆ°è®¾å¤‡ï¼Ÿ å…ˆç¡®è®¤è¿æ¥æ–¹å¼æ˜¯ WiFi è¿˜æ˜¯ USB çº¿ï¼Œ **WiFi**: * ç¡®è®¤ WiFi æ˜¯å¦æ­£ç¡®è¿æ¥ä¸Šå¹¶ä¸”è·å–åˆ° IP åœ°å€ï¼Œ å¯ä»¥åœ¨ `è®¾ç½® >è®¾å¤‡ä¿¡æ¯` æˆ–è€…`è®¾ç½® >WiFi` é‡Œé¢çœ‹åˆ° `ip`ã€‚ **USBçº¿**: * ç¡®ä¿è®¾å¤‡é€šè¿‡ Type C æ•°æ®çº¿è¿æ¥åˆ°ç”µè„‘ï¼Œè®¾å¤‡å¤„äºå¼€æœºçŠ¶æ€å¹¶ä¸”è¿›å…¥äº†åŠŸèƒ½é€‰æ‹©ç•Œé¢ã€‚ * ç¡®ä¿è®¾å¤‡é©±åŠ¨å·²ç»å®‰è£…ï¼š * Windows ä¸‹å¯ä»¥åœ¨`è®¾å¤‡ç®¡ç†å™¨`ä¸­æŸ¥çœ‹æ˜¯å¦æœ‰ USB è™šæ‹Ÿç½‘å¡è®¾å¤‡ï¼Œå¦‚æœæœ‰æ„Ÿå¹å·åˆ™æ˜¯å»åŠ¨æ²¡æœ‰å®‰è£…å¥½ï¼ŒæŒ‰ç…§[å¿«é€Ÿå¼€å§‹](./index.html) ä¸­çš„æ–¹æ³•å®‰è£…é©±åŠ¨å³å¯ã€‚ * Linux ä¸‹å¯ä»¥é€šè¿‡`ifconfig`æˆ–è€…`ip addr`æŸ¥çœ‹æ˜¯å¦æœ‰`usb0`è®¾å¤‡æˆ–è€…`lsusb`æŸ¥çœ‹æ‰€æœ‰ USB è®¾å¤‡ã€‚ Linux å·²ç»è‡ªå¸¦å»åŠ¨ï¼Œæ‰€ä»¥è¯†åˆ«ä¸åˆ°æ£€æŸ¥ç¡¬ä»¶è¿æ¥ï¼Œè®¾å¤‡ç³»ç»Ÿæ˜¯å¦æ˜¯æœ€æ–°ï¼Œä»¥åŠè®¾å¤‡æ˜¯å¦å·²ç»æ­£å¸¸å¯åŠ¨å³å¯ã€‚ * Mac OS åŒ Linux æ–¹æ³•ï¼Œæˆ–è€…åœ¨`ç³»ç»Ÿè®¾ç½®` > `ç½‘ç»œ` é‡Œé¢çœ‹æœ‰æ²¡æœ‰ usb ç½‘å¡ã€‚ * å¦å¤– æ£€æŸ¥ USB çº¿ç¼†çš„è´¨é‡ï¼Œæ¢ä¸€ä¸ªé«˜è´¨é‡çš„çº¿ç¼†ã€‚ * å¦å¤– æ£€æŸ¥ç”µè„‘ USB å£çš„è´¨é‡ï¼Œæ¯”å¦‚å®æµ‹æŸäº›å°ä¸»æœº USB å£ EMI è®¾è®¡å¤ªç³Ÿç³•ï¼Œå¤–æ¥ä¸€ä¸ªè´¨é‡å¥½ç‚¹çš„ USB HUB åè€Œå¯ä»¥ä½¿ç”¨äº†ï¼Œä¹Ÿå¯ä»¥æ¢ USB å£ æˆ–è€…ç›´æ¥æ¢å°ç”µè„‘ã€‚ ## MaixVision è¿è¡Œæ‘„åƒå¤´ä¾‹ç¨‹æ˜¾ç¤ºå›¾åƒå¡é¡¿ é»˜è®¤é…çš„ GC4653 æ‘„åƒå¤´æœ€é«˜å¸§ç‡ä¸º 30 å¸§ï¼Œæ‘„åƒå¤´ä¾‹ç¨‹æ­£å¸¸æƒ…å†µä¸‹ MaixVision çš„æ˜¾ç¤ºè‚‰çœ¼ä¸ä¼šæœ‰å¡é¡¿æ„Ÿï¼Œå¦‚æœå¡é¡¿ï¼Œé¦–å…ˆè€ƒè™‘ä¼ è¾“é—®é¢˜ï¼š * æ£€æŸ¥ç½‘ç»œè¿æ¥è´¨é‡ï¼Œæ¯”å¦‚ WiFiã€‚ * å¦‚æœç”¨çš„ USB è¿æ¥ï¼Œæ£€æŸ¥ USB çº¿è´¨é‡ï¼Œ ç”µè„‘ USB å£è´¨é‡ï¼Œå¯ä»¥å°è¯•æ¢å°ç”µè„‘æˆ–è€… USB å£ æˆ–è€… USB çº¿ç¼†å°è¯•å¯¹æ¯”ã€‚ ## æ­¤äº§å“é€‚åˆé‡äº§å— ç­”æ¡ˆï¼šé€‚åˆã€‚ * è½¯ä»¶ä¸Šä½¿ç”¨ Python å³å¯ç¨³å®šè¿è¡Œï¼Œæ–¹ä¾¿å¼€å‘ä¹Ÿå¯é ã€‚ * è½¯ä»¶ä¸Šå¦å¤–æ”¯æŒå’Œ MaixPy ç›¸åŒ API çš„ C++ SDKï¼ˆMaixCDKï¼‰ï¼Œæ»¡è¶³é«˜æ•ˆç‡å’Œç¨³å®šè¦æ±‚ã€‚ * ç¡¬ä»¶ä¸Šæä¾›å„ç§å½¢å¼çš„ PCB å’Œå¤–å£³ï¼Œæ ¸å¿ƒæ¿å’Œæ•´æ¿éƒ½æœ‰ï¼ŒèŠ¯ç‰‡ä¾›è´§ç¨³å®šï¼Œå¦‚æœæœ‰é‡äº§éœ€æ±‚å¯ä»¥è”ç³» support@sipeed.com å’¨è¯¢ã€‚ * é‡å¤§ä»·æ›´ä¼˜ã€‚ ## MaixPy v4 å’Œ v1 v3 æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ * MaixPy v4 ä½¿ç”¨ Python è¯­è¨€ï¼Œæ˜¯å¸å–äº† v1 v3 ç»éªŒçš„é›†å¤§æˆä¹‹ä½œï¼Œæœ‰æ›´å¥½çš„é…å¥—è½¯ä»¶å’Œç”Ÿæ€ï¼Œæ›´å¤šçš„åŠŸèƒ½ï¼Œæ›´ç®€å•çš„ä½¿ç”¨æ–¹å¼å’Œæ›´å®Œå–„çš„æ–‡æ¡£ï¼›ç¡¬ä»¶æœ‰å¾ˆå¤§æå‡çš„åŒæ—¶åŠ ä¸ªå’Œå¦å¤–ä¸¤è€…çš„ç¡¬ä»¶ä»·æ ¼æƒ³å½“ç”šè‡³æ›´ä¾¿å®œï¼›å¦å¤–ä¹Ÿåšäº†å…¼å®¹ K210 çš„ä½¿ç”¨ä½“éªŒå’Œ APIï¼Œæ–¹ä¾¿ç”¨æˆ·ä» v1 å¿«é€Ÿè¿ç§»åˆ° v4ã€‚ * v1 ä½¿ç”¨äº† Micropython è¯­è¨€ï¼Œæœ‰å¾ˆå¤šå±€é™æ€§ï¼Œæ¯”å¦‚ç¬¬ä¸‰æ–¹åº“æ”¯æŒæœ‰é™ï¼›åŒæ—¶å—é™äº Maix I (K210) çš„ç¡¬ä»¶æ€§èƒ½ï¼Œå†…å­˜ä¸å¤Ÿç”¨ï¼ŒAI æ¨¡å‹æ”¯æŒæœ‰é™ï¼Œå¾ˆå¤šç¼–è§£ç ä¸æ”¯æŒç¡¬ä»¶åŠ é€Ÿç­‰ç¼ºç‚¹ã€‚ * v3 ä¹Ÿæ˜¯ä½¿ç”¨äº† Python è¯­è¨€ï¼ŒåŸºäº Maix II Dock (v831) ç¡¬ä»¶ï¼Œç¡¬ä»¶ AI æ¨¡å‹æ”¯æŒæœ‰é™ï¼Œè€Œä¸”å…¨å¿—çš„åŸºç¡€ç”Ÿæ€ä¸å¤Ÿå¼€æ”¾ï¼ŒAPI ä¹Ÿä¸å¤Ÿå®Œå–„ï¼Œæ­¤ç‰ˆæœ¬ä»…ä½œä¸º Maix II Dock (v831)ä¸Šé¢ä½¿ç”¨ï¼Œä¸ä¼šç»§ç»­æ›´æ–°ã€‚ ## MaixPy ç›®å‰åªæ”¯æŒ MaixCAM å—ï¼Œç”¨å…¶å®ƒåŒæ¬¾èŠ¯ç‰‡çš„æ¿å­è¡Œä¸è¡Œï¼Ÿ MaixPy ç›®å‰ä»…æ”¯æŒ MaixCAM ç³»åˆ—æ¿å­ï¼Œå…¶å®ƒåŒæ¬¾èŠ¯ç‰‡çš„æ¿å­ä¹Ÿä¸æ”¯æŒï¼ˆåŒ…æ‹¬ Sipeed çš„åŒæ¬¾èŠ¯ç‰‡æ¿å­ æ¯”å¦‚ LicheeRV Nanoï¼‰ï¼Œå¼ºçƒˆä¸å»ºè®®å°è¯•ï¼Œå¯¼è‡´è®¾å¤‡æŸåï¼ˆæ¯”å¦‚å†’çƒŸçƒ§å±ç­‰ï¼‰åæœè‡ªè´Ÿã€‚ æœªæ¥ Sipeed å‡ºçš„ Maix ç³»åˆ—çš„äº§å“éƒ½å°†ç»§ç»­å¾—åˆ° MaixPy æ”¯æŒï¼Œç›®å‰å¦‚æœ MaixCAM æœ‰ä»€ä¹ˆæ— æ³•æ»¡è¶³çš„éœ€æ±‚ï¼Œå¯ä»¥åˆ° [MaixHub è®¨è®ºç‰ˆå—](https://maixhub.com/discussion) æå‡ºéœ€æ±‚æˆ–è€…å‘é€é‚®ä»¶åˆ° support@sipeed.com. ## å¯ä»¥ç”¨é™¤äº†å®˜æ–¹æ­é…çš„æ‘„åƒå¤´æˆ–è€…å±å¹•ä»¥å¤–çš„è‡ªå·±çš„æ‘„åƒå¤´æˆ–è€…å±å¹•å—ï¼Ÿ ä¸å»ºè®®è¿™æ ·æ“ä½œï¼Œé™¤éä½ æœ‰å¤Ÿä¸°å¯Œçš„è½¯ç¡¬ä»¶çŸ¥è¯†å’Œç»éªŒï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´è®¾å¤‡æŸåã€‚ å®˜æ–¹æ­é…çš„é…ä»¶å¯¹åº”çš„è½¯ç¡¬ä»¶æ˜¯è°ƒæ•™è¿‡çš„ï¼Œè¡¨ç°æ•ˆæœæ˜¯æœ€å¥½çš„ï¼Œä¸Šæ‰‹å³å¯ä½¿ç”¨ï¼Œå…¶å®ƒé…ä»¶å¯èƒ½æ¥å£ä¸åŒï¼Œé©±åŠ¨ä¸åŒï¼Œè½¯ä»¶ä¸åŒï¼Œéœ€è¦è‡ªå·±å»è°ƒæ•™ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„è¿‡ç¨‹ï¼Œä¸å»ºè®®å°è¯•ã€‚ å½“ç„¶ï¼Œå¦‚æœä½ æ˜¯å¤§ä½¬ï¼Œæˆ‘ä»¬ä¹Ÿæ¬¢è¿ä½ æäº¤ PRï¼ ## è¿è¡Œæ¨¡å‹æŠ¥é”™ cvimodel built for xxxcv181x CANNOT run on platform cv181x è§£ææ¨¡å‹æ–‡ä»¶å¤±è´¥äº†ï¼Œä¸€èˆ¬æƒ…å†µæ˜¯æ¨¡å‹æ–‡ä»¶æŸåé€ æˆçš„ï¼Œç¡®ä¿ä½ çš„æ¨¡å‹æ–‡ä»¶æ˜¯æ²¡æœ‰æŸåçš„ã€‚ æ¯”å¦‚ï¼š * ç”¨ç¼–è¾‘å™¨ç¼–è¾‘äº†äºŒè¿›åˆ¶æ–‡ä»¶å¯¼è‡´æ–‡ä»¶æŸåã€‚æ¯”å¦‚ç”¨ maixvision æ‰“å¼€äº† cvimodel æ–‡ä»¶ï¼Œç”±äº maixvision çš„è‡ªåŠ¨ä¿å­˜åŠŸèƒ½ä¼šç ´åäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ‰€ä»¥ä¸è¦ç”¨ maixvision ç­‰æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€äºŒè¿›åˆ¶æ–‡ä»¶å¹¶ä¿å­˜ï¼ˆåé¢ MaixVision ä¼šä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œå³å»æ‰ maixvision çš„è‡ªåŠ¨ä¿å­˜åŠŸèƒ½ï¼‰ã€‚ * å¦‚æœæ˜¯ä»ç½‘ä¸Šä¸‹è½½çš„ï¼Œä¿è¯ä¸‹è½½æ²¡æœ‰å‡ºé—®é¢˜ï¼Œä¸€èˆ¬ç½‘ä¸Šçš„æ–‡ä»¶æä¾› sha256sum/md5 æ ¡éªŒå€¼ï¼Œä¸‹è½½ä¸‹æ¥åå¯ä»¥å¯¹æ¯”ä¸€ä¸‹ï¼Œå…·ä½“æ–¹æ³•è¯·è‡ªè¡Œæœç´¢æˆ–è€…é—® ChatGPTã€‚ * å¦‚æœæ˜¯æ¥è‡ªå‹ç¼©åŒ…ï¼Œè¯·ç¡®è®¤è§£å‹è¿‡ç¨‹æ²¡æœ‰å‡ºé”™ï¼Œå¯ä»¥ä»å‹ç¼©åŒ…é‡æ–°è§£å‹ä¸€éä¿è¯ä¸­é—´æ²¡æœ‰å‡ºé”™ã€‚ * ä¿è¯ä¼ è¾“åˆ°è®¾å¤‡çš„è¿‡ç¨‹æ²¡æœ‰é€ æˆæ–‡ä»¶æŸåï¼Œå¯ä»¥å¯¹æ¯”ä¸€ä¸‹è®¾å¤‡ä¸­çš„æ–‡ä»¶å’Œç”µè„‘ä¸­çš„æ–‡ä»¶ sha256sum å€¼ï¼Œå…·ä½“æ–¹æ³•è¯·è‡ªæ€§æœç´¢æˆ–è€…é—® ChatGPTã€‚ ## ä¸Šç”µå¯åŠ¨é»‘å±ï¼Œå±å¹•æ— æ˜¾ç¤º è¯·çœ‹ [MaixCAM FAQ](https://wiki.sipeed.com/hardware/zh/maixcam/faq.html) ## é€šè¿‡ USB è¿æ¥äº†ç”µè„‘å’Œ MaixCAM ä¸ºä»€ä¹ˆç”µè„‘æ²¡æœ‰å‡ºç°ä¸²å£ï¼Ÿ MaixCAM çš„ USB å£æ˜¯èŠ¯ç‰‡çš„ USB2.0 æ¥å£ï¼Œä¸æ˜¯ USB è½¬ä¸²å£æ¥å£ï¼Œæ‰€ä»¥æ’ä¸Šç”µè„‘ä¸ä¼šå‡ºç°ä¸²å£ï¼Œè¿™æ˜¯æ­£å¸¸ç°è±¡ã€‚ æ²¡æœ‰ USB è½¬ä¸²å£æ€ä¹ˆé€šä¿¡å‘¢ï¼Ÿ é»˜è®¤ USB ä¼šæ¨¡æ‹Ÿå‡º USB ç½‘å¡ï¼Œæ‰€ä»¥å½“ä½ å°† USB æ’ä¸Šç”µè„‘æ—¶ä¼šå‡ºç°è™šæ‹Ÿç½‘å¡ï¼ŒæŒ‰ç…§ [å¿«é€Ÿå¼€å§‹](./index.html) ä¸­çš„è¯´æ˜å¯ä»¥ä½¿ç”¨ MaixVision ä¸ MaixCAM é€šä¿¡å®ç°ä»£ç è¿è¡Œã€å›¾åƒé¢„è§ˆã€æ–‡ä»¶ç®¡ç†ç­‰åŠŸèƒ½ã€‚ å¦å¤–ï¼Œå› ä¸º USB æ¨¡æ‹Ÿäº†ç½‘å¡ï¼Œæ‰€ä»¥ä½ ä¹Ÿå¯ä»¥ç”¨é€šç”¨çš„ SSH è½¯ä»¶è¿æ¥ MaixCAMï¼Œå®ç°é€šä¿¡ã€‚ æˆ–è€…ä½ ä¹Ÿå¯ä»¥è¿æ¥ WiFi å’Œç”µè„‘åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸‹é€šä¿¡ã€‚ å¦‚æœä½ è¦ä½¿ç”¨ä¸²å£ï¼Œåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š 1. ä¸²å£å’Œç”µè„‘é€šä¿¡ï¼šéœ€è¦è‡ªè¡Œè´­ä¹°ä»»æ„ä¸€æ¬¾ USB è½¬ä¸²å£æ¨¡å—æ¥è¿æ¥ç”µè„‘çš„ USB å’Œæ¿å­çš„ä¸²å£ï¼ˆå¯¹äºMaixCAM æ˜¯ UART0 çš„ A16(TX) å’Œ A17(RX) å¼•è„šï¼Œæˆ–è€…è¿æ¥ MaixCAM å¥—é¤é€çš„ USB è½¬æ¥æ¿å¼•å‡ºçš„ä¸¤ä¸ª TX RX å¼•è„šï¼Œä¹Ÿæ˜¯ A16 A17 å¼•è„šï¼Œæ˜¯ç­‰æ•ˆçš„ï¼‰ 2. ä¸²å£å’Œå…¶å®ƒ MCU/SOC é€šä¿¡: ç›´æ¥è¿æ¥ MaixCAM çš„ A16(TX)å’Œ A17(RX) åˆ° å•ç‰‡æœºçš„ RX å’Œ TX å¼•è„šå³å¯ã€‚ ## çº¢è‰²å±å¹•ï¼Œæç¤ºåˆå§‹åŒ–æ˜¾ç¤ºå¤±è´¥ï¼Œè¯·æŸ¥çœ‹FAQ ä»å­é¢æ„æ€å¯ä»¥çœ‹åˆ°æ˜¯æ˜¾ç¤ºé©±åŠ¨åˆå§‹åŒ–å¤±è´¥äº†ã€‚ MaixCAM çš„åº•å±‚çš„æ˜¾ç¤ºé©±åŠ¨ç›®å‰ï¼ˆ2024.7ï¼‰æ˜¯å’Œæ‘„åƒå¤´é©±åŠ¨ç»‘å®šåœ¨ä¸€èµ·åˆå§‹åŒ–çš„ï¼Œæ‰€ä»¥é‡åˆ°è¿™ä¸ªé—®é¢˜å¤šåŠæ˜¯æ‘„åƒå¤´é©±åŠ¨åˆå§‹åŒ–å¤±è´¥äº†ã€‚ è§£å†³æ–¹æ³•ï¼š * å°è¯•æ›´æ–°åˆ°æœ€æ–°çš„ç³»ç»Ÿï¼Œå®‰è£…æœ€æ–°çš„è¿è¡Œåº“ï¼ˆé‡è¦ï¼ï¼ï¼ï¼‰å› ä¸ºè¿è¡Œåº“éœ€è¦å’Œç³»ç»Ÿé‡Œé¢çš„é©±åŠ¨é…åˆå·¥ä½œï¼Œç‰ˆæœ¬ä¸ä¸€è‡´å¯èƒ½ä¼šå‡ºé”™ï¼Œæ‰€ä»¥æ›´æ–°åˆ°æœ€æ–°çš„é•œåƒå®‰è£…æœ€æ–°è¿è¡Œåº“å³å¯ä¸€èˆ¬å°±èƒ½è§£å†³ã€‚ * æœ‰å¯èƒ½æ˜¯å¤šä¸ªè¿›ç¨‹ä¸€èµ·ä¼å›¾å ç”¨é©±åŠ¨ï¼Œæœ€ç®€å•ç²—æš´çš„æ–¹æ³•å°±æ˜¯é‡å¯ã€‚ * ç¡¬ä»¶ä¸Šæ‘„åƒå¤´è¿æ¥æœ‰é—®é¢˜ï¼Œæ£€æŸ¥æ‘„åƒå¤´ç¡¬ä»¶è¿æ¥ï¼Œä»¥åŠæ‘„åƒå¤´æ˜¯å¦æŸåã€‚ ## Runtimeã€MaixPyã€ç³»ç»Ÿé•œåƒæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæˆ‘åº”è¯¥å‡çº§å“ªä¸ªï¼Ÿ * **Runtime** æ˜¯è¿è¡Œæ—¶ç¯å¢ƒï¼Œç³»ç»Ÿå¾ˆå¤šåŠŸèƒ½ä¾èµ–è¿™ä¸ªï¼ŒåŒ…æ‹¬ MaixPy ä¹Ÿä¾èµ–æ­¤ç¯å¢ƒï¼Œé‡åˆ°æ— æ³•è¿è¡Œç¨‹åºçš„é—®é¢˜é¦–å…ˆè”ç½‘æ£€æŸ¥æ›´æ–°è¿™ä¸ªã€‚ * ç³»ç»Ÿé•œåƒåŒ…å«äº†åŸºæœ¬çš„æ“ä½œç³»ç»Ÿã€ç¡¬ä»¶é©±åŠ¨ã€å†…ç½®åº”ç”¨ï¼Œä»¥åŠ MaixPy å›ºä»¶ç­‰ï¼Œæ˜¯åŸºç¡€ç¯å¢ƒï¼Œæœ€å¥½æ˜¯ä¿æŒæœ€æ–°, ç‰¹åˆ«æ˜¯åœ¨[Release](https://github.com/sipeed/MaixPy/releases)é¡µé¢ä¸­ç‰ˆæœ¬æ›´æ–°ä¸­æåˆ°äº†ç³»ç»Ÿæœ‰æ›´æ–°ï¼Œåˆ™å¼ºçƒˆå»ºè®®æ›´æ–°ç³»ç»Ÿï¼Œå› ä¸ºæœ‰äº› MaixPy åŠŸèƒ½å¯èƒ½ä¾èµ–ç³»ç»Ÿé‡Œé¢çš„é©±åŠ¨ã€‚ > æ›´æ–°ç³»ç»Ÿä¼šæ ¼å¼åŒ–æ‰€æœ‰ä¹‹å‰çš„æ•°æ®ï¼Œæ›´æ–°å‰è¯·å¤‡ä»½å¥½è®¾å¤‡ç³»ç»Ÿä¸­æœ‰ç”¨çš„æ•°æ®ã€‚ * **MaixPy** æ˜¯è¿è¡Œ MaixPy ç¨‹åºçš„ä¾èµ–åº“ï¼Œå¦‚æœä¸éœ€è¦æ›´æ–°ç³»ç»ŸåŠŸèƒ½ï¼Œä»¥åŠæ›´æ–°æ—¥å¿—ä¸­æ²¡æœ‰æåˆ°ç³»ç»Ÿæœ‰é‡è¦æ›´æ–°æ¯”å¦‚é©±åŠ¨ï¼Œé‚£å¯ä»¥å•ç‹¬æ›´æ–° MaixPy å³å¯ï¼Œä¸è¿‡ä»¥é˜²æœ‰é©±åŠ¨å˜åŒ–ï¼Œæœ€å¥½æ˜¯ç›´æ¥é‡æ–°çƒ§å½•ç³»ç»Ÿã€‚ ## åŠ è½½ MUD æ¨¡å‹æ–‡ä»¶æŠ¥é”™ *****.cvimodel not existsï¼Œ load model failed * æ£€æŸ¥è®¾å¤‡ä¸­ï¼ˆæ³¨æ„ä¸æ˜¯ç”µè„‘é‡Œé¢ï¼Œéœ€è¦ä¼ åˆ°è®¾å¤‡é‡Œé¢å»ï¼‰æ˜¯å¦çœŸçš„å­˜åœ¨ä½ åŠ è½½çš„ .mud æ–‡ä»¶ã€‚ * æ£€æŸ¥ä½ å†™çš„æ¨¡å‹è·¯å¾„å†™é”™æ²¡æœ‰ã€‚ * å¦‚æœä½ æ”¹è¿‡æ–‡ä»¶åï¼Œéœ€è¦æ³¨æ„ï¼š MUD æ–‡ä»¶æ˜¯ä¸€ä¸ªæ¨¡å‹æè¿°æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ç¼–è¾‘ï¼Œå®é™…çš„æ¨¡å‹æ–‡ä»¶æ˜¯ .cvimodel æ–‡ä»¶ï¼ˆå¯¹äºMaixCAM)ï¼Œ.mud æ–‡ä»¶ä¸­æŒ‡å®šäº† .cvimodel çš„æ–‡ä»¶åå’Œè·¯å¾„ï¼Œæ‰€ä»¥å¦‚æœä½ æ”¹åŠ¨äº† `.cvimodel`çš„æ–‡ä»¶åï¼Œé‚£ä¹ˆä¹Ÿè¦ä¿®æ”¹`.mud`æ–‡ä»¶ä¸­çš„`model`è·¯å¾„ï¼Œæ¯”å¦‚è¿™é‡Œ Yolov5 æ¨¡å‹çš„ mudï¼š ```ini [basic] type cvimodel model yolov5s_224_int8.cvimodel [extra] model_type yolov5 input_type rgb mean 0, 0, 0 scale 0.00392156862745098, 0.00392156862745098, 0.00392156862745098 anchors 10,13, 16,30, 33,23, 30,61, 62,45, 59,119, 116,90, 156,198, 373,326 labels person, bicycle, car, motorcycle, airplane, bus, train, truck, boat, traffic light, fire hydrant, stop sign, parking meter, bench, bird, cat, dog, horse, sheep, cow, elephant, bear, zebra, giraffe, backpack, umbrella, handbag, tie, suitcase, frisbee, skis, snowboard, sports ball, kite, baseball bat, baseball glove, skateboard, surfboard, tennis racket, bottle, wine glass, cup, fork, knife, spoon, bowl, banana, apple, sandwich, orange, broccoli, carrot, hot dog, pizza, donut, cake, chair, couch, potted plant, bed, dining table, toilet, tv, laptop, mouse, remote, keyboard, cell phone, microwave, oven, toaster, sink, refrigerator, book, clock, vase, scissors, teddy bear, hair drier, toothbrush ``` è¿™é‡Œåˆ¶å®šäº† `model` ä¸ºç›¸å¯¹è¿™ä¸ª`.mud`æ–‡ä»¶ç›®å½•çš„ `yolov5s_224_int8.cvimodel` æ–‡ä»¶ä¸ºæ¨¡å‹æ–‡ä»¶ï¼Œå¦‚æœä½ æ”¹äº†`yolov5s_224_int8.cvimodel` ä¸ºå…¶å®ƒåï¼Œé‚£ä¹Ÿéœ€è¦æ”¹è¿™é‡Œã€‚ ## MaixVision import maix æ˜¾ç¤ºçº¢è‰²æ³¢æµªçº¿ è¿™æ˜¯ MaixVision çš„ä»£ç æç¤ºåŠŸèƒ½æŠ¥é”™æ‰¾ä¸åˆ° maix æ¨¡å—ã€‚ è¿™é‡Œéœ€è¦ææ¸…æ¥šä¸€ä¸ªæ¦‚å¿µï¼š MaixVision çš„ä»£ç æç¤ºä¾èµ–çš„æ˜¯ç”µè„‘æœ¬åœ°çš„ Python åŒ…ï¼Œä»£ç è¿è¡Œä¾èµ–çš„è®¾å¤‡ç«¯çš„ Python åŒ…ï¼Œæ‰€ä»¥è¦è®© MaixVision èƒ½å¤Ÿæç¤ºå°±è¦åœ¨ç”µè„‘ä¸Šä¹Ÿå®‰è£… Python å’Œ `MaixPy` åŒ…ã€‚å…·ä½“è¯·çœ‹[MaixVision ä½¿ç”¨æ–‡æ¡£](./basic/maixvision.html)ã€‚ ## MaixCAM å¯åŠ¨éå¸¸ç¼“æ…¢ï¼Œç”šè‡³è¶…è¿‡äº† 1 åˆ†é’Ÿï¼Œæˆ–è€…å±å¹•åœ¨é—ªåŠ¨ å¤šåŠæ˜¯ç”±äºä¾›ç”µä¸è¶³é€ æˆçš„ï¼Œ MaixCAM éœ€è¦ 5v 150mA~500mA å·¦å³çš„ç”µå‹å’Œç‚¹æµï¼Œå¦‚æœä½ é‡åˆ°äº†è¿™ç§ç°è±¡ï¼Œå¯ä»¥ä½¿ç”¨ USB è½¬ TTL æ¨¡å—è¿æ¥ MaixCAM çš„ä¸²å£åˆ°ç”µè„‘ï¼Œå¯ä»¥çœ‹åˆ°`Card did not respond to voltage select! : 110` è¿™æ ·çš„å­—æ ·ï¼Œè¯´æ˜ä¾›ç”µä¸è¶³ï¼Œæ¢ä¸€ä¸ªæ›´åŠ çš„ç¨³å®šçš„ä¾›ç”µè®¾å¤‡å³å¯ã€‚ å¯¹äº MaixCAMï¼Œåœ¨å¼€æœºä¼šæœ‰ 400mA çš„ç”µæµï¼Œå¾…æœºä¸”å±å¹•æœ‰æ˜¾ç¤ºéœ€è¦ 250mAï¼Œå…¨é€Ÿè¿è¡Œ AI æ¨¡å‹éœ€è¦ 400mA~500mA çš„ç”µæµï¼Œæ‰€ä»¥ä¿è¯ç”µæºçš„ç¨³å®šæ€§ååˆ†é‡è¦ï¼ ## MaixVision å¯åŠ¨ç¨‹åºä¸€ç›´â€œå¡åœ¨â€œ start running ... MaixVision çš„æ—¥å¿—è¾“å‡ºçª—å£åœ¨å¼€å§‹å¯åŠ¨ç¨‹åºæ˜¯ä¼šæ‰“å°ä¸€å¥`start running ...`ä»£è¡¨ç¨‹åºå¼€å§‹å‘é€åˆ°è®¾å¤‡å¹¶å¼€å§‹æ‰§è¡Œï¼Œ åé¢å†æ‰“å°ï¼ˆè¾“å‡ºï¼‰ä»€ä¹ˆå–å†³äºä½ çš„ç¨‹åºï¼Œæ¯”å¦‚ä½ è°ƒç”¨äº†`print(\"hello\")` åˆ™ä¼šæ‰“å°`hello`ï¼Œå¦‚æœä½ çš„ç¨‹åºæ²¡æœ‰ä»»ä½•æ‰“å°é‚£å°±ä¸ä¼šæœ‰ä»»ä½•æ—¥å¿—ã€‚ã€‚ã€‚ æ‰€ä»¥å®é™…ä¸Šä¸æ˜¯å¡ä½äº†ï¼Œè€Œæ˜¯ä½ çš„ç¨‹åºå°±æ²¡æœ‰è¾“å‡ºè¿‡ä»»ä½•ä¸œè¥¿ï¼Œè‡ªç„¶ä¹Ÿå°±ä¸ä¼šæ˜¾ç¤ºä»»ä½•æ—¥å¿—äº†ï¼Œå¯ä»¥å°è¯•åœ¨è‡ªå·±çš„ç¨‹åºä¸­åŠ `print(\"xxx\")`æ¥æ‰“å°ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬è°ƒè¯•ç¨‹åºæœ€ç®€å•çš„æ–¹æ³•ã€‚ ## ä¸ºä»€ä¹ˆç¡¬ä»¶æœ‰ 256MB å†…å­˜ï¼Œåœ¨ç³»ç»Ÿé‡Œåªèƒ½ç”¨ 128MB å†…å­˜å‘¢ï¼Ÿ å› ä¸ºå…¶å®ƒå†…å­˜ç»™åº•å±‚é©±åŠ¨å’Œå†…æ ¸é¢„ç•™äº†ï¼Œç”¨äºæ‘„åƒå¤´ã€å±å¹•ã€ç¡¬ä»¶ç¼–è§£ç ã€NPU ç­‰é©±åŠ¨ä½¿ç”¨ï¼Œå¯ä»¥é€šè¿‡ `cat /sys/kernel/debug/ion/cvi_carveout_heap_dump/summary` çœ‹åˆ°é©±åŠ¨ä½¿ç”¨çš„å†…å­˜ï¼ˆç®—èƒ½ç‰¹æœ‰ï¼Œå« ION å†…å­˜ï¼‰ï¼Œä»¥åŠå…¶å®ƒå†…å­˜å¯ä»¥é€šè¿‡`cat /proc/meminfo`çœ‹åˆ°ï¼Œå¦‚æœä½ æƒ³è°ƒæ•´å†…å­˜åˆ†é…ï¼Œéœ€è¦è‡ªå·±ç¼–è¯‘ç³»ç»Ÿï¼Œä¿®æ”¹ç³»ç»Ÿçš„`LicheeRV Nano Buildbuild/boards/sg200x/sg2002_licheervnano_sd/memmap.py` æ–‡ä»¶ä¸­çš„ `ION_SIZE` æ¥è°ƒæ•´ï¼ˆçœ‹[å®šåˆ¶ç³»ç»Ÿæ–‡æ¡£](./pro/compile_os.html)ï¼‰ã€‚ ## ä¸ºä»€ä¹ˆæ— æ³•å®‰è£…è¿è¡Œåº“ï¼Œæç¤ºé”™è¯¯ è¯·æ±‚å¤±è´¥! * è¯·ä¿è¯è®¾å¤‡å·²ç»æˆåŠŸè¿æ¥åˆ°äº’è”ç½‘ï¼Œå¯ä»¥æ¢ä¸€ä¸ªæ‰‹æœºçƒ­ç‚¹è¯•è¯•ã€‚ * ç¡®ä¿ç³»ç»Ÿé•œåƒæ˜¯çƒ§å½•çš„æœ€æ–°çš„ã€‚ * å¦‚æœæç¤º DNS è§£æå¤±è´¥ï¼Œå¯èƒ½æ—¶ç½‘ç»œ DNS è®¾ç½®é—®é¢˜ï¼Œå¯ä»¥æ¢ä¸€ä¸ªæ‰‹æœºçƒ­ç‚¹è¯•è¯•ï¼Œæˆ–è€…æ‰‹åŠ¨ä¿®æ”¹ `/boot/resolv.conf`(åªä¿®æ”¹è¿™ä¸ªæ–‡ä»¶éœ€è¦é‡å¯) å’Œ `/etc/resolv.conf`ï¼ˆä¿®æ”¹äº†è¿™ä¸ªæ–‡ä»¶ä¸ç”¨é‡å¯ï¼Œé‡å¯å°±æ˜¯æŠŠå‰è€…æ‹·è´è¦†ç›–åˆ°è¿™ä¸ªæ–‡ä»¶ï¼‰ä¸­çš„ DNS æœåŠ¡å™¨è®¾ç½®ã€‚ * ç¡®ä¿ä½ æ˜¯ä» Sipeed è´­ä¹°çš„æ­£ç‰ˆ MaixCAMã€‚ * å’¨è¯¢å®¢æœï¼Œå¸¦ä¸Šç³»ç»Ÿç‰ˆæœ¬å¯ä»¥ device_key ï¼ˆå¯ä»¥è¿æ¥ä¸Š MaixVision ç‚¹å‡»æ–­å¼€è¿æ¥æŒ‰é’®åçœ‹åˆ°ï¼Œæœ‰å±å¹•çš„ä¹Ÿå¯ä»¥åœ¨`ç³»ç»Ÿè®¾ç½® >ç³»ç»Ÿä¿¡æ¯`ä¸­çœ‹åˆ°ï¼‰"},"/maixpy/doc/zh/basic/app_usage.html":{"title":"MaixCAM MaixPy åº”ç”¨ä½¿ç”¨è¯´æ˜","content":" title: MaixCAM MaixPy åº”ç”¨ä½¿ç”¨è¯´æ˜ å¼€æœºåä¼šè‡ªåŠ¨è¿›å…¥åº”ç”¨é€‰æ‹©ç•Œé¢ï¼Œå†…ç½®å„ç§åº”ç”¨å‡å‘å¸ƒåœ¨ [MaixHub åº”ç”¨å•†åº—](https://maixhub.com/app)ï¼Œ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å¯¹åº”åº”ç”¨çš„ä»‹ç»å’Œä½¿ç”¨è¯´æ˜ã€‚ ä¸Šæ‰‹ç”¨å¾—æ¯”è¾ƒå¤šçš„æ˜¯ `è®¾ç½® > è¯­è¨€`ï¼Œ ä»¥åŠ `è®¾ç½® > WiFi`ï¼Œ`åº”ç”¨å•†åº—`åº”ç”¨å¯ä»¥ç”¨æ¥å‡çº§å’Œå®‰è£…åº”ç”¨ï¼Œè¿æ¥ä¸Šå¯ä»¥è¿æ¥äº’è”ç½‘çš„ WiFi åå³å¯åœ¨[MaixHub åº”ç”¨å•†åº—](https://maixhub.com/app)æ‰«ç å®‰è£…åº”ç”¨ã€‚ å¦å¤–ï¼Œä½ ç¼–å†™çš„åº”ç”¨ä¹Ÿå¯ä»¥ä¸Šä¼ åˆ°[MaixHub åº”ç”¨å•†åº—](https://maixhub.com/app)åˆ†äº«ç»™å…¶ä»–äººä½¿ç”¨ï¼Œè´¨é‡åˆæ ¼å’Œä¼˜ç§€çš„åº”ç”¨éƒ½ä¼šå¾—åˆ°å®˜æ–¹çº¢åŒ…æ‰“èµï¼Œä¼˜ç§€åº”ç”¨ä¹Ÿä¼šå¾—åˆ°å¤§å®¶çš„èµåŒå’Œæ”¯æŒã€‚ æ— è®ºæ˜¯å°åˆ°ä¸€ä¸ªé‡‡é›†ä¼ æ„Ÿå™¨çš„æ•°æ®å°åº”ç”¨è¿˜æ˜¯åŠŸèƒ½å¤æ‚çš„åº”ç”¨ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥åˆ›é€ æ›´å¤šæœ‰è¶£çš„ä¸œè¥¿å§ï¼"},"/maixpy/doc/zh/basic/python_pkgs.html":{"title":"MaixCAM MaixPy æ·»åŠ é¢å¤–çš„ Python è½¯ä»¶åŒ…","content":" title: MaixCAM MaixPy æ·»åŠ é¢å¤–çš„ Python è½¯ä»¶åŒ… ## ç®€ä»‹ MaixPy åŸºäº Python è¯­è¨€ï¼Œæä¾›äº†å¤§é‡æ–¹ä¾¿åµŒå…¥å¼åº”ç”¨å¼€å‘çš„åŠŸèƒ½å’Œ APIï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å®ƒçš„ Python åŒ…æ¥æ‰©å±•åŠŸèƒ½ã€‚ ## å®‰è£…é¢å¤–çš„ Python åŒ… > æ³¨æ„å¯èƒ½ä¸æ˜¯æ‰€æœ‰ Python åŒ…éƒ½æ”¯æŒï¼Œä¸€èˆ¬åªæ”¯æŒçº¯ Python åŒ…ï¼Œä¸æ”¯æŒ C æ‰©å±•åŒ…ï¼Œ C æ‰©å±•åŒ…å¯èƒ½éœ€è¦ä½ æ‰‹åŠ¨åœ¨ç”µè„‘äº¤å‰ç¼–è¯‘ï¼ˆæ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå°±ä¸ä»‹ç»äº†ï¼‰ã€‚ ### æ–¹æ³•ä¸€ï¼š ä½¿ç”¨ Python ä»£ç æ¥å®‰è£… åœ¨ MaixVision ä¸­ä½¿ç”¨ Python ä»£ç æ¥å®‰è£…ä½ éœ€è¦çš„åŒ…ï¼Œæ¯”å¦‚ï¼š ```python import os os.system(\"pip install åŒ…å\") ``` è¦æ›´æ–°ä¸€ä¸ªåŒ…ï¼Œå¯ä»¥ä½¿ç”¨ï¼š ```python import os os.system(\"pip install upgrade åŒ…å\") ``` ### æ–¹æ³•äºŒï¼š ç»ˆç«¯ä½¿ç”¨ pip å‘½ä»¤å®‰è£… ä½¿ç”¨[Linux åŸºç¡€](./linux_basic.html)ä¸­ä»‹ç»çš„ç»ˆç«¯ä½¿ç”¨æ–¹æ³•ï¼Œä½¿ç”¨ `pip install åŒ…å` å®‰è£…ä½ éœ€è¦çš„åŒ…ã€‚"},"/maixpy/doc/zh/basic/app.html":{"title":"MaixCAM MaixPy åº”ç”¨å¼€å‘å’Œåº”ç”¨å•†åº—","content":" title: MaixCAM MaixPy åº”ç”¨å¼€å‘å’Œåº”ç”¨å•†åº— ## åº”ç”¨ç”Ÿæ€ç®€ä»‹ ä¸ºäº†è®©å¼€å‘æ¿åšåˆ°å¼€ç®±å³ç”¨ï¼Œä»¥åŠæ–¹ä¾¿ç”¨æˆ·æ— é—¨æ§›åœ°ä½¿ç”¨ï¼Œä»¥åŠæ–¹ä¾¿å¼€å‘è€…åˆ†äº«è‡ªå·±çš„æœ‰è¶£åº”ç”¨ï¼Œå¹¶ä¸”èƒ½æœ‰æœ‰æ•ˆçš„æ¸ é“è·å–åˆ°åé¦ˆç”šè‡³æ˜¯æ”¶ç›Šï¼Œæˆ‘ä»¬æ¨å‡ºäº†ä¸€ä¸ªç®€æ˜“çš„åº”ç”¨æ¡†æ¶ï¼ŒåŒ…æ‹¬ï¼š * **[åº”ç”¨å•†åº—](https://maixhub.com/app)**ï¼š å¼€å‘è€…ä¸Šä¼ åˆ†äº«åº”ç”¨ï¼Œç”¨æˆ·æ— éœ€å¼€å‘ç›´æ¥ä¸‹è½½ä½¿ç”¨ï¼Œå¼€å‘è€…å¯ä»¥è·å–åˆ°ä¸€å®šçš„ç°é‡‘æ”¶ç›Šï¼ˆæ¥è‡ª MaixHub å®˜æ–¹ä»¥åŠç”¨æˆ·æ‰“èµï¼‰ã€‚ * **å‡ºå‚å†…ç½®å¤§é‡åº”ç”¨**ï¼š å®˜æ–¹æä¾›äº†ä¸€äº›å¸¸ç”¨çš„åº”ç”¨ï¼Œæ¯”å¦‚æ‰¾è‰²å—ã€AI ç‰©ä½“æ£€æµ‹è¿½è¸ªã€æ‰¾äºŒç»´ç ã€äººè„¸è¯†åˆ«ç­‰ç­‰ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºä¸²å£æ¨¡å—ç›´æ¥ä½¿ç”¨ã€‚ * **MaixPy + MaixCDK** è½¯ä»¶å¼€å‘åŒ…ï¼šä½¿ç”¨ [MaixPy](https://github.com/sipeed/maixpy) æˆ–è€… [MaixCDK](https://github.com/sipeed/MaixCDK) å¯ä»¥ç”¨ Python æˆ–è€… C/C++ è¯­è¨€å¿«é€Ÿå¼€å‘åµŒå…¥å¼ AI è§†è§‰å¬è§‰åº”ç”¨ï¼Œè¶…é«˜æ•ˆç‡å®ç°ä½ çš„æœ‰è¶£æƒ³æ³•ã€‚ * **MaixVision** é…å¥—ç”µè„‘ç«¯å¼€å‘å·¥å…·: å…¨æ–°çš„ç”µè„‘ç«¯ä»£ç å¼€å‘å·¥å…·ï¼Œå¿«é€Ÿä¸Šæ‰‹ã€è°ƒè¯•ã€è¿è¡Œã€ä¸Šä¼ ä»£ç ã€å®‰è£…åº”ç”¨åˆ°è®¾å¤‡ï¼Œä¸€é”®å¼å¼€å‘ï¼Œç”šè‡³æ”¯æŒå›¾åƒåŒ–ç§¯æœ¨å¼ç¼–ç¨‹ï¼Œå°å­¦ç”Ÿä¹Ÿèƒ½è½»æ¾ä¸Šæ‰‹ã€‚ å¤§å®¶å¯ä»¥å¤šå¤šå…³æ³¨åº”ç”¨å•†åº—ï¼Œä¹Ÿå¯ä»¥åœ¨åº”ç”¨å•†åº—ä¸­åˆ†äº«è‡ªå·±çš„åº”ç”¨ï¼Œå¤§å®¶ä¸€èµ·å…±å»ºæ´»è·ƒçš„ç¤¾åŒºã€‚ ## æ‰“åŒ…åº”ç”¨ ä½¿ç”¨ MaixPy + MaixVison å¯ä»¥æ–¹ä¾¿åœ°å¼€å‘ã€æ‰“åŒ…ã€å®‰è£…åº”ç”¨ï¼š * åœ¨ MaixVision ä¸­ä½¿ç”¨ MaixPy å¼€å‘åº”ç”¨ç¨‹åºï¼Œå¯ä»¥æ˜¯å•ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå·¥ç¨‹ç›®å½•ã€‚ * è¿æ¥è®¾å¤‡ã€‚ * ç‚¹ç‚¹å‡» MaixVision å·¦ä¸‹è§’çš„ å®‰è£… æŒ‰é’®ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªç•Œé¢å¡«å†™åº”ç”¨çš„åŸºæœ¬ä¿¡æ¯ï¼Œid æ˜¯ç”¨æ¥åˆ¤åˆ«åº”ç”¨çš„ idï¼Œä¸€ä¸ªè®¾å¤‡ä¸èƒ½åŒæ—¶å®‰è£…ç›¸åŒ id çš„ä¸åŒåº”ç”¨ï¼Œæ‰€ä»¥ id åº”è¯¥ä¸ MaixHub ä¸Šé¢å·²ç»æœ‰çš„åº”ç”¨ id ä¸åŒï¼Œåº”ç”¨åå­—å¯ä»¥é‡å¤ã€‚ä»¥åŠå›¾æ ‡ç­‰ã€‚ * ç‚¹å‡»æ‰“åŒ…åº”ç”¨ï¼Œä¼šå°†åº”ç”¨æ‰“åŒ…æˆä¸€ä¸ªå®‰è£…åŒ…ï¼Œå¦‚æœä½ è¦ä¸Šä¼ åˆ° [MaixHub åº”ç”¨å•†åº—](https://maixhub./com/app)ï¼Œç”¨è¿™ä¸ªæ‰“åŒ…å¥½çš„æ–‡ä»¶å³å¯ã€‚ * ç‚¹å‡» å®‰è£…åº”ç”¨ï¼Œè¿™ä¼šå°†æ‰“åŒ…å¥½çš„åº”ç”¨å®‰è£…åˆ°è®¾å¤‡ã€‚ * æ–­å¼€ä¸è®¾å¤‡çš„è¿æ¥ï¼Œå°±èƒ½çœ‹åˆ°è®¾å¤‡åŠŸèƒ½é€‰æ‹©ç•Œé¢å¤šäº†ä¸€ä¸ªä½ çš„åº”ç”¨ï¼Œç›´æ¥ç‚¹è¿›å»å°±èƒ½è¿è¡Œã€‚ > å¦‚æœä½ ç”¨ MaixCDK å¼€å‘ï¼Œä½¿ç”¨ `maixcdk relrease` å°±èƒ½æ‰“åŒ…å‡ºæ¥ä¸€ä¸ªåº”ç”¨ï¼Œå…·ä½“çœ‹ MaixCDK çš„æ–‡æ¡£ã€‚ ## é€€å‡ºåº”ç”¨ å¦‚æœä½ åªæ˜¯å†™äº†æ¯”è¾ƒç®€å•çš„åº”ç”¨ï¼Œæ²¡æœ‰åšç•Œé¢å’Œè¿”å›æŒ‰é’®ï¼Œé»˜è®¤å¯ä»¥æŒ‰è®¾å¤‡ä¸Šçš„åŠŸèƒ½æŒ‰é”®ï¼ˆä¸€èˆ¬æ˜¯ USER æˆ–è€… FUNC æˆ–è€… OK æŒ‰é’®ï¼‰æˆ–è€…è¿”å›æŒ‰é’®ï¼ˆå¦‚æœæœ‰è¿™ä¸ªæŒ‰é”®ï¼ŒMaixCAM é»˜è®¤æ²¡æœ‰è¿™ä¸ªæŒ‰é”®ï¼‰æ¥é€€å‡ºåº”ç”¨ã€‚ ## å®‰è£…åº”ç”¨ * **æ–¹æ³•ä¸€**ï¼š è®¾å¤‡ä½¿ç”¨`åº”ç”¨å•†åº—`åº”ç”¨ï¼Œä»[åº”ç”¨å•†åº—](https://maixhub.com/app)æ‰¾åˆ°åº”ç”¨ï¼Œè®¾å¤‡è”ç½‘åï¼Œæ‰«ç å®‰è£…ã€‚ * **æ–¹æ³•äºŒ**ï¼š ä½¿ç”¨å®‰è£…åŒ…æœ¬åœ°å®‰è£…ï¼Œå°†å®‰è£…åŒ…ä¼ è¾“åˆ°è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿï¼Œæ¯”å¦‚`/root/my_app_v1.0.0.zip`ï¼Œç„¶åæ‰§è¡Œä»£ç ï¼Œæ³¨æ„ä¿®æ”¹`pkg_path`å˜é‡çš„è·¯å¾„ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨`MaixPy`çš„ `examples/tools/install_app.py`æ‰¾åˆ°æœ¬ä»£ç : ```python import os def install_app(pkg_path): if not os.path.exists(pkg_path): raise Exception(f\"package {pkg_path} not found\") cmd f\"/maixapp/apps/app_store/app_store install {pkg_path}\" err_code os.system(cmd) if err_code ! 0: print(\"[ERROR] Install failed, error code:\", err_code) else: print(f\"Install {pkg_path} success\") pkg_path \"/root/my_app_v1.0.0.zip\" install_app(pkg_path) ``` * **æ–¹æ³•ä¸‰**: * å¦‚æœæ˜¯ä½¿ç”¨`MaixPy`å¼€å‘çš„åº”ç”¨ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ï¼ˆåŒ…å«`app.yaml`å’Œ`main.py`ï¼‰æ‰§è¡Œ`maixtool deploy`ä¼šå¼¹å‡ºä¸€ä¸ªäºŒç»´ç ï¼Œä¿æŒè®¾å¤‡å’Œç”µè„‘åœ¨åŒä¸€å±€åŸŸç½‘ï¼Œè®¾å¤‡ä½¿ç”¨åº”ç”¨å•†åº—æ‰«æå¯¹åº”çš„å±€åŸŸç½‘åœ°å€äºŒç»´ç å°±èƒ½åœ¨çº¿å®‰è£…ã€‚ * å¦‚æœæ˜¯ä½¿ç”¨`MaixCDK`å¼€å‘çš„åº”ç”¨ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ`maixcdk deploy`ä¹Ÿä¼šå‡ºç°äºŒç»´ç ï¼Œä¿æŒè®¾å¤‡å’Œç”µè„‘åœ¨åŒä¸€å±€åŸŸç½‘ï¼Œè®¾å¤‡ä½¿ç”¨åº”ç”¨å•†åº—æ‰«æå¯¹åº”çš„å±€åŸŸç½‘åœ°å€äºŒç»´ç å°±èƒ½åœ¨çº¿å®‰è£…ã€‚ ## åº”ç”¨å¼€å‘åŸºæœ¬å‡†åˆ™ * å› ä¸ºé»˜è®¤éƒ½é…äº†è§¦æ‘¸å±å¹•ï¼Œæ¨èéƒ½å†™ä¸€ä¸ªç®€å•çš„ç•Œé¢æ˜¾ç¤ºï¼Œæœ€å¥½æœ‰è§¦æ‘¸äº¤äº’ã€‚å®ç°æ–¹æ³•å¯ä»¥åœ¨ä¾‹å­é‡Œé¢æ‰¾æ‰¾å‚è€ƒã€‚ * ç•Œé¢å’ŒæŒ‰é’®ä¸è¦å¤ªå°ï¼Œå› ä¸º MaixCAM é»˜è®¤çš„å±å¹•æ˜¯ 2.3å¯¸ 552x368åˆ†è¾¨ç‡ï¼ŒPPI æ¯”è¾ƒé«˜å±å¹•æ¯”è¾ƒå°ï¼Œè¦è®©æ‰‹æŒ‡èƒ½å¾ˆå®¹æ˜“æˆ³åˆ°å¹¶ä¸”ä¸ä¼šç‚¹é”™ã€‚ * æ¯ä¸ªåº”ç”¨å®ç°çš„ä¸»è¦åŠŸèƒ½å®ç°ä¸€ä¸ªç®€å•çš„ä¸²å£äº¤äº’ï¼ŒåŸºäº[ä¸²å£åè®®](https://github.com/sipeed/MaixCDK/blob/master/docs/doc/convention/protocol.md) ï¼ˆ[ä¾‹ç¨‹](https://github.com/sipeed/MaixPy/tree/main/examples/communication/protocol)ï¼‰,è¿™æ ·ç”¨æˆ·å¯ä»¥ç›´æ¥å½“æˆä¸²å£æ¨¡å—ä½¿ç”¨ï¼Œæ¯”å¦‚äººè„¸æ£€æµ‹åº”ç”¨ï¼Œå¯ä»¥åœ¨æ£€æµ‹åˆ°äººè„¸åé€šè¿‡ä¸²å£è¾“å‡ºåæ ‡ã€‚"},"/maixpy/doc/zh/basic/os.html":{"title":"MaixCAM MaixPy å‡çº§å’Œçƒ§å½•ç³»ç»Ÿ","content":" title: MaixCAM MaixPy å‡çº§å’Œçƒ§å½•ç³»ç»Ÿ ## ä»‹ç» å¦‚æœä½ è´­ä¹°äº†å®˜æ–¹ï¼ˆSipeedï¼‰çš„å¸¦ TF å¡çš„å¥—é¤ï¼Œä¸€èˆ¬æ¥è¯´å‡ºå‚å·²ç»çƒ§å½•å¥½äº†ç³»ç»Ÿï¼Œå¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ç›´æ¥ä½¿ç”¨ã€‚ ä½†æ˜¯ä¸ºäº†é˜²æ­¢å‡ºå‚çƒ§å½•çš„ç³»ç»Ÿç‰ˆæœ¬è¿‡æ—§ï¼Œå¼ºçƒˆå»ºè®®å…ˆæŒ‰ç…§æ•™ç¨‹å‡çº§åˆ°æœ€æ–°çš„ç³»ç»Ÿã€‚ ## å¦‚ä½•ç¡®è®¤ç³»ç»Ÿæ˜¯å¦éœ€è¦å‡çº§ * åœ¨å¼€æœºåçš„åŠŸèƒ½é€‰æ‹©ç•Œé¢ï¼Œç‚¹å‡»`è®¾ç½®`ï¼Œç„¶åç‚¹å‡»`è®¾å¤‡ä¿¡æ¯`ï¼Œå¯ä»¥çœ‹åˆ°ç³»ç»Ÿçš„ç‰ˆæœ¬å·ã€‚ * åˆ°[MaixPy å‘å¸ƒå†å²é¡µé¢](https://github.com/sipeed/MaixPy/releases)æŸ¥çœ‹æ›´æ–°æ—¥å¿—ï¼Œé‡Œé¢æœ‰ MaixPy å›ºä»¶å’Œç³»ç»Ÿé•œåƒçš„æ›´æ–°è¯´æ˜ï¼Œå¦‚æœåœ¨ä½ çš„ç‰ˆæœ¬åæœ‰é‡è¦æ›´æ–°ï¼Œå»ºè®®å‡çº§ã€‚ > å¦‚æœæœ€æ–°ç³»ç»Ÿå’Œå½“å‰ç³»ç»Ÿå¯¹æ¯”åªæ˜¯ MaixPy å›ºä»¶çš„å¸¸è§„æ›´æ–°ï¼Œä¹Ÿå¯ä»¥ä¸å‡çº§ï¼Œåœ¨ `è®¾ç½®` ä¸­çš„ `æ›´æ–° MaixPy` ä¸­å•ç‹¬æ›´æ–° `MaixPy` å³å¯ã€‚ ## è·å¾—æœ€æ–°ç³»ç»Ÿ åœ¨ [MaixPy å‘å¸ƒé¡µé¢](https://github.com/sipeed/MaixPy/releases) æ‰¾åˆ°æœ€æ–°çš„ç³»ç»Ÿé•œåƒæ–‡ä»¶ï¼Œæ¯”å¦‚`maixcam_os_20240401_maixpy_v4.1.0.xz`ã€‚ > ä¸­å›½å›½å†…ç”¨æˆ·ä¸‹è½½é€Ÿåº¦æ…¢å¯ä»¥ç”¨è¿…é›·ä¸‹è½½ï¼Œé€Ÿåº¦å¯èƒ½ä¼šå¿«ä¸€äº›ã€‚ å¤‡ç”¨åœ°å€ï¼š * [Sourceforge](https://sourceforge.net/projects/maixpy/files/) ï¼ˆåŒæ­¥å¯èƒ½ä¸åŠæ—¶ï¼Œå»ºè®®ä¼˜å…ˆä¸Šé¢çš„æ–¹å¼ï¼‰ ## çƒ§å½•ç³»ç»Ÿåˆ° MaixCAM å‚è€ƒ ç¡¬ä»¶æ–‡æ¡£ä¸­çš„ [MaixCAM ç³»ç»Ÿçƒ§å½•](https://wiki.sipeed.com/hardware/zh/maixcam/os.html) æ•™ç¨‹ï¼Œæ³¨æ„é‡Œé¢èƒ½æ»¡è¶³ `USB çƒ§å½•`çš„æ¡ä»¶åˆ™æ¨èä½¿ç”¨ `USB çƒ§å½•`æ–¹å¼ï¼ŒUSB çƒ§å½•æ–¹å¼ä¸ç”¨æ‹” TF å¡ã€‚"},"/maixpy/doc/zh/basic/linux_basic.html":{"title":"Linux åŸºç¡€çŸ¥è¯†","content":" title: Linux åŸºç¡€çŸ¥è¯† ## ç®€ä»‹ æœ¬ç« å†…å®¹å¯¹äºåˆšå…¥é—¨çš„åŒå­¦æ¥è¯´ï¼Œå¯ä»¥å…ˆè·³è¿‡æ­¤ç« èŠ‚ï¼Œåœ¨å­¦ä¼š MaixPy åŸºç¡€å¼€å‘åå†æ¥å­¦ä¹ ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ æœ€æ–°çš„ MaixPy æ”¯æŒçš„ MaixCAM ç¡¬ä»¶æ”¯æŒè·‘ Linux ç³»ç»Ÿï¼Œæ‰€ä»¥ MaixPy åº•å±‚éƒ½æ˜¯åŸºäº Linux ç³»ç»Ÿè¿›è¡Œå¼€å‘çš„ã€‚ è™½ç„¶ Sipeed å¼€å‘çš„ MaixPy å·²ç»ä¸ºå¼€å‘è€…ä»¬åšäº†å¾ˆå¤šå·¥ä½œï¼Œå³ä½¿ä¸çŸ¥é“ Linux ç³»ç»ŸçŸ¥è¯†ä¹Ÿèƒ½æ„‰å¿«ä½¿ç”¨ï¼Œä½†æ˜¯ä»¥é˜²åœ¨æŸäº›æƒ…å†µä¸‹éœ€è¦ä¸€äº›åº•å±‚æ“ä½œï¼Œä»¥åŠæ–¹ä¾¿æœªæ¥è§¦è¿‡ Linux çš„å¼€å‘è€…å­¦ä¹ ï¼Œè¿™é‡Œå†™ä¸€äº› Linux åŸºç¡€çŸ¥è¯†ã€‚ ## ä¸ºä»€ä¹ˆéœ€è¦ Linux ç³»ç»Ÿ å…·ä½“çš„åŸå› å¤§å®¶å¯ä»¥è‡ªè¡ŒæŸ¥é˜…ï¼Œè¿™é‡Œç”¨é€šä¿—çš„çœ‹èµ·æ¥ä¸å¤ªä¸“ä¸šçš„è¯è¯­ç®€å•ä¸¾å‡ ä¸ªä¾‹å­æ–¹ä¾¿åˆå­¦è€…ç†è§£ï¼š * åœ¨å•ç‰‡æœºä¸­ï¼Œæˆ‘ä»¬çš„ç¨‹åºæ˜¯ä¸€ä¸ªæ­»å¾ªç¯ç¨‹åºï¼Œç”¨ä¸Š Linux åæˆ‘ä»¬å¯ä»¥åŒæ—¶è·‘å¾ˆå¤šç¨‹åºï¼Œæ¯ä¸ªç¨‹åºçœ‹èµ·æ¥éƒ½ç‹¬ç«‹åœ¨åŒæ—¶è¿è¡Œï¼Œæ¯ä¸ªç¨‹åºå…·ä½“æ€ä¹ˆæ‰§è¡Œçš„ç”±æ“ä½œç³»ç»Ÿå®ç°ã€‚ * åŸºäº Linux çš„å¼€å‘è€…ä¼—å¤šï¼Œéœ€è¦åŠŸèƒ½å’Œé©±åŠ¨å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ‰¾åˆ°ï¼Œä¸éœ€è¦è‡ªå·±å†å®ç°ä¸€éã€‚ * åŸºäº Linux é…å¥—çš„è½¯ä»¶å·¥å…·ä¸°å¯Œï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œå¼€å‘å’Œè°ƒè¯•ï¼Œæ¯”å¦‚åœ¨æœ¬æ•™ç¨‹æ²¡æœ‰æåˆ°çš„ä¸€äº› Linux é€šç”¨å·¥å…·ç†è®ºä¸Šä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚ ## æ–‡ä»¶ç³»ç»Ÿ ä»€ä¹ˆæ˜¯æ–‡ä»¶ç³»ç»Ÿï¼Ÿ * å°±åƒç”µè„‘çš„æ–‡ä»¶ç³»ç»Ÿä¸€æ ·ï¼ŒLinux ä¸Šä¼šå°†ç¡¬ä»¶ç£ç›˜ç”¨æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œç®¡ç†ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å‘ç£ç›˜è¯»å†™æ•°æ®ã€‚ * å¯¹äºå­¦è¿‡å•ç‰‡æœºæ²¡æœ‰æ¥è§¦è¿‡æ–‡ä»¶ç³»ç»Ÿå¼€å‘çš„åŒå­¦æ¥è®²ï¼Œå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬æœ‰ä¸€ä¸ª Flash æˆ–è€… TF å¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ API è¯»å†™ Flash å­˜å–æ•°æ®ï¼Œæ–­ç”µåä¹Ÿèƒ½ä¿å­˜æ•°æ®ï¼Œä½†æ˜¯ Flash å…·æœ‰è¯»å†™å¯¿å‘½ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦å†™ä¸€å¥—ç¨‹åºå»ä¿è¯ Flash è¯»å†™å¯¿å‘½ï¼Œè€Œæ–‡ä»¶ç³»ç»Ÿå°±å¯ä»¥ç†è§£æˆè¿™æ ·ä¸€å¥—æˆç†Ÿçš„ç¨‹åºï¼Œæ–‡ä»¶ç³»ç»Ÿå¸®æˆ‘ä»¬å®Œæˆäº†å…·ä½“å¦‚ä½•ç®¡ç† Flash ç©ºé—´å’Œè¯»å†™ï¼Œæˆ‘ä»¬åªéœ€è°ƒç”¨æ–‡ä»¶ç³»ç»Ÿçš„ API å³å¯ï¼Œå¤§å¤§å‡å°‘äº†æˆ‘ä»¬çš„å¼€å‘å·¥ä½œé‡å¹¶ä¸”ç”¨æˆç†Ÿçš„ç¨‹åºä¿è¯äº†ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚ ## åœ¨ç”µè„‘å’Œè®¾å¤‡ï¼ˆå¼€å‘æ¿ï¼‰ä¹‹é—´ä¼ è¾“æ–‡ä»¶ æ—¢ç„¶è®¾å¤‡æœ‰ Linux å’Œæ–‡ä»¶ç³»ç»Ÿï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆå‘é€æ–‡ä»¶åˆ°è®¾å¤‡å‘¢ï¼Ÿ å¯¹äº MaixPy æˆ‘ä»¬é…å¥—äº† MaixVisionï¼Œ åœ¨åé¢çš„ç‰ˆæœ¬ä¹Ÿä¼šæ”¯æŒæ–‡ä»¶ç®¡ç†åŠŸèƒ½ï¼Œåœ¨æ­¤ä¹‹å‰å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•ï¼š è¿™é‡Œæˆ‘ä»¬ä¸»è¦ä»‹ç»é€šè¿‡ç½‘ç»œä¼ è¾“çš„æ–¹å¼ï¼Œå…¶å®ƒæ–¹å¼å¯è‡ªè¡Œæ¢ç´¢`ä¼ è¾“æ–‡ä»¶åˆ° Linux`ï¼š * ç¡®ä¿è®¾å¤‡å’Œç”µè„‘è¿æ¥åˆ°äº†åŒä¸€ä¸ªå±€åŸŸç½‘ï¼Œæ¯”å¦‚ï¼š * MaixCAM çš„ USB å£è¿æ¥åˆ°ç”µè„‘ä¼šåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç½‘å¡ï¼Œåœ¨ç”µè„‘ç«¯çš„è®¾å¤‡ç®¡ç†å™¨å°±èƒ½çœ‹åˆ°ï¼Œè®¾å¤‡çš„ IP å¯ä»¥åœ¨è®¾å¤‡çš„`è®¾ç½® >è®¾å¤‡ä¿¡æ¯`ä¸­çœ‹åˆ°è®¾å¤‡åå’Œ IPã€‚ * ä¹Ÿå¯ä»¥åœ¨è®¾å¤‡`è®¾ç½® >WiFi`ä¸­è¿æ¥åˆ°å’Œç”µè„‘ç›¸åŒçš„å±€åŸŸç½‘ã€‚ * ç”µè„‘ä½¿ç”¨ SCP æˆ–è€… SFTP åè®®ä¼ è¾“æ–‡ä»¶åˆ°è®¾å¤‡ï¼Œå…·ä½“çš„è½¯ä»¶æœ‰å¾ˆå¤šï¼Œå…·ä½“çš„è½¯ä»¶å’Œä½¿ç”¨æ–¹æ³•å¯ä»¥è‡ªè¡Œæœç´¢ï¼Œæ¯”å¦‚ï¼š * åœ¨ Windows ä¸Šå¯ä»¥ä½¿ç”¨ WinSCP æˆ–è€… FileZillaï¼Œæˆ–è€… scp å‘½ä»¤ç­‰ã€‚ * åœ¨ Linux ä¸Šå¯ä»¥ä½¿ç”¨ FileZilla æˆ–è€… scp å‘½ä»¤ ç­‰ã€‚ * åœ¨ Mac ä¸Šå¯ä»¥ä½¿ç”¨ FileZilla æˆ–è€… scp å‘½ä»¤ ç­‰ã€‚ ## ç»ˆç«¯å’Œå‘½ä»¤è¡Œ ç»ˆç«¯å°±æ˜¯é€šè¿‡`ç»ˆç«¯`è¿™ä¸ªè½¯ä»¶ä¸ Linux ç³»ç»Ÿè¿›è¡Œé€šä¿¡å’Œæ“ä½œçš„å·¥å…·ï¼Œç±»ä¼¼äº Windows çš„`cmd`æˆ–è€…`PowerShell`ã€‚ æ¯”å¦‚æˆ‘ä»¬å¯ä»¥åœ¨ç”µè„‘çš„ Window ç³»ç»Ÿä¸­çš„ powershell æˆ–è€… Linuxç³»ç»Ÿä¸­çš„ ç»ˆç«¯ å·¥å…·ä¸­è¾“å…¥`ssh root@maixcam xxxx.local` è¿™é‡Œå…·ä½“çš„åå­—åœ¨è®¾å¤‡çš„`è®¾ç½® >è®¾å¤‡ä¿¡æ¯`ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ç»ˆç«¯è¿æ¥åˆ°è®¾å¤‡äº†(ç”¨æˆ·åå’Œå¯†ç éƒ½æ˜¯`root`)ã€‚ ç„¶åæˆ‘ä»¬é€šè¿‡è¾“å…¥å‘½ä»¤æ¥æ“ä½œè®¾å¤‡ï¼Œæ¯”å¦‚`ls`å‘½ä»¤å¯ä»¥åˆ—å‡ºè®¾å¤‡æ–‡ä»¶ç³»ç»Ÿä¸­å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶, `cd` ç”¨æ¥åˆ‡æ¢å½“å‰æ‰€åœ¨çš„ç›®å½•ï¼ˆå°±åƒç”µè„‘æ–‡ä»¶ç®¡ç†ä¸­ç‚¹å‡»æ–‡ä»¶å¤¹åˆ‡æ¢ç›®å½•ä¸€æ ·ï¼‰ï¼Œ ```shell cd / # åˆ‡æ¢åˆ°æ ¹ç›®å½• ls # æ˜¾ç¤ºå½“å‰ç›®å½•ï¼ˆæ ¹ç›®å½•ï¼‰ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ ``` ç„¶åä¼šæ˜¾ç¤ºç±»ä¼¼ä¸‹é¢çš„å†…å®¹ï¼š ```shell bin lib media root tmp boot lib64 mnt run usr dev linuxrc opt sbin var etc lost+found proc sys ``` æ›´å¤šå‘½ä»¤å­¦ä¹ è¯·è‡ªè¡Œæœç´¢`Linux å‘½ä»¤è¡Œä½¿ç”¨æ•™ç¨‹`ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†è®©åˆå­¦è€…çŸ¥é“åŸºæœ¬æ¦‚å¿µï¼Œè¿™æ ·æœ‰å¼€å‘è€…æåˆ°æ—¶å¯ä»¥çŸ¥é“æ˜¯ä»€ä¹ˆæ„æ€ã€‚"},"/maixpy/doc/zh/basic/maixpy_upgrade.html":{"title":"MaixCAM æ›´æ–° MaixPy","content":" title: MaixCAM æ›´æ–° MaixPy æœ‰ä¸¤ç§æ–¹æ³•ï¼Œå¦‚æœç¬¬ä¸€æ¬¡ä¸Šæ‰‹ä½¿ç”¨ï¼Œä¸ºäº†é™ä½éš¾åº¦ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å‡ºå‚ TF å¡è‡ªå¸¦çš„ MaixPy å›ºä»¶å°è¯•ï¼Œä»¥åå†è€ƒè™‘æ›´æ–°ã€‚ ä¸è¿‡å› ä¸ºä¸çŸ¥é“ä½ æ‹¿åˆ°æ‰‹çš„æ˜¯ä»€ä¹ˆæ—¶å€™å‡ºå‚çš„ TF å¡ï¼Œæ‰€ä»¥å»ºè®®éƒ½æ›´æ–°ä¸€ä¸‹ç³»ç»Ÿã€‚ ## ç›´æ¥æ›´æ–°ç³»ç»Ÿï¼ˆæ¨èï¼‰ æŒ‰ç…§ [å‡çº§å’Œçƒ§å½•ç³»ç»Ÿ](./os.html) ä¸­çš„æ“ä½œå‡çº§åˆ°æœ€æ–°çš„ç³»ç»Ÿï¼Œé‡Œé¢å°±åŒ…å«äº†æœ€æ–°çš„ MaixPy å›ºä»¶ã€‚ ## åªæ›´æ–° MaixPy å›ºä»¶ åœ¨ [MaixPy ä»“åº“ release é¡µé¢](https://github.com/sipeed/MaixPy/releases) çœ‹åˆ°æœ€æ–°çš„ç‰ˆæœ¬ä¿¡æ¯å’Œæ›´æ–°æ—¥å¿—ï¼Œå…¶ä¸­åŒ…å«äº† MaixPy å›ºä»¶ä¿¡æ¯ï¼Œä»¥åŠå¯¹åº”ç‰ˆæœ¬ä½¿ç”¨çš„ç³»ç»Ÿä¿¡æ¯ã€‚ å¦‚æœä¸æƒ³æ›´æ–°ç³»ç»Ÿï¼ˆå› ä¸ºä¸€èˆ¬ç³»ç»Ÿå˜åŠ¨ä¸å¤§ï¼Œå¯ä»¥çœ‹ MaixPy æ›´æ–°æ—¥å¿—ä¸­æ˜¯å¦æœ‰ç³»ç»Ÿæ”¹åŠ¨ç›¸å…³ï¼Œå†å†³å®šæ˜¯å¦æ›´æ–°ç³»ç»Ÿï¼‰ï¼Œåˆ™å¯ä»¥åªæ›´æ–° MaixPy å›ºä»¶ã€‚ * åœ¨è®¾ç½®ä¸­è®¾ç½® WiFiï¼Œ è®©ç³»ç»Ÿè”ç½‘ã€‚ * ç‚¹å‡»è®¾ç½®åº”ç”¨ä¸­çš„ `æ›´æ–° MaixPy` è¿›è¡Œæ›´æ–°ã€‚ ä¹Ÿå¯ä»¥æ‰§è¡Œ Python ä»£ç è°ƒç”¨ç³»ç»Ÿå‘½ä»¤æ¥æ›´æ–°ï¼š ```python import os os.system(\"pip install MaixPy U\") ``` ç”±äºé»˜è®¤ä»`pypi.org`ä¸‹è½½ï¼Œä¸­å›½å›½å†…é€Ÿåº¦å¯èƒ½æ¯”è¾ƒæ…¢ï¼Œå¯ä»¥è®¾ç½®å›½å†…çš„é•œåƒç«™ç‚¹ï¼Œä¿®æ”¹ä¸‹é¢ä»£ç çš„ `server` å˜é‡æ¥é€‰æ‹©ï¼Œæ­¤è„šæœ¬åœ¨`MaixPy` çš„ `examples/tools` ç›®å½•ä¸‹ä¹Ÿæœ‰ï¼Œå¯ä»¥ç›´æ¥åœ¨`MaixVision`ä¸­è¿è¡Œã€‚ ```python import os def install_maixpy(server): cmd f\"pip install maixpy U i {server}\" print(\"Start install now, wait patiently ...\") err os.system(cmd) if err ! 0: print(\"[ERROR] execute failed, code:\", err) else: print(\"Install complete\") servers { \"pypi\": \"https://pypi.org/simple\", \"aliyun\": \"https://mirrors.aliyun.com/pypi/simple\", \"ustc\": \"https://pypi.mirrors.ustc.edu.cn/simple\", \"163\": \"https://mirrors.163.com/pypi/simple\", \"douban\": \"https://pypi.douban.com/simple\", \"tuna\": \"https://pypi.tuna.tsinghua.edu.cn/simple\" } # Select server based on your network server servers[\"tuna\"] install_maixpy(server) ``` > å¦‚æœä½ ä¼šä½¿ç”¨ç»ˆç«¯ï¼Œ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ `pip install MaixPy U` æ¥æ›´æ–° MaixPyã€‚ å¦å¤–ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨ä¸‹è½½`wheel` æ–‡ä»¶ï¼ˆ`.whl`æ ¼å¼ï¼‰ä¼ è¾“åˆ°è®¾å¤‡ï¼ˆä¼ è¾“æ–¹æ³•è§åæ–‡[MaixVision ä½¿ç”¨](./maixvision.html)ï¼‰åé€šè¿‡ `pip install ******.whl` å‘½ä»¤æ¥å®‰è£…ã€‚"},"/maixpy/doc/zh/basic/auto_start.html":{"title":"MaixCAM MaixPy åº”ç”¨å¼€æœºè‡ªå¯","content":" title: MaixCAM MaixPy åº”ç”¨å¼€æœºè‡ªå¯ æ‰“åŒ…å®‰è£…å¥½çš„åº”ç”¨å¯ä»¥è®¾ç½®å¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼Œè¿™æ ·å¼€æœºå°±ä¸ä¼šæ˜¾ç¤ºåº”ç”¨èœå•ï¼Œç›´æ¥è¿›å…¥æŒ‡å®šçš„åº”ç”¨ã€‚ ## è®¾ç½®åº”ç”¨å¼€æœºè‡ªå¯æ–¹æ³•ä¸€ å…ˆæ‰“åŒ…å®‰è£…å¥½åº”ç”¨ï¼Œç„¶ååœ¨è®¾å¤‡`è®¾ç½® > å¼€æœºè‡ªå¯` è®¾ç½®ä¸­é€‰æ‹©éœ€è¦è‡ªåŠ¨å¯åŠ¨çš„åº”ç”¨å³å¯ï¼Œå–æ¶ˆå¼€æœºè‡ªå¯ä¹Ÿæ˜¯åœ¨è¿™é‡Œè®¾ç½®ã€‚ ## è®¾ç½®åº”ç”¨å¼€æœºè‡ªå¯æ–¹æ³•äºŒ è¿è¡Œ Python è„šæœ¬è®¾ç½®ï¼Œä¿®æ”¹è„šæœ¬ä¸­çš„`new_autostart_app_id` å˜é‡ä¸ºä½ æƒ³è®¾ç½®çš„ `app_id`ï¼Œ æ‰€æœ‰å·²ç»å®‰è£…äº†çš„`app_id`ä¼šåœ¨æ‰§è¡Œè„šæœ¬æ—¶æ‰“å°å‡ºæ¥ï¼Œå¯ä»¥å…ˆæ‰§è¡Œä¸€éæ‰¾åˆ°ä½ æƒ³è®¾ç½®çš„`app_id`ï¼Œä¿®æ”¹å˜é‡å†æ‰§è¡Œä¸€éå³å¯ï¼Œå–æ¶ˆè‡ªåŠ¨å¯åŠ¨è®¾ç½®ä¸º`None`å³å¯ã€‚ æ­¤è„šæœ¬ä¹Ÿå¯ä»¥åœ¨`MaixPy`çš„`examples/tools`ä¸­æ‰¾åˆ°`set_autostart.py`ï¼š ```python import configparser, os def parse_apps_info(): info_path \"/maixapp/apps/app.info\" conf configparser.ConfigParser() conf.read(info_path) version conf[\"basic\"][\"version\"] apps {} for id in list(conf.keys()): if id in [\"basic\", \"DEFAULT\"]: continue apps[id] conf[id] return apps def list_apps(): apps parse_apps_info() print(f\"APP num: {len(apps)}\") for i, (id, info) in enumerate(apps.items()): name_zh info.get(\"name[zh]\", \"\") print(f\"{i + 1}. [{info['name']}] {name_zh}:\") print(f\" id: {id}\") print(f\" exec: {info['exec']}\") print(f\" author: {info['author']}\") print(f\" desc: {info['desc']}\") print(f\" desc_zh: {info.get('desc', 'None')}\") print(\"\") def get_curr_autostart_app(): path \"/maixapp/auto_start.txt\" if os.path.exists(path): with open(path, \"r\") as f: app_id f.readline().strip() return app_id return None def set_autostart_app(app_id): path \"/maixapp/auto_start.txt\" if not app_id: if os.path.exists(path): os.remove(path) return with open(path, \"w\") as f: f.write(app_id) if __name__ \"__main__\": # new_autostart_app_id \"settings\" # change to app_id you want to set new_autostart_app_id None # remove autostart list_apps() print(\"Before set autostart appid:\", get_curr_autostart_app()) set_autostart_app(new_autostart_app_id) print(\"Current autostart appid:\", get_curr_autostart_app()) ``` ## è®¾ç½®åº”ç”¨å¼€æœºè‡ªå¯æ–¹æ³•ä¸‰ ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹è®¾å¤‡ä¸­çš„ `/maixapp/auto_start.txt` æ–‡ä»¶æ¥è®¾ç½®ï¼Œå’Œä¼ è¾“æ–‡ä»¶çš„æ–¹æ³•è¯·çœ‹å‰é¢çš„æ–‡æ¡£ã€‚ * é¦–å…ˆçŸ¥é“ä½ éœ€è¦è®¾ç½®çš„åº”ç”¨çš„ `id` æ˜¯ä»€ä¹ˆã€‚åœ¨ä½ æ‰“åŒ…åº”ç”¨çš„æ—¶å€™è®¾ç½®çš„ï¼›å¦‚æœä¸æ˜¯ä½ è‡ªå·±æ‰“åŒ…çš„åº”ç”¨ï¼Œå¯ä»¥å…ˆå®‰è£…åˆ°è®¾å¤‡ï¼ŒæŸ¥çœ‹è®¾å¤‡`/maixapp/apps/` ç›®å½•ä¸‹çš„æ–‡ä»¶å¤¹åå°±æ˜¯åº”ç”¨åï¼Œï¼ˆä¹Ÿå¯ä»¥ä¸‹è½½æŸ¥çœ‹è®¾å¤‡çš„`/maixapp/apps/app.info` æ–‡ä»¶ï¼Œ`[]`ä¸­æ‹¬å·éƒ¨åˆ†å°±æ˜¯åº”ç”¨`id`ï¼‰ã€‚ * ç„¶åå†™å…¥ `id` åˆ° `/maixapp/auto_start.txt` æ–‡ä»¶å³å¯ã€‚ï¼ˆå¯ä»¥åœ¨ç”µè„‘æœ¬åœ°åˆ›å»ºæ–‡ä»¶ï¼Œç„¶å `MaixVision` ä¼ è¾“åˆ°è®¾å¤‡ã€‚ï¼‰ * å¦‚æœè¦å–æ¶ˆï¼Œåˆ é™¤è®¾å¤‡ä¸Šçš„ `/maixapp/auto_start.txt` æ–‡ä»¶å³å¯ã€‚ ## å…¶å®ƒæ–¹æ³• å¯¹äº MaixCAMï¼Œ å› ä¸ºåº•å±‚æ˜¯ Linuxï¼Œ å¦‚æœä½ ç†Ÿæ‚‰ Linux, ç¼–è¾‘`/etc/rc.local` æˆ–è€… `/etc/init.d` ä¸‹çš„å¯åŠ¨è„šæœ¬ä¹Ÿå¯ä»¥ã€‚ ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§æ–¹å¼ä¼šè®© MaixVision åœ¨è¿æ¥çš„æ—¶å€™æ— æ³•åœæ­¢è¿™ä¸ªåº”ç”¨ï¼Œä»è€Œé€ æˆèµ„æºå ç”¨ï¼ˆæ¯”å¦‚å±å¹•å’Œæ‘„åƒå¤´ï¼‰ MaixVision å¯èƒ½æ— æ³•æ­£å¸¸è·‘ç¨‹åºï¼Œè€Œå‰ä¸¤ç§æ–¹æ³• MaixVision è¿æ¥è®¾å¤‡æ—¶æ˜¯å¯ä»¥æ­£å¸¸è®©ç¨‹åºé€€å‡ºä»¥ä¾› MaixVsion è·‘ç¨‹åºçš„ã€‚ æ‰€ä»¥è¿™ç§æ–¹æ³•æ¯”è¾ƒé€‚åˆå¼€æœºè·‘ä¸€äº›ä¸ä¼šå ç”¨å±å¹•å’Œæ‘„åƒå¤´ç­‰èµ„æºçš„åå°è¿›ç¨‹ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¦‚æœä½ ä¸ç†Ÿæ‚‰ Linux ä¸å»ºè®®è¿™æ ·æ“ä½œã€‚"},"/maixpy/doc/zh/ai_model_converter/maixcam.html":{"title":"å°† ONNX æ¨¡å‹è½¬æ¢ä¸º MaixCAM MaixPy å¯ä»¥ä½¿ç”¨çš„æ¨¡å‹ï¼ˆMUDï¼‰","content":" title: å°† ONNX æ¨¡å‹è½¬æ¢ä¸º MaixCAM MaixPy å¯ä»¥ä½¿ç”¨çš„æ¨¡å‹ï¼ˆMUDï¼‰ ## ç®€ä»‹ ç”µè„‘ä¸Šè®­ç»ƒçš„æ¨¡å‹ä¸èƒ½ç›´æ¥ç»™ MaixCAM ä½¿ç”¨ï¼Œå› ä¸º MaixCAM çš„ç¡¬ä»¶æ€§èƒ½æœ‰é™ï¼Œä¸€èˆ¬æˆ‘ä»¬éœ€è¦å°†æ¨¡å‹è¿›è¡Œ`INT8`é‡åŒ–ä»¥å‡å°‘è®¡ç®—é‡ï¼Œå¹¶ä¸”è½¬æ¢ä¸º MaixCAM æ”¯æŒçš„æ¨¡å‹æ ¼å¼ã€‚ æœ¬æ–‡ä»‹ç»å¦‚ä½•å°† ONNX æ¨¡å‹è½¬æ¢ä¸º MaixCAM èƒ½ä½¿ç”¨çš„æ¨¡å‹ï¼ˆMUDæ¨¡å‹ï¼‰ã€‚ ## MaixCAM æ”¯æŒçš„æ¨¡å‹æ–‡ä»¶æ ¼å¼ MUDï¼ˆæ¨¡å‹ç»Ÿä¸€æè¿°æ–‡ä»¶ï¼Œ model universal description fileï¼‰æ˜¯ MaixPy æ”¯æŒçš„ä¸€ç§æ¨¡å‹æè¿°æ–‡ä»¶ï¼Œç”¨æ¥ç»Ÿä¸€ä¸åŒå¹³å°çš„æ¨¡å‹æ–‡ä»¶ï¼Œæ–¹ä¾¿ MaixPy ä»£ç è·¨å¹³å°ï¼Œæœ¬èº«æ˜¯ä¸€ä¸ª `ini`æ ¼å¼çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ç¼–è¾‘ã€‚ ä¸€èˆ¬ MUD æ–‡ä»¶ä¼šä¼´éšä¸€ä¸ªæˆ–è€…å¤šä¸ªå®é™…çš„æ¨¡å‹æ–‡ä»¶ï¼Œæ¯”å¦‚å¯¹äº MaixCAMï¼Œ å®é™…çš„æ¨¡å‹æ–‡ä»¶æ˜¯`.cvimodel`æ ¼å¼ï¼Œ MUD æ–‡ä»¶åˆ™æ˜¯å¯¹å®ƒåšäº†ä¸€äº›æè¿°è¯´æ˜ã€‚ è¿™é‡Œä»¥ `YOLOv8` æ¨¡å‹æ–‡ä»¶ä¸¾ä¾‹ï¼Œä¸€å…±ä¸¤ä¸ªæ–‡ä»¶`yolov8n.mud`å’Œ`yolov8n.cvimodel`ï¼Œå‰è€…å†…å®¹ï¼š ```ini [basic] type cvimodel model yolov8n.cvimodel [extra] model_type yolov8 input_type rgb mean 0, 0, 0 scale 0.00392156862745098, 0.00392156862745098, 0.00392156862745098 labels person, bicycle, car, motorcycle, airplane, bus, train, truck, boat, traffic light, fire hydrant, stop sign, parking meter, bench, bird, cat, dog, horse, sheep, cow, elephant, bear, zebra, giraffe, backpack, umbrella, handbag, tie, suitcase, frisbee, skis, snowboard, sports ball, kite, baseball bat, baseball glove, skateboard, surfboard, tennis racket, bottle, wine glass, cup, fork, knife, spoon, bowl, banana, apple, sandwich, orange, broccoli, carrot, hot dog, pizza, donut, cake, chair, couch, potted plant, bed, dining table, toilet, tv, laptop, mouse, remote, keyboard, cell phone, microwave, oven, toaster, sink, refrigerator, book, clock, vase, scissors, teddy bear, hair drier, toothbrush ``` å¯ä»¥çœ‹åˆ°ï¼Œ æŒ‡å®šäº†æ¨¡å‹ç±»åˆ«ä¸º`cvimodel`, æ¨¡å‹è·¯å¾„ä¸ºç›¸å¯¹`mud`æ–‡ä»¶çš„è·¯å¾„ä¸‹çš„`yolov8n.cvimodel`æ–‡ä»¶ï¼› ä»¥åŠä¸€äº›éœ€è¦ç”¨åˆ°çš„ä¿¡æ¯ï¼Œæ¯”å¦‚é¢„å¤„ç†`mean`å’Œ`scale`ï¼Œè¿™é‡Œéœ€è¦å’Œè®­ç»ƒçš„æ—¶å€™å¯¹æ¨¡å‹è¾“å…¥çš„æ•°æ®çš„é¢„å¤„ç†æ–¹æ³•ä¸€è‡´ï¼Œ`labels`åˆ™æ˜¯æ£€æµ‹å¯¹è±¡çš„ 80 ç§åˆ†ç±»ã€‚ å®é™…ç”¨è¿™ä¸ªæ¨¡å‹çš„æ—¶å€™å°†ä¸¤ä¸ªæ–‡ä»¶æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹å³å¯ã€‚ ## å‡†å¤‡ ONNX æ¨¡å‹ å‡†å¤‡å¥½ä½ çš„ onnx æ¨¡å‹ï¼Œ ç„¶ååœ¨[https://netron.app/](https://netron.app/) æŸ¥çœ‹ä½ çš„æ¨¡å‹ï¼Œç¡®ä¿ä½ çš„æ¨¡å‹ä½¿ç”¨çš„ç®—å­åœ¨è½¬æ¢å·¥å…·çš„æ”¯æŒåˆ—è¡¨ä¸­ï¼Œè½¬æ¢å·¥å…·çš„æ”¯æŒåˆ—è¡¨å¯ä»¥åœ¨[ç®—èƒ½ TPU SDK](https://developer.sophgo.com/thread/473.html)çš„ **CVITEK_TPU_SDKå¼€å‘æŒ‡å—.pdf** ä¸­çœ‹åˆ°åˆ—è¡¨ã€‚ ## æ‰¾å‡ºåˆé€‚çš„é‡åŒ–è¾“å‡ºèŠ‚ç‚¹ ä¸€èˆ¬æ¨¡å‹éƒ½æœ‰åå¤„ç†èŠ‚ç‚¹ï¼Œè¿™éƒ¨åˆ†æ˜¯ CPU è¿›è¡Œè¿ç®—çš„ï¼Œæˆ‘ä»¬å°†å®ƒä»¬å‰¥ç¦»å‡ºæ¥ï¼Œå®ƒä»¬ä¼šå½±å“åˆ°é‡åŒ–æ•ˆæœï¼Œå¯èƒ½ä¼šå¯¼è‡´é‡åŒ–å¤±è´¥ã€‚ è¿™é‡Œä»¥`YOLOv5 ä¸¾ä¾‹`ï¼Œ ![](../../assets/yolov5s_onnx.jpg) å¯ä»¥çœ‹åˆ°è¿™é‡Œæœ‰ä¸‰ä¸ª`conv`ï¼Œåé¢çš„è®¡ç®—å‡ç”± CPU è¿›è¡Œï¼Œæˆ‘ä»¬é‡åŒ–æ—¶å°±é‡‡å–è¿™å‡ ä¸ª`conv`çš„è¾“å‡ºä½œä¸ºæ¨¡å‹çš„æœ€åè¾“å‡ºï¼Œåœ¨è¿™é‡Œè¾“å‡ºååˆ†åˆ«å«`/model.24/m.0/Conv_output_0,/model.24/m.1/Conv_output_0,/model.24/m.2/Conv_output_0`ã€‚ ## å®‰è£…æ¨¡å‹è½¬æ¢ç¯å¢ƒ æ¨¡å‹è½¬æ¢ä½¿ç”¨ç®—èƒ½çš„[https://github.com/sophgo/tpu mlir](https://github.com/sophgo/tpu mlir)ï¼Œè¦å®‰è£…å®ƒæˆ‘ä»¬ç›´æ¥åœ¨ docker ç¯å¢ƒä¸­å®‰è£…ï¼Œé˜²æ­¢æˆ‘ä»¬ç”µè„‘çš„ç¯å¢ƒä¸åŒ¹é…ï¼Œå¦‚æœä½ æ²¡ç”¨è¿‡ dockerï¼Œå¯ä»¥ç®€å•ç†è§£æˆå®ƒç±»ä¼¼è™šæ‹Ÿæœºã€‚ ### å®‰è£… docker å‚è€ƒ[docker å®‰è£…å®˜æ–¹æ–‡æ¡£](https://docs.docker.com/engine/install/ubuntu/)å®‰è£…å³å¯ã€‚ æ¯”å¦‚ï¼š ```shell # å®‰è£…dockerä¾èµ–çš„åŸºç¡€è½¯ä»¶ sudo apt get update sudo apt get install apt transport https ca certificates curl gnupg agent software properties common # æ·»åŠ å®˜æ–¹æ¥æº curl fsSL https://download.docker.com/linux/ubuntu/gpg sudo apt key add sudo add apt repository \"deb [arch amd64] https://download.docker.com/linux/ubuntu $(lsb_release cs) stable\" # å®‰è£… docker sudo apt get update sudo apt get install docker ce docker ce cli containerd.io ``` ### æ‹‰å– docker é•œåƒ ```shell docker pull sophgo/tpuc_dev:latest ``` å¦‚æœdockeræ‹‰å–å¤±è´¥ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œä¸‹è½½ï¼š ```shell wget https://sophon file.sophon.cn/sophon prod s3/drive/24/06/14/12/sophgo tpuc_dev v3.2_191a433358ad.tar.gz docker load i sophgo tpuc_dev v3.2_191a433358ad.tar.gz ``` è¿™ä¸ªæ–¹æ³•å‚è€ƒ[tpu mlirå®˜æ–¹dockerç¯å¢ƒé…ç½®](https://github.com/sophgo/tpu mlir/blob/master/README_cn.md)ã€‚ æ­¤å¤–ä½ ä¹Ÿå¯ä»¥è®¾ç½®å›½å†…çš„é•œåƒï¼Œå¯è‡ªè¡Œæœç´¢æˆ–è€…å‚è€ƒ[docker è®¾ç½®ä»£ç†ï¼Œä»¥åŠå›½å†…åŠ é€Ÿé•œåƒè®¾ç½®](https://neucrack.com/p/286)ã€‚ ### è¿è¡Œå®¹å™¨ ```shell docker run privileged name tpu env v /home/$USER/data:/home/$USER/data it sophgo/tpuc_dev ``` è¿™å°±èµ·äº†ä¸€ä¸ªå®¹å™¨ï¼Œåå«`tpu env`ï¼Œå¹¶ä¸”æŠŠæœ¬æœºçš„`~/data`ç›®å½•æŒ‚è½½åˆ°äº†å®¹å™¨çš„`~/data`ï¼Œè¿™æ ·å°±å®ç°äº†æ–‡ä»¶å…±äº«ï¼Œå¹¶ä¸”å’Œå®¿ä¸»æœºè·¯å¾„ä¸€è‡´ã€‚ ä¸‹æ¬¡å¯åŠ¨å®¹å™¨ç”¨`docker start tpu env && docker attach tpu env`å³å¯ã€‚ ### å®‰è£… tpu mlir å…ˆåˆ°[github](https://github.com/sophgo/tpu mlir/releases)ä¸‹è½½ `whl` æ–‡ä»¶ï¼Œæ”¾åˆ°`~/data`ç›®å½•ä¸‹ã€‚ åœ¨å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤å®‰è£…ï¼š ```shell pip install tpu_mlir*.whl # è¿™é‡Œå°±æ˜¯ä¸‹è½½æ–‡ä»¶çš„åå­— ``` æ‰§è¡Œ`model_transform.py` ä¼šæœ‰æ‰“å°å¸®åŠ©ä¿¡æ¯å°±ç®—æ˜¯å®‰è£…æˆåŠŸäº†ã€‚ ## ç¼–å†™è½¬æ¢è„šæœ¬ è½¬æ¢æ¨¡å‹ä¸»è¦å°±ä¸¤ä¸ªå‘½ä»¤ï¼Œ`model_transform.py` å’Œ `model_deploy.py`ï¼Œä¸»è¦éº»çƒ¦çš„æ˜¯å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å†™ä¸€ä¸ªè„šæœ¬`convert_yolov5_to_cvimodel.sh`å­˜ä¸‹æ¥æ–¹ä¾¿ä¿®æ”¹ã€‚ ```shell #!/bin/bash set e net_name yolov5s input_w 640 input_h 640 # mean: 0, 0, 0 # std: 255, 255, 255 # mean # 1/std # mean: 0, 0, 0 # scale: 0.00392156862745098, 0.00392156862745098, 0.00392156862745098 mkdir p workspace cd workspace # convert to mlir model_transform.py \\ model_name ${net_name} \\ model_def ../${net_name}.onnx \\ input_shapes [[1,3,${input_h},${input_w}]] \\ mean \"0,0,0\" \\ scale \"0.00392156862745098,0.00392156862745098,0.00392156862745098\" \\ keep_aspect_ratio \\ pixel_format rgb \\ channel_format nchw \\ output_names \"/model.24/m.0/Conv_output_0,/model.24/m.1/Conv_output_0,/model.24/m.2/Conv_output_0\" \\ test_input ../dog.jpg \\ test_result ${net_name}_top_outputs.npz \\ tolerance 0.99,0.99 \\ mlir ${net_name}.mlir # export bf16 model # not use quant_input, use float32 for easy coding model_deploy.py \\ mlir ${net_name}.mlir \\ quantize BF16 \\ processor cv181x \\ test_input ${net_name}_in_f32.npz \\ test_reference ${net_name}_top_outputs.npz \\ model ${net_name}_bf16.cvimodel echo \"calibrate for int8 model\" # export int8 model run_calibration.py ${net_name}.mlir \\ dataset ../images \\ input_num 200 \\ o ${net_name}_cali_table echo \"convert to int8 model\" # export int8 model # add quant_input, use int8 for faster processing in maix.nn.NN.forward_image model_deploy.py \\ mlir ${net_name}.mlir \\ quantize INT8 \\ quant_input \\ calibration_table ${net_name}_cali_table \\ processor cv181x \\ test_input ${net_name}_in_f32.npz \\ test_reference ${net_name}_top_outputs.npz \\ tolerance 0.9,0.6 \\ model ${net_name}_int8.cvimodel ``` å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œæœ‰å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„å‚æ•°ï¼š * `output_names` å°±æ˜¯æˆ‘ä»¬å‰é¢è¯´åˆ°çš„è¾“å‡ºèŠ‚ç‚¹çš„è¾“å‡ºåã€‚ * `mean, scale` å°±æ˜¯è®­ç»ƒæ—¶ä½¿ç”¨çš„é¢„å¤„ç†æ–¹æ³•ï¼Œæ¯”å¦‚ `YOLOv5` å®˜æ–¹ä»£ç çš„é¢„å¤„ç†æ˜¯æŠŠå›¾åƒ RGB 3ä¸ªé€šé“åˆ†åˆ« ` mean`å†é™¤ä»¥`std`ï¼Œå¹¶ä¸”é»˜è®¤`mean` ä¸º`0`ï¼Œ `std`ä¸º`255`ï¼Œå³å°†å›¾åƒçš„å€¼å½’ä¸€ï¼Œè¿™é‡Œ`scale`å°±æ˜¯`1/std`ã€‚ä½ çš„æ¨¡å‹éœ€è¦æ ¹æ®å®é™…çš„é¢„å¤„ç†æ–¹æ³•ä¿®æ”¹ã€‚ * `test_input` å°±æ˜¯è½¬æ¢æ—¶ç”¨æ¥æµ‹è¯•çš„å›¾åƒï¼Œè¿™é‡Œæ˜¯`../dog.jpg`ï¼Œæ‰€ä»¥å®é™…æ¨¡å‹è½¬æ¢æ—¶æˆ‘ä»¬éœ€è¦åœ¨æ­¤è„šæœ¬æ‰€åœ¨åŒç›®å½•æ”¾ä¸€å¼ `dog.jpg`çš„å›¾ï¼Œä½ çš„æ¨¡å‹æ ¹æ®ä½ çš„å®é™…æƒ…å†µæ›¿æ¢å›¾åƒã€‚ * `tolerance` å°±æ˜¯é‡åŒ–å‰åå…è®¸çš„è¯¯å·®ï¼Œå¦‚æœè½¬æ¢æ¨¡å‹æ—¶æŠ¥é”™æç¤ºå€¼å°äºè®¾ç½®çš„è¿™ä¸ªå€¼ï¼Œè¯´æ˜è½¬å‡ºæ¥çš„æ¨¡å‹å¯èƒ½ç›¸æ¯” onnx æ¨¡å‹è¯¯å·®è¾ƒå¤§ï¼Œå¦‚æœä½ èƒ½å¤Ÿå®¹å¿ï¼Œå¯ä»¥é€‚å½“è°ƒå°è¿™ä¸ªé˜ˆå€¼è®©æ¨¡å‹è½¬æ¢é€šè¿‡ï¼Œä¸è¿‡å¤§å¤šæ•°æ—¶å€™éƒ½æ˜¯å› ä¸ºæ¨¡å‹ç»“æ„å¯¼è‡´çš„ï¼Œéœ€è¦ä¼˜åŒ–æ¨¡å‹ï¼Œä»¥åŠä»”ç»†çœ‹åå¤„ç†ï¼ŒæŠŠèƒ½å»é™¤çš„åå¤„ç†å»é™¤äº†ã€‚ * `quantize` å³é‡åŒ–çš„æ•°æ®ç±»å‹ï¼Œåœ¨ MaixCAM ä¸Šæˆ‘ä»¬ä¸€èˆ¬ç”¨ INT8 æ¨¡å‹ï¼Œè¿™é‡Œæˆ‘ä»¬è™½ç„¶ä¹Ÿé¡ºä¾¿è½¬æ¢äº†ä¸€ä¸ª BF16 æ¨¡å‹ï¼ŒBF16 æ¨¡å‹çš„å¥½å¤„æ—¶ç²¾åº¦é«˜ï¼Œä¸è¿‡è¿è¡Œé€Ÿç‡æ¯”è¾ƒæ…¢ï¼Œèƒ½è½¬æˆ INT8 å°±æ¨èå…ˆç”¨ INT8,å®åœ¨ä¸èƒ½è½¬æ¢çš„æˆ–è€…ç²¾åº¦è¦æ±‚é«˜é€Ÿåº¦è¦æ±‚ä¸é«˜çš„å†è€ƒè™‘ BF16ã€‚ * `dataset` è¡¨ç¤ºç”¨æ¥é‡åŒ–çš„æ•°æ®é›†ï¼Œä¹Ÿæ˜¯æ”¾åœ¨è½¬æ¢è„šæœ¬åŒç›®å½•ä¸‹ï¼Œæ¯”å¦‚è¿™é‡Œæ˜¯`images`æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ”¾æ•°æ®å³å¯ï¼Œå¯¹äº YOLOv5 æ¥è¯´å°±æ˜¯å›¾ç‰‡ï¼Œä» coco æ•°æ®é›†ä¸­å¤åˆ¶ä¸€éƒ¨åˆ†å…¸å‹åœºæ™¯çš„å›¾ç‰‡è¿‡æ¥å³å¯ã€‚ ç”¨` input_num` å¯ä»¥æŒ‡å®šå®é™…ä½¿ç”¨å›¾ç‰‡çš„æ•°é‡ï¼ˆå°äºç­‰äº images ç›®å½•ä¸‹å®é™…çš„å›¾ç‰‡ï¼‰ã€‚ ## æ‰§è¡Œè½¬æ¢è„šæœ¬ ç›´æ¥æ‰§è¡Œ`chmod +x convert_yolov5_to_cvimodelsh && ./convert_yolov5_to_cvimodel.sh` ç­‰å¾…è½¬æ¢å®Œæˆã€‚ å¦‚æœå‡ºé”™äº†ï¼Œè¯·ä»”ç»†çœ‹ä¸Šä¸€æ­¥çš„è¯´æ˜ï¼Œæ˜¯ä¸æ˜¯å‚æ•°æœ‰é—®é¢˜ï¼Œæˆ–è€…è¾“å‡ºå±‚é€‰æ‹©å¾—ä¸åˆç†ç­‰ã€‚ ç„¶åå°±èƒ½åœ¨`workspace`æ–‡ä»¶å¤¹ä¸‹çœ‹åˆ°æœ‰`**_int8.cvimodel` æ–‡ä»¶äº†ã€‚ ## ç¼–å†™`mud`æ–‡ä»¶ æ ¹æ®ä½ çš„æ¨¡å‹æƒ…å†µä¿®æ”¹`mud`æ–‡ä»¶ï¼Œå¯¹äº YOLOv5 å°±å¦‚ä¸‹ï¼Œä¿®æ”¹æˆä½ è®­ç»ƒçš„`labels`å°±å¥½äº†ã€‚ ```ini [basic] type cvimodel model yolov5s.cvimodel [extra] model_type yolov5 input_type rgb mean 0, 0, 0 scale 0.00392156862745098, 0.00392156862745098, 0.00392156862745098 anchors 10,13, 16,30, 33,23, 30,61, 62,45, 59,119, 116,90, 156,198, 373,326 labels person, bicycle, car, motorcycle, airplane, bus, train, truck, boat, traffic light, fire hydrant, stop sign, parking meter, bench, bird, cat, dog, horse, sheep, cow, elephant, bear, zebra, giraffe, backpack, umbrella, handbag, tie, suitcase, frisbee, skis, snowboard, sports ball, kite, baseball bat, baseball glove, skateboard, surfboard, tennis racket, bottle, wine glass, cup, fork, knife, spoon, bowl, banana, apple, sandwich, orange, broccoli, carrot, hot dog, pizza, donut, cake, chair, couch, potted plant, bed, dining table, toilet, tv, laptop, mouse, remote, keyboard, cell phone, microwave, oven, toaster, sink, refrigerator, book, clock, vase, scissors, teddy bear, hair drier, toothbrush ``` è¿™é‡Œ`basic`éƒ¨åˆ†æŒ‡å®šäº†æ¨¡å‹æ–‡ä»¶ç±»åˆ«å’Œæ¨¡å‹æ–‡ä»¶è·¯å¾„ï¼Œæ˜¯å¿…è¦çš„å‚æ•°ï¼Œæœ‰äº†è¿™ä¸ªå‚æ•°å°±èƒ½ç”¨`MaixPy`æˆ–è€…`MaixCDK`ä¸­çš„`maix.nn.NN`ç±»æ¥åŠ è½½å¹¶è¿è¡Œæ¨¡å‹äº†ã€‚ `extra`åˆ™æ ¹æ®ä¸åŒæ¨¡å‹çš„éœ€æ±‚è®¾è®¡ä¸åŒå‚æ•°ã€‚ æ¯”å¦‚è¿™é‡Œå¯¹`YOLOv5`è®¾è®¡äº†è¿™äº›å‚æ•°ï¼Œä¸»è¦æ˜¯ é¢„å¤„ç†ã€åå¤„ç†ã€æ ‡ç­¾ç­‰å‚æ•°ã€‚ å¯¹äº `MaixPy` å·²ç»æ”¯æŒäº†çš„æ¨¡å‹å¯ä»¥ç›´æ¥ä¸‹è½½å…¶æ¨¡å‹å¤åˆ¶ä¿®æ”¹ã€‚ ä¹Ÿå¯ä»¥çœ‹å…·ä½“çš„ä»£ç ï¼Œæ¯”å¦‚[YOLOv5 çš„æºç ](https://github.com/sipeed/MaixCDK/blob/71d5b3980788e6b35514434bd84cd6eeee80d085/components/nn/include/maix_nn_yolov5.hpp#L73 L223)ï¼Œå¯ä»¥çœ‹åˆ°æºç ä½¿ç”¨äº†å“ªäº›å‚æ•°ã€‚ æ¯”å¦‚ä½ ç”¨`YOLOv5`è®­ç»ƒäº†æ£€æµ‹æ•°å­—`0~9`çš„æ¨¡å‹ï¼Œé‚£ä¹ˆéœ€è¦å°†`labels`æ”¹æˆ`0,1,2,3,4,5,6,7,8,9`ï¼Œå…¶å®ƒå‚æ•°å¦‚æœä½ æ²¡æ”¹è®­ç»ƒä»£ç ä¿æŒå³å¯ã€‚ å¦‚æœä½ éœ€è¦ç§»æ¤ `MaixPy` æ²¡æœ‰æ”¯æŒçš„æ¨¡å‹ï¼Œåˆ™å¯ä»¥æ ¹æ®æ¨¡å‹çš„é¢„å¤„ç†å’Œåå¤„ç†æƒ…å†µå®šä¹‰ `extra`, ç„¶åç¼–å†™å¯¹åº”çš„è§£ç ç±»ã€‚å¦‚æœä½ ä¸æƒ³ç”¨C++ä¿®æ”¹ MaixPy æºç ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨MaixPy çš„`maix.nn.NN`ç±»åŠ è½½æ¨¡å‹ï¼Œç„¶åç”¨ `forward` æˆ–è€… `forward_image` æ–¹æ³•æˆ–è€…åŸå§‹è¾“å‡ºï¼Œåœ¨ Python å±‚é¢å†™åå¤„ç†ä¹Ÿå¯ä»¥ï¼Œåªæ˜¯è¿è¡Œæ•ˆç‡æ¯”è¾ƒä½ä¸å¤ªæ¨èã€‚ ## ç¼–å†™åå¤„ç†ä»£ç  å¦‚ä¸Šä¸€æ­¥æ‰€è¯´ï¼Œå¦‚æœæ˜¯æŒ‰ç…§å·²ç»æ”¯æŒçš„æ¨¡å‹çš„`mud`æ–‡ä»¶ä¿®æ”¹å¥½ï¼Œé‚£ç›´æ¥è°ƒç”¨`MaixPy`æˆ–è€…`MaixCDK`å¯¹åº”çš„ä»£ç åŠ è½½å³å¯ã€‚ å¦‚æœæ”¯æŒæ–°æ¨¡å‹ï¼Œè®¾è®¡å¥½ `mud` æ–‡ä»¶åï¼Œä½ éœ€è¦å®é™…ç¼–å†™é¢„å¤„ç†å’Œåå¤„ç†ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š * ä¸€ï¼šMaixPy ç”¨ `maix.nn.NN`åŠ è½½æ¨¡å‹ï¼Œç„¶å`forward`æˆ–è€…`forward_image`å‡½æ•°è¿è¡Œæ¨¡å‹ï¼Œè·å¾—è¾“å‡ºï¼Œç„¶åç”¨ Python å‡½æ•°ç¼–å†™åå¤„ç†å¾—åˆ°æœ€ç»ˆç»“æœã€‚ * äºŒï¼šåœ¨`MaixCDK`ä¸­ï¼Œå¯ä»¥å‚è€ƒ[YOLOv5 çš„æºç ](https://github.com/sipeed/MaixCDK/blob/71d5b3980788e6b35514434bd84cd6eeee80d085/components/nn/include/maix_nn_yolov5.hpp), æ–°å¢ä¸€ä¸ª`hpp`æ–‡ä»¶ï¼Œå¢åŠ ä¸€ä¸ªå¤„ç†ä½ çš„æ¨¡å‹çš„ç±»ï¼Œå¹¶ä¸”ä¿®æ”¹æ‰€æœ‰å‡½æ•°å’Œç±»çš„`@maixpy`æ³¨é‡Šï¼Œç¼–å†™å¥½äº†ç¼–è¯‘`MaixPy`é¡¹ç›®ï¼Œå³å¯åœ¨`MaixPy`ä¸­è°ƒç”¨æ–°å¢çš„ç±»æ¥è¿è¡Œæ¨¡å‹äº†ã€‚ æ”¯æŒäº†æ–°æ¨¡å‹åè¿˜å¯ä»¥å°†æºç æäº¤ï¼ˆPull Requestï¼‰åˆ°ä¸»`MaixPy`ä»“åº“ä¸­ï¼Œæˆä¸º`MaixPy`é¡¹ç›®çš„ä¸€å‘˜ï¼Œä¸ºç¤¾åŒºåšè´¡çŒ®ï¼Œä¹Ÿå¯ä»¥åˆ° [MaixHub åˆ†äº«](https://maixhub.com/share) åˆ†äº«ä½ æ–°æ”¯æŒçš„æ¨¡å‹ï¼Œæ ¹æ®è´¨é‡å¯ä»¥è·å¾—æœ€å°‘ `30å…ƒ` æœ€é«˜ `2000å…ƒ` çš„æ‰“èµï¼"},"/maixpy/doc/zh/modules/rtc.html":{"title":"MaixCAM MaixPy ä½¿ç”¨ RTC æ¨¡å—","content":" title: MaixCAM MaixPy ä½¿ç”¨ RTC æ¨¡å— MaixCAM Pro æ¿è½½äº†ä¸€ä¸ª RTC æ¨¡å—ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•è¯·çœ‹[bm8653 RTC æ¨¡å—ä½¿ç”¨](./bm8653.html) > MaixCAM æ— æ¿è½½ RTCã€‚"},"/maixpy/doc/zh/modules/acc.html":{"title":"MaixCAM MaixPy è¯»å–åŠ é€Ÿåº¦è®¡å’Œå§¿æ€è§£ç®—","content":" title: MaixCAM MaixPy è¯»å–åŠ é€Ÿåº¦è®¡å’Œå§¿æ€è§£ç®— ## IMU ç®€ä»‹ å¯¹äº MaixCAM Proï¼Œæ¿è½½äº†ä¸€æ¬¾é›†æˆäº†ä¸‰è½´é™€èºä»ªå’Œä¸‰è½´åŠ é€Ÿåº¦è®¡çš„QMI8658èŠ¯ç‰‡, å®ƒèƒ½å¤Ÿæä¾›é«˜ç²¾åº¦çš„å§¿æ€ã€è¿åŠ¨å’Œä½ç½®æ•°æ®ï¼Œé€‚ç”¨äºå„ç§éœ€è¦ç²¾ç¡®è¿åŠ¨æ£€æµ‹çš„åº”ç”¨åœºæ™¯ï¼Œå¦‚æ— äººæœºã€æœºå™¨äººã€æ¸¸æˆæ§åˆ¶å™¨å’Œè™šæ‹Ÿç°å®è®¾å¤‡ç­‰ã€‚QMI8658å…·æœ‰ä½åŠŸè€—ã€é«˜ç¨³å®šæ€§å’Œé«˜çµæ•åº¦çš„ç‰¹ç‚¹, ä¸‹é¢å°†ä»‹ç»ä½¿ç”¨IMUæ¨¡å—æ¥è·å–å§¿æ€æ•°æ®ã€‚ > MaixCAM æ— æ¿è½½åŠ é€Ÿåº¦è®¡ï¼Œå¯è‡ªè¡Œå¤–æ¥ä½¿ç”¨ iic é©±åŠ¨ã€‚ ## MaixPy ä¸­ä½¿ç”¨ IMU Using IMU module to read data from the QMI8658. ç¤ºä¾‹ä»£ç : ```python from maix.ext_dev import imu i imu.IMU(\"qmi8658\", mode imu.Mode.DUAL, acc_scale imu.AccScale.ACC_SCALE_2G, acc_odr imu.AccOdr.ACC_ODR_8000, gyro_scale imu.GyroScale.GYRO_SCALE_16DPS, gyro_odr imu.GyroOdr.GYRO_ODR_8000) while True: data i.read() print(\"\\n \") print(f\"acc x: {data[0]}\") print(f\"acc y: {data[1]}\") print(f\"acc z: {data[2]}\") print(f\"gyro x: {data[3]}\") print(f\"gyro y: {data[4]}\") print(f\"gyro z: {data[5]}\") print(f\"temp: {data[6]}\") print(\" \\n\") ``` æŒ‰ç…§æ‚¨çš„éœ€æ±‚åˆå§‹åŒ– IMU å¯¹è±¡, ç„¶åè°ƒç”¨ `read()` å³å¯. `read()` è¿”å›çš„æ˜¯ä» IMU ä¸­è¯»å‡ºçš„åŸå§‹æ•°æ®. **å¦‚æœ `mode` å‚æ•°é€‰æ‹© `DUAL`, åˆ™ `read()`è¿”å›çš„æ•°æ®ä¸º `[acc_x, acc_y, acc_z, gyro_x, gyro_y, gyro_z, temp]`, å¦‚æœ `mode` åªé€‰æ‹© ACC/GYRO ä¸­çš„ä¸€ä¸ª, åªä¼šè¿”å›å¯¹åº”çš„ `[x, y, z, temp]`, ä¾‹å¦‚é€‰æ‹© ACC, `read()` ä¼šè¿”å› `[acc_x, acc_y, acc_z, temp]`.** æœ‰å…³ IMU API çš„è¯¦ç»†è¯´æ˜è¯·çœ‹ [IMU API æ–‡æ¡£](../../../api/maix/ext_dev/imu.html)"},"/maixpy/doc/zh/modules/bm8653.html":{"title":"MaixPy bm8653é©±åŠ¨è¯´æ˜","content":" title: MaixPy bm8653é©±åŠ¨è¯´æ˜ update: date: 2024 08 27 author: iawak9lkm version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## BM8653 ç®€ä»‹ BM8653æ˜¯ä¸€æ¬¾å®æ—¶æ—¶é’Ÿï¼ˆRTCï¼‰èŠ¯ç‰‡ï¼Œå¹¿æ³›åº”ç”¨äºå„ç§ç”µå­è®¾å¤‡ä¸­ï¼Œç”¨äºæä¾›ç²¾ç¡®çš„æ—¶é—´å’Œæ—¥æœŸä¿¡æ¯ã€‚å®ƒå…·æœ‰ä½åŠŸè€—ã€é«˜ç²¾åº¦çš„ç‰¹ç‚¹ï¼Œèƒ½å¤Ÿåœ¨è®¾å¤‡æ–­ç”µçš„æƒ…å†µä¸‹é€šè¿‡å¤‡ç”¨ç”µæ± ç»§ç»­è¿è¡Œï¼Œç¡®ä¿æ—¶é—´çš„è¿ç»­æ€§å’Œå‡†ç¡®æ€§ã€‚ ## MaixPy ä¸­ä½¿ç”¨ BM8653 åœ¨ MaixPy ä¸­ä½¿ç”¨ BM8653 å¾ˆç®€å•, æ‚¨åªéœ€è¦çŸ¥é“æ‚¨å¹³å°ä¸Šçš„ BM8653 æŒ‚è½½åœ¨å“ªä¸ª I2C æ€»çº¿ä¸Š. MaixCAM Pro æ¿è½½çš„ BM8563 æŒ‚è½½åœ¨ I2C 4 ä¸Š. ç¤ºä¾‹ä»£ç : ```python from maix import ext_dev, pinmap, err, time ### Enable I2C # ret pinmap.set_pin_function(\"PIN_NAME\", \"I2Cx_SCL\") # if ret ! err.Err.ERR_NONE: # print(\"Failed in function pinmap...\") # exit( 1) # ret pinmap.set_pin_function(\"PIN_NAME\", \"I2Cx_SDA\") # if ret ! err.Err.ERR_NONE: # print(\"Failed in function pinmap...\") # exit( 1) BM8653_I2CBUS_NUM 4 rtc ext_dev.bm8563.BM8563(BM8653_I2CBUS_NUM) ### 2020 12 31 23:59:45 t [2020, 12, 31, 23, 59, 45] # Set time rtc.datetime(t) while True: rtc_now rtc.datetime() print(f\"{rtc_now[0]} {rtc_now[1]} {rtc_now[2]} {rtc_now[3]}:{rtc_now[4]}:{rtc_now[5]}\") time.sleep(1) ``` å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ MaixCAM Pro æ¿è½½çš„ BM8653, æ— éœ€ä½¿èƒ½ I2C 4. ç¤ºä¾‹ä¸­è¯»å†™ BM8653, è®¾ç½®æˆ–æ˜¯è¯»å–å½“å‰æ—¶é—´. æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹ç¤ºä¾‹å°†å½“å‰ BM8653 å†…çš„æ—¶é—´è®¾ç½®ä¸ºç³»ç»Ÿæ—¶é—´, æˆ–æ˜¯å°†å½“å‰ç³»ç»Ÿæ—¶é—´è®¾ç½®ä¸º BM8653 å†…çš„æ—¶é—´. ```python from maix import ext_dev, pinmap, err, time ### Enable I2C # ret pinmap.set_pin_function(\"PIN_NAME\", \"I2Cx_SCL\") # if ret ! err.Err.ERR_NONE: # print(\"Failed in function pinmap...\") # exit( 1) # ret pinmap.set_pin_function(\"PIN_NAME\", \"I2Cx_SDA\") # if ret ! err.Err.ERR_NONE: # print(\"Failed in function pinmap...\") # exit( 1) BM8653_I2CBUS_NUM 4 rtc ext_dev.bm8563.BM8563(BM8653_I2CBUS_NUM) ### Update RTC time from system rtc.systohc() ### Update system time from RTC # rtc.hctosys() while True: rtc_now rtc.datetime() print(f\"{rtc_now[0]} {rtc_now[1]} {rtc_now[2]} {rtc_now[3]}:{rtc_now[4]}:{rtc_now[5]}\") time.sleep(1) ``` **BM8653 çš„åº•å±‚å®ç°ç±»ä¼¼äºå•ä¾‹æ¨¡å¼, æœ¬ API å¯ä»¥ä¿è¯å¯¹å•ä¸ª BM8653 çš„è¯»å†™æ˜¯çº¿ç¨‹å®‰å…¨çš„. ä¹Ÿå°±æ„å‘³ç€æ‚¨å¯ä»¥éšæ„çš„åˆ›å»º BM8653 å¯¹è±¡, åœ¨ä»»æ„åœ°æ–¹è¯»å†™ BM8653 å‡ä¸ä¼šäº§ç”Ÿæ•°æ®ç«äº‰.** ä¼ ç»™ BM8653 å¯¹è±¡çš„ timetuple éµå¾ª (year, month, day[, hour[, minute[, second]]]), å³å¿…é¡»è¦æœ‰å‰ä¸‰ä¸ªå‚æ•°, åç»­å‚æ•°ç¼ºå¤±éƒ¨åˆ†ä»£è¡¨çš„æ—¶é—´ä¸ä¼šè¿›è¡Œä¿®æ”¹. BM8653 ä¿è¯è¿”å›çš„ timetuple ä¸ºç©ºæ—¶è¡¨ç¤ºé”™è¯¯, ä¸ä¸ºç©ºæ—¶å¿…å®šæ˜¯å«æœ‰6ä¸ªå…ƒç´ çš„ List[], å…¶å†…å®¹ä¸º(year, month, day, hour, minute, second). æœ‰å…³ BM8653 API çš„è¯¦ç»†è¯´æ˜è¯·çœ‹ [BM8653 API æ–‡æ¡£](../../../api/maix/ext_dev/bm8563.html)"},"/maixpy/doc/zh/modules/qmi8658.html":{"title":"MaixPy qmi8658é©±åŠ¨è¯´æ˜","content":" title: MaixPy qmi8658é©±åŠ¨è¯´æ˜ update: date: 2024 08 27 author: iawak9lkm version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## QMI8658 ç®€ä»‹ QMI8658æ˜¯ä¸€æ¬¾é›†æˆäº†ä¸‰è½´é™€èºä»ªå’Œä¸‰è½´åŠ é€Ÿåº¦è®¡çš„æƒ¯æ€§æµ‹é‡å•å…ƒï¼ˆIMUï¼‰èŠ¯ç‰‡. å®ƒèƒ½å¤Ÿæä¾›é«˜ç²¾åº¦çš„å§¿æ€ã€è¿åŠ¨å’Œä½ç½®æ•°æ®ï¼Œé€‚ç”¨äºå„ç§éœ€è¦ç²¾ç¡®è¿åŠ¨æ£€æµ‹çš„åº”ç”¨åœºæ™¯ï¼Œå¦‚æ— äººæœºã€æœºå™¨äººã€æ¸¸æˆæ§åˆ¶å™¨å’Œè™šæ‹Ÿç°å®è®¾å¤‡ç­‰ã€‚QMI8658å…·æœ‰ä½åŠŸè€—ã€é«˜ç¨³å®šæ€§å’Œé«˜çµæ•åº¦çš„ç‰¹ç‚¹. ## MaixPy ä¸­ä½¿ç”¨ QMI8658 åœ¨ MaixPy ä¸­ä½¿ç”¨ QMI8658 å¾ˆç®€å•, æ‚¨åªéœ€è¦çŸ¥é“æ‚¨ä½¿ç”¨çš„å¹³å°ä¸Š QMI8658 æŒ‚è½½åœ¨å“ªä¸ª I2C æ€»çº¿ä¸Š. MaixCAM Pro æ¿è½½çš„ QMI8658 æŒ‚è½½åœ¨ I2C 4 ä¸Š. ç¤ºä¾‹ä»£ç : ```python from maix import ext_dev, pinmap, err, time ### Enable I2C # ret pinmap.set_pin_function(\"PIN_NAME\", \"I2Cx_SCL\") # if ret ! err.Err.ERR_NONE: # print(\"Failed in function pinmap...\") # exit( 1) # ret pinmap.set_pin_function(\"PIN_NAME\", \"I2Cx_SDA\") # if ret ! err.Err.ERR_NONE: # print(\"Failed in function pinmap...\") # exit( 1) QMI8658_I2CBUS_NUM 4 imu ext_dev.qmi8658.QMI8658(QMI8658_I2CBUS_NUM, mode ext_dev.qmi8658.Mode.DUAL, acc_scale ext_dev.qmi8658.AccScale.ACC_SCALE_2G, acc_odr ext_dev.qmi8658.AccOdr.ACC_ODR_8000, gyro_scale ext_dev.qmi8658.GyroScale.GYRO_SCALE_16DPS, gyro_odr ext_dev.qmi8658.GyroOdr.GYRO_ODR_8000) while True: data imu.read() print(\"\\n \") print(f\"acc x: {data[0]}\") print(f\"acc y: {data[1]}\") print(f\"acc z: {data[2]}\") print(f\"gyro x: {data[3]}\") print(f\"gyro y: {data[4]}\") print(f\"gyro z: {data[5]}\") print(f\"temp: {data[6]}\") print(\" \\n\") ``` æŒ‰ç…§æ‚¨çš„éœ€æ±‚åˆå§‹åŒ– QMI8658 å¯¹è±¡, ç„¶åè°ƒç”¨ `read()` å³å¯. `read()` è¿”å›çš„æ˜¯ä» QMI8658 ä¸­è¯»å‡ºçš„åŸå§‹æ•°æ®. **å¦‚æœ `mode` å‚æ•°é€‰æ‹© `DUAL`, åˆ™ `read()`è¿”å›çš„æ•°æ®ä¸º `[acc_x, acc_y, acc_z, gyro_x, gyro_y, gyro_z, temp]`, å¦‚æœ `mode` åªé€‰æ‹© ACC/GYRO ä¸­çš„ä¸€ä¸ª, åªä¼šè¿”å›å¯¹åº”çš„ `[x, y, z, temp]`, ä¾‹å¦‚é€‰æ‹© ACC, `read()` ä¼šè¿”å› `[acc_x, acc_y, acc_z, temp]`.** æœ‰å…³ QMI8658 API çš„è¯¦ç»†è¯´æ˜è¯·çœ‹ [QMI8658 API æ–‡æ¡£](../../../api/maix/ext_dev/qmi8658.html)"},"/maixpy/doc/zh/modules/tmc2209.html":{"title":"MaixPy tmc2209 å•ä¸²å£é©±åŠ¨ä½¿ç”¨ä»‹ç»","content":" title: MaixPy tmc2209 å•ä¸²å£é©±åŠ¨ä½¿ç”¨ä»‹ç» update: date: 2024 08 21 author: iawak9lkm version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## TMC2209 ç®€ä»‹ TMC2209æ˜¯ä¸€æ¬¾ç”±å¾·å›½Trinamicå…¬å¸ç”Ÿäº§çš„æ­¥è¿›ç”µæœºé©±åŠ¨èŠ¯ç‰‡ã€‚å®ƒä¸“ä¸º2ç›¸æ­¥è¿›ç”µæœºè®¾è®¡ï¼Œå…·æœ‰ä½åŠŸè€—ã€é«˜æ•ˆç‡å’Œè‰¯å¥½çš„å™ªå£°æŠ‘åˆ¶èƒ½åŠ›ã€‚TMC2209æ”¯æŒé«˜è¾¾2.8Açš„ç”µæµï¼Œé€‚ç”¨äºå„ç§æ­¥è¿›ç”µæœºåº”ç”¨ï¼Œå¦‚3Dæ‰“å°æœºã€CNCæœºåºŠã€æœºå™¨äººç­‰ã€‚ ## MaixPy ä¸­ä½¿ç”¨ tmc2209 é©±åŠ¨æ­¥è¿›ç”µæœº * è¯·ç¡®ä¿æ‚¨çš„æ­¥è¿›ç”µæœºä¸ºä¸¤ç›¸å››çº¿æ­¥è¿›ç”µæœº, ç„¶åç¡®è®¤æ‚¨çš„ç”µæœºæ­¥è¿›è§’åº¦(step_angle), éœ€è¦ä½¿ç”¨çš„å¾®æ­¥æ•°(micro_step), ä»¥åŠè¯¥ç”µæœºæ—‹è½¬ä¸€åœˆæ—¶, è´Ÿè½½ç§»åŠ¨çš„è·ç¦»(screw_pitchæˆ–round_mm). ä»¥ä¾¿æˆ‘ä»¬åç»­é…ç½®é©±åŠ¨å‚æ•°. * ä¸€èˆ¬æ¥è¯´, å¸‚é¢ä¸Šçš„ TMC2209 çš„é©±åŠ¨æ¿æœ‰ä»¥ä¸‹è¿™äº›å¼•è„š(å¦‚æœæ‚¨å«Œéº»çƒ¦, å¯ä»¥é‡‡è´­æˆ‘å¸åœ¨å”®çš„ TMC2209 é©±åŠ¨æ¿, é“¾æ¥[æš‚æœªä¸Šæ¶,æ•¬è¯·æœŸå¾…]): ``` EN VM MS1 GND MS2 2B RX 2A TX 1A NC 1B STEP VDD DIR GND ``` `EN`: EN ä¸ºä½¿èƒ½è„š, å°†è¯¥å¼•è„šæ¥åˆ° `GND` ä»¥ç¡¬ä»¶ä½¿èƒ½ TMC2209. `MS1`: MS1 ä¸ºå¾®æ­¥è¿›é€‰æ‹©å¼•è„šä¹‹ä¸€ï¼Œä¸ MS2 å¼•è„šé…åˆä½¿ç”¨ï¼Œç”¨äºè®¾ç½®æ­¥è¿›ç”µæœºçš„å¾®æ­¥è¿›æ¨¡å¼ã€‚ `MS2`: MS2 ä¸ºå¾®æ­¥è¿›é€‰æ‹©å¼•è„šä¹‹ä¸€ï¼Œä¸ MS1 å¼•è„šé…åˆä½¿ç”¨ï¼Œç”¨äºè®¾ç½®æ­¥è¿›ç”µæœºçš„å¾®æ­¥è¿›æ¨¡å¼ã€‚ **This driver program only supports the UART mode of TMC2209. In UART mode, the original microstep selection pins `MS1` and `MS2` are redefined as `AD0` and `AD1`, respectively. The combination of the logic levels of these two pins determines the UART address of the TMC2209, with a value range from 0x00 to 0x03. This means that a single UART port can connect up to 4 TMC2209 drivers with different addresses. For example, when `MS1` is at a low level (0) and `MS2` is at a high level (1), the UART address is binary 0b10, which is hexadecimal 0x02.** `TX`: TX ä¸ºä¸²è¡Œé€šä¿¡å‘é€å¼•è„šï¼Œç”¨äºä¸å¤–éƒ¨å¾®æ§åˆ¶å™¨è¿›è¡Œä¸²å£é€šä¿¡ã€‚ `RX`: RX ä¸ºä¸²è¡Œé€šä¿¡æ¥æ”¶å¼•è„šï¼Œç”¨äºä¸å¤–éƒ¨å¾®æ§åˆ¶å™¨è¿›è¡Œä¸²å£é€šä¿¡ã€‚ åœ¨ TMC2209 ä¸Š, åŒæ—¶ä½¿ç”¨ `RX` å’Œ `TX` æ—¶, è¯·ç¡®ä¿ TMC2209 é©±åŠ¨æ¿ `RX` ä¸ä¸»æ§èŠ¯ç‰‡ `TX` é—´å­˜åœ¨ 1K æ¬§å§†çš„ç”µé˜». å¦åˆ™ä¼šå‡ºç°é€šä¿¡æ•°æ®å¼‚å¸¸. `NC`: NC ä¸ºæœªè¿æ¥å¼•è„šï¼Œè¡¨ç¤ºè¯¥å¼•è„šåœ¨æ­£å¸¸ä½¿ç”¨ä¸­ä¸éœ€è¦è¿æ¥ã€‚ `STEP`: STEP ä¸ºæ­¥è¿›ä¿¡å·è¾“å…¥å¼•è„šï¼Œæ¯æ¥æ”¶åˆ°ä¸€ä¸ªè„‰å†²ä¿¡å·ï¼Œæ­¥è¿›ç”µæœºå‰è¿›ä¸€ä¸ªæ­¥è¿›è§’åº¦ã€‚å› ä¸ºæœ¬é©±åŠ¨ä¸ºçº¯ UART æ–¹å¼é©±åŠ¨,æ•…è¯¥å¼•è„šä¸éœ€è¦è¿æ¥, æ‚¬ç©ºå³å¯. `DIR`: DIR ä¸ºæ–¹å‘ä¿¡å·è¾“å…¥å¼•è„šï¼Œç”¨äºæ§åˆ¶æ­¥è¿›ç”µæœºçš„æ—‹è½¬æ–¹å‘ã€‚å½“ DIR ä¸ºé«˜ç”µå¹³æ—¶ï¼Œç”µæœºé¡ºæ—¶é’ˆæ—‹è½¬ï¼›å½“ DIR ä¸ºä½ç”µå¹³æ—¶ï¼Œç”µæœºé€†æ—¶é’ˆæ—‹è½¬ã€‚å› ä¸ºæœ¬é©±åŠ¨ä¸ºçº¯ UART æ–¹å¼é©±åŠ¨,æ•…è¯¥å¼•è„šä¸éœ€è¦è¿æ¥, æ‚¬ç©ºå³å¯. `VM`: VM ä¸ºç”µæºè¾“å…¥å¼•è„šï¼Œè¿æ¥åˆ°æ­¥è¿›ç”µæœºçš„ç”µæºæ­£æã€‚ `GND`: GND ä¸ºæ¥åœ°å¼•è„šï¼Œè¿æ¥åˆ°ç”µæºçš„è´Ÿæã€‚ `2B`, `2A`, `1B`, `1A`: è¿™äº›å¼•è„šä¸ºæ­¥è¿›ç”µæœºçš„ç›¸ä½è¾“å‡ºå¼•è„šï¼Œåˆ†åˆ«è¿æ¥åˆ°æ­¥è¿›ç”µæœºçš„ä¸¤ç›¸çº¿åœˆã€‚ `VDD`: VDD ä¸ºé€»è¾‘ç”µæºè¾“å…¥å¼•è„šï¼Œä¸ºèŠ¯ç‰‡å†…éƒ¨çš„é€»è¾‘ç”µè·¯æä¾›ç”µæºã€‚ * ä½¿ç”¨ MaixPy ä¸­çš„ TMC2209 é©±åŠ¨ ä»¥ä¸€ä¸ªæ­¥è¿›è§’åº¦ä¸º18,å¾®æ­¥æ•°ä¸º256,èºè·ä¸º3mmçš„ä¸æ†æ­¥è¿›ç”µæœºä¸ºä¾‹: ```python from maix import pinmap, ext_dev, err, time port \"/dev/ttyS1\" uart_addr 0x00 uart_baudrate 115200 step_angle 18 micro_step 256 screw_pitch 3 speed 6 use_internal_sense_resistors True run_current_per 100 hold_current_per 100 if port \"/dev/ttyS1\": ret pinmap.set_pin_function(\"A19\", \"UART1_TX\") if ret ! err.Err.ERR_NONE: print(\"Failed in function pinmap...\") exit( 1) ret pinmap.set_pin_function(\"A18\", \"UART1_RX\") if ret ! err.Err.ERR_NONE: print(\"Failed in function pinmap...\") exit( 1) slide ext_dev.tmc2209.ScrewSlide(port, uart_addr, uart_baudrate, step_angle, micro_step, screw_pitch, speed, use_internal_sense_resistors, run_current_per, hold_current_per) def reset_callback() > bool: if 2 > 1: # An event occurs (e.g., a sensor is triggered), # indicating that the slide has moved to the boundary and the motor needs to stop. print(\"Reset finish...\") return True # Not occurred, no need to stop the motor. return False def move_callback(per:float) > bool: # per is the percentage of the current distance moved by move() # out of the total distance required for the current move(), ranging from 0 to 100. print(f\"Slide moving... {per}\") if per > 50: # Example: Stop moving when 50% of the total distance for the current move() has been covered. print(f\"{per} > 50%, stop.\") return True return False slide.reset(reset_callback) slide.move(screw_pitch*2, 1, move_callback) slide.move( screw_pitch) while True: slide.move(screw_pitch*2) slide.move( (screw_pitch*2)) time.sleep_ms(100) ``` ç¨‹åºä¸­éœ€è¦å…ˆä½¿ç”¨ `pinmap` ç¡®ä¿ UART1 è¢«å¯ç”¨. ç„¶ååˆ›å»ºä¸€ä¸ª `ScrewSlide` å¯¹è±¡, é»˜è®¤ä½¿ç”¨å†…éƒ¨å‚è€ƒç”µé˜», é»˜è®¤ä½¿ç”¨ 100% çš„ç”µæœºè¿è¡Œç”µæµå’Œ 100% çš„ç”µæœºä¿æŒç”µæµ. è¿™äº›å‚æ•°å¯èƒ½éœ€è¦æ ¹æ®æ‚¨çš„ç”µæœºè¿›è¡Œè°ƒæ•´. ç„¶åä¾‹ç¨‹å£°æ˜äº†ä¸€ä¸ªresetå›è°ƒå‡½æ•°å’Œä¸€ä¸ªmoveå›è°ƒå‡½æ•°å¹¶åˆ†åˆ«ä¼ å…¥reset()å‡½æ•°å’Œmove()å‡½æ•°ä¸­. reset() å’Œ move() ä¼šæ¯éš”ä¸€æ®µæ—¶é—´è°ƒç”¨å›è°ƒå‡½æ•°ä»¥ç¡®è®¤æ˜¯å¦éœ€è¦ç«‹å³åœæ­¢ç”µæœº(å½“å›è°ƒå‡½æ•°è¿”å›True). move() å’Œ reset() å‡½æ•°å‡ä¸ºé˜»å¡å‡½æ•°, åªæœ‰åœ¨å›è°ƒå‡½æ•°è¿”å›Trueæ—¶(moveè¿˜èƒ½åœ¨è¿åŠ¨å®ŒæŒ‡å®šé•¿åº¦æ—¶)åœæ­¢ç”µæœºå¹¶è¿”å›. ## MaixPy ä¸­ä½¿ç”¨ tmc2209 é©±åŠ¨æ’å®šè´Ÿè½½çš„æ­¥è¿›ç”µæœº **!!!ä¸æ†æ­¥è¿›ç”µæœºæºå¸¦æ’å®šè´Ÿè½½ä¹Ÿä¸èƒ½è§†ä¸ºå¸¦æ’å®šè´Ÿè½½çš„æ­¥è¿›ç”µæœº, å› ä¸ºä¸æ†æ­¥è¿›ç”µæœºæœ‰é™ä½è£…ç½®ä»¥ä¿è¯è´Ÿè½½åœ¨æ ä¸Šçš„è¿åŠ¨æ–¹å‘æ˜¯å¯çŸ¥çš„, ä¸æ†æ­¥è¿›ç”µæœºè¿è¡Œæ—¶ä¼šä¸é™ä½è£…ç½®ç»å¸¸ç¢°æ’å¯¼è‡´ç”µæœºè´Ÿè½½å¹¶ä¸æ˜¯æ’å®šçš„. å…¶ä»–æƒ…å†µä¸¾ä¸€åä¸‰å³å¯çŸ¥æ˜¯å¦ä¸ºæ’å®šè´Ÿè½½æ­¥è¿›ç”µæœº.** æŸäº›åº”ç”¨åœºæ™¯ä¸­, æ­¥è¿›ç”µæœºå…¨ç¨‹çš„è´Ÿè½½æ’å®š, åªæœ‰åœ¨æ¥è§¦åˆ°è¾¹ç¼˜å µè½¬æ—¶è´Ÿè½½å˜é«˜. é‚£ä¹ˆå¯ä»¥ä½¿ç”¨ `Slide` ç±»ä»£æ›¿ `ScrewSlide` ç±», åœ¨è¿™ç§æƒ…å†µä¸‹ `Slide` å…·å¤‡å µè½¬æ£€æµ‹åŠŸèƒ½. ä½¿ç”¨ `ScrewSlide` ä¹Ÿæ˜¯å¯è¡Œçš„, ä¸å…·å¤‡å µè½¬æ£€æµ‹ä½†æ˜¯æ›´åŠ çµæ´». è¯·ç»“åˆä½¿ç”¨åœºæ™¯æ¥é€‰æ‹©è¿™ä¸¤ä¸ªç±», æœ¬èŠ‚åªè®² `Slide` ç±». * å®ç°åŸç† TMC2209 å†…éƒ¨å­˜åœ¨ä¸€ä¸ªå¯„å­˜å™¨ `SG_RESULT`, è¯¥å¯„å­˜å™¨ä¿å­˜çš„æ•°æ®ä¸é©±åŠ¨ç”µæœºå‰©ä½™åŠ›çŸ©æˆæ­£æ¯”. å¦‚æœç”µæœºè´Ÿè½½æ’å®š, è¯¥å¯„å­˜å™¨å€¼å˜åŒ–å¹…åº¦å¾ˆå°, åœ¨å µè½¬æ—¶, è¯¥å¯„å­˜å™¨å€¼å°†ä¼šå¿«é€Ÿå‡å°å¹¶ç»´æŒä¸€ä¸ªè¾ƒä½çš„å€¼. æ‰¾åˆ°è¯¥æ’å®šè´Ÿè½½ç”µæœºè¿™ä¸ªå¯„å­˜å™¨çš„è¿è¡Œå¹³å‡å€¼å’Œå µè½¬å¹³å‡å€¼, å³å¯è¡¡é‡è¯¥ç”µæœºåœ¨æŸæ—¶åˆ»æ˜¯å¦å µè½¬. * è·å– `SG_RESULT` å¯„å­˜å™¨çš„å¹³å‡å€¼ `maix.ext_dev.tmc2209` ä¸­æä¾›äº†è·å–å¹¶ä¿å­˜è¯¥å¹³å‡å€¼çš„å‡½æ•° `maix.ext_dev.tmc2209.slide_scan`. example: ```python from maix import ext_dev, pinmap, err port \"/dev/ttyS1\" uart_addr 0x00 uart_baudrate 115200 step_angle 1.8 micro_step 256 round_mm 60 speed 60 use_internal_sense_resistors True run_current_per 100 hold_current_per 100 if port \"/dev/ttyS1\": ret pinmap.set_pin_function(\"A19\", \"UART1_TX\") if ret ! err.Err.ERR_NONE: print(\"Failed in function pinmap...\") exit( 1) ret pinmap.set_pin_function(\"A18\", \"UART1_RX\") if ret ! err.Err.ERR_NONE: print(\"Failed in function pinmap...\") exit( 1) ext_dev.tmc2209.slide_scan(port, uart_addr, uart_baudrate, step_angle, micro_step, round_mm, speed, True, True, run_current_per, hold_current_per, conf_save_path './slide_scan_example.bin', force_update False) ``` é…ç½®å¥½ä¸²å£å’Œé©±åŠ¨å™¨å‚æ•°, ç„¶åè°ƒç”¨ `slide_scan`. `slide_scan` çš„æœ€åä¸€ä¸ªå‚æ•° `force_update` å†³å®šäº†åœ¨è¯¥é…ç½®æ–‡ä»¶å·²ç»å­˜åœ¨æ—¶çš„è¡Œä¸º: > å¦‚æœ `force_update` ä¸º True, å°†ä¼šç”¨æ–°çš„é…ç½®è¦†ç›–æ—§çš„é…ç½® > > å¦‚æœ `force_update` ä¸º False, è¿è¡Œå¹³å‡å€¼å°†ä¼šæ›´æ–°ä¸ºæ–°æ—§å€¼çš„å¹³å‡å€¼, å µè½¬å¹³å‡å€¼å°†ä¼šæ›´æ–°æˆæ–°æ—§å µè½¬å¹³å‡å€¼ä¸­è¾ƒå¤§çš„é‚£ä¸€ä¸ªå€¼(ä¾‹å¦‚ä¸€ä¸ªæ»‘èƒæœ‰å·¦å³è¾¹ç•Œ, å·¦è¾¹ç•Œå µè½¬å¹³å‡å€¼å°äºå³è¾¹ç•Œå µè½¬å¹³å‡å€¼, ä¹Ÿå°±æ˜¯è¯´å³è¾¹ç•Œæ¯”å·¦è¾¹ç•Œæ›´å®¹æ˜“å µè½¬, ä¿å­˜æœ€å®¹æ˜“å µè½¬çš„å¹³å‡å€¼). è¯¥ç¨‹åºæ‰§è¡Œå, æ­¥è¿›ç”µæœºä¼šä¸€ç›´ä¿æŒæ­£å‘æ—‹è½¬, å½“é‡åˆ°å µè½¬æ—¶, ç¨ç­‰300mså·¦å³, åœæ­¢è¯¥ç¨‹åº. ç¨‹åºä¼šè®°å½•è¿è¡Œæ—¶çš„ `SG_RESULT` å¯„å­˜å™¨å¹³å‡å€¼å’Œå µè½¬æ—¶çš„å¯„å­˜å™¨å¹³å‡å€¼åˆ° `conf_save_path` ä¸­. åç»­ `Slide` ç±»å¯ä»¥åŠ è½½è¯¥é…ç½®æ–‡ä»¶å®ç°å µè½¬æ—¶åœæ­¢ç”µæœº. * éªŒè¯é…ç½®æ–‡ä»¶çš„å€¼ æˆ–è®¸æ‚¨ä¼šå¥½å¥‡è¿™ä¸ªé…ç½®åˆ°åº•èƒ½ä¸èƒ½ç”¨. `maix.ext_dev.tmc2209` æä¾›äº†æµ‹è¯•è¯¥é…ç½®æ–‡ä»¶çš„å‡½æ•° `slide_test`. å…ˆä¿è¯ç”µæœºå¾®å¤„äºå µè½¬çŠ¶æ€, ç„¶åä¿®æ”¹å‚æ•°ä»¥åŒ¹é…æ‚¨è°ƒç”¨ `slide_scan` çš„å‚æ•°, æ‰§è¡Œä»¥ä¸‹ä»£ç . example ```python from maix import ext_dev, pinmap, err port \"/dev/ttyS1\" uart_addr 0x00 uart_baudrate 115200 step_angle 1.8 micro_step 256 round_mm 60 speed 60 use_internal_sense_resistors True run_current_per 100 hold_current_per 100 if port \"/dev/ttyS1\": ret pinmap.set_pin_function(\"A19\", \"UART1_TX\") if ret ! err.Err.ERR_NONE: print(\"Failed in function pinmap...\") exit( 1) ret pinmap.set_pin_function(\"A18\", \"UART1_RX\") if ret ! err.Err.ERR_NONE: print(\"Failed in function pinmap...\") exit( 1) ext_dev.tmc2209.slide_test(port, uart_addr, uart_baudrate, step_angle, micro_step, round_mm, speed, True, True, run_current_per, hold_current_per, conf_save_path './slide_scan_example.bin') ``` ç”µæœºå°†ä¼šåœ¨å µè½¬ç¬é—´åœæ­¢è½¬åŠ¨, ç¨‹åºä¹Ÿä¼šéšä¹‹ç»“æŸ. `Slide.move()` å’Œ `Slide.reset()` å µè½¬åœæ­¢é€»è¾‘ä¹Ÿæ˜¯å¦‚æ­¤. * ä½¿ç”¨ `Slide` ä½¿ç”¨ `Slide` çš„æ€è·¯ä¸ `ScrewSlide` åŸºæœ¬æ— å¼‚, åªæ˜¯ `Slide` å–æ¶ˆäº†å›è°ƒå‡½æ•°å¹¶å¢åŠ äº†å µè½¬åœæ­¢é€»è¾‘. å¦‚æœä½¿ç”¨ `Slide` æ—¶æœªä¼ å…¥é…ç½®æ–‡ä»¶, `Slide`ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨çš„. å µè½¬æ£€æµ‹é˜ˆå€¼ä¸ºç”µæœºè¿è¡Œå¼€å§‹æ—¶çš„å¹³å‡æ•°*`Slide.stop_default_per()`/100. ç”µæœºè¿è¡Œè¿‘æœŸå¹³å‡æ•°ä½äºè¯¥å€¼æ—¶ç”µæœºåœæ­¢. å¯ä»¥é€šè¿‡ `Slide.stop_default_per()` è·å–å’Œä¿®æ”¹è¯¥å€¼. ```python from maix import pinmap, ext_dev, err, time port \"/dev/ttyS1\" uart_addr 0x00 uart_baudrate 115200 step_angle 1.8 micro_step 256 round_mm 60 speed 60 use_internal_sense_resistors True run_current_per 100 hold_current_per 100 if port \"/dev/ttyS1\": ret pinmap.set_pin_function(\"A19\", \"UART1_TX\") if ret ! err.Err.ERR_NONE: print(\"Failed in function pinmap...\") exit( 1) ret pinmap.set_pin_function(\"A18\", \"UART1_RX\") if ret ! err.Err.ERR_NONE: print(\"Failed in function pinmap...\") exit( 1) slide ext_dev.tmc2209.Slide(port, uart_addr, uart_baudrate, step_angle, micro_step, round_mm, speed, cfg_file_path \"./slide_conf.bin\") slide.reset() slide.move(60) slide.move( 60) ``` ## æ³¨æ„äº‹é¡¹ **æœ¬é©±åŠ¨ç¨‹åºç”±çº¯ä¸²å£å®ç°, ä¼˜ç‚¹æ˜¯å æœ‰å¼•è„šå ç”¨å¼•è„šè¾ƒå°‘å³å¯å®ç°è‡³å¤š4ä¸ªè¾ƒé«˜ç²¾åº¦çš„ç”µæœºé©±åŠ¨. ç¼ºç‚¹æ˜¯ä¸é€‚ç”¨äºé«˜ç²¾åº¦è¦æ±‚çš„åº”ç”¨åœºæ™¯.** å·²çŸ¥é—®é¢˜: * è¯·å‹¿ä½¿ç”¨ MaixCAM çš„ UART0 ä½œä¸ºé©±åŠ¨ä¸²å£, ä¼šå¯¼è‡´ MaixCAM æ— æ³•æ­£å¸¸å¼€æœºç­‰é—®é¢˜. **!!!å¦‚æœ‰BUG, éå¸¸æ¬¢è¿æ‚¨æäº¤ PR åé¦ˆ.** ## å…è´£å£°æ˜ æœ¬ç”µæœºé©±åŠ¨ç¨‹åºï¼ˆä»¥ä¸‹ç®€ç§°â€œç¨‹åºâ€ï¼‰æ˜¯ç”±[Sipeed]åŸºäºBSD 3å¼€æºåè®®çš„ä»“åº“ [janelia arduino/TMC2209](https://github.com/janelia arduino/TMC2209) è¿›è¡Œä¿®æ”¹å’Œä½¿ç”¨çš„ã€‚æœ¬ç¨‹åºä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä¸ä¿è¯åœ¨æ‰€æœ‰ç¯å¢ƒå’Œæ¡ä»¶ä¸‹éƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚ä½¿ç”¨æœ¬ç¨‹åºçš„é£é™©ç”±ç”¨æˆ·è‡ªè¡Œæ‰¿æ‹…ã€‚ [Sipeed]ä¸å¯¹å› ä½¿ç”¨æˆ–æ— æ³•ä½¿ç”¨æœ¬ç¨‹åºè€Œå¯¼è‡´çš„ä»»ä½•æŸå¤±æˆ–æŸå®³æ‰¿æ‹…è´£ä»»ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºç›´æ¥æŸå¤±ã€é—´æ¥æŸå¤±ã€å¶ç„¶æŸå¤±ã€ç‰¹æ®ŠæŸå¤±ã€æƒ©ç½šæ€§æŸå¤±æˆ–åæœæ€§æŸå¤±ã€‚ ç”¨æˆ·åœ¨å®é™…åº”ç”¨ä¸­ä½¿ç”¨æœ¬ç¨‹åºå‰ï¼Œåº”è‡ªè¡Œè¿›è¡Œå……åˆ†çš„æµ‹è¯•å’ŒéªŒè¯ï¼Œç¡®ä¿ç¨‹åºç¬¦åˆå…¶ç‰¹å®šéœ€æ±‚å’Œç¯å¢ƒã€‚[Sipeed]ä¸å¯¹ç¨‹åºçš„å‡†ç¡®æ€§ã€å¯é æ€§ã€å®Œæ•´æ€§æˆ–é€‚ç”¨æ€§åšå‡ºä»»ä½•æ˜ç¤ºæˆ–æš—ç¤ºçš„ä¿è¯ã€‚ ç”¨æˆ·åœ¨ä½¿ç”¨æœ¬ç¨‹åºæ—¶åº”éµå®ˆæ‰€æœ‰é€‚ç”¨çš„æ³•å¾‹æ³•è§„ï¼Œå¹¶ç¡®ä¿ä¸ä¾µçŠ¯ä»»ä½•ç¬¬ä¸‰æ–¹çš„åˆæ³•æƒç›Šã€‚[Sipeed]ä¸å¯¹å› ç”¨æˆ·è¿åæ³•å¾‹æ³•è§„æˆ–ä¾µçŠ¯ç¬¬ä¸‰æ–¹æƒç›Šè€Œå¯¼è‡´çš„ä»»ä½•åæœæ‰¿æ‹…è´£ä»»ã€‚ æœ¬å…è´£å£°æ˜çš„è§£é‡Šæƒå½’[Sipeed]æ‰€æœ‰ï¼Œå¹¶ä¿ç•™éšæ—¶ä¿®æ”¹æœ¬å…è´£å£°æ˜çš„æƒåˆ©ã€‚"},"/maixpy/doc/zh/modules/thermal_cam.html":{"title":"MaixCAM MaixPy ä½¿ç”¨çƒ­çº¢å¤–å›¾åƒä¼ æ„Ÿå™¨","content":" title: MaixCAM MaixPy ä½¿ç”¨çƒ­çº¢å¤–å›¾åƒä¼ æ„Ÿå™¨ ç›®å‰å®˜æ–¹è¿˜æœªä¸Šæ¶ç¡¬ä»¶äº§å“ï¼Œå¦‚æœåªæ˜¯å°åˆ†è¾¨ç‡éœ€æ±‚ï¼Œå¯ä»¥è‡ªå·±æ·˜å®ä¹°ä¸€ä¸ªä¸²å£æˆ–è€… IIC æ¨¡å—è¿›è¡Œé©±åŠ¨ï¼Œåé¢å®˜æ–¹ä¸Šçº¿é«˜åˆ†è¾¨ç‡æ¨¡å—ä¼šæ›´æ–°æœ¬æ–‡æ¡£ã€‚ çƒ­çº¢å¤–æ‘„åƒå¤´æ¨¡å—æ¯”å¦‚å¯ä»¥å‚è€ƒ[K210+MLX90640çº¢å¤–çƒ­åƒä»ª](https://neucrack.com/p/189), [çƒ­çº¢å¤– heimann (æµ·æ›¼) HTPA 32x32d](https://neucrack.com/p/199)ã€‚"},"/maixpy/doc/zh/modules/temp_humi.html":{"title":"MaixCAM MaixPy è¯»å–æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨","content":" title: MaixCAM MaixPy è¯»å–æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ ## ç®€ä»‹ é€šè¿‡ç»™ MaixCAM å¤–æŒ‚ä¸€ä¸ªæ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨æ¨¡å—ï¼Œå¯ä»¥è½»æ¾è¯»å–åˆ°ç¯å¢ƒæ¸©åº¦å’Œæ¹¿åº¦ï¼Œè¿™é‡Œä»¥ `Si7021` è¿™æ¬¾ä¼ æ„Ÿå™¨ä¸ºä¾‹ï¼Œé€šè¿‡ `I2C` å¯ä»¥é©±åŠ¨å®ƒã€‚ ## ä½¿ç”¨ å®Œæ•´çš„ä»£ç åœ¨[MaixPy/examples/ext_dev/sensors/temp_humi_si7021.py](https://github.com/sipeed/MaixPy/blob/main/examples/sensors/temp_humi_si7021.py) æ³¨æ„ç³»ç»Ÿé•œåƒéœ€è¦ `> 2024.6.3_maixpy_v4.2.1` ç‰ˆæœ¬ã€‚"},"/maixpy/doc/zh/modules/tof.html":{"title":"","content":" titile: MaixCAM MaixPy ä½¿ç”¨ TOF æ¨¡å—æµ‹è·å’Œåœ°å½¢æ£€æµ‹ Sipeed å®˜æ–¹æœ‰å¦å¤–[ä¸¤æ¬¾ TOF æ¨¡å—](https://wiki.sipeed.com/hardware/zh/maixsense/index.html) å¯ä»¥ç”¨æ¥æµ‹è·ï¼Œå¯ä»¥è´­ä¹°ä½¿ç”¨ä¸²å£é€šä¿¡ä½¿ç”¨ã€‚"},"/maixpy/doc/zh/source_code/build.html":{"title":"MaixCAM MaixPy å¼€å‘æºä»£ç æŒ‡å—","content":" title: MaixCAM MaixPy å¼€å‘æºä»£ç æŒ‡å— ## è·å–æºä»£ç  ```shell mkdir p ~/maix cd ~/maix git clone https://github.com/sipeed/MaixPy ``` ## è·å– MaixCDK æºç  MaixPy é¡¹ç›®ä¾èµ–äº MaixCDKï¼Œéœ€è¦å…ˆå…‹éš†å®ƒï¼Œæ”¾åˆ°ç”µè„‘çš„æŸä¸ªç›®å½•ï¼ˆå‹¿æ”¾åœ¨ MaixPy ç›®å½•ä¸‹ï¼‰ ```shell cd ~/maix git clone https://github.com/sipeed/MaixCDK ``` ç„¶åéœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡ `MAIXCDK_PATH` æŒ‡å®š MaixCDK çš„è·¯å¾„ï¼Œå¯ä»¥åœ¨ `~/.bashrc` æˆ–è€…`~/.zshrc`ï¼ˆæ ¹æ®ä½ ä½¿ç”¨çš„shellå†³å®šï¼‰æ·»åŠ ï¼š ```shell export MAIXCDK_PATH ~/maix/MaixCDK ``` åªæœ‰åœ¨æˆåŠŸè®¾ç½®ç¯å¢ƒå˜é‡åï¼Œ MaixPy æ‰èƒ½æ‰¾åˆ° MaixCDK æºç ã€‚ ## æ„å»ºå¹¶æ‰“åŒ…æˆ wheel æ–‡ä»¶ ```shell cd ~/maix/MaixPy python setup.py bdist_wheel maixcam ``` `maixcam` å¯ä»¥è¢«æ›¿æ¢ä¸ºå…¶ä»–æ¿å¡é…ç½®, è¯·æŸ¥çœ‹ `MaixPy/platforms` ç›®å½•ã€‚ æ„å»ºæˆåŠŸå, ä½ ä¼šåœ¨ `dist` ç›®å½•ä¸­æ‰¾åˆ° wheel æ–‡ä»¶, ä¼ è¾“åˆ°è®¾å¤‡ï¼ˆå¼€å‘æ¿ï¼‰ï¼Œåœ¨è®¾å¤‡ç»ˆç«¯ä¸­ä½¿ç”¨ `pip install U MaixPy****.whl` åœ¨ä½ çš„è®¾å¤‡ä¸Šå®‰è£…æˆ–å‡çº§ã€‚ > `python setup.py bdist_wheel maixcam skip build` ä¸ä¼šæ‰§è¡Œæ„å»ºå‘½ä»¤, åªä¼šæ‰“åŒ… wheel æ–‡ä»¶, å› æ­¤ä½ å¯ä»¥å…ˆä½¿ç”¨ `maixcdk menuconfig` å’Œ `maixcdk build` æ¥è‡ªå®šä¹‰æ„å»ºã€‚ > å¦å¤–å¦‚æœä½ æ˜¯åœ¨è°ƒè¯• APIï¼Œéœ€è¦é¢‘ç¹å®‰è£…ï¼Œä½¿ç”¨ pip å®‰è£…ä¼šæ¯”è¾ƒæ…¢ï¼Œå¯ä»¥ç›´æ¥ç¼–è¯‘åæ‹·è´ `maix` ç›®å½•åˆ°è®¾å¤‡çš„ `/usr/lib/python3.11/site packages`ç›®å½•ä¸‹è¦†ç›–æ—§çš„æ–‡ä»¶å³å¯ã€‚ ## æ‰‹åŠ¨æ„å»º ```shell maixcdk build ``` ## ä¿®æ”¹æºä»£ç åè¿è¡Œæµ‹è¯• * é¦–å…ˆ, æ„å»ºæºä»£ç  ```shell maixcdk build ``` * å¦‚æœä¸º PC è‡ªèº«æ„å»º(å¹³å° `linux`): ç„¶åæ‰§è¡Œ `./run.sh your_test_file_name.py` æ¥è¿è¡Œ Python è„šæœ¬ã€‚ ```shell cd test ./run.sh examples/hello_maix.py ``` * å¦‚æœä¸ºæ¿å¡äº¤å‰ç¼–è¯‘: * æœ€å¿«çš„æ–¹å¼æ˜¯å°† `maix` ç›®å½•å¤åˆ¶åˆ°è®¾å¤‡çš„ `/usr/lib/python3.11/site packages/` ç›®å½•, ç„¶ååœ¨è®¾å¤‡ä¸Šè¿è¡Œè„šæœ¬ã€‚ * æˆ–è€…æ‰“åŒ… wheel æ–‡ä»¶å¹¶åœ¨è®¾å¤‡ä¸Šä½¿ç”¨ `pip install U MaixPy****.whl` å®‰è£…, ç„¶ååœ¨è®¾å¤‡ä¸Šè¿è¡Œè„šæœ¬ã€‚ ## æœ¬åœ°é¢„è§ˆæ–‡æ¡£ æ–‡æ¡£ä½äº [docs](https://github.com/sipeed/MaixPy/tree/main/docs) ç›®å½•, ä½¿ç”¨ `Markdown` æ ¼å¼, ä½ å¯ä»¥ä½¿ç”¨ [teedoc](https://github.com/teedoc/teedoc) æ¥ç”Ÿæˆç½‘é¡µç‰ˆæœ¬çš„æ–‡æ¡£ã€‚ API æ–‡æ¡£ä¼šåœ¨æ„å»º MaixPy å›ºä»¶æ—¶ç”Ÿæˆ, **å¦‚æœä½ æ²¡æœ‰æ„å»º MaixPy, API æ–‡æ¡£å°†ä¼šæ˜¯ç©ºçš„**ã€‚ ```shell pip install teedoc U cd docs teedoc install i https://pypi.tuna.tsinghua.edu.cn/simple teedoc serve ``` ç„¶åè®¿é—® `http://127.0.0.1:2333` åœ¨ç½‘é¡µæµè§ˆå™¨ä¸­é¢„è§ˆæ–‡æ¡£ã€‚ ## å¯¹äºæƒ³è¦è´¡çŒ®çš„å¼€å‘è€… è¯·æŸ¥çœ‹ [MaixPy å¼€å‘æºä»£ç æŒ‡å—](./contribute.html) å¦‚æœåœ¨ä½¿ç”¨æºä»£ç æ—¶é‡åˆ°ä»»ä½•é—®é¢˜, è¯·å…ˆå‚è€ƒ [FAQ](./faq.html)ã€‚"},"/maixpy/doc/zh/source_code/add_c_module.html":{"title":"ç»™ MaixCAM MaixPy æ·»åŠ ä¸€ä¸ª C/C++ æ¨¡å—","content":" title: ç»™ MaixCAM MaixPy æ·»åŠ ä¸€ä¸ª C/C++ æ¨¡å— ## ç®€ä»‹ æœ‰æ—¶å€™éœ€è¦é«˜æ•ˆåœ°æ‰§è¡ŒæŸä¸ªå‡½æ•°ï¼Œ Python çš„é€Ÿåº¦æ— æ³•æ»¡è¶³æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ C/C++ æˆ–è€…å…¶å®ƒç¼–è¯‘å‹è¯­è¨€æ¥å®ç°ã€‚ ## é€šç”¨å‡½æ•°å°è£… å¦‚æœä½ æƒ³å°è£…çš„å‡½æ•°å®ç°çš„åŠŸèƒ½ä¸ä¾èµ– MaixPy çš„å…¶å®ƒåŠŸèƒ½ï¼Œç›´æ¥ä½¿ç”¨ Python ä½¿ç”¨ C/C++ æ·»åŠ æ¨¡å—çš„é€šç”¨æ–¹æ³•ï¼Œå…·ä½“æ–¹æ³•å¯ä»¥è‡ªè¡Œç™¾åº¦ï¼Œæ¯”å¦‚ ffiï¼Œ ctype ç­‰ > æ¬¢è¿ PR æ·»åŠ æ–¹æ³• ## å¦‚æœä½ çš„æ¨¡å—è¿˜æƒ³ä¾èµ– MaixPy çš„å…¶å®ƒåŸºç¡€ API ### æ–¹æ³•ä¸€ ç›´æ¥ä¿®æ”¹ MaixPy å›ºä»¶ï¼Œç„¶åç¼–è¯‘è¿‡å³å¯ï¼Œå‚è€ƒ [æŸ¥çœ‹ MaixPy API æºç ](../basic/view_src_code.html)ï¼Œè¿™ç§æ–¹æ³•æœ€ç®€å•å¿«æ·ï¼Œå¦‚æœä»£ç å°è£…å¥½äº†è¿˜èƒ½åˆå¹¶åˆ°å®˜æ–¹ä»“åº“ï¼ˆæäº¤ PRï¼‰ã€‚ * æŒ‰ç…§[ç¼–è¯‘ MaixPy æºç ](./build.html) é€šè¿‡å³å¯è·å¾—`dist/***.whl`å®‰è£…åŒ…ã€‚ * å°†`dist`ç›®å½•ä¸‹çš„`.whl`åŒ…å‘é€åˆ°è®¾å¤‡ï¼Œç„¶åä½¿ç”¨è¿è¡Œä»£ç `import os;os.system(\"pip install /root/xxxxx.whl\")`å³å¯ï¼ˆæ›¿æ¢è·¯å¾„ï¼‰ã€‚ * å¦‚æœè°ƒè¯•çš„æ—¶å€™è§‰å¾—å®‰è£… `.whl` åŒ…å¤ªæ…¢äº†ï¼Œå¯ä»¥ä½¿ç”¨`maixcdk build` ç¼–è¯‘ï¼Œç„¶åä½¿ç”¨`scp r maix_xxx root@10.228.104.1:/usr/lib/python3.11/site packages`ç›´æ¥æ‹·è´åˆ°è®¾å¤‡ç³»ç»Ÿç§è¦†ç›–åŒ…ï¼Œè¿™é‡Œéœ€è¦æ ¹æ®ä½ çš„åŒ…åå’Œè®¾å¤‡ ip æ›¿æ¢ä¸€ä¸‹ã€‚ * å½“ä½ è°ƒè¯•å¥½åå¦‚æœè§‰å¾—è‡ªå·±å¡«åŠ çš„åŠŸèƒ½ä¸é”™ï¼Œå¯ä»¥è€ƒè™‘åˆå¹¶åˆ°å®˜æ–¹çš„ä»“åº“ï¼Œå…·ä½“æ–¹æ³•å¯ä»¥æœç´¢å¼•æ“æœç´¢\"github æäº¤ PR\"ç›¸å…³å…³é”®è¯å­¦ä¹ ã€‚ ä¿®æ”¹ä»£ç ï¼š æ­£å¦‚ [æŸ¥çœ‹ MaixPy API æºç ](../basic/view_src_code.html) é—®ç§æ‰€æè¿°çš„æŸ¥çœ‹å’Œä¿®æ”¹æºç çš„æ–¹å¼ï¼Œå¢åŠ  C++ å‡½æ•°ï¼Œå¹¶ä¸”å¡«åŠ æ³¨é‡Šï¼Œç„¶åç¼–è¯‘å MaixPy ä¸­å°±èƒ½è°ƒç”¨äº†ï¼Œéå¸¸ç®€å•ã€‚ æ¯”å¦‚ï¼š ```cpp namespace maix::test { /** * My function, add two integer. * @param a arg a, int type * @param b arg b, int type * @return int type, will a + b * @maixpy maix.test.add */ int add(int a, int b); } ``` æ²¡é”™ï¼Œç›´æ¥å†™ä¸€ä¸ª C++ è¯­æ³•çš„å‡½æ•°ï¼Œæ³¨æ„è¿™é‡ŒåŠ äº†ä¸€ä¸ª`@maixpy` çš„æ³¨é‡Šï¼Œç¼–è¯‘æ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆ Python å‡½æ•°ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ï¼ ç„¶åå°±èƒ½é€šè¿‡`maix.test.add(1, 2)` æ¥è°ƒç”¨å‡½æ•°äº†ã€‚ ### æ–¹æ³•äºŒ åŸºäºå·¥ç¨‹æ¨¡æ¿åˆ›å»ºä¸€ä¸ª MaixPy æ¨¡å—å·¥ç¨‹ï¼Œè¿™ç§æ–¹æ³•é€‚ç”¨äºä¸æƒ³æ”¹åŠ¨ MaixPy æºç ï¼Œå¸Œæœ›å•ç‹¬åŠ ä¸€ä¸ªåŒ…ï¼Œå¹¶ä¸”è¿˜èƒ½ç”¨ä¸Š MaixPyï¼ˆMaixCDKï¼‰çš„ API çš„æƒ…å†µã€‚æ–¹æ³•å¦‚ä¸‹ï¼š * é¦–å…ˆ[ç¼–è¯‘ MaixPy æºç ](./build.html) é€šè¿‡ï¼Œä¿è¯æˆ‘ä»¬çš„ç¼–è¯‘ç¯å¢ƒæ²¡é—®é¢˜ã€‚ * å¤åˆ¶ä¸€ä»½ [MaixPy/tools/maix_module](https://github.com/sipeed/MaixPy/tree/main/tools/maix_module) å·¥ç¨‹æ¨¡æ¿åˆ°ä¸€ä¸ªæ–°çš„ç›®å½•ï¼Œå¯ä»¥å’Œ`MaixPy`æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ã€‚æ¯”å¦‚å°†æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•å¤åˆ¶åˆ°äº†`maix_xxx` ç›®å½•ä¸‹ã€‚ * åœ¨`maix_xxx`ç›®å½•ä¸‹ï¼Œç»ˆç«¯æ‰§è¡Œ`python init_files.py`æ¥åˆå§‹åŒ–é¡¹ç›®æ–‡ä»¶ã€‚ * ä¿®æ”¹é¡¹ç›®åï¼šä¿®æ”¹`module_name.txt` æ–‡ä»¶ï¼Œæ”¹æˆä½ è¦çš„æ¨¡å—åç§°ï¼Œå¿…é¡»ä»¥`maix_`å¼€å¤´ï¼Œè¿™æ ·æ–¹ä¾¿å…¶å®ƒç”¨æˆ·èƒ½åœ¨ [pypi.org](https://pypi.org) æˆ–è€… [github.com](https://github.com) æœç´¢åˆ°ä½ çš„é¡¹ç›®ã€‚ * å’Œ MaixPy ä¸€æ ·æ‰§è¡Œ`python setup.py bdist_wheel linux` å°±å¯ä»¥å¼€å§‹ä¸ºç”µè„‘æ„å»ºã€‚ * æ„å»ºå®Œæˆåå¯ä»¥ç›´æ¥åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ`python c \"import maix_xxx;maix_xxx.basic.print('Li Hua')\"`å°±èƒ½è¿è¡Œä½ çš„æ¨¡å—å‡½æ•°äº†ã€‚ * æ‰§è¡Œ`setup.py bdist_wheel maixcam` å°±å¯ä»¥ä¸º`MaixCAM` æ„å»ºè½¯ä»¶åŒ…äº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ„å»ºè¿‡ç¨‹ç§çš„ä»£ç æç¤ºæ–‡ä»¶(pyiæ–‡ä»¶)åªèƒ½åœ¨ç»™`linux` å¹³å°æ„å»ºçš„æ—¶å€™ç”Ÿæˆï¼Œæ‰€ä»¥åœ¨æ­£å¼å‘å¸ƒçš„æ—¶å€™éœ€è¦å…ˆæ‰§è¡Œä¸Šä¸€æ­¥çš„`linux`å¹³å°æ„å»ºç”Ÿæˆä»£ç æç¤ºæ–‡ä»¶ï¼Œç„¶åå†æ‰§è¡Œæœ¬æ­¥çš„å‘½ä»¤ç”Ÿæˆ`MaixCAM`å¹³å°çš„è½¯ä»¶åŒ…ã€‚ * å°†`dist`ç›®å½•ä¸‹çš„`.whl`åŒ…å‘é€åˆ°è®¾å¤‡ï¼Œç„¶åä½¿ç”¨è¿è¡Œä»£ç `import os;os.system(\"pip install /root/xxxxx.whl\")`å³å¯ï¼ˆæ›¿æ¢è·¯å¾„ï¼‰ã€‚ * å¦‚æœè°ƒè¯•çš„æ—¶å€™è§‰å¾—å®‰è£… `.whl` åŒ…å¤ªæ…¢äº†ï¼Œå¯ä»¥ä½¿ç”¨`maixcdk build` ç¼–è¯‘ï¼Œç„¶åä½¿ç”¨`scp r maix_xxx root@10.228.104.1:/usr/lib/python3.11/site packages`ç›´æ¥æ‹·è´åˆ°è®¾å¤‡ç³»ç»Ÿç§è¦†ç›–åŒ…ï¼Œè¿™é‡Œéœ€è¦æ ¹æ®ä½ çš„åŒ…åå’Œè®¾å¤‡ ip æ›¿æ¢ä¸€ä¸‹ã€‚ * å½“ä½ è°ƒè¯•å¥½ä»£ç åï¼Œå¯ä»¥è€ƒè™‘å°†ä»£ç å¼€æºåˆ°[github.com](https://github.com)ï¼Œå¹¶ä¸”ä¸Šä¼ åˆ°[pypi.org](https://pypi.org)ï¼ˆå…·ä½“ä¸Šä¼ æ–¹æ³•å¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£æˆ–è€…æœç´¢æ•™ç¨‹ï¼Œå¤§æ¦‚å°±æ˜¯`pip install twine`ç„¶å `twine upload dist/maix_xxx***.whl`å°±å¯ä»¥äº†ã€‚ï¼‰ï¼Œå†™å¥½åæ¬¢è¿åˆ°[maixhub.com/share](https://maixhub.com/share)æ¥åˆ†äº«å‘Šè¯‰å¤§å®¶ä½ çš„æˆæœï¼ ä¿®æ”¹ä»£ç ï¼š æ­£å¦‚ [æŸ¥çœ‹ MaixPy API æºç ](../basic/view_src_code.html) é—®ç§æ‰€æè¿°çš„æŸ¥çœ‹å’Œä¿®æ”¹æºç çš„æ–¹å¼ï¼Œåœ¨`components/maix/include` å’Œ `components/maix/src` ä¸‹å¢åŠ æºæ–‡ä»¶ï¼Œå¢åŠ  C++ å‡½æ•°ï¼Œå¹¶ä¸”å¡«åŠ æ³¨é‡Šï¼Œç„¶åç¼–è¯‘åå°±ç›´æ¥èƒ½è°ƒç”¨äº†ï¼Œéå¸¸ç®€å•ã€‚ æ¯”å¦‚: ```cpp namespace maix_xxx::test { /** * My function, add two integer. * @param a arg a, int type * @param b arg b, int type * @return int type, will a + b * @maix_xxx maix_xxx.test.add */ int add(int a, int b); } ``` æ²¡é”™ï¼Œç›´æ¥å†™ä¸€ä¸ª C++ è¯­æ³•çš„å‡½æ•°ï¼Œæ³¨æ„è¿™é‡ŒåŠ äº†ä¸€ä¸ª`@maix_xxx` çš„æ³¨é‡Šï¼Œç¼–è¯‘æ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆ Python å‡½æ•°ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ï¼ ç„¶åå°±èƒ½é€šè¿‡`maix_xxx.test.add(1, 2)` æ¥è°ƒç”¨å‡½æ•°äº†ã€‚"},"/maixpy/doc/zh/source_code/contribute.html":{"title":"å‚ä¸ MaixCAM MaixPy æ–‡æ¡£ä¿®æ”¹å’Œè´¡çŒ®ä»£ç ","content":" title: å‚ä¸ MaixCAM MaixPy æ–‡æ¡£ä¿®æ”¹å’Œè´¡çŒ®ä»£ç  ## å‚ä¸ MaixPy æ–‡æ¡£ä¿®æ”¹ * ç‚¹å‡»è¦ä¿®æ”¹çš„æ–‡æ¡£å³ä¸Šè§’çš„`ç¼–è¾‘æœ¬é¡µ`æŒ‰é’®ï¼Œè¿›å…¥ github æºæ–‡æ¡£é¡µé¢ã€‚ * ä¿è¯å·²ç»ç™»å½•äº† GitHub è´¦å·ã€‚ * åœ¨ github é¢„æ¡ˆæ–‡æ¡£é¡µé¢ç‚¹å‡»å³ä¸Šè§’é“…ç¬”æŒ‰é’®ä¿®æ”¹æ–‡æ¡£å†…å®¹ã€‚ * github ä¼šæç¤ºéœ€è¦ fork ä¸€ä»½åˆ°è‡ªå·±çš„ä»“åº“ï¼Œç‚¹å‡» fork æŒ‰é’®ã€‚ > è¿™ä¸€æ­¥å°±æ˜¯å°† MaixPy æºç ä»“åº“å¤åˆ»ä¸€ä»½åˆ°ä½ è‡ªå·±çš„è´¦å·ä¸‹ï¼Œè¿™æ ·ä½ å°±å¯ä»¥è‡ªç”±ä¿®æ”¹äº†ã€‚ * ä¿®æ”¹æ–‡æ¡£å†…å®¹ï¼Œç„¶ååœ¨é¡µé¢åº•éƒ¨å¡«å†™ä¿®æ”¹è¯´æ˜ï¼Œç‚¹å‡»æäº¤ä¿®æ”¹ã€‚ * ç„¶ååœ¨ä½ çš„ä»“åº“ä¸­æ‰¾åˆ° Pull requests æŒ‰é’®ï¼Œç‚¹å‡»åˆ›å»ºä¸€ä¸ª Pull requestsã€‚ * ç„¶ååœ¨å¼¹å‡ºçš„é¡µé¢ä¸­å¡«å†™ä¿®æ”¹è¯´æ˜ï¼Œç‚¹å‡»æäº¤ Pull requestsï¼Œå…¶å®ƒäººå’Œç®¡ç†å‘˜å°±å¯ä»¥åœ¨[Pull requests é¡µé¢](https://github.com/sipeed/MaixPy/pulls)çœ‹åˆ°ä½ çš„ä¿®æ”¹äº†ã€‚ * ç­‰å¾…ç®¡ç†å‘˜å®¡æ ¸é€šè¿‡åï¼Œä½ çš„ä¿®æ”¹å°±ä¼šåˆå¹¶åˆ° MaixPy æºç ä»“åº“ä¸­äº†ã€‚ * åˆå¹¶æˆåŠŸåï¼Œæ–‡æ¡£ä¼šè‡ªåŠ¨æ›´æ–°åˆ° [MaixPy å®˜æ–¹æ–‡æ¡£](https://wiki.sipeed.com/maixpy)ã€‚ > æ–‡æ¡£ç»è¿‡ CDN ç¼“å­˜äº†çš„ï¼Œå¯èƒ½éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´æ‰èƒ½çœ‹åˆ°æ›´æ–°ï¼Œç´§æ€¥æ›´æ–°å¯ä»¥è”ç³»ç®¡ç†å‘˜æ‰‹åŠ¨åˆ·æ–°ã€‚ > ä¹Ÿå¯ä»¥è®¿é—® [en.wiki.sipeed.com/maixpy](https://en.wiki.sipeed.com/maixpy) æŸ¥çœ‹ github pages æœåŠ¡ç‰ˆæœ¬ï¼Œè¿™ä¸ªæ˜¯æ²¡æœ‰ç¼“å­˜å®æ—¶æ›´æ–°çš„ã€‚ ## å‚ä¸ MaixPy ä»£ç è´¡çŒ® * è®¿é—® MaixPy ä»£ç ä»“åº“åœ°å€ï¼š[github.com/sipeed/MaixPy](https://github.com/sipeed/MaixPy) * åœ¨ä¿®æ”¹ä»£ç å‰æœ€å¥½å…ˆåˆ›å»ºä¸€ä¸ª [issue](https://github.com/sipeed/MaixPy/issues) ï¼Œæè¿°ä½ è¦ä¿®æ”¹çš„å†…å®¹è®©å¤§å®¶çŸ¥é“ä½ çš„æƒ³æ³•å’Œè®¡åˆ’ï¼Œè¿™æ ·å¤§å®¶å¯ä»¥å‚ä¸ä¿®æ”¹è®¨è®ºï¼Œä»¥å…é‡å¤åŠ³åŠ¨ã€‚ * ç‚¹å‡»å³ä¸Šè§’çš„ fork æŒ‰é’®ï¼Œå°† MaixPy ä»£ç ä»“åº“å¤åˆ»ä¸€ä»½åˆ°ä½ è‡ªå·±çš„è´¦å·ä¸‹ã€‚ * ç„¶ååœ¨ä½ çš„è´¦å·ä¸‹ clone ä¸€ä»½ä»£ç åˆ°æœ¬åœ°ã€‚ * ä¿®æ”¹ä»£ç åæäº¤åˆ°ä½ çš„ä»“åº“ä¸­ã€‚ * ç„¶ååœ¨ä½ çš„ä»“åº“ä¸­æ‰¾åˆ° Pull requests æŒ‰é’®ï¼Œç‚¹å‡»åˆ›å»ºä¸€ä¸ª Pull requestsã€‚ * ç„¶ååœ¨å¼¹å‡ºçš„é¡µé¢ä¸­å¡«å†™ä¿®æ”¹è¯´æ˜ï¼Œç‚¹å‡»æäº¤ Pull requestsï¼Œå…¶å®ƒäººå’Œç®¡ç†å‘˜å°±å¯ä»¥åœ¨[Pull requests é¡µé¢](https://github.com/sipeed/MaixPy/pulls)çœ‹åˆ°ä½ çš„ä¿®æ”¹äº†ã€‚ * ç­‰å¾…ç®¡ç†å‘˜å®¡æ ¸é€šè¿‡åï¼Œä½ çš„ä¿®æ”¹å°±ä¼šåˆå¹¶åˆ° MaixPy æºç ä»“åº“ä¸­äº†ã€‚ > éœ€è¦æ³¨æ„çš„æ˜¯ MaixPy çš„ä»£ç å¤§å¤šæ•°æ˜¯ä» [MaixCDK](https://github.com/sipeed/MaixCDK) è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæ‰€ä»¥å¦‚æœä½ ä¿®æ”¹ C/C++ æºç ï¼Œå¾ˆæœ‰å¯èƒ½ä½ éœ€è¦å…ˆä¿®æ”¹è¿™ä¸ªä»“åº“ã€‚"},"/maixpy/doc/zh/source_code/faq.html":{"title":"MaixCAM MaixPy æºä»£ç å¸¸è§é—®é¢˜","content":"MaixCAM MaixPy æºä»£ç å¸¸è§é—®é¢˜ ## subprocess.CalledProcessError: Command '('lsb_release', ' a')' returned non zero exit status 1. ä»¥ root èº«ä»½ç¼–è¾‘ `/usr/bin/lsb_release`ï¼Œå°†ç¬¬ä¸€è¡Œä» `#!/usr/bin/python3` æ›´æ”¹ä¸º `python3`ã€‚ ç„¶åé‡æ–°ç¼–è¯‘,åº”è¯¥å°±å¯ä»¥å·¥ä½œäº†ã€‚ ## ImportError: arg(): could not convert default argument 'format: maix::image::Format' in method '<class 'maix._maix.camera.Camera'>.**init**' into a Python object (type not registered yet?) Pybind11 éœ€è¦ä½ å…ˆæ³¨å†Œ `image::Format`ï¼Œç„¶åæ‰èƒ½åœ¨ `camera::Camera` ä¸­ä½¿ç”¨å®ƒ,æ‰€ä»¥æˆ‘ä»¬å¿…é¡»å…ˆåœ¨ç”Ÿæˆçš„ `build/maixpy_wrapper.cpp` æºæ–‡ä»¶ä¸­å®šä¹‰ `image::Format`ã€‚ è¦å®ç°è¿™ä¸€ç‚¹,è¯·ç¼–è¾‘ `components/maix/headers_priority.txt`,è¢«ä¾èµ–çš„åº”è¯¥æ”¾åœ¨ä¾èµ–å®ƒçš„å‰é¢ã€‚ ä¾‹å¦‚: ``` maix_image.hpp maix_camera.hpp ``` ## /usr/bin/ld: /lib/libgdal.so.30: undefined reference to `std::condition_variable::wait(std::unique_lock<std::mutex>&)@GLIBCXX_3.4.30' collect2: error: ld returned 1 exit status ä¸€èˆ¬åœ¨ä¸º Linux æ„å»ºæ—¶å¹¶ä¸”ä½¿ç”¨ conda ç¯å¢ƒæ—¶å®¹æ˜“å‡ºç°ï¼Œconda ç¯å¢ƒä¸­çš„ä¸€äº›åº“ç¼–è¯‘å‚æ•°é—®é¢˜ï¼Œè§£å†³æ–¹æ³•å°±æ˜¯ä¸ç”¨ conda å³å¯ï¼Œ æˆ–è€…å•ç‹¬æ‰¾åˆ° conda ä¸­çš„é‚£ä¸ªåº“ï¼Œæ›¿æ¢æˆç³»ç»Ÿçš„æˆ–è€…ç›´æ¥åˆ æ‰ï¼ˆä¼šä»ç³»ç»Ÿæ‰¾ï¼‰"},"/maixpy/doc/zh/source_code/maixcdk.html":{"title":"MaixCAM åˆ‡æ¢åˆ° MaixCDK ä½¿ç”¨ C/C++ å¼€å‘åº”ç”¨","content":" title: MaixCAM åˆ‡æ¢åˆ° MaixCDK ä½¿ç”¨ C/C++ å¼€å‘åº”ç”¨ é™¤äº†ä½¿ç”¨ MaixPy å¼€å‘ï¼Œè¿˜æœ‰å¯¹åº”çš„ C/C++ SDK å¯ä»¥ä½¿ç”¨ï¼Œé¡¹ç›®åç§°ä¸º [MaixCDK](https://github.com/sipeed/MaixCDK)ã€‚ ## MaixCDK ä»‹ç» MaixPy åŸºäº MaixCDK æ„å»ºï¼ŒMaixPy çš„å¤§å¤šæ•° API éƒ½æ˜¯åŸºäº MaixCDK çš„ API è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæ‰€ä»¥ MaixPy æœ‰çš„åŠŸèƒ½ MaixCDK éƒ½åŒ…å«ã€‚ å¦‚æœä½ æ›´ç†Ÿæ‚‰ C/C++ ç¼–ç¨‹ï¼Œæˆ–è€…éœ€è¦æ›´é«˜çš„æ€§èƒ½ï¼Œå¯ä»¥ä½¿ç”¨ MaixCDK è¿›è¡Œå¼€å‘ã€‚ ## MaixCDK ä½¿ç”¨ MaixCDK ä»£ç ä»“åº“åœ°å€ï¼š[github.com/sipeed/MaixCDK](https://github.com/sipeed/MaixCDK), ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ° MaixCDK çš„ä»£ç å’Œæ–‡æ¡£ã€‚"},"/maixpy/doc/zh/README_no_screen.html":{"title":"MaixCAM MaixPy æ— å±å¹•ç‰ˆå¿«é€Ÿå¼€å§‹","content":" title: MaixCAM MaixPy æ— å±å¹•ç‰ˆå¿«é€Ÿå¼€å§‹ ## å…³äºæœ¬é¡µæ–‡æ¡£ æ­£å¦‚[å¿«é€Ÿå¼€å§‹æ‰€è¿°](./index.html)ï¼Œå¼€å‘æ—¶**å¼ºçƒˆæ¨è**è´­ä¹°å¸¦å±å¹•ç‰ˆæœ¬ï¼Œä¼šæœ‰æ›´å¥½çš„å¼€å‘ä½“éªŒï¼ŒåŒ…æ‹¬ä½¿ç”¨å†…ç½®çš„ APPï¼Œä»¥åŠä½¿ç”¨ MaixHub åº”ç”¨å•†åº—çš„ APPï¼Œä»¥åŠæ–¹ä¾¿è°ƒè¯•ï¼ˆæ¯”å¦‚å¸¸ç”¨è®¾ç½®å¯ä»¥ç›´æ¥è§¦æ‘¸ç‚¹å‡»ç•Œé¢å®Œæˆï¼Œå¯ä»¥å®æ—¶åœ¨å±å¹•çœ‹åˆ°å›¾åƒç­‰ï¼‰ã€‚ å½“ç„¶ï¼Œå¦‚æœä½ å®åœ¨æ²¡æœ‰æ¡ä»¶è´­ä¹°å¸¦å±å¹•çš„ï¼Œæˆ–è€…ä½ åœ¨é‡äº§æ—¶éœ€è¦æ— å±å¹•çš„ç‰ˆæœ¬ï¼Œè¯·çœ‹æœ¬æ–‡ã€‚ ## è·å¾— MaixCAM è®¾å¤‡ * **MaixCAM**ï¼šåœ¨ [Sipeed æ·˜å®](https://item.taobao.com/item.htm?id 784724795837) æˆ–è€… [Sipeed é€Ÿå–é€š](https://www.aliexpress.com/store/911876460) åº—é“ºè´­ä¹° <a href \"https://wiki.sipeed.com/maixcam\" target \"_blank\">MaixCAM</a> ã€‚ ## ä¸Šæ‰‹é…ç½® ### å‡†å¤‡ TF é•œåƒå¡å’Œæ’å…¥åˆ°è®¾å¤‡ å¦‚æœä½ ä¹°çš„å¥—é¤é‡Œé¢æœ‰ TF å¡ï¼Œé‡Œé¢å·²ç»æœ‰å‡ºå‚é•œåƒäº†ï¼Œå¦‚æœå‡ºå‚æ—¶ TF å¡æ²¡æœ‰å®‰è£…åˆ°è®¾å¤‡ï¼Œéœ€è¦å…ˆå°å¿ƒæ‰“å¼€å¤–å£³ï¼ˆæ³¨æ„é‡Œé¢æœ‰æ’çº¿è¿æ¥ä¸è¦æ‰¯æ–­äº†ï¼‰ï¼Œç„¶åæ’å…¥ TF å¡ã€‚å¦å¤–å› ä¸ºå‡ºå‚çš„å›ºä»¶å¯èƒ½æ¯”è¾ƒè€æ—§ï¼Œ**åŠ¡å¿…**æŒ‰ç…§[å‡çº§å’Œçƒ§å½•ç³»ç»Ÿ](https://wiki.sipeed.com/maixpy/doc/zh/basic/os.html)å…ˆå°†ç³»ç»Ÿå‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œå¦åˆ™å¯èƒ½ä¼šé‡åˆ°æŸäº›åº”ç”¨ å’Œ API æ— æ³•ä½¿ç”¨çš„é—®é¢˜ã€‚ å¦‚æœæ²¡ä¹° TF å¡ï¼Œåˆ™éœ€è¦å°†ç³»ç»Ÿçƒ§å½•è¿›è‡ªå¤‡çš„ TF å¡ä¸­ï¼Œçƒ§å½•æ–¹æ³•è¯·çœ‹[å‡çº§å’Œçƒ§å½•ç³»ç»Ÿ](./basic/os.html)ï¼Œç„¶åå†å®‰è£…åˆ°æ¿å­ã€‚ ### ä¸Šç”µå¼€æœº ä½¿ç”¨ `Type C` æ•°æ®çº¿è¿æ¥ `MaixCAM` è®¾å¤‡ç»™è®¾å¤‡ä¾›ç”µï¼Œç­‰å¾…è®¾å¤‡å¼€æœºã€‚ **é¦–å…ˆ**ï¼šä¿è¯ USB çº¿æè´¨é‡è¶³å¤Ÿå¥½ï¼Œä»¥åŠç”µè„‘ USB ç«¯å£è´¨é‡å¤Ÿå¥½ï¼ˆä¾›ç”µ > 5v 500mAï¼ŒæŠ—å¹²æ‰°èƒ½åŠ›æ­£å¸¸ï¼‰ã€‚ ç¬¬ä¸€æ¬¡ç­‰å¾… 20 ç§’å·¦å³ï¼Œç„¶åç”µè„‘ä¼šå‡ºç°ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªè™šæ‹Ÿç½‘å¡è®¾å¤‡ï¼ˆå¯ä»¥åœ¨ç”µè„‘çš„ç½‘ç»œç®¡ç†å™¨çœ‹åˆ°ï¼‰ã€‚ å¦‚æœè™šæ‹Ÿç½‘å¡è®¾å¤‡ï¼š * è¯·ç¡®è®¤è´­ä¹°äº†é…å¥—çš„ TF å¡ï¼Œå¦‚æœç¡®è®¤æœ‰ TF å¡ï¼Œå¹¶ä¸”å·²ç»æ’å…¥åˆ°è®¾å¤‡ï¼Œå¯ä»¥**å°è¯•[æ›´æ–°åˆ°æœ€æ–°çš„ç³»ç»Ÿ](./basic/os.html)**ã€‚ * å¦‚æœä½ æ²¡æœ‰è´­ä¹° TF å¡å¥—é¤ï¼Œä½ éœ€è¦æŒ‰ç…§[å‡çº§å’Œçƒ§å½•ç³»ç»Ÿ](./basic/os.html)çš„æ–¹æ³•çƒ§å½•æœ€æ–°çš„ç³»ç»Ÿåˆ° TF å¡ã€‚ * è¯·ç¡®è®¤ USB æœ‰æ²¡æœ‰æ¾åŠ¨ï¼Œä»¥åŠ USB çº¿æè´¨é‡ï¼Œå¯ä»¥æ¢ä¸€æ ¹è´¨é‡å¥½ç‚¹çš„çº¿å°è¯•ã€‚ * è¯·ç¡®è®¤ USB å£ä¾›ç”µè¶³å¤Ÿï¼Œå¯ä»¥æ¢ä¸€ä¸ª USB å£ï¼Œæˆ–è€…æœ‰æ¡ä»¶åœ¨å…¶å®ƒç”µè„‘è¯•è¯•ã€‚ ## å‡†å¤‡è¿æ¥ç”µè„‘å’Œè®¾å¤‡ ä¸ºäº†åé¢ç”µè„‘ï¼ˆPCï¼‰èƒ½å’Œ è®¾å¤‡ï¼ˆMaixCAMï¼‰é€šä¿¡ï¼Œæˆ‘ä»¬è¦è®©å®ƒä»¬åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…ï¼Œæä¾›äº†ä¸¤ç§æ–¹å¼ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨æ–¹æ³•ä¸€ï¼š * **æ–¹æ³•ä¸€**ï¼šæœ‰çº¿è¿æ¥ï¼Œ è®¾å¤‡é€šè¿‡ USB çº¿è¿æ¥åˆ°ç”µè„‘ï¼Œè®¾å¤‡ä¼šè™šæ‹Ÿæˆä¸€ä¸ª USB ç½‘å¡ï¼Œè¿™æ ·å’Œç”µè„‘å°±é€šè¿‡ USB åœ¨åŒä¸€å±€åŸŸç½‘äº†ï¼Œé‡åˆ°é—®é¢˜ä¹Ÿå¯ä»¥åœ¨ [FAQ](./faq.html) ä¸­æ‰¾å¸¸è§é—®é¢˜ã€‚ .. details::æ–¹æ³•äºŒåœ¨ä¸åŒç”µè„‘ç³»ç»Ÿä¸­é©±åŠ¨å®‰è£…æ–¹æ³•ï¼š :open: true é»˜è®¤ä¼šæœ‰ä¸¤ç§ USB è™šæ‹Ÿç½‘å¡é©±åŠ¨ï¼ˆNCM å’Œ RNDISé©±åŠ¨ï¼‰ï¼Œä»¥æ»¡è¶³ä¸åŒç³»ç»Ÿçš„éœ€æ±‚ï¼š * **Windows**: windows æ‰€æœ‰ç³»ç»Ÿä¼šè‡ªåŠ¨å®‰è£… RNDIS é©±åŠ¨ï¼Œ ä»… Win11 ä¼šè‡ªåŠ¨å®‰è£… NCM é©±åŠ¨ï¼Œä¸¤ç§é©±åŠ¨æœ‰**ä¸€ä¸ªèƒ½ç”¨å°±è¡Œ**ï¼ˆNCM é€Ÿåº¦æ¯” RNDIS é€Ÿåº¦å¿«ï¼‰ã€‚ * æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ > æ€§èƒ½ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªè™šæ‹Ÿçš„ä»¥å¤ªç½‘ï¼Œå¹¶ä¸”å¯ä»¥çœ‹åˆ° ip æ¯”å¦‚ `10.131.167.100` æ˜¯ç”µè„‘çš„ ip, è®¾å¤‡çš„ ip æ˜¯æœ€åä¸€ä½æ”¹ä¸º`1` å³ `10.131.167.1`ã€‚å¦‚æœæ˜¯ Win11 åˆ™ä¼šçœ‹åˆ°ä¸¤ä¸ªè™šæ‹Ÿç½‘å¡ï¼Œéšä¾¿é€‰æ‹©ä¸€ä¸ª IP ä½¿ç”¨å³å¯ã€‚ * å¦å¤–ä¹Ÿå¯ä»¥æ‰“å¼€ç”µè„‘çš„ `è®¾å¤‡ç®¡ç†å™¨`ï¼ˆæœç´¢æ æœç´¢`è®¾å¤‡ç®¡ç†å™¨`ï¼‰ï¼Œ RNDIS å’Œ NCM é©±åŠ¨è¢«æ­£ç¡®å®‰è£…çš„æ•ˆæœï¼Œ**ä¸€ä¸ªèƒ½ç”¨å°±è¡Œ**ï¼š ![RNDIS ok](../../static/image/rndis_windows.jpg) ![NCM ok](../../static/image/windows_ncm_ok.png) * **Linux**: æ— éœ€é¢å¤–è®¾ç½®ï¼Œæ’ä¸Š USB çº¿å³å¯ã€‚ ä½¿ç”¨ `ifconfig` æˆ–è€… `ip addr` æŸ¥çœ‹åˆ° `usb0` å’Œ `usb1` ç½‘å¡ï¼Œä¸¤ä¸ª IP éƒ½å¯ä»¥ä½¿ç”¨ï¼Œ**æ³¨æ„** è¿™é‡Œçœ‹åˆ°çš„ ip æ¯”å¦‚ `10.131.167.100` æ˜¯ç”µè„‘çš„ ip, è®¾å¤‡çš„ ip æ˜¯æœ€åä¸€ä½æ”¹ä¸º`1` å³ `10.131.167.1`ã€‚ * **MacOS**: åœ¨`ç³»ç»Ÿè®¾ç½®` >`ç½‘ç»œ`é‡Œé¢æŸ¥çœ‹åˆ° `usb` ç½‘å¡ï¼Œ**æ³¨æ„** è¿™é‡Œçœ‹åˆ°çš„ ip æ¯”å¦‚ `10.131.167.100` æ˜¯ç”µè„‘çš„ ip, è®¾å¤‡çš„ ip æ˜¯æœ€åä¸€ä½æ”¹ä¸º`1` å³ `10.131.167.1`ã€‚ * **æ–¹æ³•äºŒ**ï¼šæ— çº¿è¿æ¥ï¼Œ è®¾å¤‡ä½¿ç”¨ WiFi è¿æ¥åˆ°ç”µè„‘è¿æ¥çš„åŒä¸€ä¸ªè·¯ç”±å™¨æˆ–è€… WiFi çƒ­ç‚¹ä¸‹ï¼ˆWiFi å¦‚æœå‡ºç°ç”»é¢å¡é¡¿æˆ–è€…å»¶è¿Ÿé«˜çš„é—®é¢˜å¯ä»¥ä½¿ç”¨æœ‰çº¿è¿æ¥ã€‚ï¼‰ï¼Œè¿æ¥æ— çº¿çƒ­ç‚¹æ–¹å¼æœ‰ä¸¤ç§ï¼š * ä¿®æ”¹ TF çš„ boot åˆ†åŒºä¸­çš„ `wifi.ssid` å’Œ `wifi.pass` æ–‡ä»¶ï¼Œé‡å¯å³å¯è¿æ¥ã€‚ä¿®æ”¹æ–¹æ³•ï¼š * å¦‚æœä½ å·²ç»äº†è§£ SSHï¼Œ å¯ä»¥é€šè¿‡ ssh è¿æ¥åˆ°è®¾å¤‡ï¼ˆå¦‚æœæœ‰çº¿è¿æ¥å¯ç”¨ï¼‰ä¿®æ”¹`/boot`ç›®å½•ä¸‹æ–‡ä»¶ã€‚ * ä¹Ÿå¯ä»¥æŒ‰ç…§å‰é¢å‡çº§ç³»ç»Ÿçš„æ–¹å¼è¿›å…¥å‡çº§æ¨¡å¼åç”µè„‘ä¼šå‡ºç°ä¸€ä¸ª U ç›˜ï¼Œç„¶åä¿®æ”¹é‡Œé¢çš„æ–‡ä»¶å³å¯ï¼Œæ³¨æ„ä¿®æ”¹å®Œè¦å…ˆ å¼¹å‡ºUç›˜ å†é‡å¯ã€‚ * ä¹Ÿå¯ä»¥ç›´æ¥ç”¨ è¯»å¡å™¨ï¼Œç”µè„‘ä¼šå‡ºç°ä¸€ä¸ªUç›˜ï¼Œä¿®æ”¹å…¶ä¸­çš„`wifi.ssid` å’Œ `wifi.pass`æ–‡ä»¶å³å¯ï¼Œæ³¨æ„ä¿®æ”¹å®Œè¦å…ˆ å¼¹å‡ºUç›˜ å†é‡å¯ã€‚ * å¦‚æœä½ æœ‰çº¿å·²ç»å¯ä»¥ä½¿ç”¨ï¼ŒæŒ‰ç…§ä¸‹ä¸€æ­¥å·²ç»å¯ä»¥ä½¿ç”¨ MaixVision è¿è¡Œä»£ç äº†ï¼Œå¯ä»¥ä¿®æ”¹ä¾‹ç¨‹ `tools/wifi_connect.py` ä¸­çš„ SSID å’Œ PASSWORD ç„¶åè¿è¡Œå³å¯ã€‚ ## å¼€å‘ç¯å¢ƒå‡†å¤‡ * é¦–å…ˆä¿è¯ä¸Šä¸€æ­¥ç”µè„‘å’Œè®¾å¤‡å·²ç»åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸­äº†ã€‚ * ä¸‹è½½ [MaixVision](https://wiki.sipeed.com/maixvision) å¹¶å®‰è£…ã€‚ * ä½¿ç”¨ Type C è¿æ¥è®¾å¤‡å’Œç”µè„‘ï¼Œæ‰“å¼€ MaixVisionï¼Œç‚¹å‡»å·¦ä¸‹è§’çš„`â€œè¿æ¥â€`æŒ‰é’®ï¼Œä¼šè‡ªåŠ¨æœç´¢è®¾å¤‡ï¼Œç¨ç­‰ä¸€ä¸‹å°±èƒ½çœ‹åˆ°è®¾å¤‡ï¼Œç‚¹å‡»è®¾å¤‡æœ‰ç‚¹çš„è¿æ¥æŒ‰é’®ä»¥è¿æ¥è®¾å¤‡ã€‚ å¦‚æœ**æ²¡æœ‰æ‰«æåˆ°è®¾å¤‡**ï¼Œ ä¹Ÿå¯ä»¥åœ¨ [FAQ](./faq.html) ä¸­æ‰¾åˆ°è§£å†³æ–¹æ³•ã€‚ è¿™é‡Œæœ‰ MaixVision çš„ä½¿ç”¨ç¤ºä¾‹è§†é¢‘: <video style \"width:100%\" controls muted preload src \"/static/video/maixvision.mp4\"></video> ### è”ç½‘ é¦–æ¬¡è¿è¡Œéœ€è¦è¿æ¥ç½‘ç»œï¼Œä»¥æ¿€æ´»è®¾å¤‡å®‰è£…è¿è¡Œåº“ã€‚ å¦‚æœæ²¡æœ‰è·¯ç”±å™¨å¯ä»¥ç”¨æ‰‹æœºå¼€ä¸€ä¸ªçƒ­ç‚¹ã€‚ MaixVision ä¿®æ”¹ä¾‹ç¨‹ `tools/wifi_connect.py` ä¸­çš„ SSID å’Œ PASSWORD ç„¶åè¿è¡Œå³å¯ã€‚å…¶å®ƒè¿æ¥ WiFi çš„æ–¹æ³•çœ‹å‰é¢çš„ä»‹ç»ã€‚ ### å‡çº§è¿è¡Œåº“ **è¿™ä¸€æ­¥å¾ˆé‡è¦ ï¼ï¼ï¼** è¿™ä¸€æ­¥å¦‚æœä¸åšå¥½ï¼Œå…¶å®ƒåº”ç”¨å’ŒåŠŸèƒ½å¯èƒ½æ— æ³•è¿è¡Œï¼ˆæ¯”å¦‚é—ªé€€ç­‰ï¼‰ã€‚ * é¦–å…ˆä¿è¯ä¸Šä¸€æ­¥è¿æ¥ WiFi å·²ç»å®Œæˆï¼Œå¹¶ä¸”è·å–åˆ° IP åœ°å€èƒ½è®¿é—®å…¬ç½‘ã€‚ * è¿è¡Œ MaixVision ä¾‹ç¨‹é‡Œé¢çš„ `tools/install_runtime.py` æ¥å®‰è£…æœ€æ–°çš„è¿è¡Œåº“ã€‚ å¦‚æœæ˜¾ç¤º`Request failed` æˆ–è€…`è¯·æ±‚å¤±è´¥`ï¼Œè¯·å…ˆæ£€æŸ¥ç½‘ç»œæ˜¯å¦å·²ç»è¿æ¥ï¼Œéœ€è¦èƒ½è¿æ¥åˆ°äº’è”ç½‘ï¼Œå¦‚æœè¿˜ä¸è¡Œï¼Œè¯·æ‹ç…§è”ç³»å®¢æœå¤„ç†å³å¯ã€‚ ## è¿è¡Œä¾‹ç¨‹ ç‚¹å‡» MaixVision å·¦ä¾§çš„`ç¤ºä¾‹ä»£ç `ï¼Œé€‰æ‹©ä¸€ä¸ªä¾‹ç¨‹ï¼Œç‚¹å‡»å·¦ä¸‹è§’`è¿è¡Œ`æŒ‰é’®å°†ä»£ç å‘é€åˆ°è®¾å¤‡ä¸Šè¿è¡Œã€‚ æ¯”å¦‚ï¼š * `hello_maix.py`ï¼Œç‚¹å‡»`è¿è¡Œ`æŒ‰é’®ï¼Œå°±èƒ½çœ‹åˆ° MaixVision ç»ˆç«¯æœ‰æ¥è‡ªè®¾å¤‡æ‰“å°çš„æ¶ˆæ¯ï¼Œä»¥åŠå³ä¸Šè§’å‡ºç°äº†å›¾åƒã€‚ * `camera_display.py`ï¼Œè¿™ä¸ªä¾‹ç¨‹ä¼šæ‰“å¼€æ‘„åƒå¤´å¹¶åœ¨å±å¹•ä¸Šæ˜¾ç¤ºæ‘„åƒå¤´çš„ç”»é¢ã€‚ ```python from maix import camera, display, app disp display.Display() # æ„é€ ä¸€ä¸ªæ˜¾ç¤ºå¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ–å±å¹• cam camera.Camera(640, 480) # æ„é€ ä¸€ä¸ªæ‘„åƒå¤´å¯¹è±¡ï¼Œæ‰‹åŠ¨è®¾ç½®äº†åˆ†è¾¨ç‡ä¸º 640x480, å¹¶åˆå§‹åŒ–æ‘„åƒå¤´ while not app.need_exit(): # ä¸€ç›´å¾ªç¯ï¼Œç›´åˆ°ç¨‹åºé€€å‡ºï¼ˆå¯ä»¥é€šè¿‡æŒ‰ä¸‹è®¾å¤‡çš„åŠŸèƒ½æŒ‰é”®é€€å‡ºæˆ–è€… MaixVision ç‚¹å‡»åœæ­¢æŒ‰é’®é€€å‡ºï¼‰ img cam.read() # è¯»å–æ‘„åƒå¤´ç”»é¢ä¿å­˜åˆ° img å˜é‡ï¼Œå¯ä»¥é€šè¿‡ print(img) æ¥æ‰“å° img çš„è¯¦æƒ… disp.show(img) # å°† img æ˜¾ç¤ºåˆ°å±å¹•ä¸Š ``` * `yolov5.py` ä¼šæ£€æµ‹æ‘„åƒå¤´ç”»é¢ä¸­çš„ç‰©ä½“æ¡†å‡ºæ¥å¹¶æ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼Œæ”¯æŒ 80 ç§ç‰©ä½“çš„æ£€æµ‹ï¼Œå…·ä½“è¯·çœ‹[YOLOv5/YOLOv8/YOLO11 ç‰©ä½“æ£€æµ‹](./vision/yolov5.html)ã€‚ å…¶å®ƒä¾‹ç¨‹å¯ä»¥è‡ªè¡Œå°è¯•ã€‚ > å¦‚æœä½ ä½¿ç”¨ç›¸æœºä¾‹ç¨‹é‡åˆ°äº†å›¾åƒæ˜¾ç¤ºå¡é¡¿ï¼Œå¯èƒ½æ˜¯ç½‘ç»œä¸é€šç•…ï¼Œæˆ–è€… USB çº¿è´¨é‡æˆ–è€…ä¸»æœº USB è´¨é‡å¤ªå·®é€ æˆï¼Œå¯ä»¥æ›´æ¢è¿æ¥æ–¹å¼æˆ–è€…æ›´æ¢çº¿ç¼†ã€ä¸»æœº USB å£æˆ–è€…ç”µè„‘ç­‰ã€‚ ## å®‰è£…åº”ç”¨åˆ°è®¾å¤‡ ä¸Šé¢æ˜¯åœ¨è®¾å¤‡ä¸­è¿è¡Œä»£ç ï¼Œ`MaixVision` æ–­å¼€åä»£ç å°±ä¼šåœæ­¢è¿è¡Œï¼Œå¦‚æœæƒ³è®©ä»£ç å‡ºç°åœ¨å¼€æœºèœå•ä¸­ï¼Œå¯ä»¥æ‰“åŒ…æˆåº”ç”¨å®‰è£…åˆ°è®¾å¤‡ä¸Šã€‚ ç‚¹å‡» `MaixVision` å·¦ä¸‹ä¾§çš„å®‰è£…åº”ç”¨æŒ‰é’®ï¼Œå¡«å†™åº”ç”¨ä¿¡æ¯ï¼Œä¼šå°†åº”ç”¨å®‰è£…åˆ°è®¾å¤‡ä¸Šï¼Œç„¶ååœ¨è®¾å¤‡ä¸Šå°±èƒ½çœ‹åˆ°åº”ç”¨äº†ã€‚ ä¹Ÿå¯ä»¥é€‰æ‹©æ‰“åŒ…åº”ç”¨ï¼Œå°†ä½ çš„åº”ç”¨åˆ†äº«åˆ°[MaixHub åº”ç”¨å•†åº—](https://maixhub.com/app)ã€‚ > é»˜è®¤ä¾‹ç¨‹æ²¡æœ‰æ˜¾å¼ç¼–å†™é€€å‡ºåŠŸèƒ½ï¼Œè¿›å…¥åº”ç”¨åæŒ‰ä¸‹è®¾å¤‡çš„åŠŸèƒ½æŒ‰é”®å³å¯é€€å‡ºåº”ç”¨ã€‚ï¼ˆå¯¹äº MaixCAM æ˜¯ user é”®ï¼‰ å¦‚æœæƒ³è®©ç¨‹åºå¼€æœºè‡ªå¯åŠ¨ï¼Œå¯ä»¥ä¿®æ”¹å¹¶è¿è¡Œä¾‹ç¨‹`tools/set_autostart.py`å³å¯ã€‚ ## ä¸‹ä¸€æ­¥ çœ‹åˆ°è¿™é‡Œï¼Œå¦‚æœä½ è§‰å¾—ä¸é”™ï¼Œ**è¯·åŠ¡å¿…æ¥ [github](https://github.com/sipeed/MaixPy) ç»™ MaixPy å¼€æºé¡¹ç›®ç‚¹ä¸€ä¸ª starï¼ˆéœ€è¦å…ˆç™»å½• githubï¼‰, ä½ çš„ star å’Œè®¤åŒæ˜¯æˆ‘ä»¬ä¸æ–­ç»´æŠ¤å’Œæ·»åŠ æ–°åŠŸèƒ½çš„åŠ¨åŠ›ï¼** åˆ°è¿™é‡Œä½ å·²ç»ä½“éªŒäº†ä¸€éä½¿ç”¨å’Œå¼€å‘æµç¨‹äº†ï¼Œæ¥ä¸‹æ¥å¯ä»¥å­¦ä¹  `MaixPy` è¯­æ³•å’ŒåŠŸèƒ½ç›¸å…³çš„å†…å®¹ï¼Œè¯·æŒ‰ç…§å·¦è¾¹çš„ç›®å½•è¿›è¡Œå­¦ä¹ ï¼Œå¦‚æœé‡åˆ° `API` ä½¿ç”¨é—®é¢˜ï¼Œå¯ä»¥åœ¨[API æ–‡æ¡£](/api/)ä¸­æŸ¥æ‰¾ã€‚ å­¦ä¹ å‰æœ€å¥½å¸¦ç€è‡ªå·±å­¦ä¹ çš„ç›®çš„å­¦ï¼Œæ¯”å¦‚åšä¸€ä¸ªæœ‰è¶£çš„å°é¡¹ç›®ï¼Œè¿™æ ·å­¦ä¹ æ•ˆæœä¼šæ›´å¥½ï¼Œé¡¹ç›®å’Œç»éªŒéƒ½å¯ä»¥åˆ†äº«åˆ°[MaixHub åˆ†äº«å¹¿åœº](https://maixhub.com/share)ï¼Œä¼šè·å¾—ç°é‡‘å¥–åŠ±å“¦ï¼ ## å¸¸è§é—®é¢˜ FAQ é‡åˆ°é—®é¢˜å¯ä»¥ä¼˜å…ˆåœ¨ [FAQ](./faq.html) é‡Œé¢æ‰¾ï¼Œæ‰¾ä¸åˆ°å†åœ¨ä¸‹é¢çš„è®ºå›æˆ–è€…ç¾¤è¯¢é—®ï¼Œæˆ–è€…åœ¨ [MaixPy issue](https://github.com/sipeed/MaixPy/issues) æäº¤æºç é—®é¢˜ã€‚ ## åˆ†äº«äº¤æµ * **[MaixHub é¡¹ç›®å’Œç»éªŒåˆ†äº«](https://maixhub.com/share)** ï¼šåˆ†äº«ä½ çš„é¡¹ç›®å’Œç»éªŒï¼Œè·å¾—ç°é‡‘æ‰“èµï¼Œè·å¾—å®˜æ–¹æ‰“èµçš„åŸºæœ¬è¦æ±‚ï¼š * **å¯å¤ç°å‹**ï¼šè¾ƒä¸ºå®Œæ•´çš„é¡¹ç›®åˆ¶ä½œå¤ç°è¿‡ç¨‹ã€‚ * **ç‚«è€€å‹**ï¼šæ— è¯¦ç»†çš„é¡¹ç›®å¤ç°è¿‡ç¨‹ï¼Œä½†æ˜¯é¡¹ç›®å±•ç¤ºæ•ˆæœå¸å¼•äººã€‚ * Bug è§£å†³ç»éªŒå‹ï¼šè§£å†³äº†æŸä¸ªéš¾é¢˜çš„è¿‡ç¨‹å’Œå…·ä½“è§£å†³æ–¹æ³•åˆ†äº«ã€‚ * [MaixPy å®˜æ–¹è®ºå›](https://maixhub.com/discussion/maixpy)ï¼ˆæé—®å’Œäº¤æµï¼‰ * QQ ç¾¤ï¼š ï¼ˆå»ºè®®åœ¨ QQ ç¾¤æé—®å‰å…ˆå‘ä¸ªå¸–ï¼Œæ–¹ä¾¿ç¾¤å‹å¿«é€Ÿäº†è§£ä½ éœ€è¦äº†ä»€ä¹ˆé—®é¢˜ï¼Œå¤ç°è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼‰ * MaixPy (v4) AI è§†è§‰äº¤æµå¤§ç¾¤: 862340358 * Telegram: [MaixPy](https://t.me/maixpy) * MaixPy æºç é—®é¢˜: [MaixPy issue](https://github.com/sipeed/MaixPy/issues) * å•†ä¸šåˆä½œæˆ–æ‰¹é‡è´­ä¹°è¯·è”ç³» support@sipeed.com ã€‚"},"/maixpy/doc/zh/projects/line_tracking_robot.html":{"title":"MaixCAM MaixPy å°è½¦å·¡çº¿","content":" title: MaixCAM MaixPy å°è½¦å·¡çº¿ update: date: 2024 05 09 author: lxowalle version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ é˜…è¯»æœ¬æ–‡å‰ï¼Œç¡®ä¿å·²ç»çŸ¥æ™“å¦‚ä½•å¼€å‘MaixCAMï¼Œè¯¦æƒ…è¯·é˜…è¯»[å¿«é€Ÿå¼€å§‹](../index.html) ## ç®€ä»‹ æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨MaixPyå®ç°å¯»çº¿å°è½¦ ## å¦‚ä½•ä½¿ç”¨MaixPyå®ç°å¯»çº¿å°è½¦ 1. å‡†å¤‡MaixCAMä¸å°è½¦ 2. å®ç°å¯»çº¿åŠŸèƒ½ 3. å®ç°å°è½¦æ§åˆ¶åŠŸèƒ½ ### å‡†å¤‡MaixCAMä¸å°è½¦ TODO ### å®ç°å¯»çº¿åŠŸèƒ½ ä½¿ç”¨`image`æ¨¡å—çš„`get_regression`å¯ä»¥å¿«é€Ÿå¯»æ‰¾åˆ°ç›´çº¿ï¼Œè¯¦æƒ…è§[å¯»æ‰¾ç›´çº¿](./line_tracking.html) ä»£ç å®ç°ï¼š ```python from maix import camera, display, image cam camera.Camera(320, 240) disp display.Display() # thresholds [[0, 80, 40, 80, 10, 80]] # red thresholds [[0, 80, 120, 10, 0, 30]] # green # thresholds [[0, 80, 30, 100, 120, 60]] # blue while 1: img cam.read() lines img.get_regression(thresholds, area_threshold 100) for a in lines: img.draw_line(a.x1(), a.y1(), a.x2(), a.y2(), image.COLOR_GREEN, 2) theta a.theta() rho a.rho() if theta > 90: theta 270 theta else: theta 90 theta img.draw_string(0, 0, \"theta: \" + str(theta) + \", rho: \" + str(rho), image.COLOR_BLUE) disp.show(img) ``` ä¸Šè¿°ä»£ç å®ç°äº†å¯»çº¿åŠŸèƒ½ï¼Œ ä¸Šè¿°å‚æ•°ä¸­éœ€æ³¨æ„ï¼š è®¾ç½®åˆé€‚çš„thresholdså€¼æ¥å¯»æ‰¾åˆ°å¯¹åº”çš„ç›´çº¿ è®¾ç½®åˆé€‚çš„area_thresholdå€¼æ¥è¿‡æ»¤ç¯å¢ƒå¹²æ‰°ï¼Œå¯ä»¥è¿‡æ»¤ä¸€äº›é¢ç§¯å°çš„ç›´çº¿ ä½¿ç”¨`a.theta()`è·å–ç›´çº¿çš„è§’åº¦ ä½¿ç”¨`a.rho()`è·å–ç›´çº¿ä¸åŸç‚¹(åŸç‚¹åœ¨å·¦ä¸Šè§’)çš„è·ç¦» æ ¹æ®å®é™…ç¯å¢ƒè°ƒè¯•å¥½å¯»çº¿å‚æ•°åï¼Œ å°±å¯ä»¥åˆ©ç”¨`a.theta()`å’Œ`a.rho()`æ§åˆ¶å°è½¦æ–¹å‘äº†ã€‚ ### å®ç°å°è½¦æ§åˆ¶åŠŸèƒ½ TODO"},"/maixpy/doc/zh/projects/index.html":{"title":"MaixCAM MaixPy é¡¹ç›®å®æˆ˜ ä»‹ç»å’Œæ±‡æ€»","content":" title: MaixCAM MaixPy é¡¹ç›®å®æˆ˜ ä»‹ç»å’Œæ±‡æ€» ## ç®€ä»‹ è¿™é‡Œæä¾›ä¸€äº›å¸¸è§çš„é¡¹ç›®å®æˆ˜ç¤ºä¾‹ï¼Œæ–¹ä¾¿ç¤¾åŒºæˆå‘˜å¯ä»¥å‚è€ƒå¤ç°ä½¿ç”¨ï¼Œä¹Ÿæ–¹ä¾¿æ¿€å‘å¤§å®¶çš„çµæ„Ÿåšå‡ºæ›´å¤šæ›´å¥½çš„åº”ç”¨å’Œé¡¹ç›®å‡ºæ¥ã€‚ è¦æ‰¾åˆ°ç”¨ MaixPy å®ç°çš„ç›¸å…³çš„é¡¹ç›®ï¼Œæœ‰å‡ ç§æ–¹å¼ï¼š ## MaixPy å®˜æ–¹æ–‡æ¡£ ä¹Ÿå°±æ˜¯æœ¬æ–‡æ¡£å·¦è¾¹ç›®å½•å¯ä»¥æ‰¾åˆ°çš„é¡¹ç›®å®æˆ˜ï¼Œæ¯”å¦‚`å°è½¦å·¡çº¿`ã€‚ å¦‚æœä½ æœ‰å¥½çš„é¡¹ç›®ï¼Œæˆ–è€…å¥½çš„é¡¹ç›®æ¨èï¼Œä¹Ÿå¯ä»¥è´¡çŒ®æ–‡æ¡£æ·»åŠ è¿›æ¥ã€‚ ## MaixHub é¡¹ç›®åˆ†äº«å¹¿åœº åœ¨[MaixHub é¡¹ç›®åˆ†äº«](https://maixhub.com/share?type project) æ ç›®å¯ä»¥æ‰¾åˆ°é¡¹ç›®åˆ†äº«ã€‚ æœ‰é«˜è´¨é‡çš„åˆ†äº«ä¹Ÿä¼šè¢«é“¾æ¥åˆ° MaixPy å®˜æ–¹æ–‡æ¡£ã€‚ ä½ ä¹Ÿå¯ä»¥åˆ†äº«ä½ çš„é¡¹ç›®åˆ¶ä½œæ–¹æ³•ï¼Œä¼šè·å¾—å®˜æ–¹ï¼ˆå¿…è·å¾—ï¼‰ä»¥åŠç¤¾åŒºæˆå‘˜çš„ç°é‡‘æ‰“èµï¼ˆé€šå¸¸é«˜è´¨é‡èƒ½è§£å†³æ€¥éœ€éœ€æ±‚çš„æ›´å®¹æ˜“è¢«æ‰“èµï¼‰ã€‚ æ¨èé¡¹ç›®ï¼š * maixcaméƒ¨ç½²yolov5s è‡ªå®šä¹‰æ¨¡å‹: https://maixhub.com/share/23 ## MaixHub åº”ç”¨åˆ†äº« é™¤äº†é¡¹ç›®åˆ†äº«ä»¥å¤–ï¼Œè¿˜å¯ä»¥åœ¨[MaixHub åº”ç”¨å•†åº—](https://maixhub.com/app) æ‰¾åˆ°å¯ä»¥ç›´æ¥è¿è¡Œçš„åº”ç”¨ï¼Œæœ‰éƒ¨åˆ†åº”ç”¨å¯èƒ½æ˜¯ç”¨ MaixPy ç¼–å†™çš„ï¼Œå¦‚æœä½œè€…æä¾›äº†æºç æˆ–è€…å†™äº†è¯¦ç»†çš„æ•™ç¨‹ä¹Ÿéƒ½å¯ä»¥å‚è€ƒã€‚ æ¨èé¡¹ç›®ï¼š * ç®€æ˜“HTTPä¸²æµæœåŠ¡å™¨: https://maixhub.com/app/19 * æ¡Œé¢ç”µè„‘æ€§èƒ½ç›‘è§†å™¨: https://maixhub.com/app/13 * å®‰å…¨å¸½æ£€æµ‹æ¨¡å‹åº”ç”¨: https://maixhub.com/app/10"},"/maixpy/doc/zh/projects/face_tracking.html":{"title":"MaixCAM MaixPy 2è½´èˆµæœºäº‘å°äººè„¸è¿½è¸ª","content":" title: MaixCAM MaixPy 2è½´èˆµæœºäº‘å°äººè„¸è¿½è¸ª update: date: 2024 06 11 author: iawak9lkm version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ é˜…è¯»æœ¬æ–‡å‰ï¼Œç¡®ä¿å·²ç»çŸ¥æ™“å¦‚ä½•å¼€å‘MaixCAMï¼Œè¯¦æƒ…è¯·é˜…è¯»[å¿«é€Ÿå¼€å§‹](../index.html) [æºç åœ°å€](https://github.com/sipeed/MaixPy/blob/main/projects/app_face_tracking) [APPä¸‹è½½åœ°å€](https://maixhub.com/app/31) ## ç®€ä»‹ åŸºäº MaixCAM å’Œäº‘å°çš„äººè„¸è¿½è¸ªç¨‹åºã€‚å®é™…æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ![](../../assets/face_tracking1.jpg) ![](../../assets/face_tracking2.jpg) ## å¦‚ä½•ä½¿ç”¨ä¾‹ç¨‹ * ç»„è£…å¥½æ‚¨çš„äº‘å°å’ŒMaixCAMã€‚ * ä¿®æ”¹ `main.py` ä¸­çš„å‚æ•°ã€‚ ä¿®æ”¹æ¯ä¸ªèˆµæœºä½¿ç”¨çš„ MaixCAM å¼•è„šï¼ŒæŒ‡å®šçš„å¼•è„šå¿…é¡»å…·å¤‡ PWM åŠŸèƒ½ã€‚`servos.Servos` ä¼šè‡ªè¡Œå°†è¯¥å¼•è„šé…ç½®ä¸º PWM åŠŸèƒ½ã€‚ ```python ROLL_PWM_PIN_NAME \"A17\" PITCH_PWM_PIN_NAME \"A16\" ``` ä¿®æ”¹ä¸¤ä¸ªèˆµæœºçš„åˆå§‹ä½ç½®ã€‚ ```python init_pitch 80 # init position, value: [0, 100], means minimum angle to maxmum angle of servo init_roll 50 # 50 means middle ``` ä¿®æ”¹ä¸¤ä¸ªèˆµæœºå„è‡ªçš„æ´»åŠ¨èŒƒå›´çš„æœ€å°æœ€å¤§ PWM å ç©ºæ¯”ã€‚è¯·æ³¨æ„ï¼ŒæŸäº›äº‘å°ç»“æ„ä¸­çš„èˆµæœºè¶…å‡ºç‰©ç†é™åˆ¶çš„æœ€å¤§æ´»åŠ¨èŒƒå›´æ—¶å¯èƒ½ä¼šé€ æˆä¸å¯é¢„æœŸçš„åæœï¼Œè¯·åŠ¡å¿…ä¿è¯ä»¥ä¸‹è®¾å®šå€¼å¯¹åº”çš„èˆµæœºè¿åŠ¨èŒƒå›´å†…æ— é˜»ç¢ã€‚ ```python PITCH_DUTY_MIN 3.5 # The minimum duty cycle corresponding to the range of motion of the y axis servo. PITCH_DUTY_MAX 9.5 # Maximum duty cycle corresponding to the y axis servo motion range. ROLL_DUTY_MIN 2.5 # Minimum duty cycle for x axis servos. ROLL_DUTY_MAX 12.5 # Maxmum duty cycle for x axis servos. ``` é€‰æ‹©èˆµæœºçš„è¿åŠ¨æ–¹å‘ã€‚ ```python pitch_reverse False # reverse out value direction roll_reverse True # reverse out value direction ``` * æœ€åæ‰§è¡Œä»£ç å³å¯ã€‚ å¦‚æœæ‚¨æ˜¯ä» MaixHub ä¸Šå®‰è£…çš„åº”ç”¨,åœ¨å¯åŠ¨å™¨ä¸­ç‚¹å‡» face_tracking å³å¯æ‰§è¡Œæœ¬ç¨‹åºã€‚ å¦‚æœæ‚¨æ˜¯ä» Github ä¸Šè·å–çš„æºç , æ‚¨å¯ä»¥åœ¨ [MaixVision](https://wiki.sipeed.com/maixvision) ä¸­å¯¼å…¥è¯¥å·¥ç¨‹çš„æ–‡ä»¶å¤¹æ‰§è¡Œæ•´ä¸ªå·¥ç¨‹å³å¯ã€‚ MaixVisionè¯¦æƒ…è¯·å‚è€ƒ [MaixVisionè¯´æ˜](https://wiki.sipeed.com/maixpy/doc/zh/basic/maixvision.html)ã€‚ å½“ç„¶æ‚¨ä¹Ÿå¯ä»¥å°†æ•´ä¸ªå·¥ç¨‹æ–‡ä»¶å¤¹é€šè¿‡æ‚¨å–œæ¬¢çš„æ–¹å¼æ‹·è´åˆ°æˆ‘ä»¬çš„ MaixCAM ä¸Š, ç„¶åç”¨ python æ‰§è¡Œã€‚ * æƒ³è¦é€€å‡ºç¨‹åºæŒ‰å·¦ä¸Šè§’çš„æŒ‰é’®å³å¯ã€‚ ![](../../../../projects/app_face_tracking/assets/exit.jpg) ## å¸¸è§é—®é¢˜ * äººè„¸è·Ÿè¸ªæ•ˆæœä¸ç†æƒ³ã€‚ ä¸åŒçš„äº‘å°ä½¿ç”¨çš„ PID å‚æ•°ä¸å°½ç›¸åŒï¼Œæ‚¨å¯ä»¥é€šè¿‡è°ƒèŠ‚ PID å€¼æ¥ä½¿å¾—è¿½è¸ªæ•ˆæœæ›´ä¸æ»‘ã€‚ ```python pitch_pid [0.3, 0.0001, 0.0018, 0] # [P I D I_max] roll_pid [0.3, 0.0001, 0.0018, 0] # [P I D I_max] ``` * åœ¨å®Œæˆè·Ÿè¸ªåï¼Œäº‘å°å¯¹ç€ä¸åŠ¨çš„äººè„¸å°å¹…åº¦å·¦å³æŠ–åŠ¨ä¸€æ®µæ—¶é—´ã€‚ é€šå¸¸å¯ä»¥é€šè¿‡è°ƒèŠ‚ PID æ¥ä½¿å¾—è¯¥å½±å“å°½å¯èƒ½å°ï¼›ä½†æ˜¯æ— æ³•é¿å…äº‘å°ç‰©ç†ç»“æ„å¸¦æ¥çš„æŠ–åŠ¨ã€‚å¯ä»¥å°è¯•è°ƒèŠ‚æ­»åŒºæ¥å‡å°æŠ–åŠ¨ã€‚ ```python target_ignore_limit 0.08 # when target error < target_err_range*target_ignore_limit , set target error to 0 ``` * æ˜¾ç¤ºå±æ˜¾ç¤ºæˆ–ç»ˆç«¯æ‰“å° `PIN: XXX does not exist`ã€‚ è¿™æ˜¯å› ä¸º MaixCAM æ¿å­ä¸Šå¼•å‡ºçš„å¼•è„šä¸­å¹¶ä¸å­˜åœ¨è¯¥å¼•è„šï¼Œè¯·åœ¨ MaixCAM ä¸Šé€‰æ‹©ä¸€ä¸ªå¸¦ PWM åŠŸèƒ½çš„å¼•è„šã€‚ * æ˜¾ç¤ºå±æ˜¾ç¤ºæˆ–ç»ˆç«¯æ‰“å° `Pin XXX doesn't have PWM function`ã€‚ è¿™æ˜¯å› ä¸º MaixCAM æ¿å­ä¸Šå¼•å‡ºçš„è¿™ä¸ªå¼•è„šæ²¡æœ‰ PWM åŠŸèƒ½ï¼Œè¯·é€‰æ‹©ä¸€ä¸ªå¸¦ PWM åŠŸèƒ½çš„å¼•è„šã€‚ ## å¦‚ä½•è¿½è¸ªå…¶ä»–ç‰©ä½“ * åœ¨ `main.py` ä¸­å­˜åœ¨ä¸€ä¸ªç±» `Target`ï¼Œè¯¥ç±»ç”¨äºè‡ªå®šä¹‰éœ€è¦è¿½è¸ªçš„ç›®æ ‡ã€‚ * åœ¨ `__init__` ä¸­ï¼Œè¯·åˆå§‹åŒ–æ‚¨éœ€è¦ç”¨åˆ°çš„å¯¹è±¡ï¼Œæ¯”å¦‚æ‘„åƒå¤´ç­‰ã€‚ * åœ¨ `__get_target()` ä¸­ï¼Œæ‚¨éœ€è¦è®¡ç®—å‡ºè¢«è¿½è¸ªç‰©ä½“çš„ä¸­å¿ƒç‚¹ï¼Œå¦‚æœå¸§ä¸­ä¸å­˜åœ¨è¢«è¿½è¸ªç‰©ä½“ï¼Œè¯·è¿”å› 1, 1 ä»¥ç¡®ä¿ç¨‹åºåœ¨æœªæ‰¾åˆ°ç›®æ ‡æ—¶æš‚æ—¶ä¸åšåŠ¨ä½œã€‚åŒæ—¶ï¼Œæ‚¨ä¹Ÿéœ€è¦åœ¨è¿”å›åæ ‡ç‚¹ä¹‹å‰è°ƒç”¨ `self.__exit_listener(img)` å’Œ `self.disp.show(img)` ç¡®ä¿ç¨‹åºèƒ½å¤Ÿä¸æ‚¨æ­£å¸¸çš„å®Œæˆäº¤äº’ã€‚"},"/maixpy/doc/zh/vision/apriltag.html":{"title":"MaixCAM MaixPy è¯†åˆ« Apriltag æ ‡ç­¾","content":" title: MaixCAM MaixPy è¯†åˆ« Apriltag æ ‡ç­¾ update: date: 2024 04 03 author: lxowalle version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ é˜…è¯»æœ¬æ–‡å‰ï¼Œç¡®ä¿å·²ç»çŸ¥æ™“å¦‚ä½•å¼€å‘MaixCAMï¼Œè¯¦æƒ…è¯·é˜…è¯»[å¿«é€Ÿå¼€å§‹](../index.html) ## ç®€ä»‹ æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨MaixPyæ¥è¯†åˆ«Apriltagæ ‡ç­¾ ## ä½¿ç”¨ MaixPy è¯†åˆ«Apriltagæ ‡ç­¾ MaixPyçš„ `maix.image.Image`ä¸­æä¾›äº†`find_apriltags`æ–¹æ³•ï¼Œå¯ä»¥å¯ä»¥è¯†åˆ«apriltagæ ‡ç­¾ã€‚ ### å¦‚ä½•è¯†åˆ«Apriltagæ ‡ç­¾ ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå®ç°è¯†åˆ«apriltagæ ‡ç­¾å¹¶ç”»æ¡† ```python from maix import image, camera, display cam camera.Camera() disp display.Display() families image.ApriltagFamilies.TAG36H11 x_scale cam.width() / 160 y_scale cam.height() / 120 while 1: img cam.read() new_img img.resize(160, 120) apriltags new_img.find_apriltags(families families) for a in apriltags: corners a.corners() for i in range(4): corners[i][0] int(corners[i][0] * x_scale) corners[i][1] int(corners[i][1] * y_scale) x int(a.x() * x_scale) y int(a.y() * y_scale) w int(a.w() * x_scale) h int(a.h() * y_scale) for i in range(4): img.draw_line(corners[i][0], corners[i][1], corners[(i + 1) % 4][0], corners[(i + 1) % 4][1], image.COLOR_RED) img.draw_string(x + w, y, \"id: \" + str(a.id()), image.COLOR_RED) img.draw_string(x + w, y + 15, \"family: \" + str(a.family()), image.COLOR_RED) disp.show(img) ``` æ­¥éª¤ï¼š 1. å¯¼å…¥imageã€cameraã€displayæ¨¡å— ```python from maix import image, camera, display ``` 2. åˆå§‹åŒ–æ‘„åƒå¤´å’Œæ˜¾ç¤º ```python cam camera.Camera() disp display.Display() ``` 3. ä»æ‘„åƒå¤´è·å–å›¾ç‰‡å¹¶æ˜¾ç¤º ```python while 1: img cam.read() disp.show(img) ``` 4. è°ƒç”¨`find_apriltags`æ–¹æ³•è¯†åˆ«æ‘„åƒå¤´å›¾ç‰‡ä¸­çš„apriltagæ ‡ç­¾ ```python new_img img.resize(160, 120) apriltags new_img.find_apriltags(families families) ``` `img`æ˜¯é€šè¿‡`cam.read()`è¯»å–åˆ°çš„æ‘„åƒå¤´å›¾åƒ `img.resize(160, 120)`æ˜¯ç”¨æ¥å°†å›¾åƒç¼©æ”¾å¾—æ›´å°ï¼Œç”¨æ›´å°çš„å›¾åƒæ¥è®©ç®—æ³•è®¡ç®—å¾—æ›´å¿« `new_img.find_apriltags(families families)`ç”¨æ¥å¯»æ‰¾apriltagæ ‡ç­¾ï¼Œå¹¶å°†æŸ¥è¯¢ç»“æœä¿å­˜åˆ°`apriltags`ï¼Œä»¥ä¾›åç»­å¤„ç†ã€‚å…¶ä¸­familiesç”¨æ¥é€‰æ‹©apriltagæ—ï¼Œé»˜è®¤ä¸º`image.ApriltagFamilies.TAG36H11` 5. å¤„ç†è¯†åˆ«æ ‡ç­¾çš„ç»“æœå¹¶æ˜¾ç¤ºåˆ°å±å¹•ä¸Š ```python for a in apriltags: # è·å–ä½ç½®ä¿¡æ¯ï¼ˆå¹¶æ˜ å°„åæ ‡åˆ°åŸå›¾ï¼‰ x int(a.x() * x_scale) y int(a.y() * y_scale) w int(a.w() * x_scale) corners a.corners() for i in range(4): corners[i][0] int(corners[i][0] * x_scale) corners[i][1] int(corners[i][1] * y_scale) # æ˜¾ç¤º for i in range(4): img.draw_line(corners[i][0], corners[i][1], corners[(i + 1) % 4][0], corners[(i + 1) % 4][1], image.COLOR_RED) img.draw_string(x + w, y, \"id: \" + str(a.id()), image.COLOR_RED) img.draw_string(x + w, y + 15, \"family: \" + str(a.family()), image.COLOR_RED) img.draw_string(x + w, y + 30, \"rotation : \" + str(180 * a.rotation() // 3.1415), image.COLOR_RED) ``` éå†`apriltags`çš„æˆå‘˜ï¼Œ`apriltags`æ˜¯é€šè¿‡`img.find_apriltags()`æ‰«æapriltagæ ‡ç­¾çš„ç»“æœï¼Œå¦‚æœæ‰¾ä¸åˆ°æ ‡ç­¾åˆ™`apriltags`çš„æˆå‘˜ä¸ºç©º `x_scale`å’Œ`y_scale`ç”¨æ¥æ˜ å°„åæ ‡ï¼Œç”±äº`new_img`æ˜¯ç¼©æ”¾åçš„å›¾åƒï¼Œè®¡ç®—apriltagçš„åæ ‡æ—¶éœ€è¦ç»è¿‡æ˜ å°„åæ‰èƒ½æ­£å¸¸çš„ç”»åœ¨åŸå›¾`img`ä¸Š `a.corners()`ç”¨æ¥è·å–å·²æ‰«æåˆ°çš„æ ‡ç­¾çš„å››ä¸ªé¡¶ç‚¹åæ ‡ï¼Œ`img.draw_line()`åˆ©ç”¨è¿™å››ä¸ªé¡¶ç‚¹åæ ‡ç”»å‡ºæ ‡ç­¾çš„å½¢çŠ¶ `img.draw_string`ç”¨æ¥æ˜¾ç¤ºæ ‡ç­¾çš„å†…å®¹ï¼Œå…¶ä¸­`a.x()`å’Œ`a.y()`ç”¨æ¥è·å–æ ‡ç­¾å·¦ä¸Šè§’åæ ‡xå’Œåæ ‡yï¼Œ`a.id()`ç”¨æ¥è·å–æ ‡ç­¾çš„idï¼Œ`a.family()`ç”¨æ¥è·å–æ ‡ç­¾æ—ç±»å‹ï¼Œ`a.rotation()`ç”¨æ¥è·å–æ ‡ç­¾çš„æ—‹è½¬è§’åº¦ã€‚ ### å¸¸ç”¨å‚æ•°è¯´æ˜ åˆ—ä¸¾å¸¸ç”¨å‚æ•°è¯´æ˜ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯ä»¥å®ç°åº”ç”¨çš„å‚æ•°ï¼Œåˆ™éœ€è¦è€ƒè™‘æ˜¯å¦ä½¿ç”¨å…¶ä»–ç®—æ³•å®ç°ï¼Œæˆ–è€…åŸºäºç›®å‰ç®—æ³•çš„ç»“æœæ‰©å±•æ‰€éœ€çš„åŠŸèƒ½ å‚æ•° è¯´æ˜ ç¤ºä¾‹ roi è®¾ç½®ç®—æ³•è®¡ç®—çš„çŸ©å½¢åŒºåŸŸï¼Œroi [x, y, w, h]ï¼Œxï¼Œyè¡¨ç¤ºçŸ©å½¢åŒºåŸŸå·¦ä¸Šè§’åæ ‡ï¼Œwï¼Œhè¡¨ç¤ºçŸ©å½¢åŒºåŸŸçš„å®½åº¦å’Œé«˜åº¦ï¼Œé»˜è®¤ä¸ºæ•´å¼ å›¾ç‰‡ è®¡ç®—åæ ‡ä¸º(50,50)ï¼Œå®½å’Œé«˜ä¸º100çš„åŒºåŸŸ<br />```img.find_apriltags(roi [50, 50, 100, 100])``` families apriltagæ ‡ç­¾å®¶æ—ç±»å‹ æ‰«æTAG36H11å®¶æ—çš„æ ‡ç­¾<br />```img.find_apriltags(families image.ApriltagFamilies.TAG36H11)``` æœ¬æ–‡ä»‹ç»å¸¸ç”¨æ–¹æ³•ï¼Œæ›´å¤š API è¯·çœ‹ API æ–‡æ¡£çš„ [image](../../../api/maix/image.html) éƒ¨åˆ†ã€‚"},"/maixpy/doc/zh/vision/maixhub_train.html":{"title":"MaixCAM MaixPy ä½¿ç”¨ MaixHub åœ¨çº¿è®­ç»ƒ AI æ¨¡å‹ç»™ MaixPy ä½¿ç”¨","content":" title: MaixCAM MaixPy ä½¿ç”¨ MaixHub åœ¨çº¿è®­ç»ƒ AI æ¨¡å‹ç»™ MaixPy ä½¿ç”¨ update: date: 2024 04 03 author: neucrack version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## ç®€ä»‹ MaixHub æä¾›äº†åœ¨çº¿è®­ç»ƒ AI æ¨¡å‹çš„åŠŸèƒ½ï¼Œå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è®­ç»ƒæ¨¡å‹ï¼Œä¸éœ€è¦è´­ä¹°æ˜‚è´µçš„æœºå™¨ï¼Œä¸éœ€è¦æ­å»ºå¤æ‚çš„å¼€å‘ç¯å¢ƒï¼Œä¹Ÿä¸éœ€è¦å†™ä»£ç ï¼Œéå¸¸é€‚åˆå…¥é—¨ï¼Œä¹Ÿé€‚åˆæ‡’å¾—ç¿»ä»£ç çš„è€æ‰‹ã€‚ ## ä½¿ç”¨ MaixHub è®­ç»ƒæ¨¡å‹çš„åŸºæœ¬æ­¥éª¤ ### ç¡®è®¤è¦è¯†åˆ«çš„æ•°æ®ç±»å‹å’Œæ¨¡å‹ç±»å‹ è¦è®­ç»ƒä¸€ä¸ª AI æ¨¡å‹ï¼Œéœ€è¦å…ˆç¡®å®šæ˜¯ä»€ä¹ˆæ•°æ®å’Œæ¨¡å‹ï¼Œç›®å‰ MaixHubï¼ˆ2024.4ï¼‰æä¾›äº†å›¾åƒæ•°æ®çš„`ç‰©ä½“åˆ†ç±»æ¨¡å‹`å’Œ`ç‰©ä½“æ£€æµ‹æ¨¡å‹`ï¼Œéƒ½æ˜¯å›¾åƒè¯†åˆ«æ¨¡å‹ï¼Œ `ç‰©ä½“åˆ†ç±»æ¨¡å‹` æ¯” `ç‰©ä½“æ£€æµ‹æ¨¡å‹` æ›´ç®€å•ï¼Œå› ä¸ºç‰©ä½“æ£€æµ‹éœ€è¦æ ‡æ³¨ç‰©ä½“åœ¨å›¾ä¸­çš„ä½ç½®ï¼Œä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œç‰©ä½“åˆ†ç±»åˆ™åªéœ€è¦ç»™å‡ºå›¾åƒä¸­æ˜¯ä»€ä¹ˆï¼Œä¸éœ€è¦åæ ‡ï¼Œæ‰€ä»¥æ›´ç®€å•ï¼Œ å¦‚æœæ˜¯åˆå­¦è€…å»ºè®®å…ˆä»ç‰©ä½“åˆ†ç±»å¼€å§‹ã€‚ ### é‡‡é›†æ•°æ® å¦‚å‰é¢çš„ AI åŸºç¡€æ‰€è¯´ï¼Œè¦è®­ç»ƒæ¨¡å‹ï¼Œå¿…é¡»å‡†å¤‡è®­ç»ƒç”¨çš„æ•°æ®é›†è®© AI å­¦ä¹ ï¼Œå¯¹äºå›¾åƒè®­ç»ƒï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ•°æ®é›†ï¼Œå¹¶ä¸”ä¸Šä¼ å›¾ç‰‡åˆ°æ•°æ®é›†ã€‚ ä¿è¯è®¾å¤‡å·²ç»è¿æ¥ç½‘ç»œï¼ˆWiFiï¼‰ã€‚ æ‰“å¼€è®¾å¤‡ä¸Šçš„ MaixHub åº”ç”¨é€‰æ‹© é‡‡é›†æ•°æ® æ¥æ‹ç…§å¹¶ä¸€é”®ä¸Šä¼ åˆ° MaixHubã€‚éœ€è¦å…ˆåœ¨ MaixHub åˆ›å»ºæ•°æ®é›†ï¼Œç„¶åç‚¹å‡» è®¾å¤‡ ä¸Šä¼ æ•°æ®ï¼Œä¼šå‡ºç°ä¸€ä¸ª äºŒç»´ç ï¼Œè®¾å¤‡æ‰«æäºŒç»´ç æ¥ä¸MaixHub å»ºç«‹è¿æ¥ã€‚ æ³¨æ„è¦åˆ†æ¸…è®­ç»ƒé›†å’ŒéªŒè¯é›†çš„åŒºåˆ«ï¼Œè¦æƒ³å®æœºè¿è¡Œçš„æ•ˆæœå’Œè®­ç»ƒæ•ˆæœç›¸å½“ï¼ŒéªŒè¯é›†çš„æ•°æ®ä¸€å®šè¦å’Œå®æœºè¿è¡Œæ‹æ‘„çš„å›¾åƒè´¨é‡ä¸€æ ·ï¼Œè®­ç»ƒé›†ä¹Ÿå»ºè®®ç”¨è®¾å¤‡æ‹æ‘„çš„ï¼Œå¦‚æœè¦ç”¨ç½‘ä¸Šçš„å›¾ç‰‡ï¼Œä¸€å®šåªèƒ½ç”¨åœ¨è®­ç»ƒé›†ï¼Œä¸è¦ç”¨åœ¨éªŒè¯é›†ï¼Œå› ä¸ºæ•°æ®é‡å°ï¼Œæ•°æ®é›†ä¸å®æœºè¿è¡Œè¶Šæ¥è¿‘è¶Šå¥½ã€‚ ### æ ‡æ³¨æ•°æ® å¯¹äºåˆ†ç±»æ¨¡å‹ï¼Œåœ¨ä¸Šä¼ çš„æ—¶å€™å°±é¡ºä¾¿å·²ç»æ ‡æ³¨å¥½äº†ï¼Œå³ä¸Šä¼ æ—¶é€‰æ‹©å¥½äº†å›¾ç‰‡å±äºé‚£ä¸ªåˆ†ç±»ã€‚ å¯¹äºç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼Œä¸Šä¼ å®Œæˆåéœ€è¦è¿›è¡Œæ‰‹åŠ¨æ ‡æ³¨ï¼Œå³åœ¨æ¯ä¸€å¼ å›¾ä¸­æ¡†å‡ºè¦è¢«è¯†åˆ«ç‰©ä½“çš„åæ ‡å¤§å°å’Œåˆ†ç±»ã€‚ è¿™ä¸ªæ ‡æ³¨è¿‡ç¨‹ä½ ä¹Ÿå¯ä»¥é€‰æ‹©è‡ªå·±åœ¨è‡ªå·±çš„ç”µè„‘ä¸­ç¦»çº¿ç”¨æ¯”å¦‚ labelimg è¿™æ ·çš„è½¯ä»¶æ ‡æ³¨å®Œæ¯•åä½¿ç”¨æ•°æ®é›†ä¸­çš„å¯¼å…¥åŠŸèƒ½å¯¼å…¥åˆ° MaixHubã€‚ æ ‡æ³¨æ—¶å–„ç”¨å¿«æ·é”®æ ‡æ³¨èµ·æ¥ä¼šæ›´å¿«ï¼Œåé¢MaixHub ä¹Ÿä¼šå¢åŠ æ›´å¤šè¾…åŠ©æ ‡æ³¨å’Œè‡ªåŠ¨æ ‡æ³¨å·¥å…·ï¼ˆç›®å‰åœ¨ä¸Šä¼ è§†é¢‘å¤„æœ‰è‡ªåŠ¨æ ‡æ³¨å·¥å…·ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨ï¼‰ã€‚ ### è®­ç»ƒæ¨¡å‹ é€‰æ‹©è®­ç»ƒå‚æ•°è®­ç»ƒï¼Œé€‰æ‹©å¯¹åº”çš„è®¾å¤‡å¹³å°ï¼Œé€‰æ‹© maixcamï¼Œç­‰å¾…æ’é˜Ÿè®­ç»ƒï¼Œå¯ä»¥å®æ—¶çœ‹åˆ°è®­ç»ƒè¿›åº¦ï¼Œç­‰å¾…å®Œæˆå³å¯ã€‚ ### éƒ¨ç½²æ¨¡å‹ è®­ç»ƒå®Œæˆåï¼Œå¯ä»¥è®¾å¤‡çš„ MaixHub åº”ç”¨ä¸­é€‰æ‹© éƒ¨ç½² åŠŸèƒ½ï¼Œæ‰«ç è¿›è¡Œéƒ¨ç½²ã€‚ è®¾å¤‡å¼€ä¼šè‡ªåŠ¨ä¸‹è½½æ¨¡å‹å¹¶ä¸”è¿è¡Œèµ·æ¥ï¼Œæ¨¡å‹ä¼šè¢«å­˜åœ¨æœ¬åœ°ï¼Œåé¢ä¹Ÿèƒ½é€‰æ‹©å†æ¬¡è¿è¡Œã€‚ å¦‚æœä½ è§‰å¾—è¯†åˆ«æ•ˆæœå¾ˆä¸é”™ï¼Œå¯ä»¥ä¸€é”®åˆ†äº«åˆ°æ¨¡å‹åº“è®©æ›´å¤šäººä½¿ç”¨ã€‚ ## ä½¿ç”¨æ–¹æ³• è¯·åˆ° [MaixHub](https://maixhub.com) æ³¨å†Œè´¦å·ï¼Œç„¶åç™»å½•ï¼Œä¸»é¡µæœ‰è§†é¢‘æ•™ç¨‹ï¼Œå­¦ä¹ å³å¯ã€‚ æ³¨æ„æ•™ç¨‹å¦‚æœæ˜¯ä½¿ç”¨äº† M2dock è¿™ä¸ªå¼€å‘æ¿ï¼Œå’Œ MaixCAMä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œåªæ˜¯è®¾å¤‡ï¼ˆæ¿å­ï¼‰ä¸Šä½¿ç”¨çš„ MaixHub åº”ç”¨å¯èƒ½ç¨å¾®æœ‰ç‚¹åŒºåˆ«ï¼Œå¤§ä½“ä¸Šæ˜¯ç›¸åŒçš„ï¼Œè¯·æ³¨æ„ä¸¾ä¸€åä¸‰ã€‚"},"/maixpy/doc/zh/vision/face_recognition.html":{"title":"MaixCAM MaixPy äººè„¸è¯†åˆ«","content":" title: MaixCAM MaixPy äººè„¸è¯†åˆ« ## äººè„¸è¯†åˆ«ç®€ä»‹ ![face_recognize](../../assets/face_recognize.jpg) äººè„¸è¯†åˆ«å°±æ˜¯è¯†åˆ«å½“å‰ç”»é¢ä¸­çš„äººè„¸çš„ä½ç½®ä»¥åŠæ˜¯è°ã€‚ æ‰€ä»¥äººè„¸è¯†åˆ«é™¤äº†è¦æ£€æµ‹åˆ°äººè„¸ï¼Œä¸€èˆ¬ä¼šæœ‰ä¸€ä¸ªåº“æ¥ä¿å­˜è®¤è¯†çš„äººå’Œä¸è®¤è¯†çš„äººã€‚ ## è¯†åˆ«åŸç† * ä½¿ç”¨ AI æ¨¡å‹æ£€æµ‹äººè„¸ï¼Œè·å¾—åæ ‡å’Œäº”å®˜çš„åæ ‡ã€‚ * åˆ©ç”¨äº”å®˜çš„åæ ‡ä»¿å°„å˜æ¢å°†å›¾ä¸­çš„è„¸æ‹‰æ­£å¯¹å…¶åˆ°æ ‡å‡†è„¸çš„æ ·å­ï¼Œæ–¹ä¾¿æ¨¡å‹æå–è„¸çš„ç‰¹å¾ã€‚ * ä½¿ç”¨ç‰¹å¾æå–æ¨¡å‹æå–è„¸çš„ç‰¹å¾å€¼ã€‚ * ä¸åº“ä¸­è®°å½•çš„äººè„¸ç‰¹å¾å€¼è¿›è¡Œå¯¹æ¯”ï¼ˆè®¡ç®—ä¿å­˜çš„å’Œå½“å‰ç”»é¢ä¸­çš„è„¸çš„ç‰¹å¾å€¼çš„ä½™å¼¦è·ç¦»ï¼Œå¾—å‡ºæœ€å°çš„è·ç¦»çš„åº“ä¸­çš„äººè„¸ï¼Œå°äºè®¾å®šçš„é˜ˆå€¼å°±è®¤ä¸ºå½“å‰ç”»é¢ä¸­å°±æ˜¯è¿™ä¸ªåº“ä¸­çš„äººï¼‰ ## MaixPy ä½¿ç”¨ MaixPy maix.nn æ¨¡å—ä¸­æä¾›äº†äººè„¸è¯†åˆ«çš„ APIï¼Œ å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ¨¡å‹ä¹Ÿå†…ç½®äº†ï¼Œä¹Ÿå¯ä»¥åˆ° [MaixHub æ¨¡å‹åº“](https://maixhub.com/model/zoo) ä¸‹è½½ï¼ˆç­›é€‰é€‰åˆ™å¯¹åº”çš„ç¡¬ä»¶å¹³å°ï¼Œæ¯”å¦‚ maixcamï¼‰ã€‚ è¯†åˆ«ï¼š ```python from maix import nn, camera, display, image import os import math recognizer nn.FaceRecognizer(detect_model \"/root/models/retinaface.mud\", feature_model \"/root/models/face_feature.mud\", dual_buff True) if os.path.exists(\"/root/faces.bin\"): recognizer.load_faces(\"/root/faces.bin\") cam camera.Camera(recognizer.input_width(), recognizer.input_height(), recognizer.input_format()) dis display.Display() while 1: img cam.read() faces recognizer.recognize(img, 0.5, 0.45, 0.8) for obj in faces: img.draw_rect(obj.x, obj.y, obj.w, obj.h, color image.COLOR_RED) radius math.ceil(obj.w / 10) img.draw_keypoints(obj.points, image.COLOR_RED, size radius if radius < 5 else 4) msg f'{recognizer.labels[obj.class_id]}: {obj.score:.2f}' img.draw_string(obj.x, obj.y, msg, color image.COLOR_RED) dis.show(img) ``` ç¬¬ä¸€æ¬¡è¿è¡Œè¿™ä¸ªä»£ç ä¼šå‘ç°èƒ½æ£€æµ‹åˆ°äººè„¸ï¼Œä½†æ˜¯éƒ½ä¸è®¤è¯†ï¼Œéœ€è¦æˆ‘ä»¬è¿›å…¥æ·»åŠ äººè„¸æ¨¡å¼å­¦ä¹ äººè„¸æ‰è¡Œã€‚ > è¿™é‡Œ `recognizer.labels[0]` é»˜è®¤å°±æ˜¯`unknown`ï¼Œåé¢æ¯æ·»åŠ ä¸€ä¸ªäººè„¸å°±ä¼šè‡ªåŠ¨ç»™ `labels` å¢åŠ ä¸€ä¸ªã€‚ æ¯”å¦‚å¯ä»¥åœ¨ç”¨æˆ·æŒ‰ä¸‹æŒ‰é”®çš„æ—¶å€™å­¦ä¹ äººè„¸ï¼š ```python faces recognizer.recognize(img, 0.5, 0.45, True) for face in faces: print(face) # è¿™é‡Œè€ƒè™‘åˆ°äº†ä¸€ä¸ªç”»é¢ä¸­æœ‰å¤šä¸ªäººè„¸çš„æƒ…å†µï¼Œ obj.class_id ä¸º 0 ä»£è¡¨æ˜¯æ²¡æœ‰å½•å…¥çš„äººè„¸ # è¿™é‡Œå†™ä½ è‡ªå·±çš„é€»è¾‘ # æ¯”å¦‚å¯ä»¥åœ¨è¿™é‡Œæ ¹æ® face çš„ class_id å’Œåæ ‡å†³å®šè¦ä¸è¦æ·»åŠ åˆ°åº“é‡Œé¢ï¼Œä»¥åŠå¯ä»¥åšç”¨æˆ·äº¤äº’é€»è¾‘ï¼Œæ¯”å¦‚æŒ‰ä¸‹æŒ‰é’®æ‰å½•å…¥ç­‰ recognizer.add_face(face, label) # label æ˜¯è¦ç»™äººè„¸å–çš„æ ‡ç­¾ï¼ˆåå­—ï¼‰ recognizer.save_faces(\"/root/faces.bin\") ``` ## å®Œæ•´ä¾‹ç¨‹ è¿™é‡Œæä¾›ä¸€ä¸ªæŒ‰é”®å½•å…¥æœªçŸ¥äººè„¸ï¼Œä»¥åŠäººè„¸è¯†åˆ«çš„ä¾‹ç¨‹ï¼Œå¯ä»¥åœ¨[MaixPy çš„ example ç›®å½•](https://github.com/sipeed/MaixPy/tree/main/examples) æ‰¾åˆ°`nn_face_recognize.py`ã€‚ ## dual_buff åŒç¼“å†²åŒºåŠ é€Ÿ ä½ å¯èƒ½æ³¨æ„åˆ°è¿™é‡Œæ¨¡å‹åˆå§‹åŒ–ä½¿ç”¨äº†`dual_buff`ï¼ˆé»˜è®¤å€¼å°±æ˜¯ `True`ï¼‰ï¼Œä½¿èƒ½ `dual_buff` å‚æ•°å¯ä»¥åŠ å¿«è¿è¡Œæ•ˆç‡ï¼Œæé«˜å¸§ç‡ï¼Œå…·ä½“åŸç†å’Œä½¿ç”¨æ³¨æ„ç‚¹è§ [dual_buff ä»‹ç»](./dual_buff.html)ã€‚ ## æ›´æ¢å…¶å®ƒé»˜è®¤è¯†åˆ«æ¨¡å‹ è¿™é‡Œè¯†åˆ«æ¨¡å‹ï¼ˆåŒºåˆ†ä¸åŒäººï¼‰ç”¨äº† mobilenetv2 æ¨¡å‹ï¼Œå¦‚æœä¸æ»¡è¶³ç²¾åº¦è¦æ±‚ï¼Œå¯ä»¥æ›´æ¢æˆå…¶å®ƒæ¨¡å‹ï¼Œæ¯”å¦‚[insight face resnet50](https://maixhub.com/model/zoo/462) æ¨¡å‹ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±è®­ç»ƒæˆ–è€…æ‰¾å…¶å®ƒè®­ç»ƒå¥½çš„æ¨¡å‹è½¬æ¢æˆ MaixCAM æ”¯æŒçš„æ¨¡å‹å³å¯ï¼Œè½¬æ¢æ–¹æ³•çœ‹[MaixCAM æ¨¡å‹è½¬æ¢æ–‡æ¡£](../ai_model_converter/maixcam.html)ï¼Œ mud æ–‡ä»¶å‚è€ƒä»¥æœ‰çš„æ–‡ä»¶å†™å³å¯ã€‚"},"/maixpy/doc/zh/basic/maixvision.html":{"title":"MaixVision -- MaixCAM MaixPy ç¼–ç¨‹ IDE + å›¾å½¢åŒ–ç§¯æœ¨ç¼–ç¨‹","content":" title: MaixVision MaixCAM MaixPy ç¼–ç¨‹ IDE + å›¾å½¢åŒ–ç§¯æœ¨ç¼–ç¨‹ ## ç®€ä»‹ [MaixVision](https://wiki.sipeed.com/maixvision) æ˜¯ä¸“ä¸º Maix ç”Ÿæ€æ‰“é€ çš„ä¸€æ¬¾å¼€å‘è€…ç¼–ç¨‹å·¥å…·ï¼Œæ”¯æŒ MaixPy ç¼–ç¨‹å’Œå›¾å½¢åŒ–ç§¯æœ¨ç¼–ç¨‹ï¼ŒåŒæ—¶æ”¯æŒåœ¨çº¿è¿è¡Œå’Œè°ƒè¯•ï¼Œä»¥åŠå®æ—¶é¢„è§ˆå›¾åƒï¼Œå¯ä»¥åŒæ­¥è®¾å¤‡æ˜¾ç¤ºå±çš„å›¾åƒï¼Œæ–¹ä¾¿è°ƒè¯•å’Œå¼€å‘ã€‚ ä»¥åŠæ”¯æŒæ‰“åŒ…åº”ç”¨å’Œå®‰è£…åº”ç”¨åˆ°è®¾å¤‡ï¼Œæ–¹ä¾¿ç”¨æˆ·ä¸€é”®ç”Ÿæˆã€å®‰è£…åº”ç”¨ã€‚ åŒæ—¶è¿˜é›†æˆä¸€äº›æ–¹ä¾¿å¼€å‘çš„å°å·¥å…·ï¼Œæ¯”å¦‚æ–‡ä»¶ç®¡ç†ï¼Œé˜ˆå€¼ç¼–è¾‘å™¨ï¼ŒäºŒç»´ç ç”Ÿæˆç­‰ç­‰ã€‚ ## ä¸‹è½½ è®¿é—® [MaixVision ä¸»é¡µ](https://wiki.sipeed.com/maixvision) ä¸‹è½½ã€‚ ## ä½¿ç”¨ MaixPy ç¼–ç¨‹å’Œåœ¨çº¿è¿è¡Œ æŒ‰ç…§[å¿«é€Ÿå¼€å§‹](../index.html)çš„æ­¥éª¤è¿æ¥è®¾å¤‡ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä½¿ç”¨ MaixPy ç¼–ç¨‹å’Œåœ¨çº¿è¿è¡Œã€‚ ## å®æ—¶é¢„è§ˆå›¾åƒ MaixPy æä¾›`display`æ¨¡å—ï¼Œå¯ä»¥å°†å›¾åƒæ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼ŒåŒæ—¶ï¼Œåœ¨è°ƒç”¨`display`æ¨¡å—çš„`show`æ–¹æ³•æ—¶ï¼Œä¼šå°†å›¾åƒå‘é€åˆ° MaixVision æ˜¾ç¤ºï¼Œæ¯”å¦‚ä»£ç ï¼š ```python from maix import display, camera cam camera.Camera(640, 480) disp display.Display() while 1: disp.show(cam.read()) ``` è¿™é‡Œæˆ‘ä»¬ç”¨æ‘„åƒå¤´è¯»å–äº†å›¾åƒï¼Œç„¶åé€šè¿‡`disp.show()`æ–¹æ³•å°†å›¾åƒæ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼ŒåŒæ—¶ä¹Ÿä¼šå‘é€åˆ° MaixVision æ˜¾ç¤ºã€‚ å½“æˆ‘ä»¬ç‚¹å‡»äº†å³ä¸Šè§’çš„`æš‚åœ`æŒ‰é’®ï¼Œå°±ä¼šåœæ­¢å‘é€å›¾åƒåˆ° MaixVision æ˜¾ç¤ºã€‚ ## ä»£ç è‡ªåŠ¨è¡¥å…¨ ä»£ç æç¤ºä¾èµ–ç”µè„‘æœ¬åœ°çš„ Python åŒ…ï¼Œä¸ºäº†å®ç°ä»£ç æç¤ºï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç”µè„‘ä¸­å®‰è£… Pythonï¼Œå¹¶ä¸”å®‰è£…éœ€è¦æç¤ºçš„ Python åŒ…ã€‚ * å®‰è£… Python è¯·è®¿é—® [Python å®˜ç½‘](https://python.org/)å®‰è£…ã€‚ * å®‰è£…éœ€è¦æç¤ºçš„åŒ…ï¼Œæ¯”å¦‚å¯¹äº MaixPyï¼Œ ä½ éœ€è¦åœ¨ç”µè„‘ä¹Ÿå®‰è£…ä¸€ä»½ MaixPy åŒ…ï¼Œåœ¨ç”µè„‘ä½¿ç”¨`pip install MaixPy`å³å¯å®‰è£…å¥½ï¼Œå¦‚æœ`MaixPy`æ›´æ–°äº†ï¼Œä½ ä¹Ÿéœ€è¦åœ¨ç”µè„‘å’Œè®¾å¤‡æ›´æ–°åˆ°`MaixPy`ï¼Œç”µè„‘æ‰‹åŠ¨åœ¨ç»ˆç«¯æ‰§è¡Œ`pip install MaixPy U`å³å¯ï¼Œè®¾å¤‡æ›´æ–°ç›´æ¥åœ¨`è®¾ç½®`åº”ç”¨ä¸­æ›´æ–°å³å¯ã€‚ > ä¸­å›½å›½å†…ç”¨æˆ·å¯ä»¥ä½¿ç”¨å›½å†…é•œåƒ`pip install i https://pypi.tuna.tsinghua.edu.cn/simple MaixPy`ã€‚ * é‡å¯ MaixVision å°±èƒ½å¤Ÿçœ‹åˆ°ä»£ç æç¤ºäº†ã€‚ > å¦‚æœä»ç„¶ä¸èƒ½æç¤ºï¼Œå¯ä»¥æ‰‹åŠ¨åœ¨è®¾ç½®ä¸­è®¾ç½® python å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„åé‡å¯ã€‚ >! æ³¨æ„åœ¨ç”µè„‘å®‰è£… Python åŒ…è¿™é‡Œåªæ˜¯ä¸ºäº†ç”¨ä½œä»£ç æç¤ºï¼Œå®é™…ä»£ç è¿è¡Œè¿˜æ˜¯åœ¨è®¾å¤‡ï¼ˆå¼€å‘æ¿ï¼‰ä¸Šï¼Œè®¾å¤‡ä¸Šä¹Ÿè¦æœ‰å¯¹åº”çš„åŒ…æ‰èƒ½æ­£å¸¸è¿è¡Œã€‚ > å¦å¤–ï¼Œè™½ç„¶ä½ åœ¨ç”µè„‘ä¸Šå®‰è£…äº† MaixPy åŒ…ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬ç²¾åŠ›æœ‰é™ï¼Œæˆ‘ä»¬ä¸ç¡®ä¿ä½ èƒ½ç›´æ¥åœ¨ç”µè„‘çš„ Python å¯¼å…¥ maix åŒ…è¿›è¡Œä½¿ç”¨ï¼Œè¯·åœ¨æ”¯æŒçš„è®¾å¤‡ä¸Šè¿è¡Œã€‚ ## è®¡ç®—å›¾åƒçš„ç›´æ–¹å›¾ åœ¨ä¸Šä¸€æ­¥ä¸­æˆ‘ä»¬å¯ä»¥åœ¨ MaixVision ä¸­å®æ—¶çœ‹åˆ°å›¾åƒï¼Œæˆ‘ä»¬ç”¨é¼ æ ‡æ¡†é€‰ä¸€ä¸ªåŒºåŸŸï¼Œå›¾åƒä¸‹æ–¹å°±èƒ½çœ‹åˆ°è¿™ä¸ªåŒºåŸŸçš„ç›´æ–¹å›¾äº†ï¼Œé€‰æ‹©ä¸åŒçš„é¢œè‰²è¡¨ç¤ºæ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°ä¸åŒçš„é¢œè‰²é€šé“çš„ç›´æ–¹å›¾ã€‚ è¿™ä¸ªåŠŸèƒ½æ–¹ä¾¿æˆ‘ä»¬åœ¨åšæŸäº›å›¾åƒå¤„ç†ç®—æ³•æ—¶æ‰¾åˆ°ä¸€äº›åˆé€‚çš„å‚æ•°ã€‚ ## åŒºåˆ†`è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿ`å’Œ`ç”µè„‘æ–‡ä»¶ç³»ç»Ÿ` è¿™é‡Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æ¦‚å¿µéœ€è¦æŒæ¡ï¼š**åˆ†æ¸…æ¥š`è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿ`å’Œ`ç”µè„‘æ–‡ä»¶ç³»ç»Ÿ`**ã€‚ * **ç”µè„‘æ–‡ä»¶ç³»ç»Ÿ**ï¼šè¿è¡Œåœ¨ç”µè„‘ä¸Šï¼Œåœ¨ MaixVision ä¸­æ‰“å¼€æ–‡ä»¶æˆ–è€…å·¥ç¨‹éƒ½æ˜¯æ‰“å¼€çš„ç”µè„‘é‡Œé¢çš„æ–‡ä»¶ï¼Œä¿å­˜ä¹Ÿæ˜¯è‡ªåŠ¨ä¿å­˜åˆ°ç”µè„‘çš„æ–‡ä»¶ç³»ç»Ÿã€‚ * **è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿ**ï¼šç¨‹åºè¿è¡Œæ—¶ä¼šå°†ç¨‹åºå‘é€åˆ°è®¾å¤‡ä¸Šè¿è¡Œï¼Œæ‰€ä»¥ä»£ç é‡Œé¢ä½¿ç”¨çš„æ–‡ä»¶éƒ½æ˜¯ä»è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿè¯»å–ã€‚ æ‰€ä»¥å¸¸è§çš„é—®é¢˜æ˜¯æœ‰åŒå­¦åœ¨ç”µè„‘ä¸Šä¿å­˜äº†æ–‡ä»¶`D:\\data\\a.jpg`ï¼Œç„¶ååœ¨è®¾å¤‡ä¸Šä½¿ç”¨è¿™ä¸ªæ–‡ä»¶`img image.load(\"D:\\data\\a.jpg\")`ï¼Œè¿™æ ·å½“ç„¶æ˜¯æ‰¾ä¸åˆ°æ–‡ä»¶çš„ï¼Œå› ä¸ºè®¾å¤‡ä¸Šæ²¡æœ‰`D:\\data\\a.jpg`è¿™ä¸ªæ–‡ä»¶ã€‚ å…·ä½“å¦‚ä½•å°†ç”µè„‘çš„æ–‡ä»¶å‘é€åˆ°è®¾å¤‡ä¸Šï¼Œå‚è€ƒä¸‹é¢çš„ç« èŠ‚ã€‚ ## ä¼ è¾“æ–‡ä»¶åˆ°è®¾å¤‡ å…ˆè¿æ¥è®¾å¤‡ï¼Œç„¶åç‚¹å‡»æµè§ˆè®¾å¤‡æ–‡ä»¶ç³»ç»Ÿçš„æŒ‰é’®ï¼Œæœ‰ä¸¤ä¸ªå…¥å£ï¼Œå¦‚ä¸‹å›¾ï¼Œç„¶åå°±èƒ½ä¸Šä¼ æ–‡ä»¶åˆ°è®¾å¤‡ï¼Œæˆ–è€…ä»è®¾å¤‡ä¸‹è½½æ–‡ä»¶åˆ°ç”µè„‘äº†ã€‚ ![maixvision_browser2](../../assets/maixvision_browser2.jpg) ![maixvision_browser](../../assets/maixvision_browser.jpg) .. details::ä¹Ÿå¯ä»¥ç”¨å…¶å®ƒå·¥å…·ä»£æ›¿ï¼Œç‚¹å‡»å±•å¼€ å…ˆçŸ¥é“è®¾å¤‡çš„ ip åœ°å€æˆ–è€…è®¾å¤‡åç§°ï¼ŒMaixVision å°±å¯ä»¥æœç´¢åˆ°, æˆ–è€…åœ¨è®¾å¤‡`è®¾ç½® >ç³»ç»Ÿä¿¡æ¯`ä¸­çœ‹åˆ°ï¼Œæ¯”å¦‚ç±»ä¼¼ `maixcam xxxx.local` æˆ–è€… `192.168.0.123`ã€‚ ç”¨æˆ·åå’Œå¯†ç éƒ½æ˜¯ `root`, ä½¿ç”¨ `SFTP` åè®®ä¼ è¾“æ–‡ä»¶ï¼Œç«¯å£å·æ˜¯ `22`ã€‚ ç„¶åä¸åŒç³»ç»Ÿä¸‹éƒ½æœ‰å¾ˆå¤šå¥½ç”¨çš„è½¯ä»¶ï¼š ### Windows ä¸‹ ä½¿ç”¨ [WinSCP](https://winscp.net/eng/index.php) æˆ–è€… [FileZilla](https://filezilla project.org/) ç­‰å·¥å…·è¿æ¥è®¾å¤‡ï¼Œå°†æ–‡ä»¶ä¼ è¾“åˆ°è®¾å¤‡ä¸Šï¼Œé€‰æ‹© `SFTP` åè®®å¡«å†™è®¾å¤‡å’Œè´¦å·ä¿¡æ¯è¿æ¥å³å¯ã€‚ å…·ä½“ä¸æ‡‚çš„å¯ä»¥è‡ªè¡Œæœç´¢ã€‚ ### Linux ä¸‹ ç»ˆç«¯ä½¿ç”¨ `scp` å‘½ä»¤ä¼ è¾“æ–‡ä»¶åˆ°è®¾å¤‡ä¸Šï¼Œæ¯”å¦‚ï¼š ```bash scp /path/to/your/file.py root@maixcam xxxx.local:/root ``` ### Mac ä¸‹ * **æ–¹æ³•ä¸€**ï¼šç»ˆç«¯ä½¿ç”¨ `scp` å‘½ä»¤ä¼ è¾“æ–‡ä»¶åˆ°è®¾å¤‡ä¸Šï¼Œæ¯”å¦‚ï¼š ```bash scp /path/to/your/file.py root@maixcam xxxx.local:/root ``` * **æ–¹æ³•äºŒ**ï¼šä½¿ç”¨ [FileZilla](https://filezilla project.org/) ç­‰å·¥å…·è¿æ¥è®¾å¤‡ï¼Œå°†æ–‡ä»¶ä¼ è¾“åˆ°è®¾å¤‡ä¸Šï¼Œé€‰æ‹© `SFTP` åè®®å¡«å†™è®¾å¤‡å’Œè´¦å·ä¿¡æ¯è¿æ¥å³å¯ã€‚ ## ä½¿ç”¨å›¾å½¢åŒ–ç§¯æœ¨ç¼–ç¨‹ å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ã€‚"},"/maixpy/doc/zh/basic/view_src_code.html":{"title":"MaixCAM MaixPy å¦‚ä½•æ‰¾åˆ° MaixPy API å¯¹åº”çš„æºç ","content":" title: MaixCAM MaixPy å¦‚ä½•æ‰¾åˆ° MaixPy API å¯¹åº”çš„æºç  ## ç®€ä»‹ MaixPy æ˜¯åŸºäº Python å®ç°ï¼Œæœ‰éƒ¨åˆ†å‡½æ•°æ˜¯ç”¨ Python ç¼–å†™ï¼Œå¤§å¤šæ•°åº•å±‚ä»£ç éƒ½æ˜¯ä½¿ç”¨ C/C++ ç¼–å†™ï¼Œè¿™æ ·å¯ä»¥ä¿è¯è¿è¡Œæ•ˆç‡ã€‚ å¦‚æœæˆ‘ä»¬åœ¨ä½¿ç”¨ä¸€ä¸ªå‡½æ•°é‡åˆ°ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥è¯¢æœ¬æ–‡æ¡£ï¼Œä»¥åŠ API æ–‡æ¡£ã€‚ å¦‚æœä»ç„¶ä¸èƒ½è§£å†³ä½ çš„ç–‘æƒ‘ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥æŒ‰ç…§æœ¬æ–‡çš„æ–¹æ³•æ‰¾åˆ°åº•å±‚å®ç°çš„æºç æ‰¾å‡ºç­”æ¡ˆï¼Œ**ä¹Ÿæ¬¢è¿ä¸€èµ·è´¡çŒ®æ–‡æ¡£æˆ–ä»£ç ï¼Œæˆä¸º MaixPy å¼€å‘è€…çš„ä¸€å‘˜**ï¼ ## å…ˆçœ‹æ–‡æ¡£ ä¸€å®šè¦å…ˆçœ‹æ–‡æ¡£ï¼š [https://wiki.sipeed.com/maixpy/](https://wiki.sipeed.com/maixpy/), ç„¶åçœ‹ API æ–‡æ¡£ï¼š[https://wiki.sipeed.com/maixpy/api/index.html](https://wiki.sipeed.com/maixpy/api/index.html) API æ–‡æ¡£åªæœ‰è‹±æ–‡ï¼ŒåŸå› æ˜¯ API æ–‡æ¡£æ˜¯ä»ä»£ç çš„æ³¨é‡Šç”Ÿæˆè€Œæ¥ï¼Œä»£ç ä¸­ä¸€å¾‹ä½¿ç”¨è‹±æ–‡ï¼Œçœ‹ä¸æ‡‚è‹±æ–‡å¯ä»¥ä½¿ç”¨ç¿»è¯‘ã€‚ ## å¦‚ä½•æ‰¾åˆ° API å¯¹åº”çš„æºç  é¦–å…ˆæœ‰ä¸¤ä¸ªå¼€æºä»“åº“ï¼Œåˆ†åˆ«æ˜¯ [MaixPy](https://github.com/sipeed/MaixPy) å’Œ [MaixCDK](https://github.com/sipeed/MaixCDK)ã€‚ MaixPy æ˜¯å·¥ç¨‹ä»“åº“ï¼Œé‡Œé¢åŒ…å«äº† MaixPy çš„éƒ¨åˆ†æºç ï¼Œæ‰€æœ‰æ–‡æ¡£ã€ä¾‹ç¨‹ï¼›MaixCDK åŒ…å«äº†å¤§å¤šæ•° MaixPy API çš„åº•å±‚ C/C++ å®ç°ã€‚ æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸¤ä»½ä»£ç ä¸‹è½½ä¸‹æ¥ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨ç½‘é¡µæŸ¥çœ‹ã€‚ **é¡ºä¾¿è®°å¾—ç»™å®ƒä»¬ç‚¹ä¸€ä¸ª star è®©æ›´å¤šäººçœ‹åˆ°å“¦ï½** ### æ‰¾åˆ° C/C++ ç¼–å†™çš„ API ç°åœ¨å‡è®¾æˆ‘ä»¬è¦æ‰¾åˆ° `maix.image.Image.find_blobs` å‡½æ•°ä¸ºä¾‹ï¼Œ é¦–å…ˆæˆ‘ä»¬å°è¯•æ‰‹åŠ¨å»æ‰¾ï¼š * å› ä¸ºè¿™æ˜¯å±äºè§†è§‰ç›¸å…³çš„ APIï¼Œ æˆ‘ä»¬åœ¨ [MaixCDK](https://github.com/sipeed/MaixCDK) çš„`components/vision/include` ä¸‹é¢å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª `maix_image.hpp`çš„å¤´æ–‡ä»¶ï¼ŒçŒœæµ‹å¤§æ¦‚åœ¨è¿™é‡Œé¢ã€‚ * åœ¨`maix_image.hpp` æœç´¢ `find_blobs`ï¼Œé©¬ä¸Šå°±å‘ç°äº†å‡½æ•°å£°æ˜ï¼š ```c++ std::vector<image::Blob> find_blobs(std::vector<std::vector<int>> thresholds std::vector<std::vector<int>>(), bool invert false, std::vector<int> roi std::vector<int>(), int x_stride 2, int y_stride 1, int area_threshold 10, int pixels_threshold 10, bool merge false, int margin 0, int x_hist_bins_max 0, int y_hist_bins_max 0); ``` * åŒæ—¶æˆ‘ä»¬å‘ç°å‡½æ•°å£°æ˜å‰é¢æœ‰æ³¨é‡Šï¼ŒAPI æ–‡æ¡£å³ä»è¿™ä»½æ³¨é‡Šè‡ªåŠ¨ç”Ÿæˆè€Œæ¥ï¼Œå¦‚æœä½ ä»”ç»†å¯¹æ¯” API æ–‡æ¡£å’Œè¿™ä¸ªæ³¨é‡Šä¼šå‘ç°ä»–ä»¬ä¸€æ¨¡ä¸€æ ·çš„ï¼Œæ”¹åŠ¨è¿™ä¸ªæ³¨é‡Šç¼–è¯‘åä¼šäº§ç”Ÿ API æ–‡æ¡£ã€‚ * è¿™åªæ˜¯å‡½æ•°å£°æ˜ï¼Œæˆ‘ä»¬æ‰¾åˆ°`components/vision/src/maix_image.cpp`ï¼Œå‘ç°é‡Œé¢æ²¡æœ‰è¿™ä¸ªå‡½æ•°ï¼Œä»”ç»†ä¸€çœ‹æœ‰ä¸ª`components/vision/src/maix_image_find_blobs.cpp`ï¼ŒåŸæ¥æ˜¯å°†å‡½æ•°å•ç‹¬å†™äº†ä¸€ä¸ª`cpp`ï¼Œåœ¨é‡Œé¢æˆ‘ä»¬å°±èƒ½çœ‹åˆ°å‡½æ•°çš„æºä»£ç äº†ã€‚ ### æ‰¾åˆ°ä½¿ç”¨ Pybind11 ç¼–å†™çš„ API å¦‚æœ MaixCDK é‡Œé¢æ‰¾ä¸åˆ°ï¼Œé‚£å°±å¯ä»¥åˆ° [MaixPy/components](https://github.com/sipeed/MaixPy/tree/main/components)é‡Œé¢å¯»æ‰¾ã€‚ > ä¸Šé¢çš„ä»£ç ä½ ä¼šå‘ç°ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨`find_blobs`æ—¶ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯`[[...]]`è¿™æ ·çš„å‚æ•°å³`list`ç±»å‹ï¼ŒC/C++ å®šä¹‰ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯`std::vector<std::vector<int>>`ç±»å‹ï¼ŒåŸå› æ˜¯æˆ‘ä»¬ä½¿ç”¨äº†`pybind11`è‡ªåŠ¨å°† `std::vector` ç±»å‹è½¬æ¢ä¸ºäº†`list`ç±»å‹ã€‚ è€Œæœ‰ä¸€äº›ç±»å‹åœ¨`MaixCDK`é‡Œé¢ä¸æ–¹ä¾¿å®šä¹‰ï¼Œæ¯”å¦‚`numpy`çš„`array`ç±»å‹ï¼Œä½†æ˜¯`pybind11`é‡Œé¢æœ‰ç›¸å…³çš„å®šä¹‰æ–¹ä¾¿æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ï¼Œä½†æ˜¯åˆä¸æƒ³ MaixCDK é‡Œé¢æœ‰ pybind11 ç›¸å…³çš„ä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨[MaixPy/components](https://github.com/sipeed/MaixPy/tree/main/components) é‡Œé¢æ¥å†™ä½¿ç”¨äº† `pybind11` ç›¸å…³çš„ä»£ç ï¼Œæ¯”å¦‚`maix.image.image2cv`æ–¹æ³•ã€‚ ## å¦‚ä½•ä¿®æ”¹ä»£ç  åœ¨æ‰¾åˆ°ä»£ç åï¼Œç›´æ¥ä¿®æ”¹ï¼Œç„¶åæŒ‰ç…§[ç¼–è¯‘æ–‡æ¡£](../source_code/build.html)ç¼–è¯‘å‡ºå›ºä»¶å³å¯ã€‚ ## å¦‚ä½•å¢åŠ ä»£ç  ç…§æŠ„å…¶å®ƒ APIï¼Œå†™ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åæ·»åŠ å®Œæ•´çš„æ³¨é‡Šï¼Œæ³¨é‡Šä¸­é¢å¤–æ·»åŠ ä¸€ä¸ª`@maixpy maix.xxx.xxx`ï¼Œè¿™é‡Œ`xxx`å³ä½ æƒ³æ·»åŠ åˆ°çš„æ¨¡å—å’Œ`API`åï¼Œç„¶åç¼–è¯‘å‡ºå›ºä»¶å³å¯ã€‚ å¯ä»¥å‚è€ƒ[MaixCDK/components/basic/includemaix_api_example.hpp](https://github.com/sipeed/MaixCDK/blob/master/components/basic/include/maix_api_example.hpp)ã€‚ API å‚æ•°å’Œè¿”å›å€¼ç”¨åŸºç¡€çš„`C++` ç±»å‹ä¼šè‡ªåŠ¨è½¬æ¢ä¸º`Python`çš„ç±»å‹ï¼Œæ˜¯ä¸æ˜¯ååˆ†ç®€å•. å…·ä½“çš„ç±»å‹è½¬æ¢å‚è€ƒ[pybind11 ç±»å‹è‡ªåŠ¨è½¬æ¢åˆ—è¡¨](https://pybind11.readthedocs.io/en/stable/advanced/cast/overview.html#conversion table) æ¯”å¦‚æˆ‘ä»¬å¸Œæœ›å¢åŠ ä¸€ä¸ª`maix.my_module.my_func`ï¼Œåœ¨`MaixCDK`ä¸­åˆé€‚çš„åœ°æ–¹ï¼ˆæœ€å¥½ç¬¦åˆç°åœ¨çš„æ–‡ä»¶å¤¹åˆ†ç±»ï¼‰åˆ›å»ºä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œç„¶åæ·»åŠ ä»£ç ï¼š ```cpp namespace maix::my_module { /** * My function, add two integer. * @param a arg a, int type * @param b arg b, int type * @return int type, will a + b * @maixpy maix.my_module.my_func */ int my_func(int a, int b); } ``` ç„¶åå¢åŠ ä¸€ä¸ª`cpp`æ–‡ä»¶ï¼š ```cpp int my_func(int a, int b) { return a + b; } ``` ç„¶åç¼–è¯‘ MaixPy ç”Ÿæˆ`whl`æ–‡ä»¶ï¼Œå®‰è£…åˆ°è®¾å¤‡å³å¯ä½¿ç”¨`maix.my_module.my_func`å‡½æ•°ã€‚ ## å¦‚ä½•è´¡çŒ®ä»£ç  å¦‚æœä½ å‘ç° MaixPy æœ‰æœªå®Œæˆçš„ APIï¼Œ æˆ–è€…æœ‰ bugï¼Œ æ¬¢è¿ä¿®æ”¹åæäº¤ PRï¼ˆPull Requestï¼‰åˆ° MaixPy ä»“åº“ï¼Œå…·ä½“æäº¤æ–¹æ³•çœ‹ [è´¡çŒ®æ–‡æ¡£å’Œä»£ç ](../source_code/contribute.html)"},"/maixpy/doc/zh/basic/python.html":{"title":"Python åŸºç¡€çŸ¥è¯†","content":" title: Python åŸºç¡€çŸ¥è¯† MaixPy çš„æ•™ç¨‹æ–‡æ¡£é‡Œé¢å°±ä¸æ¶‰åŠå…·ä½“çš„ Python è¯­æ³•æ•™ç¨‹äº†ï¼Œå› ä¸º Python çš„æ•™ç¨‹å®åœ¨æ˜¯å¤ªå¤šäº†ï¼Œéƒ½åšå¾—å¾ˆå¥½ï¼Œè¿™é‡Œåªä»‹ç»éœ€è¦å­¦ä»€ä¹ˆï¼Œæ–¹å‘å’Œçº¿è·¯æŒ‡å¯¼å³å¯ã€‚ ## Python ç®€ä»‹ Python æ˜¯ä¸€é—¨è§£é‡Šæ€§ã€é¢å‘å¯¹è±¡ã€åŠ¨æ€ç±»å‹çš„é«˜çº§ç¼–ç¨‹è¯­è¨€ã€‚ * è§£é‡Šæ€§ï¼šä¸éœ€è¦ç¼–è¯‘ï¼Œç›´æ¥è¿è¡Œï¼Œä¼˜ç‚¹æ˜¯å¼€å‘å¿«é€Ÿï¼Œç¼ºç‚¹æ˜¯å› ä¸ºæ¯æ¬¡è¿è¡Œéƒ½è¦è§£é‡Šä¸€éä»£ç ï¼Œè¿è¡Œé€Ÿåº¦æ…¢ä¸€ç‚¹ç‚¹ï¼Œä½†æ˜¯å¾€å¾€ç“¶é¢ˆè¿˜æ˜¯å¼€å‘è€…å†™çš„ä»£ç è€Œä¸æ˜¯è¯­è¨€æœ¬èº«ã€‚ * é¢å‘å¯¹è±¡ï¼šæ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå¯ä»¥å®šä¹‰ç±»å’Œå¯¹è±¡ï¼Œç›¸æ¯”é¢å‘è¿‡ç¨‹è¯­è¨€ï¼Œæ›´å®¹æ˜“ç»„ç»‡ä»£ç ã€‚æ›´å¤šè‡ªè¡Œæœç´¢ã€‚ * åŠ¨æ€ç±»å‹ï¼šå˜é‡ä¸éœ€è¦å£°æ˜ç±»å‹ï¼Œå¯ä»¥ç›´æ¥èµ‹å€¼ï¼Œç±»å‹ä¼šæ ¹æ®èµ‹å€¼è‡ªåŠ¨ç¡®å®šï¼Œè¿™æ ·å¯ä»¥å‡å°‘ä»£ç é‡ï¼Œä½†æ˜¯ä¹Ÿå®¹æ˜“å‡ºç°ç±»å‹é”™è¯¯ï¼Œéœ€è¦å¼€å‘è€…è‡ªå·±æ³¨æ„ã€‚ æ€»ä¹‹ï¼Œå¯¹äºæ²¡æœ‰æ¥è§¦è¿‡ Python çš„å¼€å‘è€…æ¥è¯´ï¼ŒPython éå¸¸å®¹æ˜“ä¸Šæ‰‹ï¼Œæœ‰å¤§é‡ç°æˆçš„åº“ï¼Œå¼€å‘è€…ç¾¤ä½“å·¨å¤§ï¼Œå¼€å‘åº”ç”¨å‘¨æœŸçŸ­ï¼Œéå¸¸å€¼å¾—å­¦ä¹ ï¼ ## Python ç¯å¢ƒå®‰è£… ä½ å¯ä»¥æŒ‰ç…§ä½ å­¦ä¹ çš„ Python æ•™ç¨‹åœ¨ç”µè„‘ä¸Šå®‰è£… Pythonï¼› ä¹Ÿå¯ä»¥åœ¨ MaixVisioin ä¸Šè¿æ¥è®¾å¤‡åä½¿ç”¨ MaixVision ç¼–ç¨‹ç„¶ååœ¨å¼€å‘æ¿è¿è¡Œã€‚ ## ä½¿ç”¨ MaixPy éœ€è¦çš„ Python åŸºç¡€æœ‰å“ªäº›ï¼Ÿ * Python çš„åŸºæœ¬æ¦‚å¿µã€‚ * é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µã€‚ * Python çš„åŸºæœ¬è¯­æ³•ï¼ŒåŒ…æ‹¬ï¼š * tab ç¼©è¿›å¯¹é½è¯­æ³• * å˜é‡ã€å‡½æ•°ã€ç±»ã€å¯¹è±¡ã€æ³¨é‡Šç­‰ * æ§åˆ¶è¯­å¥æ¯”å¦‚ ifã€forã€while ç­‰ç­‰ * æ¨¡å—å’Œå¯¼å…¥æ¨¡å— * åŸºæœ¬æ•°æ®ç±»å‹æ¯”å¦‚ intã€floatã€strã€listã€dictã€tuple ç­‰ç­‰ * bytes å’Œ str çš„åŒºåˆ«å’Œè½¬æ¢ * å¼‚å¸¸å¤„ç†ï¼Œtry except * å¸¸ç”¨çš„å†…ç½®å‡½æ•°ï¼Œæ¯”å¦‚ printã€openã€lenã€range ç­‰ç­‰ * å¸¸ç”¨çš„å†…ç½®æ¨¡å—ï¼Œæ¯”å¦‚ osã€sysã€timeã€randomã€math ç­‰ç­‰ æŒæ¡ä»¥ä¸Šçš„åŸºç¡€çŸ¥è¯†å°±å¯ä»¥é¡ºç•…ä½¿ç”¨ MaixPy ç¼–ç¨‹äº†ï¼Œé…åˆåé¢çš„æ•™ç¨‹å’Œä¾‹ç¨‹ï¼Œåœ¨ä¸æ‡‚çš„æ—¶å€™æŸ¥è¯¢æœç´¢å¼•æ“æˆ–è€…å®˜æ–¹æ–‡æ¡£ï¼Œæˆ–è€…é—® ChatGPT å°±èƒ½é¡ºåˆ©å®Œæˆå¼€å‘ã€‚ ## å¯¹äºå·²ç»æœ‰ä¸€é—¨é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ç»éªŒçš„å¼€å‘è€… å¦‚æœä½ å·²ç»ä¼šä¸€é—¨é¢å‘å¯¹è±¡è¯­è¨€æ¯”å¦‚ C++/Java/C# ç­‰ç­‰ï¼Œé‚£åªéœ€è¦å¿«é€Ÿæµè§ˆä¸€ä¸‹ Python çš„è¯­æ³•ï¼Œå°±å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ã€‚ æ¯”å¦‚ [èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/python3/python3 tutorial.html) æˆ–è€… [Python å®˜æ–¹æ•™ç¨‹](https://docs.python.org/3/tutorial/index.html)ã€‚ æˆ–è€…ä¸ªäººå¼€å‘è€…çš„åšå®¢ï¼Œæ¯”å¦‚ [å“‡ï¼æ˜¯ Python](https://neucrack.com/p/59)ã€‚ ## å¯¹äºæ²¡æœ‰é¢å‘å¯¹è±¡ç¼–ç¨‹ç»éªŒä½†æ˜¯æœ‰ C è¯­è¨€ç»éªŒçš„å¼€å‘è€… å¦‚æœåªå­¦äº† Cï¼Œç¼ºä¹å¯¹é¢å‘å¯¹è±¡çš„ç†è§£ï¼Œé‚£ä¹ˆå¯ä»¥å…ˆå­¦ä¹ ä¸€ä¸‹é¢å‘å¯¹è±¡çš„æ¦‚å¿µï¼Œç„¶åå†å­¦ä¹  Pythonï¼Œä¹Ÿæ˜¯æ¯”è¾ƒå¿«çš„ï¼Œå¯ä»¥è‡ªè¡Œæœç´¢è§†é¢‘æ•™ç¨‹å…¥é—¨ã€‚ è·Ÿç€è§†é¢‘æ•™ç¨‹å…¥é—¨ä¹‹åå¯ä»¥çœ‹çœ‹æ–‡æ¡£æ•™ç¨‹ï¼Œæ¯”å¦‚ [èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/python3/python3 tutorial.html) æˆ–è€… [Python å®˜æ–¹æ•™ç¨‹](https://docs.python.org/3/tutorial/index.html) å°±å¯ä»¥å¼€åŠ¨äº†ï¼ åœ¨å­¦äº†å…¥é—¨çŸ¥è¯†åï¼Œå°±å¯ä»¥æŒ‰ç…§ MaixPy çš„æ–‡æ¡£å’Œä¾‹ç¨‹å¼€å§‹ä½¿ç”¨ MaixPy ç¼–ç¨‹äº†ã€‚ ## å¯¹äºç¼–ç¨‹æ–°æ‰‹ å¦‚æœä½ ä»æœªæ¥è§¦è¿‡ç¼–ç¨‹ï¼Œé‚£ä¹ˆä½ éœ€è¦é‡å¤´å¼€å§‹å­¦ä¹  Pythonï¼ŒPython ä½œä¸ºå…¥é—¨è¯­è¨€ä¹Ÿæ˜¯æ¯”è¾ƒåˆé€‚çš„ï¼Œå…·ä½“å¯ä»¥æœä¸€æœè§†é¢‘æ•™ç¨‹ã€‚ åœ¨å­¦ä¼šäº†åŸºç¡€è¯­æ³•åï¼Œå°±èƒ½æŒ‰ç…§ä¾‹ç¨‹ä½¿ç”¨ MaixPy ç¼–ç¨‹äº†ã€‚"},"/maixpy/doc/zh/audio/recognize.html":{"title":"MaixCAM MaixPy è¯­éŸ³å®æ—¶è¯†åˆ«","content":" title: MaixCAM MaixPy è¯­éŸ³å®æ—¶è¯†åˆ« update: date: 2024 10 08 author: 916BGAI version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## ç®€ä»‹ `MaixCAM` ç§»æ¤äº† `Maix Speech` ç¦»çº¿è¯­éŸ³åº“ï¼Œå®ç°äº†è¿ç»­ä¸­æ–‡æ•°å­—è¯†åˆ«ã€å…³é”®è¯è¯†åˆ«ä»¥åŠå¤§è¯æ±‡é‡è¯­éŸ³è¯†åˆ«åŠŸèƒ½ã€‚æ”¯æŒ `PCM` å’Œ `WAV` æ ¼å¼çš„éŸ³é¢‘è¯†åˆ«ï¼Œä¸”å¯é€šè¿‡æ¿è½½éº¦å…‹é£è¿›è¡Œè¾“å…¥è¯†åˆ«ã€‚ ## Maix Speech [`Maix Speech`](https://github.com/sipeed/Maix Speech) æ˜¯ä¸“ä¸ºåµŒå…¥å¼ç¯å¢ƒè®¾è®¡çš„ç¦»çº¿è¯­éŸ³åº“ï¼Œå…¶é’ˆå¯¹è¯­éŸ³è¯†åˆ«ç®—æ³•è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ï¼Œåœ¨å†…å­˜å ç”¨ä¸Šè¾¾åˆ°äº†æ•°é‡çº§ä¸Šçš„é¢†å…ˆï¼Œå¹¶ä¸”ä¿æŒäº†ä¼˜è‰¯çš„WERã€‚å¦‚æœæƒ³äº†è§£åŸç†å¯æŸ¥çœ‹è¯¥å¼€æºé¡¹ç›®ã€‚ ## è¿ç»­å¤§è¯æ±‡é‡è¯­éŸ³è¯†åˆ« ```python from maix import app, nn speech nn.Speech(\"/root/models/am_3332_192_int8.mud\") speech.init(nn.SpeechDevice.DEVICE_MIC, \"hw:0,0\") def callback(data: tuple[str, str], len: int): print(data) lmS_path \"/root/models/lmS/\" speech.lvcsr(lmS_path + \"lg_6m.sfst\", lmS_path + \"lg_6m.sym\", \\ lmS_path + \"phones.bin\", lmS_path + \"words_utf.bin\", \\ callback) while not app.need_exit(): frames speech.run(1) if frames < 1: print(\"run out\\n\") speech.deinit() break ``` ### ä½¿ç”¨æ–¹æ³• 1. å¯¼å…¥ `app` å’Œ `nn` æ¨¡å— ```python from maix import app, nn ``` 2. åŠ è½½å£°å­¦æ¨¡å‹ ```python speech nn.Speech(\"/root/models/am_3332_192_int8.mud\") ``` ä¹Ÿå¯ä»¥åŠ è½½ `am_7332` å£°å­¦æ¨¡å‹ï¼Œæ¨¡å‹è¶Šå¤§ç²¾åº¦è¶Šé«˜ä½†æ˜¯æ¶ˆè€—çš„èµ„æºä¹Ÿè¶Šå¤§ 3. é€‰æ‹©å¯¹åº”çš„éŸ³é¢‘è®¾å¤‡ ```python speech.init(nn.SpeechDevice.DEVICE_MIC, \"hw:0,0\") ``` è¿™é‡Œä½¿ç”¨çš„æ˜¯æ¿è½½çš„éº¦å…‹é£ï¼Œä¹Ÿé€‰æ‹© `WAV` å’Œ `PCM` éŸ³é¢‘ä½œä¸ºè¾“å…¥è®¾å¤‡ ```python speech.init(nn.SpeechDevice.DEVICE_WAV, \"path/audio.wav\") # ä½¿ç”¨ WAV éŸ³é¢‘è¾“å…¥ ``` ```python speech.init(nn.SpeechDevice.DEVICE_PCM, \"path/audio.pcm\") # ä½¿ç”¨ PCM éŸ³é¢‘è¾“å…¥ ``` æ³¨æ„ `WAV` éœ€è¦æ˜¯ `16KHz` é‡‡æ ·ï¼Œ`S16_LE` å­˜å‚¨æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨ `arecord` å·¥å…·è½¬æ¢ ```shell arecord d 5 r 16000 c 1 f S16_LE audio.wav ``` åœ¨ `PCM/WAV` è¯†åˆ«æ—¶ï¼Œå¦‚æœæƒ³è¦é‡æ–°è®¾ç½®æ•°æ®æºï¼Œä¾‹å¦‚è¿›è¡Œä¸‹ä¸€ä¸ªWAVæ–‡ä»¶çš„è¯†åˆ«å¯ä»¥ä½¿ç”¨ `speech.devive` æ–¹æ³•ï¼Œå†…éƒ¨ä¼šè‡ªåŠ¨è¿›è¡Œç¼“å­˜æ¸…é™¤æ“ä½œï¼š ```python speech.devive(nn.SpeechDevice.DEVICE_WAV, \"path/next.wav\") ``` 4. è®¾ç½®è§£ç å™¨ ```python def callback(data: tuple[str, str], len: int): print(data) lmS_path \"/root/models/lmS/\" speech.lvcsr(lmS_path + \"lg_6m.sfst\", lmS_path + \"lg_6m.sym\", \\ lmS_path + \"phones.bin\", lmS_path + \"words_utf.bin\", \\ callback) ``` ç”¨æˆ·å¯ä»¥æ³¨å†Œè‹¥å¹²ä¸ªè§£ç å™¨ï¼ˆä¹Ÿå¯ä»¥ä¸æ³¨å†Œï¼‰ï¼Œè§£ç å™¨çš„ä½œç”¨æ˜¯è§£ç å£°å­¦æ¨¡å‹çš„ç»“æœï¼Œå¹¶æ‰§è¡Œå¯¹åº”çš„ç”¨æˆ·å›è°ƒã€‚è¿™é‡Œæ³¨å†Œäº†ä¸€ä¸ª `lvcsr` è§£ç å™¨ç”¨äºè¾“å‡ºè¿ç»­è¯­éŸ³è¯†åˆ«ç»“æœï¼ˆå°äº1024ä¸ªæ±‰å­—ç»“æœï¼‰ã€‚å¯¹äºå…¶ä»–è§£ç å™¨çš„ä½¿ç”¨å¯ä»¥æŸ¥çœ‹è¿ç»­ä¸­æ–‡æ•°å­—è¯†åˆ«å’Œå…³é”®è¯è¯†åˆ«éƒ¨åˆ† è®¾ç½® `lvcsr` è§£ç å™¨æ—¶éœ€è¦è®¾ç½® `sfst` æ–‡ä»¶è·¯å¾„ï¼Œ`sym` æ–‡ä»¶è·¯å¾„ï¼ˆè¾“å‡ºç¬¦å·è¡¨ï¼‰ï¼Œ`phones.bin` çš„è·¯å¾„ï¼ˆæ‹¼éŸ³è¡¨ï¼‰ï¼Œå’Œ `words.bin` çš„è·¯å¾„ï¼ˆè¯å…¸è¡¨ï¼‰ã€‚æœ€åè¿˜è¦è®¾ç½®ä¸€ä¸ªå›è°ƒå‡½æ•°ç”¨äºå¤„ç†è§£ç å‡ºçš„æ•°æ®ã€‚ åœ¨æ³¨å†Œå®Œè§£ç å™¨åéœ€è¦ä½¿ç”¨ `speech.deinit()` æ–¹æ³•æ¸…é™¤åˆå§‹åŒ– 5. è¯†åˆ« ```python while not app.need_exit(): frames speech.run(1) if frames < 1: print(\"run out\\n\") speech.deinit() break ``` ä½¿ç”¨ `speech.run` æ–¹æ³•è¿è¡Œè¯­éŸ³è¯†åˆ«ï¼Œä¼ å…¥çš„å‚æ•°ä¸ºæ¯æ¬¡è¿è¡Œçš„å¸§æ•°ï¼Œè¿”å›å®é™…è¿è¡Œçš„å¸§æ•°ã€‚ç”¨æˆ·å¯ä»¥é€‰æ‹©æ¯æ¬¡è¿è¡Œ1å¸§åè¿›è¡Œå…¶ä»–å¤„ç†ï¼Œæˆ–åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­æŒç»­è¿è¡Œï¼Œä½¿ç”¨å¤–éƒ¨çº¿ç¨‹è¿›è¡Œåœæ­¢ã€‚ ### è¯†åˆ«ç»“æœ å¦‚æœä¸Šè¿°ç¨‹åºè¿è¡Œæ­£å¸¸ï¼Œå¯¹æ¿è½½éº¦å…‹é£è¯´è¯ï¼Œä¼šå¾—åˆ°å®æ—¶è¯­è¨€è¯†åˆ«ç»“æœï¼Œå¦‚ï¼š ```shell ### SIL to clear decoder! ('ä»Šå¤©å¤©æ°” æ€ä¹ˆæ · ', 'jin1 tian1 tian1 qi4 zen3 me yang4 ') ```"},"/maixpy/doc/zh/audio/record.html":{"title":"MaixCAM MaixPy å½•éŸ³","content":" title: MaixCAM MaixPy å½•éŸ³ update: date: 2024 05 20 author: lxowalle version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## ç®€ä»‹ æœ¬æ–‡æ¡£æä¾›å½•éŸ³çš„ä½¿ç”¨æ–¹æ³•ï¼Œæ”¯æŒå½•å…¥`PCM`å’Œ`WAV`æ ¼å¼çš„éŸ³é¢‘ã€‚ `MaixCAM`æ¿è½½äº†éº¦å…‹é£ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨å½•éŸ³åŠŸèƒ½ã€‚ ### ä½¿ç”¨æ–¹æ³• #### è·å–`PCM`æ•°æ® å½“æ„é€ `Recorder`å¯¹è±¡æ—¶ä¸ä¼ å…¥`path`ï¼Œ åˆ™åªä¼šå½•å…¥éŸ³é¢‘åä¸ä¼šä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œå½“ç„¶ä½ å¯ä»¥æ‰‹åŠ¨ä¿å­˜åˆ°æ–‡ä»¶ã€‚ ```python from maix import audio, time, app r audio.Recorder() r.volume(12) print(\"sample_rate:{} format:{} channel:{}\".format(r.sample_rate(), r.format(), r.channel())) while not app.need_exit(): data r.record() print(\"data size\", len(data)) time.sleep_ms(10) print(\"record finish!\") ``` æ­¥éª¤ï¼š 1. å¯¼å…¥audioã€timeå’Œappæ¨¡å— ```python from maix import audio, time, app ``` 2. åˆå§‹åŒ–å½•åˆ¶å™¨ ```python r audio.Recorder() r.volume(12) ``` æ³¨æ„é»˜è®¤çš„é‡‡æ ·ç‡æ˜¯48kï¼Œé‡‡æ ·æ ¼å¼ä¸ºå°ç«¯æ ¼å¼ æœ‰ç¬¦å·16ä½ï¼Œé‡‡æ ·é€šé“ä¸º1ã€‚ä½ ä¹Ÿå¯ä»¥åƒè¿™æ ·è‡ªå®šä¹‰å‚æ•°`p audio.Recorder(sample_rate 48000, format audio.Format.FMT_S16_LE, channel 1)`ã€‚ç›®å‰åªæµ‹è¯•è¿‡é‡‡æ ·ç‡48000ï¼Œ`FMT_S16_LE`æ ¼å¼ï¼Œå’Œé‡‡æ ·é€šé“æ•°ä¸º1 `r.volume(12)`ç”¨æ¥è®¾ç½®éŸ³é‡ï¼ŒéŸ³é‡èŒƒå›´ä¸º[0,100] 3. å¼€å§‹å½•åˆ¶ ```python data r.record() ``` `data`æ˜¯`PCM`æ ¼å¼çš„`bytes`ç±»å‹æ•°æ®ï¼Œä¿å­˜äº†å½“å‰å½•å…¥çš„éŸ³é¢‘ã€‚`PCM`æ ¼å¼åœ¨åˆå§‹åŒ–`Recorder`å¯¹è±¡æ—¶è®¾ç½®ï¼Œè§æ­¥éª¤2ã€‚æ³¨æ„å¦‚æœå½•åˆ¶å¤ªå¿«ï¼ŒéŸ³é¢‘ç¼“å†²åŒºæ²¡æœ‰æ•°æ®ï¼Œ åˆ™æœ‰å¯èƒ½è¿”å›ä¸€ä¸ªç©ºçš„`bytes`æ•°æ®ã€‚ 4. å®Œæˆï¼Œåšè‡ªå·±çš„åº”ç”¨æ—¶å¯ä»¥å¯¹`r.record()`è¿”å›çš„`PCM`æ•°æ®åšè¯­éŸ³å¤„ç†ã€‚ #### å½•åˆ¶éŸ³é¢‘å¹¶ä¿å­˜ä¸º`WAV`æ ¼å¼ å½“æ„é€ `Recorder`å¯¹è±¡æ—¶ä¼ å…¥äº†`path`ï¼Œ åˆ™å½•å…¥çš„éŸ³é¢‘å°†ä¼šä¿å­˜åˆ°`path`æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”ä½ ä¹Ÿå¯ä»¥é€šè¿‡`record`æ–¹æ³•è·å–å½“å‰å½•å…¥çš„`PCM`æ•°æ®ã€‚`path`åªæ”¯æŒ`.pcm`å’Œ`.wav`åç¼€çš„è·¯å¾„ï¼Œå¹¶ä¸”å½“å½•å…¥`.wav`æ—¶ï¼Œ`record`æ–¹æ³•ä¸ä¼šè¿”å›`WAV`å¤´éƒ¨ä¿¡æ¯ï¼Œåªä¼šè¿”å›`PCM`æ•°æ®ã€‚ ```python from maix import audio, time, app r audio.Recorder(\"/root/output.wav\") r.volume(12) print(\"sample_rate:{} format:{} channel:{}\".format(r.sample_rate(), r.format(), r.channel())) while not app.need_exit(): data r.record() print(\"data size\", len(data)) time.sleep_ms(10) print(\"record finish!\") ``` ä»£ç å«ä¹‰åŸºæœ¬åŒä¸Šã€‚ #### å½•åˆ¶éŸ³é¢‘å¹¶ä¿å­˜ä¸º`WAV`æ ¼å¼ï¼ˆé˜»å¡ï¼‰ å½•å…¥æ—¶å¦‚æœè®¾ç½®äº†`record_ms`å‚æ•°ï¼Œå½•å…¥éŸ³é¢‘ä¼šé˜»å¡ç›´åˆ°åˆ°è¾¾`record_ms`è®¾ç½®çš„æ—¶é—´ï¼Œå•ä½msã€‚ ```python from maix import audio, time, app r audio.Recorder(\"/root/output.wav\") r.volume(12) print(\"sample_rate:{} format:{} channel:{}\".format(r.sample_rate(), r.format(), r.channel())) r.record(5000) print(\"record finish!\") ``` ä¸Šé¢ç¤ºä¾‹å°†ä¼šæŒç»­å½•å…¥`5000`msï¼Œå¹¶ä¿å­˜ä¸º`WAV`æ ¼å¼ï¼Œå½•å…¥æœŸé—´å°†ä¼šé˜»å¡åœ¨`record`æ–¹æ³•ä¸­ï¼Œæ³¨æ„å½“`record`è®¾ç½®äº†`record_ms`åä¸ä¼šè¿”å›`PCM`æ•°æ®ã€‚ ### å…¶ä»– `Player`å’Œ`Recorder`æ¨¡å—æœ‰äº›`bug`å¾…è§£å†³ï¼Œè¯·ä¿è¯å®ƒä»¬åœ¨å…¶ä»–æ¨¡å—ï¼ˆ`Camera`æ¨¡å—ï¼Œ`Display`æ¨¡å—ç­‰ï¼‰ä¹‹å‰åˆ›å»ºã€‚ä¾‹å¦‚ï¼š ```python # å…ˆåˆ›å»ºPlayerå’ŒRecorder p audio.Player() r audio.Recorder() # å†åˆ›å»ºCamera c camera.Camera() ```"},"/maixpy/doc/zh/audio/synthesis.html":{"title":"MaixCAM MaixPy è¯­éŸ³åˆæˆ","content":" title: MaixCAM MaixPy è¯­éŸ³åˆæˆ TODO: æ­£åœ¨èµ¶æ¥"},"/maixpy/doc/zh/audio/digit.html":{"title":"MaixCAM MaixPy è¿ç»­ä¸­æ–‡æ•°å­—è¯†åˆ«","content":" title: MaixCAM MaixPy è¿ç»­ä¸­æ–‡æ•°å­—è¯†åˆ« update: date: 2024 10 08 author: 916BGAI version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## ç®€ä»‹ `MaixCAM` ç§»æ¤äº† `Maix Speech` ç¦»çº¿è¯­éŸ³åº“ï¼Œå®ç°äº†è¿ç»­ä¸­æ–‡æ•°å­—è¯†åˆ«ã€å…³é”®è¯è¯†åˆ«ä»¥åŠå¤§è¯æ±‡é‡è¯­éŸ³è¯†åˆ«åŠŸèƒ½ã€‚æ”¯æŒ `PCM` å’Œ `WAV` æ ¼å¼çš„éŸ³é¢‘è¯†åˆ«ï¼Œä¸”å¯é€šè¿‡æ¿è½½éº¦å…‹é£è¿›è¡Œè¾“å…¥è¯†åˆ«ã€‚ ## Maix Speech [`Maix Speech`](https://github.com/sipeed/Maix Speech) æ˜¯ä¸“ä¸ºåµŒå…¥å¼ç¯å¢ƒè®¾è®¡çš„ç¦»çº¿è¯­éŸ³åº“ï¼Œå…¶é’ˆå¯¹è¯­éŸ³è¯†åˆ«ç®—æ³•è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ï¼Œåœ¨å†…å­˜å ç”¨ä¸Šè¾¾åˆ°äº†æ•°é‡çº§ä¸Šçš„é¢†å…ˆï¼Œå¹¶ä¸”ä¿æŒäº†ä¼˜è‰¯çš„WERã€‚å¦‚æœæƒ³äº†è§£åŸç†å¯æŸ¥çœ‹è¯¥å¼€æºé¡¹ç›®ã€‚ ## è¿ç»­ä¸­æ–‡æ•°å­—è¯†åˆ« ```python from maix import app, nn speech nn.Speech(\"/root/models/am_3332_192_int8.mud\") speech.init(nn.SpeechDevice.DEVICE_MIC, \"hw:0,0\") def callback(data: str, len: int): print(data) speech.digit(640, callback) while not app.need_exit(): frames speech.run(1) if frames < 1: print(\"run out\\n\") speech.deinit() break ``` ### ä½¿ç”¨æ–¹æ³• 1. å¯¼å…¥ `app` å’Œ `nn` æ¨¡å— ```python from maix import app, nn ``` 2. åŠ è½½å£°å­¦æ¨¡å‹ ```python speech nn.Speech(\"/root/models/am_3332_192_int8.mud\") ``` ä¹Ÿå¯ä»¥åŠ è½½ `am_7332` å£°å­¦æ¨¡å‹ï¼Œæ¨¡å‹è¶Šå¤§ç²¾åº¦è¶Šé«˜ä½†æ˜¯æ¶ˆè€—çš„èµ„æºä¹Ÿè¶Šå¤§ 3. é€‰æ‹©å¯¹åº”çš„éŸ³é¢‘è®¾å¤‡ ```python speech.init(nn.SpeechDevice.DEVICE_MIC, \"hw:0,0\") ``` è¿™é‡Œä½¿ç”¨çš„æ˜¯æ¿è½½çš„éº¦å…‹é£ï¼Œä¹Ÿé€‰æ‹© `WAV` å’Œ `PCM` éŸ³é¢‘ä½œä¸ºè¾“å…¥è®¾å¤‡ ```python speech.init(nn.SpeechDevice.DEVICE_WAV, \"path/audio.wav\") # ä½¿ç”¨ WAV éŸ³é¢‘è¾“å…¥ ``` ```python speech.init(nn.SpeechDevice.DEVICE_PCM, \"path/audio.pcm\") # ä½¿ç”¨ PCM éŸ³é¢‘è¾“å…¥ ``` æ³¨æ„ `WAV` éœ€è¦æ˜¯ `16KHz` é‡‡æ ·ï¼Œ`S16_LE` å­˜å‚¨æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨ `arecord` å·¥å…·è½¬æ¢ ```shell arecord d 5 r 16000 c 1 f S16_LE audio.wav ``` åœ¨ `PCM/WAV` è¯†åˆ«æ—¶ï¼Œå¦‚æœæƒ³è¦é‡æ–°è®¾ç½®æ•°æ®æºï¼Œä¾‹å¦‚è¿›è¡Œä¸‹ä¸€ä¸ªWAVæ–‡ä»¶çš„è¯†åˆ«å¯ä»¥ä½¿ç”¨ `speech.devive` æ–¹æ³•ï¼Œå†…éƒ¨ä¼šè‡ªåŠ¨è¿›è¡Œç¼“å­˜æ¸…é™¤æ“ä½œï¼š ```python speech.devive(nn.SpeechDevice.DEVICE_WAV, \"path/next.wav\") ``` 4. è®¾ç½®è§£ç å™¨ ```python def callback(data: str, len: int): print(data) speech.digit(640, callback) ``` ç”¨æˆ·å¯ä»¥æ³¨å†Œè‹¥å¹²ä¸ªè§£ç å™¨ï¼ˆä¹Ÿå¯ä»¥ä¸æ³¨å†Œï¼‰ï¼Œè§£ç å™¨çš„ä½œç”¨æ˜¯è§£ç å£°å­¦æ¨¡å‹çš„ç»“æœï¼Œå¹¶æ‰§è¡Œå¯¹åº”çš„ç”¨æˆ·å›è°ƒã€‚è¿™é‡Œæ³¨å†Œäº†ä¸€ä¸ª `digit` è§£ç å™¨ç”¨äºè¾“å‡ºæœ€è¿‘4så†…çš„ä¸­æ–‡æ•°å­—è¯†åˆ«ç»“æœã€‚è¿”å›çš„è¯†åˆ«ç»“æœä¸ºå­—ç¬¦ä¸²å½¢å¼ï¼Œæ”¯æŒ `0123456789 .(ç‚¹) S(å) B(ç™¾) Q(åƒ) W(ä¸‡)`ã€‚å¯¹äºå…¶ä»–è§£ç å™¨çš„ä½¿ç”¨å¯ä»¥æŸ¥çœ‹è¯­éŸ³å®æ—¶è¯†åˆ«å’Œå…³é”®è¯è¯†åˆ«éƒ¨åˆ† è®¾ç½® `digit` è§£ç å™¨æ—¶éœ€è¦è®¾ç½® `blank` å€¼ï¼Œè¶…è¿‡è¯¥å€¼ï¼ˆmsï¼‰åˆ™åœ¨è¾“å‡ºç»“æœé‡Œæ’å…¥ä¸€ä¸ª `_` è¡¨ç¤ºç©ºé—²é™éŸ³ åœ¨æ³¨å†Œå®Œè§£ç å™¨åéœ€è¦ä½¿ç”¨ `speech.deinit()` æ–¹æ³•æ¸…é™¤åˆå§‹åŒ– 5. è¯†åˆ« ```python while not app.need_exit(): frames speech.run(1) if frames < 1: print(\"run out\\n\") speech.deinit() break ``` ä½¿ç”¨ `speech.run` æ–¹æ³•è¿è¡Œè¯­éŸ³è¯†åˆ«ï¼Œä¼ å…¥çš„å‚æ•°ä¸ºæ¯æ¬¡è¿è¡Œçš„å¸§æ•°ï¼Œè¿”å›å®é™…è¿è¡Œçš„å¸§æ•°ã€‚ç”¨æˆ·å¯ä»¥é€‰æ‹©æ¯æ¬¡è¿è¡Œ1å¸§åè¿›è¡Œå…¶ä»–å¤„ç†ï¼Œæˆ–åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­æŒç»­è¿è¡Œï¼Œä½¿ç”¨å¤–éƒ¨çº¿ç¨‹è¿›è¡Œåœæ­¢ã€‚ ### è¯†åˆ«ç»“æœ å¦‚æœä¸Šè¿°ç¨‹åºè¿è¡Œæ­£å¸¸ï¼Œå¯¹æ¿è½½éº¦å…‹é£è¯´è¯ï¼Œä¼šå¾—åˆ°è¿ç»­ä¸­æ–‡æ•°å­—è¯†åˆ«ç»“æœï¼Œå¦‚ï¼š ```shell _0123456789 ```"},"/maixpy/doc/zh/audio/keyword.html":{"title":"MaixCAM MaixPy å…³é”®è¯è¯†åˆ«","content":" title: MaixCAM MaixPy å…³é”®è¯è¯†åˆ« update: date: 2024 10 08 author: 916BGAI version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## ç®€ä»‹ `MaixCAM` ç§»æ¤äº† `Maix Speech` ç¦»çº¿è¯­éŸ³åº“ï¼Œå®ç°äº†è¿ç»­ä¸­æ–‡æ•°å­—è¯†åˆ«ã€å…³é”®è¯è¯†åˆ«ä»¥åŠå¤§è¯æ±‡é‡è¯­éŸ³è¯†åˆ«åŠŸèƒ½ã€‚æ”¯æŒ `PCM` å’Œ `WAV` æ ¼å¼çš„éŸ³é¢‘è¯†åˆ«ï¼Œä¸”å¯é€šè¿‡æ¿è½½éº¦å…‹é£è¿›è¡Œè¾“å…¥è¯†åˆ«ã€‚ ## Maix Speech [`Maix Speech`](https://github.com/sipeed/Maix Speech) æ˜¯ä¸“ä¸ºåµŒå…¥å¼ç¯å¢ƒè®¾è®¡çš„ç¦»çº¿è¯­éŸ³åº“ï¼Œå…¶é’ˆå¯¹è¯­éŸ³è¯†åˆ«ç®—æ³•è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ï¼Œåœ¨å†…å­˜å ç”¨ä¸Šè¾¾åˆ°äº†æ•°é‡çº§ä¸Šçš„é¢†å…ˆï¼Œå¹¶ä¸”ä¿æŒäº†ä¼˜è‰¯çš„WERã€‚å¦‚æœæƒ³äº†è§£åŸç†å¯æŸ¥çœ‹è¯¥å¼€æºé¡¹ç›®ã€‚ ## å…³é”®è¯è¯†åˆ« ```python from maix import app, nn speech nn.Speech(\"/root/models/am_3332_192_int8.mud\") speech.init(nn.SpeechDevice.DEVICE_MIC, \"hw:0,0\") kw_tbl ['xiao3 ai4 tong2 xue2', 'ni3 hao3', 'tian1 qi4 zen3 me yang4'] kw_gate [0.1, 0.1, 0.1] def callback(data:list[float], len: int): for i in range(len): print(f\"\\tkw{i}: {data[i]:.3f};\", end ' ') print(\"\\n\") speech.kws(kw_tbl, kw_gate, callback, True) while not app.need_exit(): frames speech.run(1) if frames < 1: print(\"run out\\n\") speech.deinit() break ``` ### ä½¿ç”¨æ–¹æ³• 1. å¯¼å…¥ `app` å’Œ `nn` æ¨¡å— ```python from maix import app, nn ``` 2. åŠ è½½å£°å­¦æ¨¡å‹ ```python speech nn.Speech(\"/root/models/am_3332_192_int8.mud\") ``` ä¹Ÿå¯ä»¥åŠ è½½ `am_7332` å£°å­¦æ¨¡å‹ï¼Œæ¨¡å‹è¶Šå¤§ç²¾åº¦è¶Šé«˜ä½†æ˜¯æ¶ˆè€—çš„èµ„æºä¹Ÿè¶Šå¤§ 3. é€‰æ‹©å¯¹åº”çš„éŸ³é¢‘è®¾å¤‡ ```python speech.init(nn.SpeechDevice.DEVICE_MIC, \"hw:0,0\") ``` è¿™é‡Œä½¿ç”¨çš„æ˜¯æ¿è½½çš„éº¦å…‹é£ï¼Œä¹Ÿé€‰æ‹© `WAV` å’Œ `PCM` éŸ³é¢‘ä½œä¸ºè¾“å…¥è®¾å¤‡ ```python speech.init(nn.SpeechDevice.DEVICE_WAV, \"path/audio.wav\") # ä½¿ç”¨ WAV éŸ³é¢‘è¾“å…¥ ``` ```python speech.init(nn.SpeechDevice.DEVICE_PCM, \"path/audio.pcm\") # ä½¿ç”¨ PCM éŸ³é¢‘è¾“å…¥ ``` æ³¨æ„ `WAV` éœ€è¦æ˜¯ `16KHz` é‡‡æ ·ï¼Œ`S16_LE` å­˜å‚¨æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨ `arecord` å·¥å…·è½¬æ¢ ```shell arecord d 5 r 16000 c 1 f S16_LE audio.wav ``` åœ¨ `PCM/WAV` è¯†åˆ«æ—¶ï¼Œå¦‚æœæƒ³è¦é‡æ–°è®¾ç½®æ•°æ®æºï¼Œä¾‹å¦‚è¿›è¡Œä¸‹ä¸€ä¸ªWAVæ–‡ä»¶çš„è¯†åˆ«å¯ä»¥ä½¿ç”¨ `speech.devive` æ–¹æ³•ï¼Œå†…éƒ¨ä¼šè‡ªåŠ¨è¿›è¡Œç¼“å­˜æ¸…é™¤æ“ä½œï¼š ```python speech.devive(nn.SpeechDevice.DEVICE_WAV, \"path/next.wav\") ``` 4. è®¾ç½®è§£ç å™¨ ```python kw_tbl ['xiao3 ai4 tong2 xue2', 'ni3 hao3', 'tian1 qi4 zen3 me yang4'] kw_gate [0.1, 0.1, 0.1] def callback(data:list[float], len: int): for i in range(len): print(f\"\\tkw{i}: {data[i]:.3f};\", end ' ') print(\"\\n\") speech.kws(kw_tbl, kw_gate, callback, True) ``` ç”¨æˆ·å¯ä»¥æ³¨å†Œè‹¥å¹²ä¸ªè§£ç å™¨ï¼ˆä¹Ÿå¯ä»¥ä¸æ³¨å†Œï¼‰ï¼Œè§£ç å™¨çš„ä½œç”¨æ˜¯è§£ç å£°å­¦æ¨¡å‹çš„ç»“æœï¼Œå¹¶æ‰§è¡Œå¯¹åº”çš„ç”¨æˆ·å›è°ƒã€‚è¿™é‡Œæ³¨å†Œäº†ä¸€ä¸ª `kws` è§£ç å™¨ç”¨äºè¾“å‡ºæœ€è¿‘ä¸€å¸§æ‰€æœ‰æ³¨å†Œçš„å…³é”®è¯çš„æ¦‚ç‡åˆ—è¡¨ï¼Œç”¨æˆ·å¯ä»¥è§‚å¯Ÿæ¦‚ç‡å€¼ï¼Œè‡ªè¡Œè®¾å®šé˜ˆå€¼è¿›è¡Œå”¤é†’ã€‚å¯¹äºå…¶ä»–è§£ç å™¨çš„ä½¿ç”¨å¯ä»¥æŸ¥çœ‹è¯­éŸ³å®æ—¶è¯†åˆ«å’Œè¿ç»­ä¸­æ–‡æ•°å­—è¯†åˆ«éƒ¨åˆ† è®¾ç½® `kws` è§£ç å™¨æ—¶éœ€è¦è®¾ç½® `å…³é”®è¯åˆ—è¡¨`ï¼Œä»¥æ‹¼éŸ³é—´éš”ç©ºæ ¼å¡«å†™ï¼Œ`å…³é”®è¯æ¦‚ç‡é—¨é™è¡¨`ï¼ŒæŒ‰é¡ºåºæ’åˆ—è¾“å…¥å³å¯ï¼Œæ˜¯å¦è¿›è¡Œ `è‡ªåŠ¨è¿‘éŸ³å¤„ç†`ï¼Œè®¾ç½®ä¸º `True` åˆ™ä¼šè‡ªåŠ¨å°†ä¸åŒå£°è°ƒçš„æ‹¼éŸ³ä½œä¸ºè¿‘éŸ³è¯æ¥åˆè®¡æ¦‚ç‡ã€‚æœ€åè¿˜è¦è®¾ç½®ä¸€ä¸ªå›è°ƒå‡½æ•°ç”¨äºå¤„ç†è§£ç å‡ºçš„æ•°æ®ã€‚ ç”¨æˆ·è¿˜å¯ä»¥ä½¿ç”¨ `speech.similar` æ–¹æ³•æ‰‹å·¥æ³¨å†Œè¿‘éŸ³è¯ï¼Œæ¯ä¸ªæ‹¼éŸ³å¯ä»¥æ³¨å†Œæœ€å¤š `10` ä¸ªè¿‘éŸ³è¯ã€‚ï¼ˆæ³¨æ„ï¼Œä½¿ç”¨è¯¥æ¥å£æ³¨å†Œè¿‘éŸ³è¯ä¼šè¦†ç›–ä½¿èƒ½ `è‡ªåŠ¨è¿‘éŸ³å¤„ç†` é‡Œè‡ªåŠ¨ç”Ÿæˆçš„è¿‘éŸ³è¡¨ï¼‰ ```python similar_char ['zhen3', 'zheng3'] speech.similar('zen3', similar_char) ``` åœ¨æ³¨å†Œå®Œè§£ç å™¨åéœ€è¦ä½¿ç”¨ `speech.deinit()` æ–¹æ³•æ¸…é™¤åˆå§‹åŒ– 5. è¯†åˆ« ```python while not app.need_exit(): frames speech.run(1) if frames < 1: print(\"run out\\n\") speech.deinit() break ``` ä½¿ç”¨ `speech.run` æ–¹æ³•è¿è¡Œè¯­éŸ³è¯†åˆ«ï¼Œä¼ å…¥çš„å‚æ•°ä¸ºæ¯æ¬¡è¿è¡Œçš„å¸§æ•°ï¼Œè¿”å›å®é™…è¿è¡Œçš„å¸§æ•°ã€‚ç”¨æˆ·å¯ä»¥é€‰æ‹©æ¯æ¬¡è¿è¡Œ1å¸§åè¿›è¡Œå…¶ä»–å¤„ç†ï¼Œæˆ–åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­æŒç»­è¿è¡Œï¼Œä½¿ç”¨å¤–éƒ¨çº¿ç¨‹è¿›è¡Œåœæ­¢ã€‚ ### è¯†åˆ«ç»“æœ å¦‚æœä¸Šè¿°ç¨‹åºè¿è¡Œæ­£å¸¸ï¼Œå¯¹æ¿è½½éº¦å…‹é£è¯´è¯ï¼Œä¼šå¾—åˆ°å…³é”®è¯è¯†åˆ«ç»“æœï¼Œå¦‚ï¼š ```shell kws log 2.048s, len 24 decoder_kws_init get 3 kws 00, xiao3 ai4 tong2 xue2 01, ni3 hao3 02, tian1 qi4 zen3 me yang4 find shared memory(491520), saved:491520 kw0: 0.959; \tkw1: 0.000; \tkw2: 0.000; # å°çˆ±åŒå­¦ kw0: 0.000; \tkw1: 0.930; \tkw2: 0.000; # ä½ å¥½ kw0: 0.000; \tkw1: 0.000; \tkw2: 0.961; # å¤©æ°”æ€ä¹ˆæ · ```"},"/maixpy/doc/zh/audio/play.html":{"title":"MaixCAM MaixPy æ’­æ”¾éŸ³é¢‘","content":" title: MaixCAM MaixPy æ’­æ”¾éŸ³é¢‘ update: date: 2024 05 20 author: lxowalle version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## ç®€ä»‹ æœ¬æ–‡æ¡£æä¾›æ’­æ”¾éŸ³é¢‘çš„ä½¿ç”¨æ–¹æ³• ## ä½¿ç”¨æ–¹æ³• ### ç¡¬ä»¶æ“ä½œ ![image 20240520134637905](../../../static/image/maixcam_hardware_back.png) `MaixCAM`æ²¡æœ‰å†…ç½®å–‡å­ï¼Œå› æ­¤éœ€è¦è‡ªè¡Œç„Šæ¥ä¸€ä¸ªåŠŸç‡åœ¨`1W`å†…çš„å–‡å­ã€‚å–‡å­ç„Šæ¥çš„å¼•è„šè§ä¸Šå›¾çš„Speakerå¯¹åº”çš„`VOP`å’Œ`VON`è„šã€‚ æ³¨ï¼šå¦‚æœ`MaixCAM`åœ¨è¿™ä¸¤ä¸ªè„šä¸Šè¿æ¥äº†é“œæŸ±ï¼Œåˆ™å¯ä»¥ç›´æ¥ç„Šæ¥åœ¨é“œæŸ±ä¸Šï¼Œä¸ºäº†ç¾è§‚ä¹Ÿå¯ä»¥ç„Šæ¥åœ¨æ¿å­çš„å¦ä¸€é¢ã€‚ ### ç¼–å†™ä»£ç  #### æ’­æ”¾ä¸€ä¸ª`WAV`æ–‡ä»¶ ```python from maix import audio, time, app p audio.Player(\"/root/output.wav\") p.play() while not app.need_exit(): time.sleep_ms(10) print(\"play finish!\") ``` æ­¥éª¤ï¼š 1. å¯¼å…¥audioã€timeå’Œappæ¨¡å— ```python from maix import audio, time, app ``` 2. åˆå§‹åŒ–æ’­æ”¾å™¨ ```python p audio.Player(\"/root/output.wav\") ``` é»˜è®¤çš„é‡‡æ ·ç‡æ˜¯48kï¼Œé‡‡æ ·æ ¼å¼ä¸ºå°ç«¯æ ¼å¼ æœ‰ç¬¦å·16ä½ï¼Œé‡‡æ ·é€šé“ä¸º1ã€‚ä½ ä¹Ÿå¯ä»¥åƒè¿™æ ·è‡ªå®šä¹‰å‚æ•°`p audio.Player(sample_rate 48000, format audio.Format.FMT_S16_LE, channel 1)`ã€‚ç›®å‰åªæµ‹è¯•è¿‡é‡‡æ ·ç‡48000ï¼Œ`FMT_S16_LE`æ ¼å¼ï¼Œå’Œé‡‡æ ·é€šé“æ•°ä¸º1ã€‚ å¦‚æœæ˜¯`.wav`æ–‡ä»¶ï¼Œåˆ™ä¼šè‡ªåŠ¨è·å–é‡‡æ ·ç‡ã€é‡‡æ ·æ ¼å¼å’Œé‡‡æ ·é€šé“ã€‚ 3. æ’­æ”¾éŸ³é¢‘ ```python p.play() ``` è¯¥å°†ä¼šé˜»å¡ç›´åˆ°å†™å…¥æ‰€æœ‰éŸ³é¢‘æ•°æ®ï¼Œä½†ä¸ä¼šé˜»å¡åˆ°å®é™…æ’­æ”¾å®Œæ‰€æœ‰éŸ³é¢‘æ•°æ®ã€‚å¦‚æœè°ƒç”¨`play()`åé€€å‡ºäº†ç¨‹åºï¼Œåˆ™éƒ¨åˆ†å¾…æ’­æ”¾çš„éŸ³é¢‘æ•°æ®å¯èƒ½ä¼šä¸¢å¤±ã€‚ 4. å®Œæˆ #### ç”¨`PCM`æ•°æ®æ’­æ”¾ ```python from maix import audio, time, app p audio.Player() with open('/root/output.pcm', 'rb') as f: ctx f.read() p.play(bytes(ctx)) while not app.need_exit(): time.sleep_ms(10) print(\"play finish!\") ``` æ­¥éª¤ï¼š 1. å¯¼å…¥audioã€timeå’Œappæ¨¡å— ```python from maix import audio, time, app ``` 2. åˆå§‹åŒ–æ’­æ”¾å™¨ ```python p audio.Player() ``` æ³¨æ„é»˜è®¤çš„é‡‡æ ·ç‡æ˜¯48kï¼Œé‡‡æ ·æ ¼å¼ä¸ºå°ç«¯æ ¼å¼ æœ‰ç¬¦å·16ä½ï¼Œé‡‡æ ·é€šé“ä¸º1ã€‚ä½ ä¹Ÿå¯ä»¥åƒè¿™æ ·è‡ªå®šä¹‰å‚æ•°`p audio.Player(sample_rate 48000, format audio.Format.FMT_S16_LE, channel 1)`ã€‚ç›®å‰åªæµ‹è¯•è¿‡é‡‡æ ·ç‡48000ï¼Œ`FMT_S16_LE`æ ¼å¼ï¼Œå’Œé‡‡æ ·é€šé“æ•°ä¸º1 3. æ‰“å¼€å¹¶æ’­æ”¾ä¸€ä¸ªPCMæ–‡ä»¶ ```python with open('/root/output.pcm', 'rb') as f: ctx f.read() p.play(bytes(ctx)) while not app.need_exit(): time.sleep_ms(10) ``` `with open('xxx','rb') as f:`æ‰“å¼€æ–‡ä»¶`xxx`ï¼Œ å¹¶è·å–æ–‡ä»¶å¯¹è±¡`f` `ctx f.read()`å°†è¯»å–æ–‡ä»¶çš„å†…å®¹åˆ°`ctx`ä¸­ `p.play(bytes(ctx))`æ’­æ”¾éŸ³é¢‘ï¼Œ`p`æ˜¯å·²æ‰“å¼€çš„æ’­æ”¾å™¨å¯¹è±¡ï¼Œ `ctx`æ˜¯è½¬æ¢ä¸ºbytesç±»å‹çš„`PCM`æ•°æ® `time.sleep_ms(10)`è¿™é‡Œæœ‰ä¸€ä¸ªå¾ªç¯æ¥ç­‰å¾…æ’­æ”¾å®Œæˆï¼Œå› ä¸ºæ’­æ”¾æ“ä½œæ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå¦‚æœæå‰é€€å‡ºäº†ç¨‹åºï¼Œé‚£ä¹ˆå¯èƒ½å¯¼è‡´éŸ³é¢‘ä¸ä¼šå®Œå…¨æ’­æ”¾ã€‚ 4. å®Œæˆ ### å…¶ä»– `Player`å’Œ`Recorder`æ¨¡å—æœ‰äº›`bug`å¾…è§£å†³ï¼Œè¯·ä¿è¯å®ƒä»¬åœ¨å…¶ä»–æ¨¡å—ï¼ˆ`Camera`æ¨¡å—ï¼Œ`Display`æ¨¡å—ç­‰ï¼‰ä¹‹å‰åˆ›å»ºã€‚ä¾‹å¦‚ï¼š ```python # å…ˆåˆ›å»ºPlayerå’ŒRecorder p audio.Player() r audio.Recorder() # å†åˆ›å»ºCamera c camera.Camera()\t\t\t\t\t\t ```"},"/maixpy/doc/zh/audio/ai_classify.html":{"title":"MaixCAM MaixPy AI å£°éŸ³åˆ†ç±»","content":" title: MaixCAM MaixPy AI å£°éŸ³åˆ†ç±» TODO: å¾…å®Œæˆï¼Œå¦‚æœä½ æ€¥éœ€ï¼Œå¯ä»¥å…ˆè‡ªè¡Œç§»æ¤æ¨¡å‹ï¼Œæˆ–è€…å…ˆå°†å£°éŸ³ç”¨ FFT å¤„ç†æˆç€‘å¸ƒå›¾ï¼Œå†ä»¥å›¾ç‰‡çš„æ–¹å¼è¿›è¡Œè®­ç»ƒ AI åˆ†ç±»è¯†åˆ«ã€‚"},"/maixpy/doc/zh/peripheral/pwm.html":{"title":"MaixCAM MaixPy ä½¿ç”¨ PWM","content":" title: MaixCAM MaixPy ä½¿ç”¨ PWM ## ç®€ä»‹ åœ¨ MaixPy (v4) ä¸­ä½¿ç”¨ `PWM`ï¼Œå…ˆä½¿ç”¨`pinmap`è®¾ç½®å¼•è„šçš„åŠŸèƒ½ä¸º `PWM`ï¼Œåœ¨ä½¿ç”¨ã€‚ ä»¥åŠæ¯ä¸ª `PWM` æœ‰å¯¹åº”çš„å¼•è„šï¼Œæ ¹æ® MaixCAM çš„å¼•è„šå›¾å¯ä»¥çœ‹åˆ°: ![](https://wiki.sipeed.com/hardware/zh/lichee/assets/RV_Nano/intro/RV_Nano_3.jpg) è¿™é‡Œæˆ‘ä»¬æ¨èä½¿ç”¨`PWM6` å’Œ `PWM7`ã€‚ å¯¹äº `MaixCAM` å› ä¸º`WiFi` ä½¿ç”¨äº†`SDIO1`çš„æ‰€æœ‰å¼•è„šï¼Œæ‰€ä»¥`PWM4~9`åªèƒ½å’Œ`WiFi`äºŒé€‰ä¸€ä½¿ç”¨ã€‚ > TODO: æä¾›ç¦ç”¨ WiFi çš„æ–¹æ³•ï¼ˆéœ€è¦ç³»ç»Ÿé‡Œé¢ç¦ç”¨æ‰ WiFi é©±åŠ¨ï¼Œæ¯”è¾ƒå¤æ‚ï¼‰ ## MaixPy ä½¿ç”¨ PWM æ§åˆ¶èˆµæœº è¿™é‡Œæˆ‘ä»¬ä»¥æ§åˆ¶èˆµæœºä¸ºä¾‹ï¼Œ ä½¿ç”¨`MaixCAM`çš„`PWM7`å’Œ`A19`å¼•è„šï¼š ```python from maix import pwm, time, pinmap SERVO_PERIOD 50 # 50Hz 20ms SERVO_MIN_DUTY 2.5 # 2.5% > 0.5ms SERVO_MAX_DUTY 12.5 # 12.5% > 2.5ms # Use PWM7 pwm_id 7 # !! set pinmap to use PWM7 pinmap.set_pin_function(\"A19\", \"PWM7\") def angle_to_duty(percent): return (SERVO_MAX_DUTY SERVO_MIN_DUTY) * percent / 100.0 + SERVO_MIN_DUTY out pwm.PWM(pwm_id, freq SERVO_PERIOD, duty angle_to_duty(0), enable True) for i in range(100): out.duty(angle_to_duty(i)) time.sleep_ms(100) for i in range(100): out.duty(angle_to_duty(100 i)) time.sleep_ms(100) ``` è¿™é‡Œçš„åŠŸèƒ½æ˜¯æ§åˆ¶èˆµæœºä»æœ€å°è§’åº¦æ—‹è½¬åˆ°æœ€å¤§è§’åº¦å†æ—‹è½¬å›æœ€å°è§’åº¦ã€‚"},"/maixpy/doc/zh/peripheral/wdt.html":{"title":"MaixCAM MaixPy ä½¿ç”¨çœ‹é—¨ç‹—å®šæ—¶å™¨","content":" title: MaixCAM MaixPy ä½¿ç”¨çœ‹é—¨ç‹—å®šæ—¶å™¨ ## ç®€ä»‹ ä¸ºäº†é˜²æ­¢ç¨‹åºå‡ºç°é—®é¢˜ï¼Œå¸¸å¸¸ä¼šç”¨åˆ°çœ‹é—¨ç‹—å®šæ—¶å™¨ï¼ˆWDT), åœ¨ç¨‹åºå‡ºé—®é¢˜æ—¶è‡ªåŠ¨é‡å¯ç³»ç»Ÿã€‚ åŸç†å°±æ˜¯æœ‰ä¸€ä¸ªå€’è®¡æ—¶è®¡æ•°å™¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç¨‹åºçš„é€»è¾‘ä¸­å®šæœŸåœ°å»è®¾ç½®è¿™ä¸ªå€’è®¡æ—¶æ—¶é—´ï¼ˆä¹Ÿå«å–‚ç‹—ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬çš„ç¨‹åºåœ¨å“ªå„¿å¡ä½äº†å¯¼è‡´æ²¡æœ‰å®šæœŸå»è®¾ç½®å€’è®¡æ—¶ï¼Œå€’è®¡æ—¶åˆ° 0 åç¡¬ä»¶å°±ä¼šå‡ºå‘ç³»ç»Ÿé‡å¯ã€‚ ## MaixPy ä¸­ä½¿ç”¨ WDT ```python from maix import wdt, app, time w wdt.WDT(0, 1000) while not app.need_exit(): w.feed() # here sleep op is our operation # 200 ms is normal, if > 1000ms will cause system reset time.sleep_ms(200) ```"},"/maixpy/doc/zh/peripheral/uart.html":{"title":"MaixCAM MaixPy UART ä¸²å£ä½¿ç”¨ä»‹ç»","content":" title: MaixCAM MaixPy UART ä¸²å£ä½¿ç”¨ä»‹ç» ## ä¸²å£ç®€ä»‹ ä¸²å£æ˜¯ä¸€ç§é€šä¿¡æ–¹å¼ï¼ŒåŒ…å«äº†ç¡¬ä»¶å’Œé€šä¿¡åè®®çš„å®šä¹‰ã€‚ * ç¡¬ä»¶åŒ…æ‹¬ï¼š * 3 ä¸ªå¼•è„šï¼š `GND`ï¼Œ `RX`ï¼Œ `TX`ï¼Œé€šä¿¡åŒå‘**äº¤å‰è¿æ¥** `RX` `TX`ï¼Œ å³ä¸€æ–¹ `TX` å‘é€åˆ°å¦ä¸€æ–¹çš„ `RX`ï¼Œ åŒæ–¹ `GND` è¿æ¥åˆ°ä¸€èµ·ã€‚ * æ§åˆ¶å™¨ï¼Œä¸€èˆ¬åœ¨èŠ¯ç‰‡å†…éƒ¨ï¼Œä¹Ÿå« `UART` å¤–è®¾ï¼Œä¸€èˆ¬ä¸€ä¸ªèŠ¯ç‰‡æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ª `UART` æ§åˆ¶å™¨ï¼Œæ¯ä¸ªæ§åˆ¶å™¨æœ‰ç›¸å¯¹åº”çš„å¼•è„šã€‚ * ä¸²å£é€šä¿¡åè®®ï¼š ä¸ºäº†è®©åŒæ–¹èƒ½é¡ºåˆ©é€šä¿¡ï¼Œè§„å®šäº†ä¸€å¥—åè®®ï¼Œå³ä»¥ä»€ä¹ˆæ ·çš„æ—¶åºé€šä¿¡ï¼Œå…·ä½“å¯ä»¥è‡ªè¡Œå­¦ä¹ ï¼Œå¸¸è§çš„å‚æ•°æœ‰ æ³¢ç‰¹ç‡ æ ¡éªŒä½ç­‰ï¼Œæ³¢ç‰¹ç‡æ˜¯æˆ‘ä»¬ç”¨å¾—æœ€å¤šçš„å‚æ•°ã€‚ é€šè¿‡æ¿å­çš„ä¸²å£ï¼Œå¯ä»¥å’Œå…¶å®ƒå•ç‰‡æœºæˆ–è€… SOC è¿›è¡Œæ•°æ®é€šä¿¡ï¼Œæ¯”å¦‚å¯ä»¥åœ¨ MaixCAM ä¸Šå®ç°äººä½“æ£€æµ‹åŠŸèƒ½ï¼Œæ£€æµ‹åˆ°åæ ‡åé€šè¿‡ä¸²å£å‘é€ç»™ STM32/Arduino å•ç‰‡æœºã€‚ ## MaixPy ä¸­ä½¿ç”¨ä¸²å£ å¯¹äº MaixCAM é»˜è®¤ä» USB å£å¼•å‡ºäº†ä¸€ä¸ªä¸²å£ï¼Œå¯ä»¥æ’ä¸Šé…å¥—çš„ Type C è½¬æ¥å°æ¿ï¼Œå°±èƒ½ç›´æ¥ä½¿ç”¨ä¸Šé¢çš„ä¸²å£å¼•è„šï¼Œ ä¹Ÿå¯ä»¥ä¸ç”¨è½¬æ¥æ¿ï¼Œç›´æ¥ä½¿ç”¨æ¿å­ä¸Šçš„ `A16(TX)` å’Œ `A17(RX)`å¼•è„š, å’Œ USB å£å¼•å‡ºçš„æ˜¯åŒæ ·çš„å¼•è„šï¼Œæ˜¯ç­‰æ•ˆçš„ã€‚ å¯¹äº MaixCAM ä½¿ç”¨ USB å¼•å‡ºçš„ä¸²å£æ—¶éœ€è¦**æ³¨æ„**ï¼ŒTypc C æ­£æ’å’Œåæ’ï¼Œè½¬æ¥å°æ¿ä¸Šçš„ `RX` å’Œ `TX`ä¼šäº¤æ¢(é»˜è®¤ **Type C æ¯å£æœå‰**å’Œä¸å°ç¬¦åˆ)ï¼Œæ‰€ä»¥å½“ä½ å‘ç°æ— æ³•é€šä¿¡æ—¶ï¼Œæœ‰å¯èƒ½å°±æ˜¯ RX TX åäº†ï¼Œå¯ä»¥å°è¯•å°† Type C ç¿»è½¬ä¸€é¢æ’å†çœ‹çœ‹é€šä¿¡æ˜¯å¦æ­£å¸¸ã€‚è¿™ä¸ªç®—æ˜¯è®¾è®¡ç¼ºé™·ï¼Œä¸è¿‡ä¸€èˆ¬ä¹Ÿä¸ä¼šç»å¸¸æ‹”æ’æ‰€ä»¥é€‚åº”ä¸€ä¸‹ä¹Ÿèƒ½æ¥å—ã€‚ å°†ä¸¤ä¸ªé€šä¿¡çš„æ¿å­åŒæ–¹è¿æ¥å¥½åï¼ˆé€šä¿¡åŒå‘äº¤å‰è¿æ¥ RX TXï¼Œ å³ä¸€æ–¹ TX å‘é€åˆ°å¦ä¸€æ–¹çš„ RXï¼Œ åŒæ–¹ GND è¿æ¥åˆ°ä¸€èµ·ï¼‰ï¼Œå°±å¯ä»¥ä½¿ç”¨è½¯ä»¶äº†ã€‚ é€šè¿‡ MaixPy ä½¿ç”¨ä¸²å£å¾ˆç®€å•ï¼š ```python from maix import uart device \"/dev/ttyS0\" # ports uart.list_devices() # åˆ—å‡ºå½“å‰å¯ç”¨çš„ä¸²å£ serial uart.UART(device, 115200) serial.write_str(\"hello world\") print(\"received:\", serial.read(timeout 2000)) ``` è¿™é‡Œä½¿ç”¨äº†ç¬¬ä¸€ä¸ªä¸²å£`/dev/ttyS0`ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢è¯´çš„ `Type C` å‡º å¼•å‡ºçš„ä¸²å£ã€‚ æ›´å¤šä¸²å£çš„ API åœ¨ [UART API æ–‡æ¡£](../../../api/maix/peripheral/uart.html)ã€‚ ## MaixCAM ä¸²å£ä½¿ç”¨æ³¨æ„ç‚¹ ### TX å¼•è„šæ³¨æ„ç‚¹ MaixCAM çš„ `TX`(`UART0`) å¼•è„šåœ¨å¼€æœºæ—¶**ä¸èƒ½æ˜¯è¢«æ‹‰ä½**çš„çŠ¶æ€ï¼Œä¸ç„¶ä¼šå¯¼è‡´æ— æ³•å¼€æœºï¼Œæ˜¯èŠ¯ç‰‡çš„ç‰¹æ€§ï¼Œå¦‚æœä½ åœ¨åš `3.3v` è½¬ `5v` çš„ç”µå¹³è½¬æ¢ç”µè·¯è¦ååˆ†æ³¨æ„ä¸è¦é»˜è®¤æ‹‰ä½è¯·ä¿æŒæµ®ç©ºï¼ˆå¯ä»¥è€ƒè™‘ä½¿ç”¨ç”µå¹³è½¬æ¢èŠ¯ç‰‡ï¼‰ã€‚ ä»¥åŠå¦‚æœä½ å‘ç°æ— æ³•å¼€æœºï¼Œä¹Ÿå¯ä»¥å…ˆæ£€æŸ¥ä¸€ä¸‹ `TX` æ˜¯å¦è¢«æ‹‰ä½äº†ã€‚ ## ä¸²å£è¿æ¥ç”µè„‘ æœ‰å¼€å‘è€…å¯èƒ½ä¼šé—®ï¼šä¸ºä»€ä¹ˆæ’ä¸Š USB ç”µè„‘æ²¡å‡ºç°ä¸²å£è®¾å¤‡ï¼Ÿ ç­”ï¼š å› ä¸ºè®¾å¤‡çš„ USB é»˜è®¤æ˜¯ è™šæ‹Ÿ USB ç½‘å¡ï¼Œæ²¡æœ‰ä¸²å£åŠŸèƒ½ï¼Œå¦‚æœè¦è®¿é—®è®¾å¤‡çš„ç»ˆç«¯ï¼Œè¯·ä½¿ç”¨ ssh è¿æ¥ã€‚ å¯¹äº MaixCAM, ä» Type C è½¬æ¥æ¿å¼•å‡ºçš„`ä¸²å£0`ç›´è¿åˆ° `A16(TX)`å’Œ `A17(RX)`å¼•è„šï¼Œå¯ä»¥ç›´æ¥æ¥åˆ°å…¶å®ƒè®¾å¤‡æ¯”å¦‚å•ç‰‡æœºçš„ä¸²å£å¼•è„šï¼› å¦‚æœè¦å’Œç”µè„‘é€šä¿¡ï¼Œéœ€è¦ä½¿ç”¨ USB è½¬ä¸²å£å°æ¿(æ¯”å¦‚[è¿™ä¸ª](https://item.taobao.com/item.htm?spm a1z10.5 c s.w4002 24984936573.13.73cc59d6AkB9bS&id 610365562537))è¿æ¥åˆ°ç”µè„‘ã€‚ ## å¼€æœºæ—¥å¿—è¾“å‡º éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ **MaixCAM çš„`ä¸²å£0` åœ¨å¼€æœºæ—¶ä¼šæ‰“å°ä¸€éƒ¨åˆ†å¼€æœºæ—¥å¿—**ï¼Œ å¯åŠ¨å®Œæ¯•åä¼šæ‰“å°`serial ready`å­—æ ·ï¼Œå¦‚æœå’Œå•ç‰‡æœºé€šä¿¡éœ€è¦æ³¨æ„ä¸¢å¼ƒè¿™éƒ¨åˆ†ä¿¡æ¯ï¼Œå¦‚æœå‡ºç°ç³»ç»Ÿå¯åŠ¨å‡ºç°é—®é¢˜ä¹Ÿå¯ä»¥é€šè¿‡æŸ¥çœ‹`ä¸²å£0`çš„å¼€æœºæ‰“å°æ¥è¯Šæ–­é—®é¢˜ã€‚ ## å‘é€æ•°æ® ä¸»è¦æœ‰ä¸¤ä¸ªå‡½æ•°`write_str`å’Œ`write`å‡½æ•°ã€‚ `write_str`å‡½æ•°æ¥å‘é€å­—ç¬¦ä¸²ï¼Œ`write`ç”¨æ¥å‘é€å­—èŠ‚æµï¼Œå³`str`å’Œ`bytes`ç±»å‹ï¼Œä¸¤è€…å¯ä»¥äº’ç›¸è½¬æ¢ï¼Œæ¯”å¦‚: * `\"A\"` è°ƒç”¨`encode()`æ–¹æ³•å˜æˆ`b\"A\"`ï¼Œåè¿‡æ¥`b\"A\"`è°ƒç”¨`decode()`æ–¹æ³•å˜æˆ`\"A\"`ã€‚ * `str` æ²¡æ³•æ˜¾ç¤ºä¸€äº›ä¸å¯è§å­—ç¬¦æ¯”å¦‚ ASCII ç ä¸­çš„å€¼`0`ï¼Œåœ¨å­—ç¬¦ä¸²ä¸­ä¹Ÿæ˜¯`\\0`ä¸€èˆ¬ä½œä¸ºç»“æŸç¬¦ï¼Œåœ¨`bytes`ç±»å‹ä¸­å°±å¯ä»¥ç”¨`b\"\\x00\"`æ¥å‚¨å­˜ã€‚ * å¯¹äºé ASCII ç¼–ç çš„å­—ç¬¦ä¸²æ›´æœ‰ç”¨ï¼Œæ¯”å¦‚`UTF 8`ç¼–ç ä¸­ä¸­æ–‡`å¥½`æ˜¯ç”±ä¸‰ä¸ªå­—èŠ‚`\\xe5\\xa5\\xbd`æ¥è¡¨ç¤ºçš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡`\"å¥½\".encode(\"utf 8\")`å¾—åˆ°`b\"\\xe5\\xa5\\xbd\"`ï¼Œä¹Ÿå¯ä»¥é€šè¿‡`b'\\xe5\\xa5\\xbd'.decode(\"utf 8)`å¾—åˆ°`\"å¥½\"`ã€‚ æ‰€ä»¥å¦‚æœæˆ‘ä»¬éœ€è¦å‘é€å­—èŠ‚æ•°æ®ï¼Œåˆ™ç”¨`write()`æ–¹æ³•å‘é€å³å¯, æ¯”å¦‚: ```python bytes_content b'\\x01\\x02\\x03' serial.write(bytes_content) ``` æ‰€ä»¥å¯¹äº `str` ç±»å‹ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨`write_str`ï¼Œè€Œæ˜¯ä½¿ç”¨`serial.write(str_content.encode())` æ¥å‘é€ã€‚ å¦‚æœä½ æœ‰å…¶å®ƒç±»å‹çš„æ•°æ®ï¼Œæƒ³å°†å®ƒä»¬å˜æˆä¸€ä¸ª**å­—ç¬¦ä¸²å‘é€**ï¼Œå¯ä»¥ä½¿ç”¨`Python å­—ç¬¦ä¸²æ ¼å¼åŒ–`æ¥åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼š æƒ³å‘é€`I have xxx apple`ï¼Œè¿™é‡Œ`xxx` æƒ³ç”¨ä¸€ä¸ªæ•´å‹å˜é‡ï¼Œåˆ™ï¼š ```python num 10 content \"I have {} apple\".format(num) content2 f\"I have {num} apple\" content3 \"I have {:04d} apple\".format(num) content4 f\"I have {num:d} apple\" print(content) print(content2) print(content3) print(content4) print(type(content)) serial.write_str(content) ``` å¦å¤–ä½ ä¹Ÿå¯ä»¥æŠŠæ•°æ®ç¼–ç æˆ**äºŒè¿›åˆ¶æµæ•°æ®å‘é€**ï¼Œæ¯”å¦‚å‰ 4 ä¸ªå­—èŠ‚æ˜¯åå…­è¿›åˆ¶çš„ `AABBCCDD`ï¼Œä¸­é—´å‘é€ä¸€ä¸ª `int` ç±»å‹çš„æ•°å€¼ï¼Œæœ€åå†åŠ ä¸€ä¸ª`0xFF`ç»“å°¾ï¼Œä½¿ç”¨`struct.pack`æ¥è¿›è¡Œç¼–ç ï¼ˆçœ‹ä¸æ‡‚å¯ä»¥çœ‹åæ–‡çš„ä»‹ç»ï¼‰ï¼š ```python from struct import pack num 10 bytes_content b'\\xAA\\xBB\\xCC\\xDD' bytes_content + pack(\"<i\", num) bytes_content + b'\\xFF' print(bytes_content, type(bytes_content)) serial.write(bytes_content) ``` è¿™é‡Œ `pack(\"<i\", num)` æŠŠ `num`ç¼–ç ä¸º`int`ç±»å‹å³`4å­—èŠ‚`çš„æœ‰ç¬¦å·æ•°ï¼Œ`<`ç¬¦å·æ„æ€æ˜¯å°ç«¯ç¼–ç ï¼Œä½ä½åœ¨å‰ï¼Œè¿™é‡Œ`num 10`ï¼Œåå…­è¿›åˆ¶ `4 å­—èŠ‚`è¡¨ç¤ºå°±æ˜¯`0x0000000A`ï¼Œå°ç«¯å°±æ˜¯æŠŠä½å­—èŠ‚`0x0A`æ”¾åœ¨å‰é¢ï¼Œå¾—åˆ°ä¸€ä¸ª`b'\\x0A\\x00\\x00\\x00'`çš„å­—èŠ‚ç±»å‹æ•°æ®ã€‚ > è¿™é‡Œåªä¸¾ä¾‹ä½¿ç”¨`i`ç¼–ç `int`ç±»å‹çš„æ•°æ®ï¼Œè¿˜æœ‰å…¶å®ƒç±»å‹æ¯”å¦‚`B`è¡¨ç¤º`unsigned char`ç­‰ç­‰ï¼Œæ›´å¤šçš„`struct.pack`æ ¼å¼åŒ–ç”¨æ³•å¯ä»¥è‡ªè¡Œæœç´¢`python struct pack`ã€‚ è¿™æ ·æœ€ç»ˆå‘é€çš„å°±æ˜¯`AA BB CC DD 0A 00 00 00 FF`äºŒè¿›åˆ¶æ•°æ®äº†ã€‚ ## æ¥æ”¶ ä½¿ç”¨`read`æ–¹æ³•è¿›è¡Œè¯»å–æ•°æ®ï¼Œç›´æ¥ï¼š ```python while not app.need_exit(): data serial.read() if data: print(data) time.sleep_ms(1) ``` åŒæ ·ï¼Œ`read`æ–¹æ³•è·å¾—çš„æ•°æ®ä¹Ÿæ˜¯`bytes`ç±»å‹ï¼Œè¿™é‡Œ`read`ä¼šè¯»å–å¯¹æ–¹ä¸€æ¬¡æ€§å‘é€çš„ä¸€ä¸²æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰æ•°æ®å°±æ˜¯`b''`å³ç©ºå­—èŠ‚ã€‚ è¿™é‡Œç”¨äº†`time.sleep_ms(1)`è¿›è¡Œç¡çœ äº†`1ms`ï¼Œç”¨æ¥é‡Šæ”¾ CPUï¼Œä¸è®©è¿™ä¸ªçº¿ç¨‹å ç”¨æ‰€æœ‰ CPU èµ„æºï¼Œè€Œä¸”`1ms`ä¸å½±å“æˆ‘ä»¬ç¨‹åºçš„æ•ˆç‡ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šçº¿ç¨‹æ—¶æœ‰ç”¨ã€‚ å¦å¤–`read`å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼š * `len`ï¼šä»£è¡¨æƒ³æ¥æ”¶çš„æœ€å¤§é•¿åº¦ï¼Œé»˜è®¤` 1`ä»£è¡¨ç¼“å†²åŒºæœ‰å¤šå°‘å°±è¿”å›å¤šå°‘ï¼Œä¼ `>0`çš„å€¼åˆ™ä»£è¡¨æœ€å¤šè¿”å›è¿™ä¸ªé•¿åº¦çš„æ•°æ®ã€‚ * `timeout`ï¼š * é»˜è®¤ `0` ä»£è¡¨ä»ç¼“å†²åŒºè¯»å–æ•°æ®ç«‹é©¬è¿”å›æ•°æ®ï¼Œå¦‚æœ`len`ä¸º ` 1`åˆ™è¿”å›æ‰€æœ‰æ•°æ®ï¼Œå¦‚æœæŒ‡å®šäº†`len`åˆ™è¿”å›é•¿åº¦ä¸è¶…è¿‡`len` çš„æ•°æ®ã€‚ * `<0` ä»£è¡¨ä¸€ç›´ç­‰å¾…ç›´åˆ°æ¥æ”¶åˆ°äº†æ•°æ®æ‰è¿”å›ï¼Œå¦‚æœ`len`ä¸º ` 1`åˆ™ç­‰å¾…åˆ°æ¥æ”¶åˆ°æ•°æ®æ‰è¿”å›ï¼ˆä¸€ä¸²è¿ç»­æ¥æ”¶åˆ°çš„æ•°æ®ï¼Œå³é˜»å¡å¼è¯»å–æ‰€æœ‰æ•°æ®ï¼‰ï¼Œå¦‚æœæŒ‡å®šäº†`len`åˆ™ç­‰å¾…æ¥æ”¶æ•°é‡è¾¾åˆ°`len`æ‰è¿”å›ã€‚ * `>0` ä»£è¡¨æ— è®ºæœ‰æ²¡æœ‰æ¥æ”¶åˆ°æ•°æ®ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´å°±ä¼šè¿”å›ã€‚ çœ‹èµ·æ¥æœ‰ç‚¹å¤æ‚ï¼Œå¸¸è§çš„å‚æ•°ç»„åˆï¼š * `read()`: å³`read( 1, 0)`ï¼Œä»ç¼“å†²åŒºè¯»å–æ”¶åˆ°çš„æ•°æ®ï¼Œé€šå¸¸æ˜¯å¯¹æ–¹ä¸€æ¬¡æ€§å‘æ¥çš„ä¸€ä¸²æ•°æ®ï¼Œç­‰åˆ°å¯¹æ–¹æ²¡æœ‰å‘é€ï¼ˆä¸€ä¸ªå­—ç¬¦çš„å‘é€æ—¶é—´å†…æ²¡æœ‰å†å‘ï¼‰å°±ç«‹åˆ»è¿”å›ã€‚ * `read(len 1, timeout 1)`: é˜»å¡å¼è¯»å–ä¸€ä¸²æ•°æ®ï¼Œç­‰åˆ°å¯¹æ–¹å‘é€äº†æ•°æ®å¹¶ä¸”ä¸€ä¸ªå­—ç¬¦çš„å‘é€æ—¶é—´å†…æ²¡æœ‰å†å‘æ‰è¿”å›ã€‚ * `read(len 10, timeout 1000)`: é˜»å¡å¼è¯»å– 10 ä¸ªå­—ç¬¦ï¼Œè¯»å–åˆ° 10 ä¸ªå­—ç¬¦æˆ–è€… è¶…è¿‡ 1000ms è¿˜æ²¡æ”¶åˆ°å°±è¿”å›å·²ç»æ”¶åˆ°çš„æ•°æ®ã€‚ ## è®¾ç½®æ¥æ”¶å›è°ƒå‡½æ•° åœ¨ MCU å¼€å‘ä¸­ï¼Œä¸²å£æ”¶åˆ°æ•°æ®é€šå¸¸ä¼šæœ‰ä¸­æ–­äº‹ä»¶å‘ç”Ÿï¼Œ MaixPy å·²ç»åœ¨åº•å±‚å¤„ç†å¥½äº†ä¸­æ–­ï¼Œå¼€å‘è€…æ— éœ€å†å¤„ç†ä¸­æ–­ã€‚ å¦‚æœä½ æƒ³åœ¨æ¥æ”¶åˆ°æ•°æ®æ—¶è°ƒç”¨ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¯ä»¥ç”¨`set_received_callback`è®¾ç½®å›è°ƒå‡½æ•°ï¼š ```python from maix import uart, app, time def on_received(serial : uart.UART, data : bytes): print(\"received:\", data) # send back serial.write(data) device \"/dev/ttyS0\" serial uart.UART(device, 115200) serial.set_received_callback(on_received) serial0.write_str(\"hello\\r\\n\") print(\"sent hello\") print(\"wait data\") while not app.need_exit(): time.sleep_ms(100) # sleep to make CPU free ``` åœ¨æ¥æ”¶åˆ°æ•°æ®åä¼šåœ¨**å¦å¤–ä¸€ä¸ªçº¿ç¨‹**é‡Œè°ƒç”¨è®¾ç½®çš„å›è°ƒå‡½æ•°ï¼Œå› ä¸ºæ˜¯åœ¨å¦å¤–çš„çº¿ç¨‹é‡Œè°ƒç”¨çš„ï¼Œæ‰€ä»¥ä¸åƒä¸­æ–­å‡½æ•°è¦å°½å¿«é€€å‡ºå‡½æ•°ï¼Œä½ å¯ä»¥åœ¨å›è°ƒå‡½æ•°é‡Œå¤„ç†ä¸€äº›äº‹åŠ¡å†é€€å‡ºä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œæ³¨æ„å¤šçº¿ç¨‹å¸¸è§é—®é¢˜ã€‚ ä½¿ç”¨å›è°ƒå‡½æ•°çš„æ–¹å¼æ¥æ”¶æ•°æ®è¯·ä¸è¦å†ä½¿ç”¨`read`å‡½æ•°è¯»å–ï¼Œå¦åˆ™ä¼šè¯»å–å‡ºé”™ã€‚ ## ä½¿ç”¨å…¶å®ƒä¸²å£ æ¯ä¸ªå¼•è„šå¯èƒ½å¯ä»¥å¯¹åº”ä¸åŒçš„å¤–è®¾åŠŸèƒ½ï¼Œè¿™ä¹Ÿå«å¼•è„šå¤ç”¨ï¼Œå¦‚ä¸‹å›¾ï¼Œæ¯ä¸ªå¼•è„šå¯¹åº”äº†ä¸åŒåŠŸèƒ½ï¼Œæ¯”å¦‚`A17`å¼•è„š(æ¿å­çš„ä¸å¼•æ ‡è¯†)å¯¹åº”äº†`GPIOA17` `UART0_RX` `PWM5` è¿™ä¸‰ç§åŠŸèƒ½ï¼Œé»˜è®¤æ˜¯`UART0_RX`ã€‚ ![](https://wiki.sipeed.com/hardware/zh/lichee/assets/RV_Nano/intro/RV_Nano_3.jpg) é»˜è®¤æˆ‘ä»¬å°±èƒ½åƒä¸Šé¢ç›´æ¥ä½¿ç”¨`UART0`ï¼Œå¯¹äºå…¶å®ƒä¸²å£çš„å¼•è„šé»˜è®¤éƒ½ä¸æ˜¯ä¸²å£å¤–è®¾åŠŸèƒ½ï¼Œæ‰€ä»¥è¦ä½¿ç”¨å…¶å®ƒä¸²å£ï¼Œéœ€è¦å…ˆè®¾ç½®ä¸€ä¸‹æ˜ å°„ï¼Œä½¿ç”¨`pinmap.set_pin_function`æ¥è®¾ç½®ã€‚ è¿™é‡Œä»¥ä½¿ç”¨`UART1` ä¸ºä¾‹ï¼Œå…ˆè®¾ç½®å¼•è„šæ˜ å°„é€‰æ‹©å¼•è„šåŠŸèƒ½ä¸ºä¸²å£ï¼Œç„¶åè®¾å¤‡ç¼–å·ä½¿ç”¨`/dev/ttyS1`ï¼Œæ³¨æ„`uart.list_devices()` é»˜è®¤ä¸ä¼šè¿”å›éœ€è¦æ‰‹åŠ¨æ˜ å°„çš„ä¸²å£ï¼Œæ‰€ä»¥ç›´æ¥æ‰‹åŠ¨ä¼ å‚å°±å¯ä»¥äº†ï¼š ```python from maix import app, uart, pinmap, time pinmap.set_pin_function(\"A18\", \"UART1_RX\") pinmap.set_pin_function(\"A19\", \"UART1_TX\") device \"/dev/ttyS1\" serial1 uart.UART(device, 115200) ``` ## åº”ç”¨å±‚é€šä¿¡åè®® ### æ¦‚å¿µå’Œå­—ç¬¦åè®® ä¸²å£åªæ˜¯è§„å®šäº†ä¿è¯ç¡¬ä»¶é€šä¿¡çš„æ—¶åºï¼Œä¸ºäº†è®©æ¥æ”¶æ–¹çŸ¥é“å‘é€æ–¹å‘é€çš„å­—ç¬¦æµçš„å«ä¹‰ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šè§„å®šä¸€ä¸ªåº”ç”¨é€šä¿¡åè®®ã€‚ æ¯”å¦‚å‘é€æ”¾éœ€è¦å‘é€ä¸€ä¸ªåæ ‡ï¼ŒåŒ…å«äº†`x, y`ä¸¤ä¸ªæ•´å‹å€¼ï¼Œä¸ºäº†è®©æ¥æ”¶æ–¹èƒ½ç†è§£æˆ‘ä»¬å‘é€çš„å­—èŠ‚æµçš„å«ä¹‰ï¼Œæˆ‘ä»¬è§„å®šï¼š * **å¸§å¤´**ï¼šå½“æˆ‘å¼€å§‹å‘é€`$`ç¬¦å·æ—¶ï¼Œå°±ä»£è¡¨æˆ‘è¦å¼€å§‹å‘é€æœ‰æ•ˆçš„æ•°æ®å•¦ã€‚ > **å†…å®¹**ï¼šè®¾è®¡ä¸€ä¸ªå¼€å¤´ç¬¦å·çš„åŸå› æ˜¯ä¸²å£æ˜¯æµå¼ä¼ è¾“ï¼Œæ¯”å¦‚å‘é€ä¸¤æ¬¡`12345`æœ‰å¯èƒ½åœ¨æŸä¸ªæ—¶åˆ»æ¥æ”¶åˆ°äº†`12345123`è¿™æ ·çš„æ•°æ®ï¼Œç¬¬äºŒå¸§çš„`45`è¿˜æ²¡æœ‰æ¥æ”¶åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®èµ·å§‹å’Œç»“å°¾ç¬¦å·æ¥åˆ¤æ–­ä¸€ä¸ªå®Œæ•´çš„æ•°æ®å¸§ã€‚ * xï¼Œ y çš„å–å€¼èŒƒå›´æ˜¯ 0~65535ï¼Œ å³ä¸¤ä¸ªå­—èŠ‚çš„æ— ç¬¦å·çŸ­æ•´å‹(`unsinged short`)ï¼Œæˆ‘ä¼šå…ˆå‘ x å†å‘ yï¼Œç”¨é€—å·éš”å¼€ï¼Œæ¯”å¦‚`10,20`ã€‚ * **å¸§å°¾**ï¼šæœ€åæˆ‘ä¼šå†å‘ä¸€ä¸ª`*`æ ‡è®°æ¥ä»£è¡¨æˆ‘è¿™æ¬¡æ•°æ®å‘é€å®Œæˆäº†ã€‚ è¿™æ ·å‘é€ä¸€æ¬¡æ•°æ®å°±ç±»ä¼¼`$10,20*`è¿™æ ·ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯¹æ–¹å¦‚æœç”¨ C è¯­è¨€æ¥æ”¶å’Œè§£æï¼š ```c // 1. æ¥æ”¶æ•°æ® // 2. æ ¹æ®å¸§å¤´å¸§å°¾åˆ¤æ–­æ˜¯å¦æ¥æ”¶å®Œæ¯•äº†ï¼Œå¹¶å°†å®Œæ•´çš„ä¸€å¸§æ•°æ®å­˜åˆ° buff æ•°ç»„é‡Œé¢ // 3. è§£æä¸€å¸§æ•°æ® uint16_t x, y; sscanf(buff, \"$%d,%d*\", &x, &y); ``` è¿™æ ·æˆ‘ä»¬å°±åˆ¶å®šäº†æœ€ç®€å•çš„å­—ç¬¦é€šä¿¡åè®®ï¼Œå…·æœ‰ä¸€å®šçš„å¯é æ€§ã€‚ ä½†æ˜¯ç”±äºæˆ‘ä»¬ä¸²å£ä¸€èˆ¬ç”¨çš„å‚æ•°æ˜¯`115200 8 N 1`ï¼Œè¿™é‡Œçš„`N`å°±æ˜¯æ— å¥‡å¶æ ¡éªŒï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è‡ªå·±çš„åè®®é‡Œé¢åŠ ä¸€ä¸ª**æ ¡éªŒå€¼**æ”¾åœ¨æœ«å°¾ï¼Œæ¯”å¦‚ï¼š * è¿™é‡Œæˆ‘ä»¬è§„å®š x,y åè¿˜æœ‰ä¸€ä¸ªæ ¡éªŒå€¼ï¼Œå–å€¼èŒƒå›´æ˜¯ 0 åˆ° 255ï¼Œå®ƒçš„å€¼ä¸ºå‰é¢æ‰€æœ‰å­—ç¬¦åŠ èµ·æ¥çš„å’Œå¯¹ 255 å–ä½™ã€‚ * è¿™é‡Œä»¥ `$10,20`ä¸¾ä¾‹ï¼Œåœ¨`Python`åªéœ€è¦ä½¿ç”¨`sum`å‡½æ•°å°±å¯ä»¥`sum(b'$10,20') % 255 > 20`ï¼Œæœ€ç»ˆå‘é€`$10,20,20*`ã€‚ * æ¥æ”¶æ”¾æ¥æ”¶åˆ°æ•°æ®åè¯»å–åˆ°æ ¡éªŒå€¼`20`ï¼Œç„¶åè‡ªå·±ä¹ŸåŒæ ·çš„æ–¹å¼è®¡ç®—ä¸€é`$10,20`çš„æ ¡éªŒå€¼ï¼Œå¦‚æœä¹Ÿæ˜¯`20`è¯´æ˜æ•°æ®ä¼ è¾“æ²¡æœ‰å‘ç”Ÿé”™è¯¯ï¼Œå¦‚æœä¸ç›¸åŒæˆ‘ä»¬åˆ™å¯ä»¥è®¤ä¸ºæ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ï¼Œå¯ä»¥ä¸¢å¼ƒç­‰ä¸‹ä¸€ä¸ªæ•°æ®åŒ…ã€‚ æ¯”å¦‚åœ¨ MaixPy ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç¼–ç ä¸€ä¸ªå­—ç¬¦åè®®ï¼Œç›´æ¥ä½¿ç”¨ `Python çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–`åŠŸèƒ½å³å¯ï¼š ```python x 10 y 20 content \"${},{}*\".format(x, y) print(content) ``` ### äºŒè¿›åˆ¶é€šä¿¡åè®® ä¸Šé¢çš„å­—ç¬¦åè®®æœ‰ä¸ªå¾ˆæ˜æ˜¾çš„ç‰¹å¾ï¼Œæˆ‘ä»¬éƒ½æ˜¯ç”¨å¯è§å­—ç¬¦çš„æ–¹å¼åœ¨ä¼ è¾“æ•°æ®ï¼Œä¼ è¾“æ•°æ®æ—¶æœ‰ç‚¹å°±æ˜¯ç®€å•ï¼Œäººçœ¼èƒ½ç›´æ¥çœ‹æ‡‚ï¼› ç¼ºç‚¹å°±æ˜¯å ç”¨å­—ç¬¦æ•°é‡ä¸å›ºå®šï¼Œæ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œæ¯”å¦‚`$10,20*`å’Œ`$1000,2000*`ï¼ŒåŒæ ·çš„æ ¼å¼ï¼Œæ•°å€¼ä¸åŒé•¿åº¦ä¸åŒï¼Œè¿™é‡Œ`1000`ç”¨äº† 4 ä¸ªå­—ç¬¦ä¹Ÿå°±æ˜¯4ä¸ªå­—èŠ‚ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ä¸€ä¸ªæ— ç¬¦å·çŸ­æ•´å‹ï¼ˆ`uint16`ï¼‰ç±»å‹çš„æ•°æ®åªéœ€è¦ä¸¤ä¸ªå­—èŠ‚å°±èƒ½è¡¨ç¤º`0~65535`çš„å–å€¼èŒƒå›´ï¼Œç”¨è¿™ç§è¡¨ç¤ºæ–¹æ³•å¯ä»¥å°‘ä¼ è¾“æ•°æ®ã€‚ æˆ‘ä»¬ä¹ŸçŸ¥é“å¯è§å­—ç¬¦å¯ä»¥é€šè¿‡`ASCII`ç è¡¨è½¬æ¢æˆäºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ï¼Œæ¯”å¦‚`$1000`æŸ¥æ‰¾`ASCIIç è¡¨`æ¢æˆäºŒè¿›åˆ¶è¡¨ç¤ºå°±æ˜¯`0x24 0x31 0x30 0x30 0x30`ä¸€å…± 5 ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å®é™…ä¼ è¾“æ•°æ®çš„æ—¶å€™ä¼ è¾“çš„äºŒè¿›åˆ¶å†…å®¹ï¼Œå¦‚æœç°åœ¨æˆ‘ä»¬ç”¨äºŒè¿›åˆ¶çš„æ–¹å¼ç›´æ¥ç¼–ç `1000`ï¼Œå³`0x03E8`ï¼Œå°±å¯ä»¥ç›´æ¥å‘é€`0x24 0x03 0xE8`ï¼Œæœ€ç»ˆåªéœ€è¦å‘é€ 3 ä¸ªå­—èŠ‚ï¼Œå‡å°‘äº†é€šä¿¡å¼€é”€ã€‚ å¦å¤–è¿™é‡Œ`0x03E8`ä¸¤ä¸ªå­—èŠ‚ä½ä½æ˜¯`0xE8`ï¼Œå…ˆå‘é€ä½ä½`0xE8`æˆ‘ä»¬ç§°ä¹‹ä¸ºå°ç«¯ç¼–ç ï¼Œåä¹‹åˆ™æ˜¯å¤§ç«¯ç¼–ç ï¼Œä¸¤ä¸ªçš†å¯ï¼ŒåŒæ–¹è§„å®šä¸€è‡´å³å¯ã€‚ åœ¨ MaixPy ä¸­ï¼Œè¦å°†ä¸€ä¸ªæ•°å€¼è½¬æ¢æˆ bytes ç±»å‹ä¹Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨`struct.pack`å‡½æ•°å³å¯ï¼Œæ¯”å¦‚è¿™é‡Œçš„`0x03E8`ä¹Ÿå°±æ˜¯åè¿›åˆ¶çš„`1000`ï¼Œæˆ‘ä»¬ç”¨ ```python from struct import pack b pack(\"<H\", 1000) print(b) ``` è¿™é‡Œ`<H`è¡¨ç¤ºå°ç«¯ç¼–ç ï¼Œ`H`è¡¨ç¤ºä¸€ä¸ª `uint16`ç±»å‹çš„æ•°æ®ï¼Œæœ€ç»ˆå¾—åˆ°`b'\\xe8\\x03'`çš„ bytes ç±»å‹æ•°æ®ã€‚ åŒæ ·çš„ï¼ŒäºŒè¿›åˆ¶åè®®ä¹Ÿå¯ä»¥æœ‰ å¸§å¤´ï¼Œæ•°æ®å†…å®¹ï¼Œæ ¡éªŒå€¼ï¼Œå¸§å°¾ç­‰ï¼Œä¹Ÿå¯ä»¥ä¸è¦å¸§å°¾ï¼Œè€Œæ˜¯è®¾è®¡ä¸€ä¸ªå¸§é•¿çš„å­—æ®µï¼Œçœ‹ä¸ªäººå–œå¥½å³å¯ã€‚ ### MaixPy MaixPy å†…ç½®é€šä¿¡åè®® å¦å¤– MaixPy ä¹Ÿå†…ç½®äº†ä¸€ä¸ªé€šä¿¡åè®®å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ è¿™é‡Œçš„é€šä¿¡åè®®å³ï¼šè§„å®šé€šä¿¡åŒæ–¹çš„ä»¥ä»€ä¹ˆæ ·çš„æ ¼å¼æ¥ä¼ è¾“å†…å®¹ï¼Œæ–¹ä¾¿åŒæ–¹è§£æè¯†åˆ«ä¿¡æ¯ï¼Œæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶åè®®ï¼ŒåŒ…æ‹¬å¸§å¤´ã€æ•°æ®å†…å®¹ã€æ ¡éªŒç­‰ã€‚ å®Œæ•´çš„åè®®å®šä¹‰åœ¨ [Maix ä¸²å£é€šä¿¡åè®®æ ‡å‡†](https://github.com/sipeed/MaixCDK/blob/master/docs/doc/convention/protocol.md)ã€‚ æ²¡æœ‰æ¥è§¦è¿‡é€šä¿¡åè®®å¯èƒ½çœ‹èµ·æ¥æœ‰ç‚¹å›°éš¾ï¼Œç»“åˆä¸‹é¢çš„ä¾‹å­å¤šçœ‹å‡ éå°±èƒ½ç†è§£äº†ã€‚ æ¯”å¦‚æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªç‰©ä½“æ£€æµ‹ï¼Œæˆ‘ä»¬æƒ³æ£€æµ‹åˆ°ç‰©ä½“åé€šè¿‡ä¸²å£å‘é€ç»™å…¶å®ƒè®¾å¤‡ï¼ˆæ¯”å¦‚ STM32 å•ç‰‡æœºæˆ–è€… Arduino å•ç‰‡æœºï¼‰ï¼Œå‘Šè¯‰å…¶æˆ‘ä»¬æ£€æµ‹åˆ°äº†ä»€ä¹ˆç‰©ä½“ï¼Œåæ ‡æ˜¯å¤šå°‘ã€‚ å®Œæ•´çš„ä¾‹ç¨‹ï¼š[MaixPy/examples/protocol/comm_protocol_yolov5.py](https://github.com/sipeed/MaixPy/tree/main/examples/protocol/comm_protocol_yolov5.py) é¦–å…ˆæˆ‘ä»¬éœ€è¦æ£€æµ‹åˆ°ç‰©ä½“ï¼Œå‚è€ƒ `yolov5` æ£€æµ‹ç‰©ä½“çš„ä¾‹ç¨‹å³å¯ï¼Œè¿™é‡Œæˆ‘ä»¬å°±çœç•¥å…¶å®ƒç»†èŠ‚ï¼Œæ¥çœ‹æ£€æµ‹åˆ°çš„ç»“æœæ˜¯ä»€ä¹ˆæ · ```python while not app.need_exit(): img cam.read() objs detector.detect(img, conf_th 0.5, iou_th 0.45) for obj in objs: img.draw_rect(obj.x, obj.y, obj.w, obj.h, color image.COLOR_RED) msg f'{detector.labels[obj.class_id]}: {obj.score:.2f}' img.draw_string(obj.x, obj.y, msg, color image.COLOR_RED) dis.show(img) ``` å¯ä»¥çœ‹åˆ°`objs`æ˜¯å¤šä¸ªæ£€æµ‹ç»“æœï¼Œè¿™é‡Œåœ¨å±å¹•ä¸Šè¿›è¡Œç”»æ¡†äº†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œæƒ³åŠæ³•æŠŠç»“æœé€šè¿‡ä¸²å£å‘é€å‡ºå»ã€‚ è¿™é‡Œæˆ‘ä»¬ä¸éœ€è¦æ‰‹åŠ¨åˆå§‹åŒ–ä¸²å£ï¼Œç›´æ¥ä½¿ç”¨å†…ç½®çš„`maix.comm, maix.protocol`æ¨¡å—ï¼Œè°ƒç”¨`comm.CommProtoco`ä¼šè‡ªåŠ¨åˆå§‹åŒ–ä¸²å£ï¼Œé»˜è®¤æ³¢ç‰¹ç‡æ˜¯`115200`ï¼Œä¸²å£åè®®çš„ç›¸å…³å¯ä»¥åœ¨è®¾å¤‡`ç³»ç»Ÿè®¾ç½® >é€šä¿¡åè®®`é‡Œé¢è®¾ç½®ã€‚ ç³»ç»Ÿè®¾ç½®é‡Œé¢å¯èƒ½è¿˜æœ‰å…¶å®ƒé€šä¿¡æ–¹å¼æ¯”å¦‚`tcp`ï¼Œé»˜è®¤æ˜¯`uart`ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡`maix.app.get_sys_config_kv(\"comm\", \"method\")`æ¥è·å–åˆ°å½“å‰è®¾ç½®çš„æ˜¯ä¸æ˜¯`uart`ã€‚ ```python from maix import comm, protocol, app from maix.err import Err import struct def encode_objs(objs): ''' encode objs info to bytes body for protocol 2B x(LE) + 2B y(LE) + 2B w(LE) + 2B h(LE) + 2B idx ... ''' body b\"\" for obj in objs: body + struct.pack(\"<hhHHH\", obj.x, obj.y, obj.w, obj.h, obj.class_id) return body APP_CMD_ECHO 0x01 # è‡ªå®šä¹‰å‘½ä»¤ 1, æµ‹è¯•ç”¨ï¼Œè¿™é‡Œæ²¡ç”¨åˆ°ï¼Œä¿ç•™ APP_CMD_DETECT_RES 0x02 # è‡ªå®šä¹‰å‘½ä»¤ 2, å‘é€æ£€æµ‹åˆ°çš„ç‰©ä½“ä¿¡æ¯ # å¯ä»¥æ ¹æ®è‡ªå·±çš„åº”ç”¨è‡ªå®šä¹‰æ›´å¤šçš„å‘½ä»¤ p comm.CommProtocol(buff_size 1024) while not app.need_exit(): # ... objs detector.detect(img, conf_th 0.5, iou_th 0.45) if len(objs) > 0: body encode_objs(objs) p.report(APP_CMD_DETECT_RES, body) # ... ``` è¿™é‡Œé€šè¿‡`encode_objs`å‡½æ•°å°†æ‰€æœ‰æ£€æµ‹åˆ°çš„ç‰©ä½“ä¿¡æ¯æ‰“åŒ…æˆ`bytes`ç±»å‹çš„æ•°æ®ï¼Œç„¶åç”¨`p.report`å‡½æ•°å°†ç»“æœå‘é€å‡ºå»ã€‚ è¿™é‡Œæˆ‘ä»¬å¯¹`body`å†…å®¹è¿›è¡Œäº†ä¸€ä¸ªç®€å•çš„å®šä¹‰ï¼Œå³`2B x(LE) + 2B y(LE) + 2B w(LE) + 2B h(LE) + 2B idx ...`ï¼Œ å«ä¹‰æ˜¯ï¼š * è¿™å¼ å›¾ä¸­æ£€æµ‹åˆ°å¤šä¸ªç‰©ä½“ï¼Œåœ¨`body`ä¸­æŒ‰é¡ºåºæ’åˆ—ï¼Œæ¯ä¸ªç›®æ ‡å ç”¨ `2+2+2+2+2 10` ä¸ªå­—èŠ‚çš„é•¿åº¦ï¼Œä¸€å…±æœ‰`body_len / 10`ä¸ªç‰©ä½“ã€‚ * ç¬¬1ã€2ä¸ªå­—èŠ‚ä»£è¡¨è¯†åˆ«åˆ°çš„ç‰©ä½“çš„å·¦ä¸Šè§’çš„ `x` åæ ‡ï¼Œå•ä½æ˜¯åƒç´ ï¼Œå› ä¸º yolov5 çš„ç»“æœè¿™ä¸ªåæ ‡å€¼æœ‰å¯èƒ½ä¸ºè´Ÿæ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨ä¸€ä¸ª`short`ç±»å‹çš„å€¼æ¥è¡¨ç¤ºï¼Œè¿™é‡Œä½¿ç”¨äº†å°ç«¯ç¼–ç ï¼ˆLEï¼‰ã€‚ > è¿™é‡Œå°ç«¯å³æ•°å€¼çš„ä½å­—èŠ‚åœ¨å‰ï¼Œæ¯”å¦‚åæ ‡ `x` ä¸º `100`, åå…­è¿›åˆ¶ä¸º `0x64`ï¼Œæˆ‘ä»¬ç”¨ä¸¤ä¸ªå­—èŠ‚çš„`short`æ¥è¡¨ç¤ºå°±æ˜¯`0x0064`ï¼Œè¿™é‡Œå°ç«¯ç¼–ç æˆ `bytes` å°±æ˜¯`0x64`åœ¨å‰ï¼Œ ç»“æœå°±æ˜¯`b'\\x64\\x00'`ã€‚ * åŒç†ï¼Œå°†åé¢çš„æ•°æ®éƒ½ä¾æ¬¡ç¼–ç ï¼Œä¸€ä¸ªç‰©ä½“å¾—åˆ°ä¸€ä¸ª`10`å­—èŠ‚é•¿çš„`bytes`ç±»å‹æ•°æ®ã€‚ * å¾ªç¯å°†æ‰€æœ‰ç‰©ä½“ä¿¡æ¯ç¼–ç å¹¶æ‹¼æ¥æˆä¸€ä¸ª`bytes`ã€‚ åœ¨è°ƒç”¨`report`å‡½æ•°æ—¶ï¼Œåº•å±‚ä¼šè‡ªåŠ¨æŒ‰ç…§åè®®æ‹¼æ¥ä¸Šåè®®å¤´ã€æ ¡éªŒå’Œç­‰ç­‰ï¼Œè¿™æ˜¯åœ¨å¦ä¸€ç«¯å°±èƒ½æ”¶åˆ°ä¸€å¸§å®Œæ•´çš„æ•°æ®äº†ã€‚ åœ¨å¦ä¸€ç«¯æ”¶åˆ°ä¿¡æ¯åä¹Ÿè¦æŒ‰ç…§åè®®è¿›è¡Œè§£ç ï¼Œå¦‚æœæ¥æ”¶ç«¯ä¹Ÿæ˜¯ç”¨ MaixPy å¯ä»¥ç›´æ¥ï¼š ```python while not app.need_exit(): msg p.get_msg() if msg and msg.is_report and msg.cmd APP_CMD_DETECT_RES: print(\"receive objs:\", decode_objs(msg.get_body())) p.resp_ok(msg.cmd, b'1') ``` å¦‚æœæ˜¯å…¶å®ƒè®¾å¤‡æ¯”å¦‚`STM32`æˆ–è€…`Arduino`åˆ™å¯ä»¥å‚è€ƒ [Maix ä¸²å£é€šä¿¡åè®®æ ‡å‡†](https://github.com/sipeed/MaixCDK/blob/master/docs/doc/convention/protocol.md) é™„å½•ä¸­çš„ C è¯­è¨€å‡½æ•°è¿›è¡Œç¼–è§£ç ã€‚ ## å…¶å®ƒæ•™ç¨‹ * [ã€MaixPy/MaixCAMã€‘è§†è§‰åˆ©å™¨ MaixCAM å…¥é—¨æ•™ç¨‹äºŒ](https://www.bilibili.com/video/BV1vcvweCEEe/?spm_id_from 333.337.search card.all.click) çœ‹ä¸²å£è®²è§£éƒ¨åˆ† * [è§†è§‰æ¨¡å—å’ŒSTM32å¦‚ä½•è¿›è¡Œä¸²å£é€šä¿¡](https://www.bilibili.com/video/BV175vWe5EfV/?spm_id_from 333.337.search card.all.click&vd_source 6c974e13f53439d17d6a092a499df304) * [[MaixCam]ä½¿ç”¨å¿ƒå¾—äºŒï¼šUARTä¸²å£é€šä¿¡](https://blog.csdn.net/ButterflyBoy0/article/details/140577441) * æ›´å¤šè¯·è‡ªè¡Œäº’è”ç½‘æœç´¢"},"/maixpy/doc/zh/peripheral/adc.html":{"title":"MaixCAM MaixPy ADC ä½¿ç”¨ä»‹ç»","content":" title: MaixCAM MaixPy ADC ä½¿ç”¨ä»‹ç» update: date: 2024 06 11 author: iawak9lkm version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## ADC ç®€ä»‹ ADCï¼Œå³æ¨¡æ‹Ÿä¿¡å·æ•°å­—è½¬æ¢å™¨ï¼Œå°†ä¸€ä¸ªè¾“å…¥ç”µå‹ä¿¡å·è½¬æ¢ä¸ºä¸€ä¸ªè¾“å‡ºçš„æ•°å­—ä¿¡å·ã€‚ç”±äºæ•°å­—ä¿¡å·æœ¬èº«ä¸å…·æœ‰å®é™…æ„ä¹‰ï¼Œä»…ä»…è¡¨ç¤ºä¸€ä¸ªç›¸å¯¹å¤§å°ã€‚æ•…ä»»ä½•ä¸€ä¸ªæ¨¡æ•°è½¬æ¢å™¨éƒ½éœ€è¦ä¸€ä¸ªå‚è€ƒæ¨¡æ‹Ÿé‡ä½œä¸ºè½¬æ¢çš„æ ‡å‡†ï¼Œå‚è€ƒæ ‡å‡†ä¸€èˆ¬ä¸ºæœ€å¤§çš„å¯è½¬æ¢ä¿¡å·å¤§å°ã€‚è€Œè¾“å‡ºçš„æ•°å­—é‡åˆ™è¡¨ç¤ºè¾“å…¥ä¿¡å·ç›¸å¯¹äºå‚è€ƒä¿¡å·çš„å¤§å°ã€‚ ADC å¤–è®¾ä¸€èˆ¬æœ‰ä¸¤ä¸ªä¸»è¦å‚æ•°ï¼šåˆ†è¾¨ç‡å’Œå‚è€ƒç”µå‹ã€‚ * åˆ†è¾¨ç‡ï¼šADC çš„åˆ†è¾¨ç‡ä»¥è¾“å‡ºäºŒè¿›åˆ¶ï¼ˆæˆ–åè¿›åˆ¶ï¼‰æ•°çš„ä½æ•°æ¥è¡¨ç¤ºã€‚å®ƒè¯´æ˜ A/D è½¬æ¢å™¨å¯¹è¾“å…¥ä¿¡å·çš„åˆ†è¾¨èƒ½åŠ›ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œn ä½è¾“å‡ºçš„ A/D è½¬æ¢å™¨èƒ½åŒºåˆ† 2^n ä¸ªä¸åŒç­‰çº§çš„è¾“å…¥æ¨¡æ‹Ÿç”µå‹ï¼Œèƒ½åŒºåˆ†è¾“å…¥ç”µå‹çš„æœ€å°å€¼ä¸ºæ»¡é‡ç¨‹è¾“å…¥çš„ 1/(2^n)ã€‚åœ¨æœ€å¤§è¾“å…¥ç”µå‹ä¸€å®šæ—¶ï¼Œè¾“å‡ºä½æ•°æ„ˆå¤šï¼Œåˆ†è¾¨ç‡æ„ˆé«˜ã€‚ * å‚è€ƒç”µå‹ï¼šADC å‚è€ƒç”µå‹æ˜¯åœ¨ AD è½¬æ¢è¿‡ç¨‹ä¸­ä¸å·²çŸ¥ç”µå‹è¿›è¡Œæ¯”è¾ƒæ¥æ‰¾åˆ°æœªçŸ¥ç”µå‹çš„å€¼çš„ç”µå‹ã€‚å‚è€ƒç”µå‹å¯ä»¥è®¤ä¸ºæ˜¯æœ€é«˜ä¸Šé™ç”µå‹ï¼Œå½“ä¿¡å·ç”µå‹è¾ƒä½æ—¶ï¼Œå¯ä»¥é™ä½å‚è€ƒç”µå‹æ¥æé«˜åˆ†è¾¨ç‡ã€‚ é€šè¿‡æ¿å­çš„ ADCï¼Œå¯ä»¥é‡‡é›†å¤–éƒ¨çš„ç”µå‹ï¼Œå¹¶è®©æ¿å­æ£€éªŒç”µå‹æ˜¯å¦è¾¾æ ‡ï¼Œæˆ–æ˜¯åœ¨æ£€æµ‹åˆ°ç‰¹å®šçš„ç”µå‹æ—¶æ‰§è¡Œç‰¹å®šçš„ä»»åŠ¡ï¼ˆä¾‹å¦‚ ADC æ£€æµ‹å¤šä¸ªæŒ‰é’®ï¼‰ã€‚ ## MaixPy ä¸­ä½¿ç”¨ ADC é€šè¿‡ MaixPy ä½¿ç”¨ ADC å¾ˆç®€å•ï¼š ```python from maix.peripheral import adc from maix import time a adc.ADC(0, adc.RES_BIT_12) raw_data a.read() print(f\"ADC raw data:{raw_data}\") time.sleep_ms(50) vol a.read_vol() print(f\"ADC vol:{vol}\") ``` ä½¿ç”¨ ADC0ï¼Œä»ä¸­è¯»å–åŸå§‹çš„è½¬æ¢æ•°æ®ï¼Œæˆ–æ˜¯ç›´æ¥ä»ä¸­è¯»å–ç”µå‹æ•°æ®ã€‚ æœ‰å…³ ADC API çš„è¯¦ç»†è¯´æ˜è¯·çœ‹ [ADC API æ–‡æ¡£](../../../api/maix/peripheral/adc.html) ## å…³äº MaixCAM ADC å¤–è®¾çš„ä¸€äº›è¯´æ˜ MaixCAM å¼•å‡ºä¸€ä¸ªè¿æ¥ ADC çš„ IOï¼Œä¸º GPIO B3ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ![](https://wiki.sipeed.com/hardware/zh/lichee/assets/RV_Nano/intro/RV_Nano_3.jpg) è¯¥ IO é»˜è®¤ä¸º ADCï¼Œ æ— éœ€é¢å¤–è¿›è¡Œé…ç½®ã€‚ MaixCAM ADC å¤–è®¾é‡‡æ ·ç²¾åº¦ä¸º 12bitï¼Œä¹Ÿå°±æ˜¯è¯´é‡‡æ ·è¾“å‡ºèŒƒå›´ä¸º 0~4095ã€‚é‡‡æ ·ç²¾åº¦ä¸ºå‚è€ƒç”µå‹çš„ 1/4096ã€‚ MaixCAM ADC å¤–è®¾çš„æ‰«æé¢‘ç‡ä¸èƒ½é«˜äº 320K/sï¼Œä¹Ÿå°±æ˜¯ä¸Šè¿°ç¤ºä¾‹ä¸­å¢åŠ å»¶æ—¶çš„åŸå› ã€‚ MaixCAM ADC å¤–è®¾å†…éƒ¨å‚è€ƒç”µå‹Vrefä¸º 1.5Vï¼Œå®é™…ä½¿ç”¨æ—¶ä¼šæœ‰äº›è®¸åå·®ã€‚å› ä¸ºå†…éƒ¨å‚è€ƒç”µå‹å…¸å‹å€¼ä¸º 1.5Vï¼Œæ‰€ä»¥ Soc çš„ ADC é‡ç¨‹ä¸º 0ï½1.5Vã€‚è¯¥é‡ç¨‹çš„ ADC åº”ç”¨èŒƒå›´è¾ƒå°ï¼Œæ•… MaixCAM é¢å¤–ä¸º ADC å¤–è®¾è®¾è®¡äº†åˆ†å‹ç”µè·¯æ¥å¢å¤§ ADC çš„åº”ç”¨èŒƒå›´ï¼Œè¯¥åˆ†å‹ç”µè·¯å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ç”±äºç”µè·¯ä¸­ç”µé˜»é˜»å€¼å­˜åœ¨è¯¯å·®ã€ADC å¤–è®¾æœ‰é˜»æŠ—ã€å†…éƒ¨å‚è€ƒç”µå‹æœ‰äº›è®¸åå·®ï¼Œè¯¥åˆ†å‹ç”µè·¯çš„å‚è€ƒç”µå‹ Vin_max çº¦ä¸º 4.6~5.0Vã€‚API ä¸­å·²ç»é€‰æ‹©ä¸€ä¸ªç²¾åº¦è¾ƒé«˜çš„é»˜è®¤å€¼ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ— éœ€ä¼ é€’è¯¥å‚æ•°ã€‚ ![](https://wiki.sipeed.com/hardware/zh/lichee/assets/RV_Nano/peripheral/adc.png) è‹¥éœ€è¦è¾ƒé«˜çš„ç²¾åº¦ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤è®¡ç®—å‡ºè¯¥åˆ†å‹ç”µè·¯çš„å‚è€ƒç”µå‹ï¼š * å…ˆæµ‹å¾— ADC_PIN çš„å®é™…è¾“å…¥ç”µå‹ Vinã€‚ * ç„¶åæµ‹å¾— ADC1 å¤„çš„å®é™…è¾“å…¥ç”µå‹ Vadcï¼Œç”µé˜»R10çš„ä½ç½®å¯å‚è€ƒè¿™ä¸ª [BOM](https://cn.dl.sipeed.com/fileList/LICHEE/LicheeRV_Nano/03_Designator_drawing/LicheeRV_Nano 70405_iBOM.rar) è¡¨ã€‚ * ä¿æŒç¬¬ä¸€æ­¥çš„ç”µå‹è¾“å…¥ï¼Œåœ¨shellä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š ```shell echo 1 > /sys/class/cvi saradc/cvi saradc0/device/cv_saradc cat /sys/class/cvi saradc/cvi saradc0/device/cv_saradc ``` æ­¤æ—¶ä½ å°†è·å¾— ADC åŸå§‹æ•°æ® adc_dataã€‚ * æ¥åœ°ç”µé˜»ä¸º R10ï¼Œå¦ä¸€ä¸ªç”µé˜»ä¸º R6, è®°å½•å®ƒä»¬çš„é˜»å€¼ã€‚é€šå¸¸ï¼ŒMaixCAM çš„ R6 é˜»å€¼ä¸º 10KÎ©ï¼ˆ10 000Î©ï¼‰ï¼ŒR10 é˜»å€¼ä¸º 5.1KÎ©ï¼ˆ5 100Î©ï¼‰ã€‚ * å°†ä¸Šè¿°å‚æ•°ä¼ é€’ç»™ä»¥ä¸‹ python ä»£ç ï¼Œå³å¯å¾—å‡º ADC_PIN ç«¯çš„é‡ç¨‹ [0, Vin_max] ï¼ˆé—­åŒºé—´ï¼‰ã€‚ ```python def maixcam_get_vin_max(Vin:float, Vadc:float, adc_data:int, r6:int, r10:int, adc_max:int 4095): Vref (Vadc/adc_data)*(adc_max+1) r3 Vadc*r6/(Vin Vadc) Vin_max (Vref/r3)*(r6+r3) return Vin_max Vin 3.3\t\t# step 1 Vadc 1.06\t\t# step 2 adc_data 2700\t# step 3 r6 10000\t\t# step 4 r10 5100\t\t# step 4 if __name__ '__main__': print(maixcam_get_vin_max(Vin, Vadc, adc_data, r6, r10)) ``` ç°åœ¨å°†ç»“æœä¼ é€’ç»™ `adc.ADC()` çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œä½ å°†è·å¾—ä¸€ä¸ªé«˜ç²¾åº¦çš„ ADCã€‚"},"/maixpy/doc/zh/peripheral/hid.html":{"title":"MaixCAM MaixPy ä½¿ç”¨ HID è®¾å¤‡","content":" title: MaixCAM MaixPy ä½¿ç”¨ HID è®¾å¤‡ ## ç®€ä»‹ HIDï¼ˆHuman Interface Deviceï¼‰è®¾å¤‡æ˜¯ä¸€ç±»è®¡ç®—æœºå¤–å›´è®¾å¤‡ï¼Œç”¨äºå‘è®¡ç®—æœºä¼ è¾“è¾“å…¥æ•°æ®ï¼Œæˆ–ä»è®¡ç®—æœºæ¥æ”¶è¾“å‡ºæ•°æ®ã€‚HID è®¾å¤‡æœ€å¸¸è§çš„ä¾‹å­åŒ…æ‹¬é”®ç›˜ã€é¼ æ ‡ã€æ¸¸æˆæ§åˆ¶å™¨ã€è§¦æ‘¸å±ã€å’Œæ‰‹å†™æ¿ç­‰ã€‚HID åè®®æ˜¯ä¸€ç§ç”¨äºäººæœºäº¤äº’è®¾å¤‡çš„é€šä¿¡åè®®ï¼Œå®ƒå…è®¸è¿™äº›è®¾å¤‡é€šè¿‡ USBã€è“ç‰™æˆ–å…¶ä»–è¿æ¥æ–¹å¼ä¸ä¸»æœºè¿›è¡Œæ•°æ®äº¤æ¢ã€‚MaixPyç›®å‰æ”¯æŒä½œä¸ºé”®ç›˜ã€é¼ æ ‡å’Œè§¦æ‘¸å±æ¥ä½¿ç”¨ï¼Œä¸‹é¢å°†ä¼šä»‹å…¥å¦‚ä½•ä½¿ç”¨MaixPyé€šè¿‡HIDæ¥æ§åˆ¶ä½ çš„ä¸ªäººç”µè„‘ï½ ## ä¸€å®šè¦æ“ä½œçš„å‰æœŸå‡†å¤‡ > MaixPy å›ºä»¶ç‰ˆæœ¬åº”è¯¥ > 4.5.1 åœ¨æ“ä½œHIDå‰ä¸€å®šè¦å…ˆä½¿èƒ½HIDè®¾å¤‡ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š 1. æ‰“å¼€MaixCAMè‡ªå¸¦çš„`Settings`åº”ç”¨ï¼Œä¾æ¬¡ç‚¹å‡»`USB Settings` >å‹¾é€‰éœ€è¦çš„HIDè®¾å¤‡ï¼Œå¦‚`Keyboard`ã€`Mouse`ã€`Touchscreen`ï¼Œç„¶åç‚¹å‡»`Confirm`åé‡å¯MaixCAM 2. é€šè¿‡MaixVisionä¸­çš„`Examples/tools/maixcam_switch_usb_mode.py`ç¤ºä¾‹ï¼Œä¿®æ”¹ä»£ç `device_list`ä¸­éœ€è¦å¼€å¯çš„HIDè®¾å¤‡ï¼Œè¿è¡Œåé‡å¯MaixCAM æ³¨æ„ï¼šç”±äºæœ€å¤šåªæ”¯æŒ4ä¸ªUSBè®¾å¤‡ï¼Œå› æ­¤åœ¨`ncm`ï¼Œ`rndis`ï¼Œ`keyboard`ï¼Œ`mouse`ï¼Œ`touchpad`ä¹‹ä¸­åªèƒ½åŒæ—¶å¯åŠ¨4ä¸ªè®¾å¤‡ï¼Œæ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©ï¼Œå…¶ä¸­`ncm`å’Œ`rndis`æ˜¯USBç½‘ç»œåè®®è®¾å¤‡ï¼Œå¦‚æœä¸éœ€è¦å¯ä»¥å…³æ‰ï¼Œé»˜è®¤æ˜¯æ‰“å¼€çš„ã€‚ ## ç”¨MaixPyç¼–å†™ä¸€ä¸ªé”®ç›˜ éœ€è¦ä½¿èƒ½äº†`HID Keyboard`åæ‰èƒ½è¿è¡Œã€‚ ä¸‹é¢ç¤ºä¾‹ä¸­ï¼Œé€šè¿‡é”®ç›˜å‘é€`rstuv`å››ä¸ªå­—ç¬¦ï¼Œç„¶åæ¾å¼€æŒ‰é”®ã€‚ ```python from maix import hid, time keyboard hid.Hid(hid.DeviceType.DEVICE_KEYBOARD) # æŒ‰é”®ç¼–å·å‚è€ƒ[USB HIDæ–‡æ¡£](https://www.usb.org))çš„\"Universal Serial Bus HID Usage Tables\"éƒ¨åˆ† keys [21, 22, 23, 24, 25, 0] # è¡¨ç¤º[r, s, t, u, v, 0], 0è¡¨ç¤ºæ¾å¼€æŒ‰é”® for key in keys: keyboard.write([0, 0, key, 0, 0, 0, 0, 0]) ``` ## ç”¨MaixPyç¼–å†™ä¸€ä¸ªé¼ æ ‡ éœ€è¦ä½¿èƒ½äº†`HID Mouse`åæ‰èƒ½è¿è¡Œã€‚ ä¸‹é¢ç¤ºä¾‹ä¸­ï¼Œæ¯éš”100msç§»åŠ¨é¼ æ ‡5ä¸ªåƒç´ ã€‚ ```python from maix import hid, time mouse hid.Hid(hid.DeviceType.DEVICE_MOUSE) button 0 # æŒ‰é”®çŠ¶æ€ï¼Œ0è¡¨ç¤ºæ¾å¼€ï¼Œ1è¡¨ç¤ºæŒ‰ä¸‹å·¦é”®ï¼Œ2è¡¨ç¤ºæŒ‰ä¸‹å³é”®ï¼Œ4è¡¨ç¤ºæŒ‰ä¸‹æ»šè½®é”® x_oft 0 # ç›¸å¯¹å½“å‰ä½ç½®çš„åç§»é‡ï¼Œæ•°å€¼èŒƒå›´æ˜¯ 127~127 y_oft 0 # ç›¸å¯¹å½“å‰ä½ç½®çš„åç§»é‡ï¼Œæ•°å€¼èŒƒå›´æ˜¯ 127~127 wheel_move 0 # æ»šè½®ç§»åŠ¨è·ç¦»ï¼Œæ•°å€¼èŒƒå›´æ˜¯ 127~127 count 0 while True: x_oft + 5 y_oft + 5 mouse.write([button, x_oft, y_oft, wheel_move]) time.sleep_ms(100) count + 1 if count > 50: break ``` ## ç”¨MaixPyç¼–å†™ä¸€ä¸ªè§¦æ‘¸å± éœ€è¦ä½¿èƒ½äº†`HID Touchpad`åæ‰èƒ½è¿è¡Œã€‚ ä¸‹é¢ç¤ºä¾‹ä¸­ï¼Œæ¯éš”100msç§»åŠ¨è§¦æ‘¸å±150ä¸ªå•ä½ï¼Œæ³¨æ„è§¦æ‘¸å±çš„åæ ‡ç³»æ˜¯ç»å¯¹åæ ‡ï¼Œè€Œä¸æ˜¯ç›¸å¯¹åæ ‡ï¼Œå¦å¤–éœ€è¦å°†å±å¹•å®é™…å°ºå¯¸æ˜ å°„åˆ°[1, 0x7FFF]åŒºé—´ï¼Œåæ ‡(1,1)è¡¨ç¤ºå·¦ä¸Šè§’ï¼Œåæ ‡(0x7FFF,0x7FFF)è¡¨ç¤ºå³ä¸‹è§’ã€‚ ```python from maix import hid, time touchpad hid.Hid(hid.DeviceType.DEVICE_TOUCHPAD) def touchpad_set(button, x_oft, y_oft, wheel_move): touchpad.write([button, # æŒ‰é”®çŠ¶æ€ï¼Œ0è¡¨ç¤ºæ¾å¼€ï¼Œ1è¡¨ç¤ºæŒ‰ä¸‹å·¦é”®ï¼Œ2è¡¨ç¤ºæŒ‰ä¸‹å³é”®ï¼Œ4è¡¨ç¤ºæŒ‰ä¸‹æ»šè½®é”® x_oft & 0xff, (x_oft >> 8) & 0xff, # ç»å¯¹ä½ç½®ï¼Œæœ€å·¦ä¸º1, æœ€å³ä¸º0x7fffï¼Œ0è¡¨ç¤ºä¸æ“ä½œï¼Œæ•°å€¼èŒƒå›´æ˜¯0ï½0x7fff y_oft & 0xff, (y_oft >> 8) & 0xff, # ç»å¯¹ä½ç½®ï¼Œæœ€ä¸Šä¸º1, æœ€ä¸‹ä¸º0x7fffï¼Œ0è¡¨ç¤ºä¸æ“ä½œï¼Œæ•°å€¼èŒƒå›´æ˜¯0ï½0x7fff wheel_move]) # æ»šè½®ç§»åŠ¨è·ç¦»ï¼Œæ•°å€¼èŒƒå›´æ˜¯ 127~127 button 0 x_oft 0 y_oft 0 wheel_move 0 count 0 while True: x_oft + 150 y_oft + 150 touchpad_set(button, x_oft, y_oft, wheel_move) time.sleep_ms(100) count + 1 if count > 50: break ```"},"/maixpy/doc/zh/peripheral/gpio.html":{"title":"MaixCAM MaixPy ä½¿ç”¨ GPIO","content":" title: MaixCAM MaixPy ä½¿ç”¨ GPIO ## ç®€ä»‹ ä½¿ç”¨ GPIO å¯ä»¥æ§åˆ¶å¼•è„šè¾“å…¥æˆ–è€…è¾“å‡ºé«˜ä½ç”µå¹³ï¼Œç”¨æ¥è¯»å–ä¿¡å·æˆ–è€…è¾“å‡ºæ§åˆ¶ä¿¡å·ï¼Œååˆ†å¸¸ç”¨ã€‚ **æ³¨æ„** `MaixCAM` çš„å¼•è„šæ˜¯ `3.3V` è€å—ï¼Œè¯·å‹¿è¾“å…¥ `5V` ç”µå‹ã€‚ ## MaixPy ä¸­ä½¿ç”¨ GPIO > MaixPy å›ºä»¶ç‰ˆæœ¬åº”è¯¥ > 4.1.2(ä¸åŒ…å«) é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“è®¾å¤‡æœ‰å“ªäº›å¼•è„šå’Œ GPIOï¼Œå¯¹äº MaixCAM æ¯ä¸ªå¼•è„šéƒ½å¯¹åº”äº†ä¸€ä¸ª GPIO æ§åˆ¶å™¨ï¼Œå¦‚å›¾ï¼š ![](https://wiki.sipeed.com/hardware/zh/lichee/assets/RV_Nano/intro/RV_Nano_3.jpg) éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¼•è„šé™¤äº†ä½œä¸º GPIO ä½¿ç”¨ï¼Œè¿˜èƒ½ç”¨ä½œå…¶å®ƒåŠŸèƒ½æ¯”å¦‚ PWM ä½¿ç”¨ï¼Œä½¿ç”¨å‰æˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸‹å¼•è„šçš„åŠŸèƒ½ä¸º GPIOã€‚ æ¯”å¦‚åœ¨ MaixCAM ä¸Š**æœ‰äº›å¼•è„šé»˜è®¤å·²ç»è¢«å…¶å®ƒåŠŸèƒ½å ç”¨ï¼Œæ¯”å¦‚ UART0ï¼Œ WiFi(SDIO1 + A26), ä¸å»ºè®®ä½¿ç”¨å®ƒä»¬ã€‚** å…¶å®ƒçš„å¯ä»¥ä½¿ç”¨ï¼Œå¦å¤– A14 å¼•è„šè¿æ¥åˆ°äº†æ¿è½½çš„ LEDï¼Œé»˜è®¤æ˜¯ä½œä¸ºç³»ç»Ÿçš„è´Ÿè½½æç¤ºç¯ï¼Œå¦‚æœåˆå§‹åŒ–å®ƒä¼šè‡ªåŠ¨å–æ¶ˆç³»ç»Ÿæç¤ºç¯åŠŸèƒ½ä½œä¸ºæ™®é€š GPIO è¢«ä½¿ç”¨(æ³¨æ„`A14`åªèƒ½ä½œä¸ºè¾“å‡º)ï¼Œè¿™æ ·ä½ å°±èƒ½æ§åˆ¶è¿™é¢— LED çš„äº®ç­äº†ã€‚ ```python from maix import gpio, pinmap, time pinmap.set_pin_function(\"A14\", \"GPIOA14\") led gpio.GPIO(\"GPIOA14\", gpio.Mode.OUT) led.value(0) while 1: led.toggle() time.sleep_ms(500) ``` è¿™é‡Œå…ˆä½¿ç”¨`pinmap`è®¾ç½®äº†`A14`å¼•è„šçš„åŠŸèƒ½ä¸º`GPIO`ï¼Œå½“ç„¶ï¼Œå¯¹äº`A14`å› ä¸ºåªæœ‰`GPIO`åŠŸèƒ½ï¼Œå¯ä»¥ä¸è®¾ç½®ï¼Œä¸ºäº†ç¨‹åºé€šç”¨èµ·è§ï¼Œå…¶å®ƒå¼•è„šå¯èƒ½éœ€è¦è®¾ç½®ï¼Œæ‰€ä»¥è¿™é‡Œä¾‹ç¨‹è®¾ç½®äº†ã€‚ æ›´å¤š API è¯·çœ‹ [GPIO API æ–‡æ¡£](https://wiki.sipeed.com/maixpy/api/maix/peripheral/gpio.html) ## GPIO ä½œä¸ºè¾“å…¥æ¨¡å¼ ```python from maix import gpio, pinmap, time pinmap.set_pin_function(\"A19\", \"GPIOA19\") led gpio.GPIO(\"GPIOA19\", gpio.Mode.IN) while 1: print(led.value()) time.sleep_ms(1) # sleep to make cpu free ```"},"/maixpy/doc/zh/peripheral/spi.html":{"title":"MaixCAM MaixPy SPI ä¸²è¡Œå¤–è®¾æ¥å£ä½¿ç”¨ä»‹ç»","content":" title: MaixCAM MaixPy SPI ä¸²è¡Œå¤–è®¾æ¥å£ä½¿ç”¨ä»‹ç» update: date: 2024 06 11 author: iawak9lkm version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## SPI ç®€ä»‹ SPI (Serial Peripheral Interfaceï¼Œå³ä¸²è¡Œå¤–è®¾æ¥å£)ï¼Œæ˜¯ä¸€ç§åŒæ­¥å¤–è®¾æ¥å£ï¼Œå®ƒå¯ä»¥ä½¿ SoC ä¸å„ç§å¤–å›´è®¾å¤‡ä»¥ä¸²è¡Œæ–¹å¼è¿›è¡Œé€šä¿¡ä»¥äº¤æ¢ä¿¡æ¯ã€‚å¸¸è§çš„å¤–å›´è®¾å¤‡æœ‰ Flash RAMã€ç½‘ç»œæ§åˆ¶å™¨ã€LCDæ˜¾ç¤ºé©±åŠ¨å™¨å’ŒA/Dè½¬æ¢å™¨ç­‰ã€‚ SPI é‡‡ç”¨ä¸»ä»æ¨¡å¼(Masterâ€”Slave)æ¶æ„ï¼Œæ”¯æŒä¸€ä¸ªæˆ–å¤šä¸ªSlaveè®¾å¤‡ã€‚ åœ¨ç¡¬ä»¶ç”µè·¯ä¸Šï¼ŒSPI é€šå¸¸ç”± 4 æ ¹çº¿ç»„æˆï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š * `MISO`ï¼šå³ä¸»è®¾å¤‡è¾“å…¥ä»è®¾å¤‡è¾“å‡ºï¼ˆMaster Output Slave Inputï¼‰ï¼Œè¯¥å¼•è„šåœ¨ä»æ¨¡å¼ä¸‹å‘é€æ•°æ®ï¼Œåœ¨ä¸»æ¨¡å¼ä¸‹æ¥æ”¶æ•°æ®ã€‚ * `MOSI`ï¼šå³ä¸»è®¾å¤‡è¾“å‡ºä»è®¾å¤‡è¾“å…¥ï¼ˆMaster Input Slave Outputï¼‰ï¼Œè¯¥å¼•è„šåœ¨ä¸»æ¨¡å¼ä¸‹å‘é€æ•°æ®ï¼Œåœ¨ä»æ¨¡å¼ä¸‹æ¥æ”¶æ•°æ®ã€‚ * `SCK`ï¼šä¸²è¡Œæ€»çº¿æ—¶é’Ÿï¼Œç”±ä¸»è®¾å¤‡è¾“å‡ºï¼Œä»è®¾å¤‡è¾“å…¥ã€‚ * `NSS`/`CS`ï¼šä»è®¾å¤‡é€‰æ‹©ã€‚å®ƒä½œä¸ºç‰‡é€‰å¼•è„šï¼Œè®©ä¸»è®¾å¤‡å¯ä»¥å•ç‹¬åœ°ä¸ç‰¹å®šä»è®¾å¤‡é€šä¿¡ï¼Œé¿å…æ•°æ®çº¿ä¸Šçš„å†²çªã€‚ åœ¨é€šä¿¡åè®®ä¸Šï¼ŒSPI è¡Œä¸ºä¸€èˆ¬å¦‚ä¸‹ï¼š * SPI æ”¯æŒä¸€ä¸»å¤šä»ï¼Œä¸»è®¾å¤‡é€šè¿‡ç‰‡é€‰å¼•è„šæ¥é€‰æ‹©éœ€è¦è¿›è¡Œé€šä¿¡çš„ä»è®¾å¤‡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä»è®¾å¤‡ SPI æ¥å£åªéœ€ä¸€æ ¹ç‰‡é€‰å¼•è„šï¼Œè€Œä¸»è®¾å¤‡çš„ç‰‡é€‰å¼•è„šæ•°é‡ç­‰åŒäºè®¾å¤‡æ•°é‡ã€‚ä¸»è®¾å¤‡ä½¿èƒ½æŸä¸ªä»è®¾å¤‡çš„ç‰‡é€‰ä¿¡å·æœŸé—´ï¼Œè¯¥ä»è®¾å¤‡ä¼šå“åº”ä¸»è®¾å¤‡çš„æ‰€æœ‰è¯·æ±‚ï¼Œå…¶ä½™ä»è®¾å¤‡ä¼šå¿½ç•¥æ€»çº¿ä¸Šçš„æ‰€æœ‰æ•°æ®ã€‚ * SPI æœ‰å››ç§æ¨¡å¼ï¼Œå–å†³äºææ€§ï¼ˆCPOLï¼‰å’Œç›¸ä½ï¼ˆCPHAï¼‰çš„é…ç½®ã€‚ ææ€§ï¼Œå½±å“ SPI æ€»çº¿ç©ºé—²æ—¶çš„æ—¶é’Ÿä¿¡å·ç”µå¹³ã€‚ 1. CPOL 1ï¼šè¡¨ç¤ºç©ºé—²æ—¶æ˜¯é«˜ç”µå¹³ 2. CPOL 0ï¼šè¡¨ç¤ºç©ºé—²æ—¶æ˜¯ä½ç”µå¹³ ç›¸ä½ï¼Œå†³å®š SPI æ€»çº¿é‡‡é›†æ•°æ®çš„è·³å˜æ²¿ã€‚ 1. CPHA 0ï¼šè¡¨ç¤ºä»ç¬¬ä¸€ä¸ªè·³å˜æ²¿å¼€å§‹é‡‡æ · 2. CPHA 1ï¼šè¡¨ç¤ºä»ç¬¬äºŒä¸ªè·³å˜æ²¿å¼€å§‹é‡‡æ · ææ€§ä¸ç›¸ä½ç»„åˆæˆäº† SPI çš„å››ç§æ¨¡å¼ï¼š Mode CPOL CPHA 0 0 0 1 0 1 2 1 0 3 1 1 * SPI é€šå¸¸æ”¯æŒå…¨åŒå·¥å’ŒåŠåŒå·¥é€šä¿¡ã€‚ * SPI ä¸è§„å®šæœ€å¤§ä¼ è¾“é€Ÿç‡ï¼Œæ²¡æœ‰åœ°å€æ–¹æ¡ˆï¼›SPI ä¹Ÿæ²¡è§„å®šé€šä¿¡åº”ç­”æœºåˆ¶ï¼Œæ²¡æœ‰è§„å®šæµæ§åˆ¶è§„åˆ™ã€‚ SPI æ˜¯éå¸¸å¸¸è§çš„é€šä¿¡æ¥å£ï¼Œé€šè¿‡ SPI æ¥å£ï¼ŒSoC èƒ½æ§åˆ¶å„å¼å„æ ·çš„çš„å¤–å›´è®¾å¤‡ã€‚ ## MaixPy ä¸­ä½¿ç”¨ SPI MaixCAM çš„å¼•è„šåˆ†å¸ƒå¦‚ä¸‹ï¼š ![](https://wiki.sipeed.com/hardware/zh/lichee/assets/RV_Nano/intro/RV_Nano_3.jpg) ä½¿ç”¨å‰éœ€è¦ `maix.peripheral.pinmap` å®Œæˆå¯¹ SPI çš„ç®¡è„šæ˜ å°„ã€‚ **æ³¨æ„ï¼šMaixCAM ç”±äºå…¶ SPI å¤–è®¾çš„é™åˆ¶ï¼Œåªèƒ½ä½œä¸º SPI ä¸»è®¾å¤‡ä½¿ç”¨ã€‚MaixCAM çš„ SPI æš‚æ—¶ä¸æ”¯æŒä¿®æ”¹ç¡¬ä»¶ CS å¼•è„šæœ‰æ•ˆç”µå¹³ï¼Œæ‰€æœ‰ SPI ç¡¬ä»¶ CS çš„æœ‰æ•ˆç”µå¹³ä¸ºä½ç”µå¹³ã€‚å¦‚éœ€è¦ä½¿ç”¨å…¶ä»–çš„ CS æœ‰æ•ˆç”µå¹³ï¼Œè¯·åœ¨ SPI API ä¸­é…ç½®è½¯ä»¶ CS å¼•è„šåŠå…¶æœ‰æ•ˆç”µå¹³ã€‚SPI4 ä¸ºè½¯ä»¶æ¨¡æ‹Ÿçš„ SPIï¼Œå®æµ‹æœ€å¤§é€Ÿç‡ä¸º 1.25MHzï¼Œä½¿ç”¨æ–¹æ³•ä¸ç¡¬ä»¶ SPI æ— å¼‚ã€‚** é€šè¿‡ MaixPy ä½¿ç”¨ SPI å¾ˆç®€å•ï¼š ```python from maix import spi, pinmap pin_function { \"A24\": \"SPI4_CS\", \"A23\": \"SPI4_MISO\", \"A25\": \"SPI4_MOSI\", \"A22\": \"SPI4_SCK\" } for pin, func in pin_function.items(): if 0 ! pinmap.set_pin_function(pin, func): print(f\"Failed: pin{pin}, func{func}\") exit( 1) spidev spi.SPI(4, spi.Mode.MASTER, 1250000) ### Example of full parameter passing. # spidev spi.SPI(id 4, # SPI ID # mode spi.Mode.MASTER, # SPI mode # freq 1250000, # SPI speed # polarity 0, # CPOL 0/1, default is 0 # phase 0, # CPHA 0/1, default is 0 # bits 8, # Bits of SPI, default is 8 # cs_enable True, # Use soft CS pin? True/False, default is False # cs 'GPIOA19') # Soft cs pin number, default is 'GPIOA19' b bytes(range(0, 8)) res spidev.write_read(b, len(b)) if res b: print(\"loopback test succeed\") else: print(\"loopback test failed\") print(f\"send:{b}\\nread:{res}\") ``` è¯·å…ˆè¿æ¥è¯¥ SPI çš„ `MOSI` å’Œ `MISO`ã€‚ å…ˆé€šè¿‡ `pinmap` é…ç½®æ‰€éœ€çš„å¼•è„šï¼Œç„¶åå¯ç”¨å…¨åŒå·¥é€šä¿¡ï¼Œè¿”å›å€¼å°†ç­‰äºå‘é€å€¼ã€‚ æ›´å¤š SPI API çš„è¯¦ç»†è¯´æ˜è¯·çœ‹ [SPI API æ–‡æ¡£](../../../api/maix/peripheral/spi.html)"},"/maixpy/doc/zh/peripheral/i2c.html":{"title":"MaixCAM MaixPy ä½¿ç”¨ I2C","content":" title: MaixCAM MaixPy ä½¿ç”¨ I2C > æ³¨æ„éœ€è¦ MaixPy é•œåƒå’Œå›ºä»¶ > 4.2.1 `MaixCAM` çš„ `I2C` åŠå¯¹åº”çš„ å¼•è„š çœ‹å›¾ï¼š ![](https://wiki.sipeed.com/hardware/zh/lichee/assets/RV_Nano/intro/RV_Nano_3.jpg) å¯¹äº MaixCAMï¼Œç”±äºå¼•è„šèµ„æºæ¯”è¾ƒç´§å¼ ï¼Œå¼•å‡ºçš„ `I2C1` `I2C3` å¼•è„šå’Œ WiFi æ¨¡å—ï¼ˆSDIO1ï¼‰é‡åˆäº†ï¼Œæ‰€ä»¥ WiFi å’Œç¡¬ä»¶ I2C åªèƒ½äºŒé€‰ä¸€ä½¿ç”¨ã€‚ å¦å¤–è¿˜æœ‰ä¸€ä¸ª`I2C5`ï¼Œæ˜¯åº•å±‚é©±åŠ¨è½¯ä»¶æ¨¡æ‹Ÿçš„ï¼Œå»ºè®®ä½¿ç”¨å®ƒï¼Œåº•å±‚å·²ç»åšå¥½äº†é©±åŠ¨ï¼Œä½¿ç”¨æ—¶å’Œä½¿ç”¨ç¡¬ä»¶`I2C`ä¸€æ ·ã€‚ é»˜è®¤`I2C5`çš„å¼•è„šæ˜¯`GPIO`ï¼Œæ‰€ä»¥ä½¿ç”¨`i2c`æ¨¡å—å‰å…ˆç”¨`pinmap`è®¾ç½®ä»¥ä¸‹å¼•è„šåŠŸèƒ½ä¸º`I2C5`ï¼š ```python from maix import i2c, pinmap pinmap.set_pin_function(\"A15\", \"I2C5_SCL\") pinmap.set_pin_function(\"A27\", \"I2C5_SDA\") bus1 i2c.I2C(5, i2c.Mode.MASTER) slaves bus1.scan() print(\"find slaves:\", slaves) ``` æ›´å¤š API çœ‹ [i2c API æ–‡æ¡£](https://wiki.sipeed.com/maixpy/api/maix/peripheral/i2c.html) å¦‚ä¸Šé¢æ‰€è¯´ï¼Œ å¯¹äº `MaixCAM` ç¡¬ä»¶ `I2C` å’Œ `WiFi` åªèƒ½äºŒé€‰ä¸€ï¼Œå¦‚æœä¸€å®šè¦ç”¨ï¼Œéœ€è¦ç¦ç”¨`WiFi`ï¼Œä½¿ç”¨`pinmap`æ¨¡å—è®¾ç½®å¼•è„šåŠŸèƒ½ä¸º `I2C`ï¼Œå†ä½¿ç”¨`maix.i2c`æ¨¡å—æ“ä½œã€‚ > TODO: æä¾›ç¦ç”¨ WiFi çš„æ–¹æ³•ï¼ˆéœ€è¦ç³»ç»Ÿé‡Œé¢ç¦ç”¨æ‰ WiFi é©±åŠ¨ï¼Œæ¯”è¾ƒå¤æ‚ï¼‰ ```python from maix import i2c, pinmap pinmap.set_pin_function(\"P18\", \"I2C1_SCL\") pinmap.set_pin_function(\"P21\", \"I2C1_SDA\") bus1 i2c.I2C(1, i2c.Mode.MASTER) slaves bus1.scan() print(\"find slaves:\", slaves) ```"},"/maixpy/doc/zh/peripheral/pinmap.html":{"title":"MaixCAM MaixPy Pinmap ä½¿ç”¨ä»‹ç»","content":" title: MaixCAM MaixPy Pinmap ä½¿ç”¨ä»‹ç» update: date: 2024 06 11 author: iawak9lkm version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## ç®¡è„šæ˜ å°„ç®€ä»‹ åœ¨ç³»ç»Ÿçº§èŠ¯ç‰‡ï¼ˆSystem on Chip, SoCï¼‰è®¾è®¡ä¸­ï¼Œä¸€ä¸ªç®¡è„šé€šå¸¸å…·æœ‰å¤šä¸ªåŠŸèƒ½ï¼Œè¿™ç§è®¾è®¡æ–¹æ³•è¢«ç§°ä¸ºå¼•è„šå¤ç”¨ã€‚å…¶åŸå› ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š * èŠ‚çœå¼•è„šæ•°é‡ï¼šSoC é›†æˆäº†å¤§é‡çš„åŠŸèƒ½æ¨¡å—ï¼Œå¦‚ CPUã€GPUã€å†…å­˜æ§åˆ¶å™¨ã€I/O æ¥å£ã€é€šä¿¡æ¨¡å—ç­‰ã€‚å¦‚æœæ¯ä¸ªåŠŸèƒ½éƒ½åˆ†é…ç‹¬ç«‹çš„å¼•è„šï¼Œä¼šå¯¼è‡´éœ€è¦çš„å¼•è„šæ•°é‡éå¸¸åºå¤§ï¼Œå¢åŠ å°è£…çš„å¤æ‚æ€§å’Œæˆæœ¬ã€‚é€šè¿‡å¼•è„šå¤ç”¨ï¼Œä¸€ä¸ªå¼•è„šå¯ä»¥åœ¨ä¸åŒçš„æ¨¡å¼ä¸‹æ”¯æŒä¸åŒçš„åŠŸèƒ½ï¼Œä»è€Œæ˜¾è‘—å‡å°‘å¼•è„šçš„æ€»æ•°ã€‚ * é™ä½èŠ¯ç‰‡å°è£…å’Œåˆ¶é€ æˆæœ¬ï¼šå‡å°‘å¼•è„šæ•°é‡å¯ä»¥é€‰æ‹©æ›´å°çš„å°è£…å°ºå¯¸ï¼Œä»è€Œé™ä½å°è£…å’Œåˆ¶é€ æˆæœ¬ã€‚å°å°è£…ä¸ä»…é™ä½äº†ææ–™æˆæœ¬ï¼Œè¿˜å‡å°‘äº†èŠ¯ç‰‡åœ¨ç”µè·¯æ¿ä¸Šçš„å ç”¨ç©ºé—´ï¼Œæœ‰åˆ©äºè®¾è®¡æ›´ç´§å‡‘çš„ç”µå­äº§å“ã€‚ * æé«˜è®¾è®¡çµæ´»æ€§ï¼šå¼•è„šå¤ç”¨æä¾›äº†æ›´å¤§çš„è®¾è®¡çµæ´»æ€§ã€‚ä¸åŒçš„åº”ç”¨åœºæ™¯å¯èƒ½éœ€è¦ä¸åŒçš„åŠŸèƒ½ç»„åˆï¼Œé€šè¿‡è½¯ä»¶é…ç½®å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚å¯ç”¨ä¸åŒçš„å¼•è„šåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼ŒåŒä¸€ä¸ªå¼•è„šåœ¨ä¸€ä¸ªå®é™…åº”ç”¨ä¸­å¯ä»¥ä½œä¸º UART é€šä¿¡æ¥å£ï¼Œè€Œåœ¨å¦ä¸€ä¸ªå®é™…åº”ç”¨ä¸­å¯ä»¥ä½œä¸º SPI æ€»çº¿æ¥å£ã€‚ * ç®€åŒ– PCB å¸ƒå±€ï¼šå‡å°‘å¼•è„šæ•°é‡å¯ä»¥ç®€åŒ–å°åˆ·ç”µè·¯æ¿ï¼ˆPCBï¼‰çš„å¸ƒå±€è®¾è®¡ã€‚æ›´å°‘çš„å¼•è„šæ„å‘³ç€æ›´å°‘çš„å¸ƒçº¿å±‚æ•°å’Œè¿‡å­”ï¼Œä»è€Œç®€åŒ–äº† PCB è®¾è®¡ï¼Œé™ä½äº†ç”Ÿäº§éš¾åº¦å’Œæˆæœ¬ã€‚ * ä¼˜åŒ–æ€§èƒ½ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œé€šè¿‡å¤ç”¨å¼•è„šå¯ä»¥ä¼˜åŒ–ä¿¡å·è·¯å¾„å’Œæ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡é€‰æ‹©é€‚å½“çš„å¼•è„šåŠŸèƒ½ç»„åˆï¼Œå¯ä»¥å‡å°‘ä¿¡å·ä¼ è¾“è·¯å¾„ä¸Šçš„å¹²æ‰°å’Œå™ªå£°ï¼Œæé«˜ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½å’Œå¯é æ€§ã€‚ è€Œ Pinmap å±•ç¤ºå’Œç®¡ç†èŠ¯ç‰‡å„ä¸ªå¼•è„šé…ç½®ï¼Œè¿™äº›é…ç½®é€šå¸¸åŒ…æ‹¬æ¯ä¸ªå¼•è„šçš„åç§°åŠå…¶åŠŸèƒ½ï¼ˆé€šå¸¸æœ‰å¤šä¸ªåŠŸèƒ½ï¼‰ã€‚ ä»¥ MaixCAM GPIO A28ä¸ºä¾‹å­ï¼š * `A28` ä¸ºå¼•è„šåç§°ã€‚ * `GPIOA28`/`UART2_TX`/`JTAG_TDI` ä¸ºå¼•è„šåŠŸèƒ½ï¼ˆå¯ä» SoC æ‰‹å†ŒæŸ¥è¯¢ï¼‰ï¼ŒåŒä¸€æ—¶é—´è¯¥å¼•è„šåªèƒ½æ˜¯è¿™ä¸‰ä¸ªåŠŸèƒ½ä¸­çš„å…¶ä¸­ä¸€ä¸ªã€‚ é€šè¿‡ Pinmapï¼Œå¯ä»¥è®¾å®šæŒ‡å®šçš„èŠ¯ç‰‡å¼•è„šä¸ºæŒ‡å®šçš„åŠŸèƒ½ã€‚ ## MaixPy ä¸­ä½¿ç”¨Pinmap å¯¹äº MaixCAM æ¿å­ä¸Šå„ä¸ªå¼•è„šçš„ç¼–å·åŠå…¶åŠŸèƒ½ï¼Œå¯ä»¥å‚è€ƒä¸‹å›¾ï¼š ![](https://wiki.sipeed.com/hardware/zh/lichee/assets/RV_Nano/intro/RV_Nano_3.jpg) æˆ–æ˜¯é˜…è¯» [SG2002èŠ¯ç‰‡æ‰‹å†Œ](https://cn.dl.sipeed.com/fileList/LICHEE/LicheeRV_Nano/07_Datasheet/SG2002_Preliminary_Datasheet_V1.0 alpha_CN.pdf) Pinmux ç« èŠ‚äº†è§£å‰©ä½™çš„å¼•è„šçš„ç¼–å·åŠåŠŸèƒ½ã€‚ ä»‹ç»äº†é‚£ä¹ˆå¤šï¼Œå…¶å®é€šè¿‡ MaixPy ä½¿ç”¨ Pinmap æ¥ç®¡ç†å¼•è„šåŠŸèƒ½å¾ˆç®€å•ï¼š ```python from maix import pinmap print(pinmap.get_pins()) f pinmap.get_pin_functions(\"A28\") print(f\"GPIO A28 pin functions:{f}\") print(f\"Set GPIO A28 to {f[0]} function\") pinmap.set_pin_function(\"A28\", f[0]) ``` å…ˆåˆ—å‡ºäº†å¯ä¾›ç®¡è„šæ˜ å°„çš„æ‰€æœ‰å¼•è„šï¼Œç„¶åæŸ¥è¯¢ `GPIO A28` å¯ä¾›é€‰æ‹©çš„å¼•è„šåŠŸèƒ½ï¼Œæœ€åå°†è¯¥å¼•è„šè®¾ç½®ä¸ºè¯¥å¼•è„šçš„ç¬¬ä¸€ä¸ªåŠŸèƒ½(ä½œä¸ºGPIO)ã€‚ æ›´è¯¦ç»†çš„ Pinmap çš„ API è¯´æ˜è¯·çœ‹ [Pinmap API æ–‡æ¡£](../../../api/maix/peripheral/pinmap.html)"},"/maixpy/doc/zh/pro/compile_os.html":{"title":"ä¸º MaixCAM ç¼–è¯‘ç³»ç»Ÿ","content":" title: ä¸º MaixCAM ç¼–è¯‘ç³»ç»Ÿ ## ä¸ºä»€ä¹ˆéœ€è¦å®šåˆ¶ç³»ç»Ÿ æ­£å¸¸æƒ…å†µä¸‹ä½ åªéœ€è¦ä» [https://github.com/sipeed/MaixPy/releases](https://github.com/sipeed/MaixPy/releases) ä¸‹è½½åˆ°é€‚åˆ MaixCAM çš„æœ€æ–°ç³»ç»Ÿä½¿ç”¨å³å¯ã€‚ æœ‰äº›æƒ…å†µéœ€è¦å®šåˆ¶ç³»ç»Ÿï¼Œæ¯”å¦‚ï¼š * æ¯”å¦‚ä½ è¦é‡äº§ 1k ä¸ªäº§å“ï¼Œéƒ½æƒ³æ”¾ä¸€ä¸ªè‡ªå·±çš„åº”ç”¨ï¼Œå¹¶ä¸”è‡ªåŠ¨å¼€æœºå¯åŠ¨ï¼Œä¸æƒ³ä¸€ä¸ªä¸€ä¸ªé…ç½®ï¼Œå°±å¯ä»¥æ”¹ä¸€ä¸‹`builtin_files`ï¼Œç„¶åæ‰“åŒ…ä¸€ä¸ªç³»ç»Ÿï¼Œæ‰€æœ‰æ¿å­ä¸€çƒ§å½•å°±è‡ªå¸¦äº†è‡ªå®šä¹‰çš„æ–‡ä»¶ï¼Œä¸è¦å¼€åŠåå†æ‹·è´ä¸€æ¬¡ã€‚ * ç°åœ¨å®˜æ–¹çš„ç³»ç»Ÿæ²¡æœ‰ä½ æƒ³è¦çš„è½¯ä»¶åŒ…æˆ–è€…é©±åŠ¨ï¼Œå¯ä»¥è‡ªå·±ç¼–è¯‘ç³»ç»Ÿï¼Œé€‰æ‹©è‡ªå·±æƒ³è¦çš„è½¯ä»¶åŒ…ç¼–è¯‘å®šåˆ¶çš„ç³»ç»Ÿã€‚ ## åŸºç¡€ç³»ç»Ÿè·å– åŸç†æ˜¯ç³»ç»Ÿæ¥è‡ª [https://github.com/sipeed/LicheeRV Nano Build/releases](https://github.com/sipeed/LicheeRV Nano Build/releases) ä½œä¸ºåŸºç¡€ç³»ç»Ÿï¼ˆä¸èƒ½ç›´æ¥ç»™ MaixCAM çƒ§å½•ä½¿ç”¨ï¼Œå¦åˆ™æœ‰çƒ§åå±å¹•é£é™©ï¼‰ï¼Œç„¶åå°† MaixCAM å®šåˆ¶çš„ç›¸å…³æ–‡ä»¶æ‹·è´åˆ°åŸºç¡€ç³»ç»Ÿé‡æ–°æ‰“åŒ…æˆ MaixCAM èƒ½ç”¨çš„ç³»ç»Ÿã€‚ å¦‚æœä¸éœ€è¦å¯¹åŸºç¡€ç³»ç»Ÿè¿›è¡Œè‡ªå®šä¹‰ï¼Œç›´æ¥ä» [https://github.com/sipeed/LicheeRV Nano Build/releases](https://github.com/sipeed/LicheeRV Nano Build/releases) ä¸‹è½½æœ€æ–°çš„ç³»ç»Ÿé•œåƒåŒ…å³å¯ã€‚ å¦‚æœåŸºç¡€ç³»ç»Ÿæ— æ³•æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œæ¯”å¦‚ä½ éœ€è¦è‡ªå®šä¹‰å¢åˆ ä¸€äº›è½¯ä»¶åŒ…å’Œé©±åŠ¨ç­‰ï¼ŒæŒ‰ç…§ [https://github.com/sipeed/LicheeRV Nano Build](https://github.com/sipeed/LicheeRV Nano Build) README æ–‡æ¡£è¿›è¡Œç¼–è¯‘ï¼Œ å°½é‡ä½¿ç”¨ docker ç¼–è¯‘ä»¥é¿å…é‡åˆ°ç¼–è¯‘ç¯å¢ƒé—®é¢˜ï¼Œä»¥åŠä½¿ç”¨`bash`ï¼Œä¸è¦ä½¿ç”¨`zsh`ã€‚ æ³¨æ„ç¼–è¯‘å‡ºæ¥çš„ç³»ç»Ÿä¸èƒ½ç›´æ¥ç»™ MaixCAM çƒ§å½•ä½¿ç”¨ï¼Œå¦åˆ™æœ‰çƒ§åå±å¹•é£é™©ã€‚ ## ä¸º MaixCAM æ‹·è´æ–‡ä»¶ å‡†å¤‡ä»¥ä¸‹å†…å®¹ï¼š * åŸºç¡€ç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ª `.img` æˆ–è€… `.img.xz` æ–‡ä»¶ã€‚ * å¯¹äº MaixCAM è¿˜éœ€è¦æ”¾ä¸€äº›é¢å¤–çš„æ–‡ä»¶è¿›å»ï¼Œåˆ°[MaixPy release](https://github.com/sipeed/MaixPy/releases) ä¸‹è½½æœ€æ–°çš„ `builtin_files.tar.xz` æ–‡ä»¶ã€‚ > å¦‚æœä½ éœ€è¦æ”¾ä¸€äº›è‡ªå®šä¹‰çš„æ–‡ä»¶è¿›ç³»ç»Ÿï¼Œå¯ä»¥è§£å‹åå¾€ç›®å½•é‡Œé¢å¡«åŠ ï¼Œæ¯”å¦‚ä½ æƒ³ç³»ç»Ÿçƒ§å½•å `/root` ç›®å½•ä¸‹å°±ä¼šæœ‰ä¸€ä¸ª `cat.jpg`ï¼Œ é‚£ä¹ˆå°±å¾€è¿™é‡Œ `root` ç›®å½•ä¸‹æ”¾ä¸€ä¸ª `cat.jpg`ã€‚ * ä¸‹è½½æˆ–å…‹éš† MaixPy æºç åˆ°æœ¬åœ°ã€‚ * ç¼–è¯‘ MaixPy è·å¾— `.whl` å®‰è£…åŒ…æ–‡ä»¶ï¼Œä½ ä¹Ÿå¯ä»¥åˆ° [MaixPy release](https://github.com/sipeed/MaixPy/releases) ä¸‹è½½æœ€æ–°çš„å®‰è£…åŒ…ã€‚ åˆ°`MaixPy/tools/os`ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ ```shell ./gen_os.sh <base_os_filepath> <maixpy_whl_filepath> <builtin_files_dir_path> <os_version_str> [skip_build_apps]\" ``` è¿™é‡Œå‚æ•°è¯´æ˜ï¼š * **base_os_filepath**: åŸºç¡€ç³»ç»Ÿè·¯å¾„, img æˆ–è€… img.xz æ ¼å¼ã€‚ * **maixpy_whl_filepath**ï¼š MaixPy è½¯ä»¶åŒ…ï¼Œ whl æ ¼å¼ã€‚ * **builtin_files_dir_path**ï¼š MaixCAM è‡ªå®šä¹‰æ–‡ä»¶ï¼Œ å¯ä»¥åœ¨ MaixPy release ä¸‹è½½åˆ°æœ€æ–°çš„ã€‚ * **os_version_str**: ç³»ç»Ÿç‰ˆæœ¬ï¼Œæ ¼å¼è¦æ»¡è¶³ç±»ä¼¼ `maixcam 2024 08 16 maixpy v4.4.21` çš„è§„èŒƒã€‚ * **skip_build_apps**: è·³è¿‡ç¼–è¯‘å†…ç½®åº”ç”¨ï¼Œå¯é€‰å‚æ•°ï¼Œä¼  1 åˆ™ä¼šè·³è¿‡ï¼Œä¸ä¼ è¿™ä¸ªå‚æ•°ä¼šå°† MaixCDK å’Œ MaixPy ä¸­çš„åº”ç”¨éƒ½ç¼–è¯‘å¹¶æ‹·è´åˆ°ç³»ç»Ÿä¸­ã€‚ ä¸¾ä¾‹ï¼š ```shell ./gen_os.sh '/home/xxx/.../LicheeRV Nano Build/install/soc_sg2002_licheervnano_sd/images/2024 08 13 14 43 0de38f.img' ../../dist/MaixPy 4.4.21 py3 none any.whl '/home/xxx/.../sys_builtin_files' maixcam 2024 08 15 maixpy v4.4.21 ``` ç­‰å¾…ç¼–è¯‘å†…ç½®åº”ç”¨ä»¥åŠæ‹·è´å®Œæˆï¼Œåœ¨ `MaixPy/tools/os/tmp` ç›®å½•ä¸‹æœºä¼šæœ‰ä¸€ä¸ª`maixcam 2024 08 15 maixpy v4.4.21.img.xz`ç³»ç»Ÿé•œåƒäº†ã€‚"},"/maixpy/doc/zh/vision/yolov5.html":{"title":"MaixPy MaixCAM ä½¿ç”¨ YOLOv5 / YOLOv8 / YOLO11 æ¨¡å‹è¿›è¡Œç›®æ ‡æ£€æµ‹","content":" title: MaixPy MaixCAM ä½¿ç”¨ YOLOv5 / YOLOv8 / YOLO11 æ¨¡å‹è¿›è¡Œç›®æ ‡æ£€æµ‹ ## ç›®æ ‡æ£€æµ‹æ¦‚å¿µ ç›®æ ‡æ£€æµ‹æ˜¯æŒ‡åœ¨å›¾åƒæˆ–è§†é¢‘ä¸­æ£€æµ‹å‡ºç›®æ ‡çš„ä½ç½®å’Œç±»åˆ«ï¼Œæ¯”å¦‚åœ¨ä¸€å¼ å›¾ä¸­æ£€æµ‹å‡ºè‹¹æœã€é£æœºç­‰ç‰©ä½“ï¼Œå¹¶ä¸”æ ‡å‡ºç‰©ä½“çš„ä½ç½®ã€‚ å’Œåˆ†ç±»ä¸åŒçš„æ˜¯å¤šäº†ä¸€ä¸ªä½ç½®ä¿¡æ¯ï¼Œæ‰€ä»¥ç›®æ ‡æ£€æµ‹çš„ç»“æœä¸€èˆ¬æ˜¯ä¸€ä¸ªçŸ©å½¢æ¡†ï¼Œæ¡†å‡ºç‰©ä½“çš„ä½ç½®ã€‚ ## MaixPy ä¸­ä½¿ç”¨ç›®æ ‡æ£€æµ‹ MaixPy é»˜è®¤æä¾›äº† `YOLOv5` å’Œ `YOLOv8` å’Œ `YOLO11` æ¨¡å‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š > YOLOv8 éœ€è¦ MaixPy > 4.3.0ã€‚ > YOLO11 éœ€è¦ MaixPy > 4.7.0ã€‚ ```python from maix import camera, display, image, nn, app detector nn.YOLOv5(model \"/root/models/yolov5s.mud\", dual_buff True) # detector nn.YOLOv8(model \"/root/models/yolov8n.mud\", dual_buff True) # detector nn.YOLO11(model \"/root/models/yolo11n.mud\", dual_buff True) cam camera.Camera(detector.input_width(), detector.input_height(), detector.input_format()) dis display.Display() while not app.need_exit(): img cam.read() objs detector.detect(img, conf_th 0.5, iou_th 0.45) for obj in objs: img.draw_rect(obj.x, obj.y, obj.w, obj.h, color image.COLOR_RED) msg f'{detector.labels[obj.class_id]}: {obj.score:.2f}' img.draw_string(obj.x, obj.y, msg, color image.COLOR_RED) dis.show(img) ``` æ•ˆæœè§†é¢‘: <div> <video playsinline controls autoplay loop muted preload src \"/static/video/detector.mp4\" type \"video/mp4\"> </div> è¿™é‡Œä½¿ç”¨äº†æ‘„åƒå¤´æ‹æ‘„å›¾åƒï¼Œç„¶åä¼ ç»™ `detector`è¿›è¡Œæ£€æµ‹ï¼Œå¾—å‡ºç»“æœåï¼Œå°†ç»“æœ(åˆ†ç±»åç§°å’Œä½ç½®)æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ ä»¥åŠè¿™é‡Œ æ›¿æ¢`YOLO11` å’Œ `YOLOv5` å’Œ`YOLOv8`å³å¯å®ç°`YOLO11/v5/v8/`åˆ‡æ¢ï¼Œæ³¨æ„æ¨¡å‹æ–‡ä»¶è·¯å¾„ä¹Ÿè¦ä¿®æ”¹ã€‚ æ¨¡å‹æ”¯æŒçš„ 80 ç§ç‰©ä½“åˆ—è¡¨è¯·çœ‹æœ¬æ–‡é™„å½•ã€‚ æ›´å¤š API ä½¿ç”¨å‚è€ƒ [maix.nn](/api/maix/nn.html) æ¨¡å—çš„æ–‡æ¡£ã€‚ ## dual_buff åŒç¼“å†²åŒºåŠ é€Ÿ ä½ å¯èƒ½æ³¨æ„åˆ°è¿™é‡Œæ¨¡å‹åˆå§‹åŒ–ä½¿ç”¨äº†`dual_buff`ï¼ˆé»˜è®¤å€¼å°±æ˜¯ `True`ï¼‰ï¼Œä½¿èƒ½ `dual_buff` å‚æ•°å¯ä»¥åŠ å¿«è¿è¡Œæ•ˆç‡ï¼Œæé«˜å¸§ç‡ï¼Œå…·ä½“åŸç†å’Œä½¿ç”¨æ³¨æ„ç‚¹è§ [dual_buff ä»‹ç»](./dual_buff.html)ã€‚ ## æ›´å¤šè¾“å…¥åˆ†è¾¨ç‡ é»˜è®¤çš„æ¨¡å‹è¾“å…¥æ˜¯`320x224`åˆ†è¾¨ç‡ï¼Œå› ä¸ºè¿™ä¸ªåˆ†è¾¨ç‡æ¯”ä¾‹å’Œé»˜è®¤æä¾›çš„å±å¹•åˆ†è¾¨ç‡æ¥è¿‘ï¼Œä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨ä¸‹è½½å…¶å®ƒåˆ†è¾¨ç‡çš„æ¨¡å‹æ›¿æ¢ï¼š YOLOv5: [https://maixhub.com/model/zoo/365](https://maixhub.com/model/zoo/365) YOLOv8: [https://maixhub.com/model/zoo/400](https://maixhub.com/model/zoo/400) YOLO11: [https://maixhub.com/model/zoo/453](https://maixhub.com/model/zoo/453) åˆ†è¾¨ç‡è¶Šå¤§ç²¾åº¦è¶Šé«˜ï¼Œä½†æ˜¯è¿è¡Œè€—æ—¶è¶Šé•¿ï¼Œæ ¹æ®ä½ çš„åº”ç”¨åœºæ™¯é€‰æ‹©åˆé€‚çš„å³å¯ã€‚ ## YOLOv5 å’Œ YOLOv8 å’Œ YOLO11 ç”¨å“ªä¸ªï¼Ÿ è¿™é‡Œæä¾›çš„ `YOLOv5s` å’Œ `YOLOv8n` å’Œ `YOLO11n` ä¸‰ç§æ¨¡å‹ï¼Œ`YOLOv5s`æ¨¡å‹æ›´å¤§ï¼Œ`YOLOv8n YOLO11n`é€Ÿåº¦å¿«ä¸€ç‚¹ç‚¹ï¼Œ ç²¾åº¦æŒ‰ç…§å®˜æ–¹æ•°æ®æ¥è¯´`YOLO11n > YOLOv8n > YOLOv5s`ï¼Œå¯ä»¥å®é™…æµ‹è¯•æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µé€‰æ‹©ã€‚ å¦å¤–ä½ ä¹Ÿå¯ä»¥å°è¯•`YOLOv8s`æˆ–è€…`YOLO11s`ï¼Œå¸§ç‡ä¼šä½ä¸€äº›ï¼ˆæ¯”å¦‚ yolov8s_320x224 æ¯” yolov8n_320x224 æ…¢ 10msï¼‰ï¼Œå‡†ç¡®ç‡ä¼šæ¯”å‰ä¸¤ä¸ªéƒ½é«˜ï¼Œæ¨¡å‹å¯ä»¥åœ¨ä¸Šé¢æåˆ°çš„æ¨¡å‹åº“ä¸‹è½½åˆ°æˆ–è€…è‡ªå·±ä»`YOLO`å®˜æ–¹ä»“åº“å¯¼å‡ºæ¨¡å‹ã€‚ ## æ‘„åƒå¤´åˆ†è¾¨ç‡å’Œæ¨¡å‹åˆ†è¾¨ç‡ä¸åŒå¯ä»¥å— ä¸Šé¢ä½¿ç”¨`detector.detect(img)`å‡½æ•°è¿›è¡Œæ£€æµ‹æ—¶ï¼Œå¦‚æœ `img` çš„åˆ†è¾¨ç‡å’Œæ¨¡å‹åˆ†è¾¨ç‡ä¸åŒï¼Œè¿™ä¸ªå‡½æ•°å†…éƒ¨ä¼šè‡ªåŠ¨è°ƒç”¨`img.resize`å°†å›¾åƒç¼©æ”¾æˆå’Œæ¨¡å‹è¾“å…¥åˆ†è¾¨ç‡ç›¸åŒçš„ï¼Œ`resize`é»˜è®¤ä½¿ç”¨`image.Fit.FIT_CONTAIN` æ–¹æ³•ï¼Œå³ä¿æŒå®½é«˜æ¯”ç¼©æ”¾ï¼Œå‘¨å›´å¡«å……é»‘è‰²çš„æ–¹å¼ï¼Œæ£€æµ‹åˆ°çš„åæ ‡ä¹Ÿä¼šè‡ªåŠ¨æ˜ å°„åˆ°åŸ`img`çš„åæ ‡ä¸Šã€‚ ## MaixHub åœ¨çº¿è®­ç»ƒè‡ªå·±çš„ç›®æ ‡æ£€æµ‹æ¨¡å‹ é»˜è®¤æä¾›çš„ 80 åˆ†ç±»æ£€æµ‹æ¨¡å‹ï¼Œå¦‚æœä½ éœ€è¦æ£€æµ‹ç‰¹å®šçš„ç‰©ä½“ï¼Œè¯·åˆ°[MaixHub](https://maixhub.com) å­¦ä¹ å¹¶è®­ç»ƒç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼Œåˆ›å»ºé¡¹ç›®æ—¶é€‰æ‹©`ç›®æ ‡æ£€æµ‹æ¨¡å‹`å³å¯ï¼Œå‚è€ƒ[MaixHub åœ¨çº¿è®­ç»ƒæ–‡æ¡£](./maixhub_train.html)ã€‚ æˆ–è€…åˆ°[MaixHub æ¨¡å‹åº“](https://maixhub.com/model/zoo?platform maixcam) æ‰¾ç¤¾åŒºæˆå‘˜åˆ†äº«çš„æ¨¡å‹ã€‚ ## ç¦»çº¿è®­ç»ƒè‡ªå·±çš„ç›®æ ‡æ£€æµ‹æ¨¡å‹ å¼ºçƒˆå»ºè®®å…ˆä½¿ç”¨ MaixHub åœ¨çº¿è®­ç»ƒæ¨¡å‹ï¼Œæ­¤ç§æ–¹å¼éš¾åº¦æ¯”è¾ƒå¤§ï¼Œä¸å»ºè®®æ–°æ‰‹ä¸€æ¥å°±ç¢°è¿™ä¸ªæ–¹å¼ã€‚ æ­¤ç§æ–¹å¼æœ‰äº›è®¸é»˜è®¤ä½ çŸ¥é“çš„çŸ¥è¯†æ–‡ä¸­ä¸ä¼šæï¼Œé‡åˆ°é—®é¢˜å¤šä¸Šç½‘æœç´¢å­¦ä¹ ã€‚ è¯·çœ‹ [ç¦»çº¿è®­ç»ƒYOLOv5æ¨¡å‹](./customize_model_yolov5.html) æˆ–è€… [ç¦»çº¿è®­ç»ƒ YOLOv8/YOLO11 æ¨¡å‹](./customize_model_yolov8.html) ## é™„å½•ï¼š80åˆ†ç±» COCO æ•°æ®é›†çš„ 8 ç§ç‰©ä½“åˆ†åˆ«ä¸ºï¼š ```txt person bicycle car motorcycle airplane bus train truck boat traffic light fire hydrant stop sign parking meter bench bird cat dog horse sheep cow elephant bear zebra giraffe backpack umbrella handbag tie suitcase frisbee skis snowboard sports ball kite baseball bat baseball glove skateboard surfboard tennis racket bottle wine glass cup fork knife spoon bowl banana apple sandwich orange broccoli carrot hot dog pizza donut cake chair couch potted plant bed dining table toilet tv laptop mouse remote keyboard cell phone microwave oven toaster sink refrigerator book clock vase scissors teddy bear hair drier toothbrush ```"},"/maixpy/doc/zh/vision/ai.html":{"title":"MaixCAM MaixPy AI è§†è§‰åŸºæœ¬çŸ¥è¯†","content":" title: MaixCAM MaixPy AI è§†è§‰åŸºæœ¬çŸ¥è¯† update: date: 2024 04 03 author: neucrack version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## ç®€ä»‹ å¦‚æœæ²¡æœ‰ AI åŸºç¡€ï¼Œåœ¨å­¦ä¹  AI å‰å¯ä»¥å…ˆçœ‹[ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½(AI)å’Œæœºå™¨å­¦ä¹ ](https://wiki.sipeed.com/ai/zh/basic/what_is_ai.html) äº†è§£ä¸€ä¸‹ AI çš„åŸºæœ¬æ¦‚å¿µã€‚ ç„¶åæˆ‘ä»¬ä½¿ç”¨çš„è§†è§‰ AI ä¸€èˆ¬éƒ½æ˜¯åŸºäº`æ·±åº¦ç¥ç»ç½‘ç»œå­¦ä¹ `è¿™ä¸ªæ–¹æ³•ï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹çœ‹[æ·±åº¦ç¥ç»ç½‘ç»œï¼ˆDNNï¼‰åŸºç¡€çŸ¥è¯†](https://wiki.sipeed.com/ai/zh/basic/dnn_basic.html) ## MaixPy ä¸­ä½¿ç”¨è§†è§‰ AI åœ¨ MaixPy ä¸­ä½¿ç”¨è§†è§‰ AI å¾ˆç®€å•ï¼Œé»˜è®¤æä¾›äº†å¸¸ç”¨çš„ AI æ¨¡å‹ï¼Œä¸éœ€è¦è‡ªå·±è®­ç»ƒæ¨¡å‹å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œåœ¨[MaixHub æ¨¡å‹åº“](https://maixhub.com/model/zoo) ä¸­é€‰æ‹©`maixcam` å°±å¯ä»¥æ‰¾åˆ°ã€‚ å¹¶ä¸”åœ¨åº•å±‚å·²ç»å°è£…å¥½çš„ APIï¼Œåªéœ€è¦ç®€å•çš„è°ƒç”¨å°±å¯ä»¥å®ç°ã€‚ å¦‚æœä½ æƒ³è®­ç»ƒè‡ªå·±çš„æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥å…ˆä»[MaixHub åœ¨çº¿è®­ç»ƒ](https://maixhub.com/model/training/project) å¼€å§‹ï¼Œåœ¨çº¿å¹³å°åªéœ€è¦ç‚¹ç‚¹ç‚¹å°±èƒ½è®­ç»ƒå‡ºæ¨¡å‹ï¼Œä¸éœ€è¦è´­ä¹°æ˜‚è´µçš„æœºå™¨ï¼Œä¸éœ€è¦æ­å»ºå¤æ‚çš„å¼€å‘ç¯å¢ƒï¼Œä¹Ÿä¸éœ€è¦å†™ä»£ç ï¼Œéå¸¸é€‚åˆå…¥é—¨ï¼Œä¹Ÿé€‚åˆæ‡’å¾—ç¿»ä»£ç çš„è€æ‰‹ã€‚ ä¸€èˆ¬è®­ç»ƒå¾—åˆ°äº†æ¨¡å‹æ–‡ä»¶ï¼Œç›´æ¥ä¼ è¾“åˆ°è®¾å¤‡ä¸Šï¼Œè°ƒç”¨ MaixPy çš„ API å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œå…·ä½“çš„è°ƒç”¨æ–¹æ³•çœ‹åæ–‡ã€‚"},"/maixpy/doc/zh/vision/display.html":{"title":"MaixCAM MaixPy å±å¹•ä½¿ç”¨","content":" title: MaixCAM MaixPy å±å¹•ä½¿ç”¨ update: date: 2024 03 31 author: neucrack version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ ## ç®€ä»‹ MaixPy æä¾›äº†`display`æ¨¡å—ï¼Œå¯ä»¥å°†å›¾åƒæ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼ŒåŒæ—¶ï¼Œä¹Ÿå¯ä»¥å°†å›¾åƒå‘é€åˆ° MaixVision æ˜¾ç¤ºï¼Œæ–¹ä¾¿è°ƒè¯•å’Œå¼€å‘ã€‚ ## API æ–‡æ¡£ æœ¬æ–‡ä»‹ç»å¸¸ç”¨æ–¹æ³•ï¼Œæ›´å¤š API è¯·çœ‹ API æ–‡æ¡£çš„ [display](/api/maix/display.html) éƒ¨åˆ†ã€‚ ## ä½¿ç”¨å±å¹• * å¯¼å…¥`display`æ¨¡å—ï¼š ```python from maix import display ``` * åˆ›å»ºä¸€ä¸ª`Display`å¯¹è±¡ï¼š ```python disp display.Display() ``` * æ˜¾ç¤ºå›¾åƒï¼š ```python disp.show(img) ``` è¿™é‡Œ`img`å¯¹è±¡æ˜¯`maix.image.Image`å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡`camera`æ¨¡å—çš„`read`æ–¹æ³•è·å–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡`image`æ¨¡å—çš„`load`æ–¹æ³•åŠ è½½æ–‡ä»¶ç³»ç»Ÿä¸­çš„å›¾åƒï¼Œä¹Ÿå¯ä»¥é€šè¿‡`image`æ¨¡å—çš„`Image`ç±»åˆ›å»ºä¸€ä¸ªç©ºç™½å›¾åƒã€‚ æ¯”å¦‚ï¼š ```python from maix import image, display disp display.Display() img image.load(\"/root/dog.jpg\") disp.show(img) ``` è¿™é‡Œéœ€è¦å…ˆæŠŠ`dog.jpg`æ–‡ä»¶ä¼ åˆ°è®¾å¤‡çš„`/root`ç›®å½•ä¸‹ã€‚ æ˜¾ç¤ºæ–‡å­—ï¼š ```python from maix import image, display disp display.Display() img image.Image(320, 240) img.draw_rect(0, 0, disp.width(), disp.height(), color image.Color.from_rgb(255, 0, 0), thickness 1) img.draw_rect(10, 10, 100, 100, color image.Color.from_rgb(255, 0, 0)) img.draw_string(10, 10, \"Hello MaixPy!\", color image.Color.from_rgb(255, 255, 255)) disp.show(img) ``` ä»æ‘„åƒå¤´è¯»å–å›¾åƒå¹¶æ˜¾ç¤ºï¼š ```python from maix import camera, display, app disp display.Display() cam camera.Camera(320, 240) while not app.need_exit(): img cam.read() disp.show(img) ``` > è¿™é‡Œç”¨äº†ä¸€ä¸ª`while not app.need_exit():` æ˜¯æ–¹ä¾¿ç¨‹åºåœ¨å…¶å®ƒåœ°æ–¹è°ƒç”¨`app.set_exit_flag()`æ–¹æ³•åé€€å‡ºå¾ªç¯ã€‚ ## è°ƒæ•´èƒŒå…‰äº®åº¦ åœ¨ç³»ç»Ÿçš„`è®¾ç½®`åº”ç”¨ä¸­å¯ä»¥æ‰‹åŠ¨è°ƒæ•´èƒŒå…‰äº®åº¦ï¼Œå¦‚æœä½ æƒ³åœ¨ç¨‹åºä¸­è°ƒæ•´èƒŒå…‰äº®åº¦ï¼Œå¯ä»¥ä½¿ç”¨`set_backlight`æ–¹æ³•ï¼Œå‚æ•°å°±æ˜¯äº®åº¦ç™¾åˆ†æ¯”ï¼Œå–å€¼èŒƒå›´æ˜¯ 0 100ï¼š ```python disp.set_backlight(50) ``` æ³¨æ„ï¼Œç¨‹åºé€€å‡ºå›åˆ°åº”ç”¨é€‰æ‹©ç•Œé¢åä¼šè‡ªåŠ¨æ¢å¤åˆ°ç³»ç»Ÿè®¾ç½®çš„èƒŒå…‰äº®åº¦ã€‚ ## æ˜¾ç¤ºåˆ° MaixVision åœ¨ä½¿ç”¨ MaixVision è¿è¡Œä»£ç æ—¶ï¼Œèƒ½å¤Ÿå°†å›¾åƒæ˜¾ç¤ºåˆ° MaixVision ä¸Šï¼Œæ–¹ä¾¿è°ƒè¯•å’Œå¼€å‘ã€‚ åœ¨è°ƒç”¨`show`æ–¹æ³•æ—¶ï¼Œä¼šè‡ªåŠ¨å‹ç¼©å›¾åƒå¹¶å‘é€åˆ° MaixVision æ˜¾ç¤ºã€‚ å½“ç„¶ï¼Œå¦‚æœä½ æ²¡æœ‰å±å¹•ï¼Œæˆ–è€…ä¸ºäº†èŠ‚çœå†…å­˜ä¸æƒ³åˆå§‹åŒ–å±å¹•ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨`maix.dispaly`å¯¹è±¡çš„`send_to_maixvision`æ–¹æ³•å‘é€å›¾åƒåˆ° MaixVision æ˜¾ç¤ºã€‚ ```python from maix import image,display img image.Image(320, 240) disp display.Display() img.draw_rect(0, 0, img.width(), img.height(), color image.Color.from_rgb(255, 0, 0), thickness 1) img.draw_rect(10, 10, 100, 100, color image.Color.from_rgb(255, 0, 0)) img.draw_string(10, 10, \"Hello MaixPy!\", color image.Color.from_rgb(255, 255, 255)) display.send_to_maixvision(img) ``` ## æ›´æ¢å…¶å®ƒå‹å·å±å¹• å¦‚æœæƒ³æ¢ä¸åŒå°ºå¯¸çš„å±å¹•ï¼Œå¯ä»¥åˆ°[å•†åŸ](https://wiki.sipeed.com/store)å’¨è¯¢è´­ä¹°ã€‚ å¯¹äº MaixCAMï¼Œç›®å‰æ”¯æŒ 4 æ¬¾å±å¹•ï¼š * 2.3å¯¸ 552x368 åˆ†è¾¨ç‡ç”µå®¹è§¦æ‘¸å±ï¼š MaixCAM å¸¦çš„å±å¹•ã€‚ * 2.4å¯¸ 640x480 åˆ†è¾¨ç‡ç”µå®¹è§¦æ‘¸å±ï¼š MaixCAM Pro å¸¦çš„å±å¹•ã€‚ * 5å¯¸ 854x480 åˆ†è¾¨ç‡æ— è§¦æ‘¸å±ï¼š æ³¨æ„æ— è§¦æ‘¸ï¼Œç±»ä¼¼æ‰‹æœºå±å¹•å¤§å°ã€‚ * 7å¯¸ 1280x800 åˆ†è¾¨ç‡ç”µå®¹è§¦æ‘¸å±ï¼š7å¯¸å¤§å±ï¼Œé€‚åˆæ›´å¤šéœ€è¦å›ºå®šå±å¹•è§‚çœ‹åœºæ™¯ã€‚ ä¸åŒå±å¹•çš„åˆ·æ–°å›¾åƒæ—¶é—´å·®åˆ«åœ¨1ï½5æ¯«ç§’ï¼Œå·®åˆ«ä¸æ˜¯å¾ˆå¤§ï¼Œä¸»è¦çš„åŒºåˆ«åœ¨äºå›¾åƒåˆ†è¾¨ç‡å¤§äº†å›¾åƒå¤„ç†æ—¶é—´çš„å·®åˆ«ã€‚ æ›´æ¢å±å¹•éœ€è¦åŒæ—¶**ä¿®æ”¹é…ç½®æ–‡ä»¶**ï¼Œå¦åˆ™å¯èƒ½åˆ·æ–°æ—¶åºä¸åŒä¼š**å¯¼è‡´çƒ§å±**ï¼ˆå±å¹•ç•™ä¸‹æ˜¾ç¤ºè¿‡çš„å½±å­ï¼‰ï¼Œæ‰€ä»¥éœ€è¦æ³¨æ„ï¼Œæœ€å¥½ä¸¥æ ¼æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤æ“ä½œï¼Œå¦‚æœå‡ºç°äº†çƒ§å±çš„é—®é¢˜ä¹Ÿä¸è¦ç´§å¼ ï¼Œæ–­ç”µæ”¾ç½®ä¸€æ™šä¸Šä¸€èˆ¬ä¼šæ¢å¤ã€‚ * æŒ‰ç…§çƒ§å½•ç³»ç»Ÿçš„æ–‡æ¡£çƒ§å½•ç³»ç»Ÿï¼Œçƒ§å½•å®Œæˆåä¼šæœ‰ U ç›˜å‡ºç°ã€‚ * æ‰“å¼€ U ç›˜å†…å®¹ï¼Œçœ‹åˆ°æœ‰ä¸€ä¸ª `uEnv.txt` æ–‡ä»¶ã€‚ * ç¼–è¾‘`uEnv.txt`æ–‡ä»¶ï¼Œä¿®æ”¹`pannel`é”®å€¼ï¼Œå–å€¼å¦‚ä¸‹ï¼š * 2.3å¯¸ï¼ˆMaixCAM è‡ªå¸¦å±å¹•ï¼‰ï¼š`st7701_hd228001c31`ã€‚ * 2.4å¯¸ï¼ˆMaixCAM Pro è‡ªå¸¦å±å¹•ï¼‰ï¼š `st7701_lct024bsi20`ã€‚ * 5å¯¸ï¼š`st7701_dxq5d0019_V0` æ—©æœŸï¼ˆ2023å¹´ï¼‰æµ‹è¯•å±å¹•`st7701_dxq5d0019b480854`ã€‚ * 7å¯¸ï¼š`mtd700920b`ï¼Œæ—©æœŸï¼ˆ2023å¹´ï¼‰æµ‹è¯•å±å¹•ç”¨ `zct2133v1`ã€‚ * ä¿å­˜`uEnv.txt`ï¼Œå¹¶ä¸”**ç‚¹å‡»å¼¹å‡º U ç›˜**ï¼Œä¸è¦åªæ¥æ–­ç”µï¼Œå¦åˆ™å¯èƒ½æ–‡ä»¶ä¸¢å¤±ã€‚ * æŒ‰ä¸‹æ¿å­çš„`reset`æŒ‰é”®ï¼Œæˆ–è€…é‡æ–°ä¸Šç”µå¯åŠ¨ã€‚ ä»¥ä¸Šçš„æ–¹å¼æœ€ä¿é™©ï¼Œä¿è¯ä¸Šç”µå‰å·²ç»è®¾ç½®å¥½äº†å±å¹•å‹å·ï¼Œå¦‚æœä½ å·²ç»çƒ§å½•å¥½ç³»ç»Ÿäº†ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ç³»ç»Ÿçš„`/boot/uEnv.txt`æ–‡ä»¶ç„¶åé‡å¯ã€‚"},"/maixpy/doc/zh/vision/ocr.html":{"title":"MaixCAM MaixPy å®ç° OCR å›¾ç‰‡æ–‡å­—è¯†åˆ«","content":" title: MaixCAM MaixPy å®ç° OCR å›¾ç‰‡æ–‡å­—è¯†åˆ« ## OCR ç®€ä»‹ OCRï¼ˆOptical Character Recognitionï¼Œå…‰å­¦å­—ç¬¦è¯†åˆ«ï¼‰å³ç”¨è§†è§‰çš„æ–¹å¼è¯†åˆ«å›¾åƒä¸­çš„æ–‡å­—ã€‚ åœ¨å¾ˆå¤šåœºæ™¯ä¼šç”¨åˆ°ï¼Œæ¯”å¦‚ï¼š * è¯†åˆ«æ–‡å­—/æ•°å­—å¡ç‰‡ * æå–å¡ç‰‡ä¸Šçš„æ–‡å­—ï¼Œæ¯”å¦‚èº«ä»½è¯ * ç”µå­åŒ–çº¸è´¨æ–‡æ¡£ * æ•°æ˜¾æ•°å­—è¯»å–ï¼Œå¯ç”¨äºæŠ„è¡¨ã€æ—§ä»ªå™¨æ•°æ®ç”µå­åŒ–ç­‰ * è½¦ç‰Œæ–‡å­—è¯†åˆ« ## MaixPy ä¸­ä½¿ç”¨ OCR MaixPy ç§»æ¤äº† [PaddleOCR](https://github.com/PaddlePaddle/PaddleOCR), æ˜¯ç”±ç™¾åº¦å¼€æºçš„ä¸€æ¬¾ OCR ç®—æ³•ï¼Œæƒ³äº†è§£åŸç†å¯ä»¥çœ‹è¿™ä¸ªå¼€æºé¡¹ç›®ã€‚ ![OCR](../../assets/ocr.jpg) **é¦–å…ˆä¿è¯ MaixPy ç‰ˆæœ¬ > 4.6**ã€‚ ç„¶åæ‰§è¡Œä»£ç ï¼š(å®Œæ•´çš„æœ€æ–°çš„ä»£ç åœ¨[MaixPy ä»“åº“](https://github.com/sipeed/MaixPy/blob/main/examples/vision/ai_vision/nn_pp_ocr.py)ï¼Œä»¥æºç ä¸ºå‡†) ```python from maix import camera, display, image, nn, app model \"/root/models/pp_ocr.mud\" ocr nn.PP_OCR(model) cam camera.Camera(ocr.input_width(), ocr.input_height(), ocr.input_format()) dis display.Display() image.load_font(\"ppocr\", \"/maixapp/share/font/ppocr_keys_v1.ttf\", size 20) image.set_default_font(\"ppocr\") while not app.need_exit(): img cam.read() objs ocr.detect(img) for obj in objs: points obj.box.to_list() img.draw_keypoints(points, image.COLOR_RED, 4, 1, 1) img.draw_string(obj.box.x4, obj.box.y4, obj.char_str(), image.COLOR_RED) dis.show(img) ``` å¯ä»¥çœ‹åˆ°ç”¨äº†`ocr nn.PP_OCR(model)` åŠ è½½æ¨¡å‹ï¼Œç„¶åç”¨`ocr.detect(img)` æ£€æµ‹å¹¶ä¸”è¯†åˆ«æ–‡å­—å¾—åˆ°ç»“æœç”»åœ¨äº†å±å¹•ä¸Šã€‚ ## æ›´å¤šæ¨¡å‹é€‰æ‹© åˆ°[MaixHub æ¨¡å‹ä¸‹è½½](https://maixhub.com/model/zoo/449) å¯ä»¥ä¸‹è½½åˆ°æ›´å®Œæ•´çš„æ¨¡å‹ï¼Œä¸åŒè¾“å…¥åˆ†è¾¨ç‡ï¼Œä¸åŒè¯­è¨€ï¼Œä¸åŒçš„ç‰ˆæœ¬ï¼ˆMaixPy ç›®å‰é»˜è®¤pp_ocr.mud æ¨¡å‹ä¸º PPOCRv3 æ£€æµ‹+v4è¯†åˆ«ï¼‰ã€‚ ## åªè¯†åˆ«ä¸æ£€æµ‹ å¦‚æœä½ å·²ç»æœ‰å¤„ç†å¥½äº†çš„æ–‡å­—å›¾ï¼Œå³ä¸€å¼ å›¾ä¸­å·²çŸ¥æ–‡å­—çš„å››ä¸ªè§’åæ ‡ï¼Œå¯ä»¥ä¸è°ƒç”¨`detect`å‡½æ•°ï¼ŒäºŒæ˜¯åªè°ƒç”¨`recognize`å‡½æ•°ï¼Œè¿™æ ·å°±ä¸ä¼šæ£€æµ‹è€Œæ˜¯ä»…ä»…è¯†åˆ«å›¾ç‰‡ä¸­çš„æ–‡å­—ã€‚ ## è‡ªå®šä¹‰æ¨¡å‹ é»˜è®¤æ¨¡å‹æä¾›äº†ä¸­æ–‡å’Œè‹±æ–‡æ–‡å­—æ£€æµ‹è¯†åˆ«æ¨¡å‹ï¼Œå¦‚æœä½ æœ‰ç‰¹æ®Šçš„éœ€æ±‚ï¼Œæ¯”å¦‚å…¶å®ƒè¯­è¨€ï¼Œæˆ–è€…åªæƒ³æ£€æµ‹ç‰¹å®šçš„å›¾å½¢ä¸æƒ³æ£€æµ‹æ‰€æœ‰ç±»å‹çš„æ–‡å­—ï¼Œ å¯ä»¥åˆ°[PaddleOCR å®˜æ–¹æ¨¡å‹åº“](https://paddlepaddle.github.io/PaddleOCR/ppocr/model_list.html) ä¸‹è½½å¯¹åº”çš„æ¨¡å‹ç„¶åè½¬æ¢æˆ MaixCAM æ”¯æŒçš„æ¨¡å‹æ ¼å¼å³å¯ã€‚ è¿™é‡Œæœ€å¤æ‚çš„å°±æ˜¯å°†æ¨¡å‹è½¬æ¢æˆ MaixCAM å¯ç”¨çš„æ¨¡å‹ï¼Œè¿‡ç¨‹**æ¯”è¾ƒå¤æ‚**ï¼Œéœ€è¦æœ‰åŸºæœ¬çš„ Linux ä½¿ç”¨åŸºç¡€ä»¥åŠçµæ´»å˜é€šçš„èƒ½åŠ›ã€‚ * é¦–å…ˆè‡ªå·±ä½¿ç”¨ PaddleOCR æºç è¿›è¡Œè®­ç»ƒæ¨¡å‹æˆ–è€…ä¸‹è½½å®˜æ–¹æä¾›çš„æ¨¡å‹ï¼Œæ£€æµ‹æ¨¡å‹è¯·é€‰æ‹© PP OCRv3ï¼Œ å› ä¸ºæ•ˆæœä¸é”™çš„åŒæ—¶é€Ÿåº¦æ¯” v4 å¿«ï¼Œè¯†åˆ«æ¨¡å‹è¯·ä¸‹è½½ v4 æ¨¡å‹ï¼Œå®æµ‹ v3 åœ¨ MaixCAM ä¸Šé‡åŒ–åæ•ˆæœä¸ç†æƒ³ã€‚ * ç„¶åå°†æ¨¡å‹è½¬æˆ onnx: ```shell model_path ./models/ch_PP OCRv3_rec_infer paddle2onnx model_dir ${model_path} model_filename inference.pdmodel params_filename inference.pdiparams save_file ${model_path}/inference.onnx opset_version 14 enable_onnx_checker True ``` * ç„¶åæŒ‰ç…§[onnxè½¬MUDæ ¼å¼çš„æ¨¡å‹æ–‡æ¡£](../ai_model_converter/maixcam.html) å®‰è£…å¥½ç¯å¢ƒå†è½¬æ¢æ¨¡å‹ï¼Œè¿™é‡Œåœ¨é™„å½•æä¾›ç¤ºä¾‹è½¬æ¢è„šæœ¬ã€‚ * ä½¿ç”¨ MaixPy åŠ è½½è¿è¡Œå³å¯ã€‚ ## é™„å½•ï¼šæ¨¡å‹è½¬æ¢è„šæœ¬ æ£€æµ‹ï¼š ```shell #!/bin/bash set e net_name ch_PP_OCRv3_det input_w 320 input_h 224 output_name sigmoid_0.tmp_0 # scale 1/255.0 # \"mean\": [0.485, 0.456, 0.406], # \"std\": [0.229, 0.224, 0.225], # mean: mean * 255 # scale: 1/(std*255) # mean: 123.675, 116.28, 103.53 # scale: 0.01712475, 0.017507, 0.01742919 mkdir p workspace cd workspace # convert to mlir model_transform.py \\ model_name ${net_name} \\ model_def ../${net_name}.onnx \\ input_shapes [[1,3,${input_h},${input_w}]] \\ mean \"123.675,116.28,103.53\" \\ scale \"0.01712475,0.017507,0.01742919\" \\ keep_aspect_ratio \\ pixel_format bgr \\ channel_format nchw \\ output_names \"${output_name}\" \\ test_input ../test_images/test3.jpg \\ test_result ${net_name}_top_outputs.npz \\ tolerance 0.99,0.99 \\ mlir ${net_name}.mlir # export bf16 model # not use quant_input, use float32 for easy coding model_deploy.py \\ mlir ${net_name}.mlir \\ quantize BF16 \\ processor cv181x \\ test_input ${net_name}_in_f32.npz \\ test_reference ${net_name}_top_outputs.npz \\ model ${net_name}_bf16.cvimodel echo \"calibrate for int8 model\" # export int8 model run_calibration.py ${net_name}.mlir \\ dataset ../images \\ input_num 200 \\ o ${net_name}_cali_table echo \"convert to int8 model\" # export int8 model # add quant_input, use int8 for faster processing in maix.nn.NN.forward_image model_deploy.py \\ mlir ${net_name}.mlir \\ quantize INT8 \\ quant_input \\ calibration_table ${net_name}_cali_table \\ processor cv181x \\ test_input ${net_name}_in_f32.npz \\ test_reference ${net_name}_top_outputs.npz \\ tolerance 0.9,0.5 \\ model ${net_name}_int8.cvimodel ``` è¯†åˆ«: ```shell #!/bin/bash set e # net_name ch_PP_OCRv4_rec # output_name softmax_11.tmp_0 net_name ch_PP_OCRv3_rec_infer_sophgo output_name softmax_5.tmp_0 input_w 320 input_h 48 cali_images ../images_crop_320 # scale 1/255.0 # \"mean\": [0.5, 0.5, 0.5], # \"std\": [0.5, 0.5, 0.5], # mean: mean * 255 # scale: 1/(std*255) # mean: 127.5,127.5,127.5 # scale: 0.00784313725490196,0.00784313725490196,0.00784313725490196 mkdir p workspace cd workspace # convert to mlir model_transform.py \\ model_name ${net_name} \\ model_def ../${net_name}.onnx \\ input_shapes [[1,3,${input_h},${input_w}]] \\ mean \"127.5,127.5,127.5\" \\ scale \"0.00784313725490196,0.00784313725490196,0.00784313725490196\" \\ keep_aspect_ratio \\ pixel_format bgr \\ channel_format nchw \\ output_names \"${output_name}\" \\ test_input ../test_images/test3.jpg \\ test_result ${net_name}_top_outputs.npz \\ tolerance 0.99,0.99 \\ mlir ${net_name}.mlir # export bf16 model # not use quant_input, use float32 for easy coding model_deploy.py \\ mlir ${net_name}.mlir \\ quantize BF16 \\ processor cv181x \\ test_input ${net_name}_in_f32.npz \\ test_reference ${net_name}_top_outputs.npz \\ model ${net_name}_bf16.cvimodel echo \"calibrate for int8 model\" # export int8 model run_calibration.py ${net_name}.mlir \\ dataset $cali_images \\ input_num 200 \\ o ${net_name}_cali_table echo \"convert to int8 model\" # export int8 model # add quant_input, use int8 for faster processing in maix.nn.NN.forward_image model_deploy.py \\ mlir ${net_name}.mlir \\ quantize INT8 \\ quant_input \\ calibration_table ${net_name}_cali_table \\ processor cv181x \\ test_input ${net_name}_in_f32.npz \\ test_reference ${net_name}_top_outputs.npz \\ tolerance 0.9,0.5 \\ model ${net_name}_int8.cvimodel ```"},"/maixpy/doc/zh/vision/face_detection.html":{"title":"MaixCAM MaixPy äººè„¸æ£€æµ‹å’Œå…³é”®ç‚¹æ£€æµ‹","content":" title: MaixCAM MaixPy äººè„¸æ£€æµ‹å’Œå…³é”®ç‚¹æ£€æµ‹ ## ç®€ä»‹ äººè„¸æ£€æµ‹åœ¨å¾ˆå¤šåœ°æ–¹éƒ½èƒ½ç”¨åˆ°ï¼Œæ¯”å¦‚æ˜¯ä¸ºäººè„¸è¯†åˆ«æä¾›äººè„¸æ£€æµ‹è¿™ä¸€æ­¥éª¤ï¼Œæˆ–è€…æ˜¯äººè„¸è·Ÿè¸ªç›¸å…³çš„åº”ç”¨ç­‰ç­‰ã€‚ è¿™é‡Œæä¾›çš„äººè„¸æ£€æµ‹ä¸å…‰å¯ä»¥æ£€æµ‹åˆ°äººè„¸ï¼Œè¿˜èƒ½æ£€æµ‹åˆ° 5 ä¸ªå…³é”®ç‚¹ï¼ŒåŒ…æ‹¬ä¸¤ä¸ªçœ¼ç›ï¼Œä¸€ä¸ªé¼»å­ï¼Œä¸€å¼ å˜´å·´çš„ä¸¤ä¸ªå˜´è§’ã€‚ ![face detection](../../assets/face_detection.jpg) ## MaixPy ä¸­ä½¿ç”¨äººè„¸æ£€æµ‹ MaixPy å®˜æ–¹æä¾›äº†ä¸‰ç§äººè„¸æ£€æµ‹æ¨¡å‹ï¼Œåˆ†åˆ«æ¥è‡ªå¼€æºé¡¹ç›® [face detector 1MB with landmark](https://github.com/biubug6/Face Detector 1MB with landmark) å’Œ [Retinafate](https://github.com/biubug6/Pytorch_Retinaface) ä»¥åŠ [YOLOv8 face](https://github.com/derronqi/yolov8 face)ã€‚ è¿™ä¸‰ç§æ¨¡å‹éƒ½å¯ä»¥ç”¨ï¼Œ`YOLOv8 face` æ•ˆæœæ¯”è¾ƒå¥½ä½†æ˜¯é€Ÿåº¦ç•¥å¾®æ…¢ä¸€äº›ï¼Œå¯ä»¥è‡ªå·±å®é™…æµ‹è¯•é€‰æ‹©ä½¿ç”¨ã€‚ ä½¿ç”¨`YOLOv8 face`ï¼šï¼ˆéœ€è¦ MaixPy ç‰ˆæœ¬ > 4.3.8ï¼‰ ```python from maix import camera, display, image, nn, app detector nn.YOLOv8(model \"/root/models/yolov8n_face.mud\", dual_buff True) cam camera.Camera(detector.input_width(), detector.input_height(), detector.input_format()) dis display.Display() while not app.need_exit(): img cam.read() objs detector.detect(img, conf_th 0.5, iou_th 0.45, keypoint_th 0.5) for obj in objs: img.draw_rect(obj.x, obj.y, obj.w, obj.h, color image.COLOR_RED) msg f'{detector.labels[obj.class_id]}: {obj.score:.2f}' img.draw_string(obj.x, obj.y, msg, color image.COLOR_RED) detector.draw_pose(img, obj.points, 2, image.COLOR_RED) dis.show(img) ``` å¦å¤–ä¸¤ç§æ¨¡å‹ä½¿ç”¨æ–¹æ³•ï¼š è¿™é‡Œæœ‰ä¸€è¡Œè¢«æ³¨é‡Šäº†ä»£ç æ˜¯åŠ è½½`Retinafae`æ¨¡å‹ï¼Œæ ¹æ®ä½ ä¸‹è½½çš„æ¨¡å‹é€‰æ‹©ä½¿ç”¨å“ªä¸€è¡Œä»£ç  ```python from maix import camera, display, image, nn, app import math detector nn.Retinaface(model \"/root/models/retinaface.mud\") # detector nn.FaceDetector(model \"/root/models/face_detector.mud\") cam camera.Camera(detector.input_width(), detector.input_height(), detector.input_format()) dis display.Display() while not app.need_exit(): img cam.read() objs detector.detect(img, conf_th 0.4, iou_th 0.45) for obj in objs: img.draw_rect(obj.x, obj.y, obj.w, obj.h, color image.COLOR_RED) radius math.ceil(obj.w / 10) img.draw_keypoints(obj.points, image.COLOR_RED, size radius if radius < 5 else 4) dis.show(img) ``` ## æ¨¡å‹ä¸‹è½½å’Œå…¶å®ƒåˆ†è¾¨ç‡æ¨¡å‹ ä¸‹è½½æ¨¡å‹ï¼Œä¸‹è½½çš„å‹ç¼©åŒ…é‡Œé¢æœ‰å¤šä¸ªåˆ†è¾¨ç‡å¯ä»¥é€‰æ‹©ï¼Œåˆ†è¾¨ç‡è¶Šé«˜è¶Šç²¾å‡†ä½†è€—æ—¶æ›´é•¿ï¼š * [face detector 1MB with landmark](https://maixhub.com/model/zoo/377) * [Retinafate](https://maixhub.com/model/zoo/378) * [YOLOv8 face](https://maixhub.com/model/zoo/407) ## dual_buff åŒç¼“å†²åŒºåŠ é€Ÿ ä½ å¯èƒ½æ³¨æ„åˆ°è¿™é‡Œæ¨¡å‹åˆå§‹åŒ–ä½¿ç”¨äº†`dual_buff`ï¼ˆé»˜è®¤å€¼å°±æ˜¯ `True`ï¼‰ï¼Œä½¿èƒ½ `dual_buff` å‚æ•°å¯ä»¥åŠ å¿«è¿è¡Œæ•ˆç‡ï¼Œæé«˜å¸§ç‡ï¼Œå…·ä½“åŸç†å’Œä½¿ç”¨æ³¨æ„ç‚¹è§ [dual_buff ä»‹ç»](./dual_buff.html)ã€‚"},"/maixpy/doc/zh/vision/qrcode.html":{"title":"MaixCAM MaixPy äºŒç»´ç è¯†åˆ«","content":" title: MaixCAM MaixPy äºŒç»´ç è¯†åˆ« update: date: 2024 04 03 author: lxowalle version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ é˜…è¯»æœ¬æ–‡å‰ï¼Œç¡®ä¿å·²ç»çŸ¥æ™“å¦‚ä½•å¼€å‘MaixCAMï¼Œè¯¦æƒ…è¯·é˜…è¯»[å¿«é€Ÿå¼€å§‹](../index.html) ## ç®€ä»‹ æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨MaixPyæ¥è¯†åˆ«äºŒç»´ç  ## ä½¿ç”¨ MaixPy è¯†åˆ«äºŒç»´ç  MaixPyçš„ `maix.image.Image`ä¸­æä¾›äº†`find_qrcodes`æ–¹æ³•ï¼Œç”¨æ¥è¯†åˆ«äºŒç»´ç ã€‚ ### å¦‚ä½•è¯†åˆ«äºŒç»´ç  ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå®ç°è¯†åˆ«äºŒç»´ç å¹¶ç”»æ¡† ```python from maix import image, camera, display cam camera.Camera(320, 240) disp display.Display() while 1: img cam.read() qrcodes img.find_qrcodes() for qr in qrcodes: corners qr.corners() for i in range(4): img.draw_line(corners[i][0], corners[i][1], corners[(i + 1) % 4][0], corners[(i + 1) % 4][1], image.COLOR_RED) img.draw_string(qr.x(), qr.y() 15, qr.payload(), image.COLOR_RED) disp.show(img) ``` æ­¥éª¤ï¼š 1. å¯¼å…¥imageã€cameraã€displayæ¨¡å— ```python from maix import image, camera, display ``` 2. åˆå§‹åŒ–æ‘„åƒå¤´å’Œæ˜¾ç¤º ```python cam camera.Camera(320, 240) # åˆå§‹åŒ–æ‘„åƒå¤´ï¼Œè¾“å‡ºåˆ†è¾¨ç‡320x240 RGBæ ¼å¼ disp display.Display() ``` 3. ä»æ‘„åƒå¤´è·å–å›¾ç‰‡å¹¶æ˜¾ç¤º ```python while 1: img cam.read() disp.show(img) ``` 4. è°ƒç”¨`find_qrcodes`æ–¹æ³•è¯†åˆ«æ‘„åƒå¤´ä¸­çš„äºŒç»´ç  ```python qrcodes img.find_qrcodes() ``` `img`æ˜¯é€šè¿‡`cam.read()`è¯»å–åˆ°çš„æ‘„åƒå¤´å›¾åƒï¼Œå½“åˆå§‹åŒ–çš„æ–¹å¼ä¸º`cam camera.Camera(320, 240)`æ—¶ï¼Œ`img`å¯¹è±¡æ˜¯ä¸€å¼ åˆ†è¾¨ç‡ä¸º320x240çš„RGBå›¾ã€‚ `img.find_qrcodes`ç”¨æ¥å¯»æ‰¾äºŒç»´ç ï¼Œå¹¶å°†æŸ¥è¯¢ç»“æœä¿å­˜åˆ°`qrocdes`ï¼Œä»¥ä¾›åç»­å¤„ç† 5. å¤„ç†è¯†åˆ«äºŒç»´ç çš„ç»“æœå¹¶æ˜¾ç¤ºåˆ°å±å¹•ä¸Š ```python for qr in qrcodes: corners qr.corners() for i in range(4): img.draw_line(corners[i][0], corners[i][1], corners[(i + 1) % 4][0], corners[(i + 1) % 4][1], image.COLOR_RED) img.draw_string(qr.x(), qr.y() 15, qr.payload(), image.COLOR_RED) ``` `qrcodes`æ˜¯é€šè¿‡`img.find_qrcodes()`æŸ¥è¯¢äºŒç»´ç çš„ç»“æœï¼Œå¦‚æœæ‰¾ä¸åˆ°äºŒç»´ç åˆ™`qrcodes`å†…éƒ¨ä¸ºç©º `qr.corners()`ç”¨æ¥è·å–å·²æ‰«æåˆ°çš„äºŒç»´ç çš„å››ä¸ªé¡¶ç‚¹åæ ‡ï¼Œ`img.draw_line()`åˆ©ç”¨è¿™å››ä¸ªé¡¶ç‚¹åæ ‡ç”»å‡ºäºŒç»´ç çš„å½¢çŠ¶ `img.draw_string`ç”¨æ¥æ˜¾ç¤ºäºŒç»´ç çš„å†…å®¹å’Œä½ç½®ç­‰ä¿¡æ¯ï¼Œå…¶ä¸­`qr.x()`å’Œ`qr.y()`ç”¨æ¥è·å–äºŒç»´ç å·¦ä¸Šè§’åæ ‡xå’Œåæ ‡yï¼Œ`qr.payload()`ç”¨æ¥è·å–äºŒç»´ç çš„å†…å®¹ ### å¸¸ç”¨å‚æ•°è¯´æ˜ åˆ—ä¸¾å¸¸ç”¨å‚æ•°è¯´æ˜ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯ä»¥å®ç°åº”ç”¨çš„å‚æ•°ï¼Œåˆ™éœ€è¦è€ƒè™‘æ˜¯å¦ä½¿ç”¨å…¶ä»–ç®—æ³•å®ç°ï¼Œæˆ–è€…åŸºäºç›®å‰ç®—æ³•çš„ç»“æœæ‰©å±•æ‰€éœ€çš„åŠŸèƒ½ å‚æ•° è¯´æ˜ ç¤ºä¾‹ roi è®¾ç½®ç®—æ³•è®¡ç®—çš„çŸ©å½¢åŒºåŸŸï¼Œroi [x, y, w, h]ï¼Œxï¼Œyè¡¨ç¤ºçŸ©å½¢åŒºåŸŸå·¦ä¸Šè§’åæ ‡ï¼Œwï¼Œhè¡¨ç¤ºçŸ©å½¢åŒºåŸŸçš„å®½åº¦å’Œé«˜åº¦ï¼Œé»˜è®¤ä¸ºæ•´å¼ å›¾ç‰‡ è®¡ç®—åæ ‡ä¸º(50,50)ï¼Œå®½å’Œé«˜ä¸º100çš„åŒºåŸŸ<br />```img.find_qrcodes(roi [50, 50, 100, 100])``` æœ¬æ–‡ä»‹ç»å¸¸ç”¨æ–¹æ³•ï¼Œæ›´å¤š API è¯·çœ‹ API æ–‡æ¡£çš„ [image](../../../api/maix/image.html) éƒ¨åˆ†ã€‚"},"/maixpy/doc/zh/vision/segmentation.html":{"title":"MaixCAM MaixPy å›¾åƒè¯­ä¹‰åˆ†å‰²","content":" title: MaixCAM MaixPy å›¾åƒè¯­ä¹‰åˆ†å‰² ## ç®€ä»‹ å›¾åƒè¯­ä¹‰åˆ†å‰²ï¼Œå°±æ˜¯è¯†åˆ«å›¾ä¸­ç‰¹å®šçš„ç‰©ä½“ï¼Œå¹¶ä¸”è®²ç‰©ä½“éƒ¨åˆ†çš„åƒç´ è¯†åˆ«å‡ºæ¥ï¼Œæ¯”å¦‚ä¸‹å›¾è¯†åˆ«åˆ°äº†äººä½“å’Œç‹—çš„èº«ä½“éƒ¨åˆ†ï¼Œå¯ä»¥æ‹¿æ¥åšç¢°æ’æ£€æµ‹ã€æ±½è½¦è‡ªåŠ¨å¯¼èˆªã€é¢ç§¯æµ‹ç®—ç­‰ç­‰ã€‚ ![](../../assets/yolov8_seg.jpg) ## MaixPy ä½¿ç”¨å›¾åƒè¯­ä¹‰åˆ†å‰² MaixPy å†…ç½®äº† `YOLOv8 seg` å’Œ `YOLO11 seg` æ¥è¿›è¡Œå¯¹è±¡æ£€æµ‹å’Œå›¾åƒåˆ†å‰²ã€‚ MaixPy é»˜è®¤æä¾›äº† coco æ•°æ®é›† 80 ç§ç‰©ä½“åˆ†ç±»æ¨¡å‹ã€‚ > ä½¿ç”¨ YOLOv8 MaixPy ç‰ˆæœ¬å¿…é¡» > 4.4.0 > ä½¿ç”¨ YOLO11 MaixPy ç‰ˆæœ¬å¿…é¡» > 4.7.0 ä»£ç å¦‚ä¸‹ï¼Œä¹Ÿå¯ä»¥åœ¨ [MaixPy examples](https://github.com/sipeed/maixpy/tree/main/examples/) ä¸­æ‰¾åˆ°ã€‚ ```python from maix import camera, display, image, nn, app, time detector nn.YOLOv8(model \"/root/models/yolov8n_seg.mud\", dual_buff True) # detector nn.YOLO11(model \"/root/models/yolo11n_seg.mud\", dual_buff True) cam camera.Camera(detector.input_width(), detector.input_height(), detector.input_format()) dis display.Display() while not app.need_exit(): img cam.read() objs detector.detect(img, conf_th 0.5, iou_th 0.45) for obj in objs: # img.draw_image(obj.x, obj.y, obj.seg_mask) detector.draw_seg_mask(img, obj.x, obj.y, obj.seg_mask, threshold 127) img.draw_rect(obj.x, obj.y, obj.w, obj.h, color image.COLOR_RED) msg f'{detector.labels[obj.class_id]}: {obj.score:.2f}' img.draw_string(obj.x, obj.y, msg, color image.COLOR_RED) dis.show(img) ``` > è¿™é‡Œåˆ‡æ¢ YOLOv8 å’Œ YOLO11 åªéœ€è¦ä¿®æ”¹ä¸Šé¢ä»£ç ç§æ³¨é‡Šçš„éƒ¨åˆ†å³å¯ã€‚ ## æ›´å¤šåˆ†è¾¨ç‡æ¨¡å‹ é»˜è®¤æ˜¯ 320x224 è¾“å…¥åˆ†è¾¨ç‡çš„æ¨¡å‹ï¼Œ æ›´å¤šåˆ†è¾¨ç‡è¯·åˆ° MaixHub æ¨¡å‹åº“ ä¸‹è½½ï¼š * YOLOv8 seg: [[MaixHub æ¨¡å‹åº“](https://maixhub.com/model/zoo/413)](https://maixhub.com/model/zoo/413) * YOLO11 seg: [[MaixHub æ¨¡å‹åº“](https://maixhub.com/model/zoo/455)](https://maixhub.com/model/zoo/455) ## dual_buff åŒç¼“å†²åŒºåŠ é€Ÿ ä½ å¯èƒ½æ³¨æ„åˆ°è¿™é‡Œæ¨¡å‹åˆå§‹åŒ–ä½¿ç”¨äº†`dual_buff`ï¼ˆé»˜è®¤å€¼å°±æ˜¯ `True`ï¼‰ï¼Œä½¿èƒ½ `dual_buff` å‚æ•°å¯ä»¥åŠ å¿«è¿è¡Œæ•ˆç‡ï¼Œæé«˜å¸§ç‡ï¼Œå…·ä½“åŸç†å’Œä½¿ç”¨æ³¨æ„ç‚¹è§ [dual_buff ä»‹ç»](./dual_buff.html)ã€‚ ## è‡ªå®šä¹‰è‡ªå·±çš„ç‰©ä½“åˆ†å‰²æ¨¡å‹ ä¸Šé¢æä¾›çš„æ˜¯ coco æ•°æ®é›† 80 åˆ†ç±»çš„æ¨¡å‹ï¼Œå¦‚æœä¸æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±è®­ç»ƒç‰¹å®šçš„ç‰©ä½“æ£€æµ‹å’Œåˆ†å‰²æ¨¡å‹ï¼ŒæŒ‰ç…§ [ç¦»çº¿è®­ç»ƒYOLOv8/YOLO11](./customize_model_yolov8.html) æ‰€è¿°ä½¿ç”¨ YOLOv8/YOLO11 å®˜æ–¹çš„åˆ†æ ¼æ¨¡å‹è®­ç»ƒæ–¹æ³•è¿›è¡Œè®­ç»ƒï¼Œç„¶åè½¬æ¢æˆ MaixCAM æ”¯æŒçš„æ¨¡å‹æ ¼å¼å³å¯ã€‚"},"/maixpy/doc/zh/vision/image_ops.html":{"title":"MaixCAM MaixPy å›¾åƒåŸºç¡€æ“ä½œ","content":" title: MaixCAM MaixPy å›¾åƒåŸºç¡€æ“ä½œ update: date: 2024 04 03 author: neucrack version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ date: 2024 07 08 author: neucrack version: 1.1.0 content: ä¼˜åŒ– cv å’Œ image è½¬æ¢æ–‡æ¡£ ## ç®€ä»‹ è§†è§‰åº”ç”¨ä¸­å›¾åƒå æ®éå¸¸é‡è¦çš„ä½ç½®ï¼Œä¸ç®¡æ˜¯å›¾ç‰‡è¿˜æ˜¯è§†é¢‘ï¼Œå› ä¸ºè§†é¢‘æœ¬è´¨ä¸Šå°±æ˜¯ä¸€å¸§å¸§çš„å›¾åƒï¼Œæ‰€ä»¥å›¾åƒå¤„ç†æ˜¯è§†è§‰åº”ç”¨çš„åŸºç¡€ã€‚ ## API æ–‡æ¡£ æœ¬æ–‡ä»‹ç»å¸¸ç”¨æ–¹æ³•ï¼Œ æ›´å¤š API å‚è€ƒ [maix.image](/api/maix/image.html) æ¨¡å—çš„æ–‡æ¡£ã€‚ ## å›¾åƒæ ¼å¼ MaixPy æä¾›åŸºç¡€å›¾åƒæ¨¡å—`image`ï¼Œé‡Œé¢æœ€é‡è¦çš„å°±æ˜¯`image.Image`ç±»ï¼Œç”¨äºå›¾åƒçš„åˆ›å»ºä»¥åŠå„ç§å›¾åƒåŸºç¡€æ“ä½œï¼Œä»¥åŠå›¾åƒåŠ è½½å’Œä¿å­˜ç­‰ã€‚ å›¾åƒæ ¼å¼æœ‰å¾ˆå¤šï¼Œä¸€èˆ¬æˆ‘ä»¬ç”¨`image.Format.FMT_RGB888` æˆ–è€… `image.Format.FMT_RGBA8888` æˆ–è€… `image.Format.FMT_GRAYSCALE`æˆ–è€…`image.Format.FMT_BGR888`ç­‰ã€‚ å¤§å®¶çŸ¥é“ `RGB` ä¸‰è‰²å¯ä»¥åˆæˆä»»æ„é¢œè‰²ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä½¿ç”¨ `image.Format.FMT_RGB888`å°±è¶³å¤Ÿï¼Œ `RGB888` åœ¨å†…å­˜ä¸­æ˜¯ `RGB packed` æ’åˆ—ï¼Œå³åœ¨å†…å­˜ä¸­çš„æ’åˆ—ï¼š `åƒç´ 1_çº¢è‰², åƒç´ 1_ç»¿è‰², åƒç´ 1_è“è‰², åƒç´ 2_çº¢è‰², åƒç´ 2_ç»¿è‰², åƒç´ 2_è“è‰², ...` ä¾æ¬¡æ’åˆ—ã€‚ ## åˆ›å»ºå›¾åƒ åˆ›å»ºå›¾åƒå¾ˆç®€å•ï¼Œåªéœ€è¦æŒ‡å®šå›¾åƒçš„å®½åº¦å’Œé«˜åº¦ä»¥åŠå›¾åƒæ ¼å¼å³å¯ï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) print(img) print(img.width(), img.height(), img.format()) ``` `320` æ˜¯å›¾åƒçš„å®½åº¦ï¼Œ`240` æ˜¯å›¾åƒçš„é«˜åº¦ï¼Œ`image.Format.FMT_RGB888` æ˜¯å›¾åƒçš„æ ¼å¼ï¼Œæ ¼å¼å‚æ•°å¯ä»¥çœç•¥ï¼Œé»˜è®¤æ˜¯`image.Format.FMT_RGB888`ã€‚ è¿™é‡Œé€šè¿‡`img.width()`ã€`img.height()`ã€`img.format()`å¯ä»¥è·å–å›¾åƒçš„å®½åº¦ã€é«˜åº¦å’Œæ ¼å¼ã€‚ ## æ˜¾ç¤ºåˆ°å±å¹• MaixPy æä¾›äº†`maix.display.Display`ç±»ï¼Œå¯ä»¥æ–¹ä¾¿çš„æ˜¾ç¤ºå›¾åƒï¼š ```python from maix import image, display disp display.Display() img image.Image(320, 240, image.Format.FMT_RGB888) disp.show(img) ``` æ³¨æ„è¿™é‡Œå› ä¸ºæ²¡æœ‰å›¾åƒæ•°æ®ï¼Œæ‰€ä»¥æ˜¾ç¤ºçš„æ˜¯é»‘è‰²çš„å›¾åƒï¼Œä¿®æ”¹ç”»é¢çœ‹åæ–‡ã€‚ ## ä»æ–‡ä»¶ç³»ç»Ÿè¯»å–å›¾åƒ MaixPy æä¾›äº†`maix.image.load`æ–¹æ³•ï¼Œå¯ä»¥ä»æ–‡ä»¶ç³»ç»Ÿè¯»å–å›¾åƒï¼š ```python from maix import image img image.load(\"/root/image.jpg\") if img is None: raise Exception(f\"load image failed\") print(img) ``` æ³¨æ„è¿™é‡Œ`/root/image.jpg` æ˜¯æå‰ä¼ è¾“åˆ°äº†æ¿å­ä¸Šçš„ï¼Œæ–¹æ³•å¯ä»¥çœ‹å‰é¢çš„æ•™ç¨‹ã€‚ å¯ä»¥æ”¯æŒ `jpg` å’Œ `png` æ ¼å¼çš„å›¾åƒã€‚ ## ä¿å­˜å›¾åƒåˆ°æ–‡ä»¶ç³»ç»Ÿ MaixPy çš„`maix.image.Image`æä¾›äº†`save`æ–¹æ³•ï¼Œå¯ä»¥ä¿å­˜å›¾åƒåˆ°æ–‡ä»¶ç³»ç»Ÿï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) # do something with img img.save(\"/root/image.jpg\") ``` ## ç”»æ¡† `image.Image`æä¾›äº†`draw_rect`æ–¹æ³•ï¼Œå¯ä»¥åœ¨å›¾åƒä¸Šç”»æ¡†ï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) img.draw_rect(10, 10, 100, 100, image.Color.from_rgb(255, 0, 0)) ``` è¿™é‡Œçš„å‚æ•°ä¾æ¬¡æ˜¯ï¼š`x`, `y`, `w`, `h`, `color`ï¼Œ`x` å’Œ `y` æ˜¯æ¡†çš„å·¦ä¸Šè§’åæ ‡ï¼Œ`w` å’Œ `h` æ˜¯æ¡†çš„å®½åº¦å’Œé«˜åº¦ï¼Œ`color` æ˜¯æ¡†çš„é¢œè‰²ï¼Œå¯ä»¥ä½¿ç”¨`image.Color.from_rgb`æ–¹æ³•åˆ›å»ºé¢œè‰²ã€‚ å¯ä»¥ç”¨`thickness`æŒ‡å®šæ¡†çš„çº¿å®½ï¼Œé»˜è®¤æ˜¯`1`ï¼Œ ä¹Ÿå¯ä»¥ç”»å®å¿ƒæ¡†ï¼Œä¼ å‚ `thickness 1` å³å¯ï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) img.draw_rect(10, 10, 100, 100, (255, 0, 0), thickness 1) ``` ## å†™å­—ç¬¦ä¸² `image.Image`æä¾›äº†`draw_string`æ–¹æ³•ï¼Œå¯ä»¥åœ¨å›¾åƒä¸Šå†™å­—ï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) img.draw_string(10, 10, \"Hello MaixPy\", image.Color.from_rgb(255, 0, 0)) ``` è¿™é‡Œçš„å‚æ•°ä¾æ¬¡æ˜¯ï¼š`x`, `y`, `text`, `color`ï¼Œ`x` å’Œ `y` æ˜¯æ–‡å­—çš„å·¦ä¸Šè§’åæ ‡ï¼Œ`text` æ˜¯è¦å†™çš„æ–‡å­—ï¼Œ`color` æ˜¯æ–‡å­—çš„é¢œè‰²ï¼Œå¯ä»¥ä½¿ç”¨`image.Color.from_rgb`æ–¹æ³•åˆ›å»ºé¢œè‰²ã€‚ è¿˜å¯ä»¥æ”¾å¤§å­—ä½“ï¼Œä¼ å‚ `scale` å³å¯ï¼š ```python img.draw_string(10, 10, \"Hello MaixPy\", image.Color.from_rgb(255, 0, 0), scale 2) ``` è·å–å­—ä½“çš„å®½åº¦å’Œé«˜åº¦ï¼š ```python w, h image.string_size(\"Hello MaixPy\", scale 2) print(w, h) ``` **æ³¨æ„**è¿™é‡Œ`scale`æ˜¯æ”¾å¤§å€æ•°ï¼Œé»˜è®¤æ˜¯`1`ï¼Œå’Œ`draw_string`åº”è¯¥ä¿æŒä¸€è‡´ã€‚ ## ä¸­æ–‡æ”¯æŒå’Œè‡ªå®šä¹‰å­—ä½“ `image` æ¨¡å—æ”¯æŒåŠ è½½`ttf/otf`å­—ä½“ï¼Œé»˜è®¤å­—ä½“åªæ”¯æŒè‹±æ–‡ï¼Œå¦‚æœè¦æ˜¾ç¤ºä¸­æ–‡æˆ–è€…è‡ªå®šä¹‰å­—ä½“å¯ä»¥å…ˆä¸‹è½½å­—ä½“æ–‡ä»¶åˆ°è®¾å¤‡ä¸Šï¼Œç„¶ååŠ è½½å­—ä½“ã€‚ ç³»ç»Ÿä¹Ÿå†…ç½®äº†å‡ ä¸ªå­—ä½“ï¼Œåœ¨`/maixapp/share/font`ç›®å½•ä¸‹é¢ï¼Œä»£ç ç¤ºä¾‹ï¼š ```python from maix import image, display, app, time image.load_font(\"sourcehansans\", \"/maixapp/share/font/SourceHanSansCN Regular.otf\", size 32) print(\"fonts:\", image.fonts()) image.set_default_font(\"sourcehansans\") disp display.Display() img image.Image(disp.width(), disp.height()) img.draw_string(2, 2, \"ä½ å¥½ï¼Hello, world!\", image.Color.from_rgba(255, 0, 0, 0.8)) disp.show(img) while not app.need_exit(): time.sleep(1) ``` åŠ è½½å­—ä½“æ–‡ä»¶ï¼Œç„¶åè®¾ç½®é»˜è®¤çš„å­—ä½“ï¼Œä¹Ÿå¯ä»¥ä¸è®¾ç½®é»˜è®¤çš„å­—ä½“ï¼Œåœ¨å†™å­—çš„å‡½æ•°å‚æ•°è®¾ç½®: ```python img.draw_string(2, 2, \"ä½ å¥½ï¼Hello, world!\", image.Color.from_rgba(255, 0, 0, 0.8), font \"sourcehansans\") ``` æ³¨æ„ `string_size`æ–¹æ³•ä¹Ÿä¼šä½¿ç”¨è®¾ç½®çš„é»˜è®¤å­—ä½“è®¡ç®—å¤§å°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡`font`å‚æ•°å•ç‹¬è®¾ç½®è¦è®¡ç®—å¤§å°çš„å­—ä½“ã€‚ ## ç”»çº¿ `image.Image`æä¾›äº†`draw_line`æ–¹æ³•ï¼Œå¯ä»¥åœ¨å›¾åƒä¸Šç”»çº¿ï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) img.draw_line(10, 10, 100, 100, image.Color.from_rgb(255, 0, 0)) ``` è¿™é‡Œçš„å‚æ•°ä¾æ¬¡æ˜¯ï¼š`x1`, `y1`, `x2`, `y2`, `color`ï¼Œ`x1` å’Œ `y1` æ˜¯çº¿çš„èµ·ç‚¹åæ ‡ï¼Œ`x2` å’Œ `y2` æ˜¯çº¿çš„ç»ˆç‚¹åæ ‡ï¼Œ`color` æ˜¯çº¿çš„é¢œè‰²ï¼Œå¯ä»¥ä½¿ç”¨`image.Color.from_rgb`æ–¹æ³•åˆ›å»ºé¢œè‰²ã€‚ ## ç”»åœ† `image.Image`æä¾›äº†`draw_circle`æ–¹æ³•ï¼Œå¯ä»¥åœ¨å›¾åƒä¸Šç”»åœ†ï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) img.draw_circle(100, 100, 50, image.Color.from_rgb(255, 0, 0)) ``` è¿™é‡Œçš„å‚æ•°ä¾æ¬¡æ˜¯ï¼š`x`, `y`, `r`, `color`ï¼Œ`x` å’Œ `y` æ˜¯åœ†å¿ƒåæ ‡ï¼Œ`r` æ˜¯åŠå¾„ï¼Œ`color` æ˜¯åœ†çš„é¢œè‰²ï¼Œå¯ä»¥ä½¿ç”¨`image.Color.from_rgb`æ–¹æ³•åˆ›å»ºé¢œè‰²ã€‚ ## ç¼©æ”¾å›¾åƒ `image.Image`æä¾›äº†`resize`æ–¹æ³•ï¼Œå¯ä»¥ç¼©æ”¾å›¾åƒï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) img_new img.resize(160, 120) print(img, img_new) ``` æ³¨æ„è¿™é‡Œ`resize`æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„å›¾åƒå¯¹è±¡ï¼ŒåŸå›¾åƒä¸å˜ã€‚ ## å‰ªè£å›¾åƒ `image.Image`æä¾›äº†`crop`æ–¹æ³•ï¼Œå¯ä»¥å‰ªè£å›¾åƒï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) img_new img.crop(10, 10, 100, 100) print(img, img_new) ``` æ³¨æ„è¿™é‡Œ`crop`æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„å›¾åƒå¯¹è±¡ï¼ŒåŸå›¾åƒä¸å˜ã€‚ ## æ—‹è½¬å›¾åƒ `image.Image`æä¾›äº†`rotate`æ–¹æ³•ï¼Œå¯ä»¥æ—‹è½¬å›¾åƒï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) img_new img.rotate(90) print(img, img_new) ``` æ³¨æ„è¿™é‡Œ`rotate`æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„å›¾åƒå¯¹è±¡ï¼ŒåŸå›¾åƒä¸å˜ã€‚ ## æ‹·è´å›¾åƒ `image.Image`æä¾›äº†`copy`æ–¹æ³•ï¼Œå¯ä»¥æ‹·è´ä¸€ä»½ç‹¬ç«‹çš„å›¾åƒï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) img_new img.copy() print(img, img_new) ``` ## ä»¿å°„å˜æ¢ `image.Image`æä¾›äº†`affine`æ–¹æ³•ï¼Œå¯ä»¥è¿›è¡Œä»¿å°„å˜æ¢ï¼Œå³æä¾›å½“å‰å›¾ä¸­ä¸‰ä¸ªåŠä»¥ä¸Šçš„ç‚¹åæ ‡ï¼Œä»¥åŠç›®æ ‡å›¾ä¸­å¯¹åº”çš„ç‚¹åæ ‡ï¼Œå¯ä»¥è‡ªåŠ¨è¿›è¡Œå›¾åƒçš„æ—‹è½¬ã€ç¼©æ”¾ã€å¹³ç§»ç­‰æ“ä½œå˜æ¢åˆ°ç›®æ ‡å›¾åƒï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) img_new img.affine([(10, 10), (100, 10), (10, 100)], [(10, 10), (100, 20), (20, 100)]) print(img, img_new) ``` æ›´å¤šå‚æ•°å’Œç”¨æ³•è¯·å‚è€ƒ API æ–‡æ¡£ã€‚ ## ç”»å…³é”®ç‚¹ `image.Image`æä¾›äº†`draw_keypoints`æ–¹æ³•ï¼Œå¯ä»¥åœ¨å›¾åƒä¸Šç”»å…³é”®ç‚¹ï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) keypoints [10, 10, 100, 10, 10, 100] img.draw_keypoints(keypoints, image.Color.from_rgb(255, 0, 0), size 10, thickness 1, fill False) ``` åœ¨åæ ‡`(10, 10)`ã€`(100, 10)`ã€`(10, 100)`ç”»ä¸‰ä¸ªçº¢è‰²çš„å…³é”®ç‚¹ï¼Œå…³é”®ç‚¹çš„å¤§å°æ˜¯`10`ï¼Œçº¿å®½æ˜¯`1`ï¼Œä¸å¡«å……ã€‚ ## ç”»åå­— `image.Image`æä¾›äº†`draw_cross`æ–¹æ³•ï¼Œå¯ä»¥åœ¨å›¾åƒä¸Šç”»åå­—ï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) img.draw_cross(100, 100, image.Color.from_rgb(255, 0, 0), size 5, thickness 1) ``` åœ¨åæ ‡`(100, 100)`ç”»ä¸€ä¸ªçº¢è‰²çš„åå­—ï¼Œåå­—çš„å»¶é•¿å¤§å°æ˜¯`5`ï¼Œæ‰€ä»¥çº¿æ®µé•¿åº¦ä¸º`2 * size + thickness`, çº¿å®½æ˜¯`1`ã€‚ ## ç”»ç®­å¤´ `image.Image`æä¾›äº†`draw_arrow`æ–¹æ³•ï¼Œå¯ä»¥åœ¨å›¾åƒä¸Šç”»ç®­å¤´ï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) img.draw_arrow(10, 10, 100, 100, image.Color.from_rgb(255, 0, 0), thickness 1) ``` åœ¨åæ ‡`(10, 10)`ç”»ä¸€ä¸ªçº¢è‰²çš„ç®­å¤´ï¼Œç®­å¤´çš„ç»ˆç‚¹æ˜¯`(100, 100)`ï¼Œçº¿å®½æ˜¯`1`ã€‚ ## ç”»å›¾ `image.Image`æä¾›äº†`draw_image`æ–¹æ³•ï¼Œå¯ä»¥åœ¨å›¾åƒä¸Šç”»å›¾ï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) img2 image.Image(100, 100, image.Format.FMT_RGB888) img2.draw_rect(10, 10, 90, 90, image.Color.from_rgb(255, 0, 0)) img.draw_image(10, 10, img2) ``` ## è½¬æ¢æ ¼å¼ `image.Image`æä¾›äº†`to_format`æ–¹æ³•ï¼Œå¯ä»¥è½¬æ¢å›¾åƒæ ¼å¼ï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) img_new img.to_format(image.Format.FMT_BGR888) print(img, img_new) img_jpg img.to_format(image.Format.FMT_JPEG) print(img, img_new) ``` æ³¨æ„è¿™é‡Œ`to_format`æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„å›¾åƒå¯¹è±¡ï¼ŒåŸå›¾åƒä¸å˜ã€‚ ## maix.image.Image å¯¹è±¡å’Œ Numpy/OpenCV æ ¼å¼äº’ç›¸è½¬æ¢ è§[MaixPy ä½¿ç”¨ OpenCV æ–‡æ¡£](./opencv.html) ## å’Œ bytes æ•°æ®äº’ç›¸è½¬æ¢ `image.Image`æä¾›äº†`to_bytes`æ–¹æ³•ï¼Œå¯ä»¥è½¬æ¢å›¾åƒä¸º`bytes`æ•°æ®ï¼š ```python from maix import image img image.Image(320, 240, image.Format.FMT_RGB888) data img.to_bytes() print(type(data), len(data), img.data_size()) img_jpeg image.from_bytes(320, 240, image.Format.FMT_RGB888, data) print(img_jpeg) img img_jpeg.to_format(image.Format.FMT_RGB888) print(img) ``` è¿™é‡Œ`to_bytes`è·å¾—ä¸€ä¸ªæ–°çš„`bytes`å¯¹è±¡ï¼Œæ˜¯ç‹¬ç«‹çš„å†…å­˜ï¼Œä¸ä¼šå½±å“åŸå›¾ã€‚ `image.Image`æ„é€ å‡½æ•°ä¸­ä¼ å…¥`data`å‚æ•°å¯ä»¥ç›´æ¥ä»`bytes`æ•°æ®æ„é€ å›¾åƒå¯¹è±¡ï¼Œæ³¨æ„æ–°çš„å›¾åƒä¹Ÿæ˜¯ç‹¬ç«‹çš„å†…å­˜ï¼Œä¸ä¼šå½±å“åˆ°`data`ã€‚ å› ä¸ºæ¶‰åŠåˆ°å†…å­˜æ‹·è´ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒè€—æ—¶ï¼Œä¸å»ºè®®é¢‘ç¹ä½¿ç”¨ã€‚ > å¦‚æœä½ æƒ³ç”¨ä¸æ‹·è´çš„æ–¹å¼ä¼˜åŒ–ç¨‹åºï¼ˆä¸å»ºè®®è½»æ˜“ä½¿ç”¨ï¼Œå†™ä¸å¥½ä»£ç ä¼šå¯¼è‡´ç¨‹åºå®¹æ˜“å´©æºƒï¼Œï¼‰ï¼Œè¯·çœ‹ API æ–‡æ¡£ã€‚ ## æ›´å¤šåŸºç¡€ API ä½¿ç”¨æ–¹æ³• æ›´å¤š API ä½¿ç”¨æ–¹æ³•è¯·å‚è€ƒ [maix.image](/api/maix/image.html) æ¨¡å—çš„æ–‡æ¡£ã€‚"},"/maixpy/doc/zh/vision/touchscreen.html":{"title":"MaixPy / MaixCAM è§¦æ‘¸å±ä½¿ç”¨æ–¹æ³•","content":" title: MaixPy / MaixCAM è§¦æ‘¸å±ä½¿ç”¨æ–¹æ³• ## ç®€ä»‹ å¯¹äº MaixCAM è‡ªå¸¦äº†ä¸€ä¸ªè§¦æ‘¸å±ï¼Œå†™åº”ç”¨æ—¶é…åˆè§¦æ‘¸å±å¯ä»¥å®ç°å¾ˆå¤šæœ‰è¶£åº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ API è¯»å–åˆ°è§¦æ‘¸å±çš„ç‚¹æŒ‰æ“ä½œã€‚ ## MaixPy è¯»å–è§¦æ‘¸ MaixPy æä¾›äº†ä¸€ä¸ªç®€å•çš„`maix.touchscreen.TouchScreen` ç±»æ¥è¯»å–ï¼Œä¸¾ä¾‹ï¼š ```python from maix import touchscreen, app, time ts touchscreen.TouchScreen() pressed_already False last_x 0 last_y 0 last_pressed False while not app.need_exit(): x, y, pressed ts.read() if x ! last_x or y ! last_y or pressed ! last_pressed: print(x, y, pressed) last_x x last_y y last_pressed pressed if pressed: pressed_already True else: if pressed_already: print(f\"clicked, x: {x}, y: {y}\") pressed_already False time.sleep_ms(1) # sleep some time to free some CPU usage ``` ## é…åˆå±å¹•å®ç°äº¤äº’ é…åˆå±å¹•å¯ä»¥åšå‡ºä¸€äº›ç”¨æˆ·äº¤äº’çš„å†…å®¹ï¼Œæ›´å¤šå¯ä»¥çœ‹[MaixPy/examples/vision/touchscreen](https://github.com/sipeed/MaixPy) ç›®å½•ä¸‹ä¾‹ç¨‹ã€‚ å¦‚å‰é¢çš„æ–‡ç« ä»‹ç»çš„ï¼Œæˆ‘ä»¬è¦å¾€å±å¹•æ˜¾ç¤ºå†…å®¹ï¼Œä¸€èˆ¬æ˜¯å¾—åˆ°ä¸€ä¸ª`maix.image.Image`å¯¹è±¡ï¼Œç„¶åè°ƒç”¨`disp.show(img)`æ¥æ˜¾ç¤ºè¿™å¼ å›¾åƒã€‚ å®ç°ä¸€ä¸ªæŒ‰é’®çš„æœ€åŸå§‹å’Œç®€å•çš„æ–¹æ³•å°±æ˜¯åœ¨è¿™ä¸ªå›¾åƒä¸Šç”»ä¸€ä¸ªæŒ‰é’®ï¼Œç„¶ååˆ¤æ–­ç”¨æˆ·è§¦æ‘¸åˆ°è¿™ä¸ªåŒºåŸŸå°±ç®—æ˜¯è§¦å‘äº†æŒ‰ä¸‹äº‹ä»¶ï¼Œæ³¨æ„å›¾åƒçš„å¤§å°è¦å’Œå±å¹•çš„å¤§å°ä¿æŒä¸€è‡´ï¼š ```python from maix import touchscreen, app, time, display, image ts touchscreen.TouchScreen() disp display.Display() img image.Image(disp.width(), disp.height()) # draw exit button exit_label \"< Exit\" size image.string_size(exit_label) exit_btn_pos [0, 0, 8*2 + size.width(), 12 * 2 + size.height()] img.draw_string(8, 12, exit_label, image.COLOR_WHITE) img.draw_rect(exit_btn_pos[0], exit_btn_pos[1], exit_btn_pos[2], exit_btn_pos[3], image.COLOR_WHITE, 2) def is_in_button(x, y, btn_pos): return x > btn_pos[0] and x < btn_pos[0] + btn_pos[2] and y > btn_pos[1] and y < btn_pos[1] + btn_pos[3] while not app.need_exit(): x, y, pressed ts.read() if is_in_button(x, y, exit_btn_pos): app.set_exit_flag(True) img.draw_circle(x, y, 1, image.Color.from_rgb(255, 255, 255), 2) disp.show(img) ``` ## å±å¹•å’Œå›¾åƒå¤§å°ä¸ä¸€æ ·æ—¶å¦‚ä½•å¤„ç† ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ° `img` å¤§å°å’Œå±å¹•å¤§å°ä¸€æ ·ï¼Œå¦‚æœä½ çš„`img`å’Œå±å¹•å¤§å°ä¸ä¸€æ ·æ€ä¹ˆåŠï¼ˆæ¯”å¦‚ä¸Šé¢ä½¿ç”¨`img image.Image(240, 240)`ï¼Œæ¯”å¦‚å±å¹•æ˜¯`640x480`ï¼Œ å›¾åƒæ˜¯`240x240`ï¼Œ`disp.show(img)`çš„é»˜è®¤è¡Œä¸ºæ˜¯`image.Fit.FIT_CONTAIN`ï¼Œ å³æŠŠå›¾ç‰‡æ”¾å¤§åˆ°`480x480`ç„¶åè¾¹ä¸Šå¡«å……é»‘è‰²ï¼Œå¦‚æœä½ åœ¨`240x240`çš„å›¾ä¸Šç”»äº†æŒ‰é’®ï¼Œæ¯”å¦‚åæ ‡`(0, 0, 60, 40)`ï¼Œé‚£ä¹ˆæŒ‰é’®ä¹Ÿä¼šè‡ªåŠ¨è¢«æ”¾å¤§ï¼Œæ‰€ä»¥è§¦æ‘¸åˆ¤æ–­çš„åæ ‡å°±ä¸èƒ½ç”¨`(0, 0, 60, 40)`ï¼Œéœ€è¦ç”¨`((640 480) / 2, 0, 480/240*60, 480/240*40)`ï¼Œ å³`(80, 0, 120, 80)`ã€‚ è¿™é‡Œä¸ºäº†æ–¹ä¾¿ç¼©æ”¾å›¾åƒæ—¶ï¼Œå¿«é€Ÿè®¡ç®—æºå›¾åƒçš„ç‚¹æˆ–è€…çŸ©å½¢æ¡† åœ¨ ç¼©æ”¾åçš„ç›®æ ‡å›¾åƒçš„ä½ç½®å’Œå¤§å°ï¼Œæä¾›äº†`image.resize_map_pos`å‡½æ•°æ¥è¿›è¡Œæ­¤è®¡ç®—è¿‡ç¨‹ã€‚ ```python from maix import touchscreen, app, time, display, image ts touchscreen.TouchScreen() disp display.Display() img image.Image(240, 240) img.draw_rect(0, 0, img.width(), img.height(), image.COLOR_WHITE) # draw exit button exit_label \"< Exit\" size image.string_size(exit_label) exit_btn_pos [0, 0, 8*2 + size.width(), 12 * 2 + size.height()] img.draw_string(8, 12, exit_label, image.COLOR_WHITE) img.draw_rect(exit_btn_pos[0], exit_btn_pos[1], exit_btn_pos[2], exit_btn_pos[3], image.COLOR_WHITE, 2) # å›¾åƒæŒ‰é”®åæ ‡æ˜ å°„åˆ°å±å¹•ä¸Šçš„åæ ‡ exit_btn_disp_pos image.resize_map_pos(img.width(), img.height(), disp.width(), disp.height(), image.Fit.FIT_CONTAIN, exit_btn_pos[0], exit_btn_pos[1], exit_btn_pos[2], exit_btn_pos[3]) def is_in_button(x, y, btn_pos): return x > btn_pos[0] and x < btn_pos[0] + btn_pos[2] and y > btn_pos[1] and y < btn_pos[1] + btn_pos[3] while not app.need_exit(): x, y, pressed ts.read() if is_in_button(x, y, exit_btn_disp_pos): app.set_exit_flag(True) # å±å¹•çš„åæ ‡æ˜ å°„å›å›¾åƒä¸Šå¯¹åº”çš„åæ ‡ï¼Œç„¶ååœ¨å›¾åƒä¸Šç”»ç‚¹ x, y image.resize_map_pos_reverse(img.width(), img.height(), disp.width(), disp.height(), image.Fit.FIT_CONTAIN, x, y) img.draw_circle(x, y, 1, image.Color.from_rgb(255, 255, 255), 2) disp.show(img, fit image.Fit.FIT_CONTAIN) ```"},"/maixpy/doc/zh/vision/customize_model_yolov5.html":{"title":"ä¸º MaixCAM MaixPy ç¦»çº¿è®­ç»ƒ YOLOv5 æ¨¡å‹ï¼Œè‡ªå®šä¹‰æ£€æµ‹ç‰©ä½“","content":" title: ä¸º MaixCAM MaixPy ç¦»çº¿è®­ç»ƒ YOLOv5 æ¨¡å‹ï¼Œè‡ªå®šä¹‰æ£€æµ‹ç‰©ä½“ update: date: 2024 6 20 version: v1.0 author: neucrack content: ç¼–å†™æ–‡æ¡£ ## ç®€ä»‹ é»˜è®¤å®˜æ–¹æä¾›äº† 80 ç§ç‰©ä½“æ£€æµ‹ï¼Œå¦‚æœä¸æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œå¯ä»¥è‡ªå·±è®­ç»ƒæ£€æµ‹çš„ç‰©ä½“ï¼Œä¸¤ç§æ–¹å¼ï¼š * ä½¿ç”¨ [MaixHub åœ¨çº¿è®­ç»ƒ](./maixhub_train.html)ï¼Œæ–¹ä¾¿å¿«æ·ï¼Œæ— éœ€è´­ä¹°æœåŠ¡å™¨ä¹Ÿæ— éœ€æ­å»ºç¯å¢ƒï¼Œç‚¹å‡ ä¸‹é¼ æ ‡å°±å®Œæˆã€‚ * åœ¨è‡ªå·±çš„ç”µè„‘æˆ–è€…æœåŠ¡å™¨æ­å»ºè®­ç»ƒç¯å¢ƒè®­ç»ƒã€‚ å‰è€…å¥½å¤„æ˜¯ç®€å•å¿«é€Ÿï¼Œåè€…æ˜¯ä½¿ç”¨è‡ªå·±ç”µè„‘ï¼Œè®­ç»ƒå›¾ç‰‡æ•°é‡ä¸å—é™åˆ¶ï¼Œä½†æ˜¯åè€…éš¾åº¦ä¼šå¤§éå¸¸å¤šã€‚ **æ³¨æ„ï¼š** æœ¬æ–‡è®²äº†å¦‚ä½•è‡ªå®šä¹‰è®­ç»ƒï¼Œä½†æ˜¯æœ‰ä¸€äº›åŸºç¡€çŸ¥è¯†é»˜è®¤ä½ å·²ç»æ‹¥æœ‰ï¼Œå¦‚æœæ²¡æœ‰è¯·è‡ªè¡Œå­¦ä¹ ï¼š * æœ¬æ–‡ä¸ä¼šè®²è§£å¦‚ä½•å®‰è£…è®­ç»ƒç¯å¢ƒï¼Œè¯·è‡ªè¡Œæœç´¢å®‰è£…ï¼ˆPytorch ç¯å¢ƒå®‰è£…ï¼‰æµ‹è¯•ã€‚ * æœ¬æ–‡ä¸ä¼šè®²è§£æœºå™¨å­¦ä¹ çš„åŸºæœ¬æ¦‚å¿µã€linuxç›¸å…³åŸºç¡€ä½¿ç”¨çŸ¥è¯†ã€‚ å¦‚æœä½ è§‰å¾—æœ¬æ–‡å“ªé‡Œéœ€è¦æ”¹è¿›ï¼Œæ¬¢è¿ç‚¹å‡»å³ä¸Šè§’`ç¼–è¾‘æœ¬æ–‡`è´¡çŒ®å¹¶æäº¤ æ–‡æ¡£ PRã€‚ ## æµç¨‹å’Œæœ¬æ–‡ç›®æ ‡ è¦æƒ³æˆ‘ä»¬çš„æ¨¡å‹èƒ½åœ¨ MaixPy (MaixCAM)ä¸Šä½¿ç”¨ï¼Œéœ€è¦ç»å†ä»¥ä¸‹è¿‡ç¨‹ï¼š * æ­å»ºè®­ç»ƒç¯å¢ƒï¼Œæœ¬æ–‡ç•¥è¿‡ï¼Œè¯·è‡ªè¡Œæœç´¢ pytorch è®­ç»ƒç¯å¢ƒæ­å»ºã€‚ * æ‹‰å– [yolov5](https://github.com/ultralytics/yolov5) æºç åˆ°æœ¬åœ°ã€‚ * å‡†å¤‡æ•°æ®é›†ï¼Œå¹¶åšæˆ yolov5 é¡¹ç›®éœ€è¦çš„æ ¼å¼ã€‚ * è®­ç»ƒæ¨¡å‹ï¼Œå¾—åˆ°ä¸€ä¸ª `onnx` æ¨¡å‹æ–‡ä»¶ï¼Œä¹Ÿæ˜¯æœ¬æ–‡çš„æœ€ç»ˆè¾“å‡ºæ–‡ä»¶ã€‚ * å°†`onnx`æ¨¡å‹è½¬æ¢æˆ MaixPy æ”¯æŒçš„ `MUD` æ–‡ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹åœ¨[MaixCAM æ¨¡å‹è½¬æ¢](../ai_model_converter/maixcam.html) ä¸€æ–‡ç§æœ‰è¯¦ç»†ä»‹ç»ã€‚ * ä½¿ç”¨ MaixPy åŠ è½½æ¨¡å‹è¿è¡Œã€‚ ## å‚è€ƒæ–‡ç«  å› ä¸ºæ˜¯æ¯”è¾ƒé€šç”¨çš„æ“ä½œè¿‡ç¨‹ï¼Œæœ¬æ–‡åªç»™ä¸€ä¸ªæµç¨‹ä»‹ç»ï¼Œå…·ä½“ç»†èŠ‚å¯ä»¥è‡ªè¡Œçœ‹ **[YOLOv5 å®˜æ–¹ä»£ç å’Œæ–‡æ¡£](https://github.com/ultralytics/yolov5)**(**æ¨è**)ï¼Œä»¥åŠæœç´¢å…¶è®­ç»ƒæ•™ç¨‹ï¼Œæœ€ç»ˆå¯¼å‡º onnx æ–‡ä»¶å³å¯ã€‚ è¿™é‡Œæœ‰ MaixHub çš„ç¤¾åŒºçš„å‡ ç¯‡æ–‡ç« ï¼š * [maixcaméƒ¨ç½²yolov5s è‡ªå®šä¹‰æ¨¡å‹](https://maixhub.com/share/23) * [ã€æµç¨‹åˆ†äº«ã€‘YOLOv5è®­ç»ƒè‡ªå®šä¹‰æ•°æ®é›†å¹¶éƒ¨ç½²åœ¨Maixcamä¸Š](https://maixhub.com/share/32) * [yolov5çŒ«ç‹—è¯†åˆ«æ¨¡å‹â€”â€”å…è´¹äº‘è®­ç»ƒï¼ˆæ–°æ‰‹ä¹Ÿå¯å¤ç°ï¼‰](https://maixhub.com/share/25) å¦‚æœä½ æœ‰è§‰å¾—è®²å¾—ä¸é”™çš„æ–‡ç« æ¬¢è¿ä¿®æ”¹æœ¬æ–‡å¹¶æäº¤ PRã€‚ ## YOLOv5 å¯¼å‡º ONNX æ¨¡å‹æ–‡ä»¶ YOLOv5 æä¾›äº†å¯¼å‡ºé€‰é¡¹ï¼Œç›´æ¥åœ¨`yolov5`ç›®å½•ä¸‹æ‰§è¡Œ ```shell python export.py weights ../yolov5s.pt include onnx img 224 320 ``` è¿™é‡ŒåŠ è½½ pt å‚æ•°æ–‡ä»¶ï¼Œè½¬æ¢æˆ onnxï¼Œ åŒæ—¶æŒ‡å®šåˆ†è¾¨ç‡ï¼Œæ³¨æ„è¿™é‡Œ é«˜åœ¨å‰ï¼Œå®½åœ¨åã€‚ æ¨¡å‹è®­ç»ƒçš„æ—¶å€™ç”¨çš„`640x640`ï¼Œæˆ‘ä»¬é‡æ–°æŒ‡å®šäº†åˆ†è¾¨ç‡æ–¹ä¾¿æå‡è¿è¡Œé€Ÿåº¦ï¼Œè¿™é‡Œä½¿ç”¨`320x224`çš„åŸå› æ˜¯å’Œ MaixCAM çš„å±å¹•æ¯”ä¾‹æ¯”è¾ƒç›¸è¿‘æ–¹ä¾¿æ˜¾ç¤ºï¼Œå…·ä½“å¯ä»¥æ ¹æ®ä½ çš„éœ€æ±‚è®¾ç½®å°±å¥½äº†ã€‚ ## MaixCAM MUD æ–‡ä»¶ å°† onnx è½¬æ¢ä¸º `mud` æ ¼å¼çš„æ¨¡å‹æ–‡ä»¶æ—¶ï¼Œå‚ç…§ [MaixCAM æ¨¡å‹è½¬æ¢](../ai_model_converter/maixcam.html) å³å¯ï¼Œæœ€ç»ˆä¼šå¾—åˆ°ä¸€ä¸ª`mud`æ–‡ä»¶å’Œ`cvimodel`æ–‡ä»¶ï¼Œå…¶ä¸­ `mud` æ–‡ä»¶å†…å®¹ï¼š ```ini [basic] type cvimodel model yolov8n.cvimodel [extra] model_type yolov8 input_type rgb mean 0, 0, 0 scale 0.00392156862745098, 0.00392156862745098, 0.00392156862745098 labels person, bicycle, car, motorcycle, airplane, bus, train, truck, boat, traffic light, fire hydrant, stop sign, parking meter, bench, bird, cat, dog, horse, sheep, cow, elephant, bear, zebra, giraffe, backpack, umbrella, handbag, tie, suitcase, frisbee, skis, snowboard, sports ball, kite, baseball bat, baseball glove, skateboard, surfboard, tennis racket, bottle, wine glass, cup, fork, knife, spoon, bowl, banana, apple, sandwich, orange, broccoli, carrot, hot dog, pizza, donut, cake, chair, couch, potted plant, bed, dining table, toilet, tv, laptop, mouse, remote, keyboard, cell phone, microwave, oven, toaster, sink, refrigerator, book, clock, vase, scissors, teddy bear, hair drier, toothbrush ``` æ ¹æ®ä½ è®­ç»ƒçš„å†…å®¹æ›¿æ¢å‚æ•°å³å¯ï¼Œæ¯”å¦‚ä½ è®­ç»ƒæ£€æµ‹`0~9`æ•°å­—ï¼Œé‚£ä¹ˆåªéœ€è¦æ›¿æ¢`labels 0,1,2,3,4,5,6,7,8,9` å³å¯ï¼Œ ç„¶åè¿è¡Œæ¨¡å‹æ—¶å°†ä¸¤ä¸ªæ–‡ä»¶æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹åŠ è½½`mud`æ–‡ä»¶å³å¯ã€‚ ## ä¸Šä¼ åˆ†äº«åˆ° MaixHub åˆ° [MaixHub æ¨¡å‹åº“](https://maixhub.com/model/zoo?platform maixcam) ä¸Šä¼ å¹¶åˆ†äº«ä½ çš„æ¨¡å‹ï¼Œå¯ä»¥å¤šæä¾›å‡ ä¸ªåˆ†è¾¨ç‡ä¾›å¤§å®¶é€‰æ‹©ã€‚"},"/maixpy/doc/zh/vision/line_tracking.html":{"title":"MaixCAM MaixPy å¯»æ‰¾ç›´çº¿","content":" title: MaixCAM MaixPy å¯»æ‰¾ç›´çº¿ update: date: 2024 05 09 author: lxowalle version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ é˜…è¯»æœ¬æ–‡å‰ï¼Œç¡®ä¿å·²ç»çŸ¥æ™“å¦‚ä½•å¼€å‘MaixCAMï¼Œè¯¦æƒ…è¯·é˜…è¯»[å¿«é€Ÿå¼€å§‹](../index.html) ## ç®€ä»‹ åœ¨è§†è§‰åº”ç”¨ä¸­ï¼Œåœ¨å·¡è¿¹å°è½¦ã€å·¡çº¿æœºå™¨äººç­‰åº”ç”¨ä¸­ç»å¸¸éœ€è¦å¯»æ‰¾çº¿æ¡çš„åŠŸèƒ½ã€‚æœ¬æ–‡å°†ä»‹ç»: å¦‚ä½•ä½¿ç”¨MaixPyæ¥å®ç°å·¡çº¿åŠŸèƒ½ å¦‚ä½•ä½¿ç”¨MaixCamçš„é»˜è®¤åº”ç”¨ç¨‹åºå·¡çº¿ ## å¦‚ä½•ä½¿ç”¨MaixPyæ¥å¯»æ‰¾ç›´çº¿ MaixPyçš„ `maix.image.Image`ä¸­æä¾›äº†`get_regression`æ–¹æ³•æ¥å¯»æ‰¾ç›´çº¿ ### ä»£ç ç¤ºä¾‹ ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå®ç°å¯»æ‰¾å¹¶ç”»å‡ºç›´çº¿ ```python from maix import camera, display, image cam camera.Camera(320, 240) disp display.Display() # thresholds [[0, 80, 40, 80, 10, 80]] # red thresholds [[0, 80, 120, 10, 0, 30]] # green # thresholds [[0, 80, 30, 100, 120, 60]] # blue while 1: img cam.read() lines img.get_regression(thresholds, area_threshold 100) for a in lines: img.draw_line(a.x1(), a.y1(), a.x2(), a.y2(), image.COLOR_GREEN, 2) theta a.theta() rho a.rho() if theta > 90: theta 270 theta else: theta 90 theta img.draw_string(0, 0, \"theta: \" + str(theta) + \", rho: \" + str(rho), image.COLOR_BLUE) disp.show(img) ``` æ­¥éª¤ï¼š 1. å¯¼å…¥imageã€cameraã€displayæ¨¡å— ```python from maix import image, camera, display ``` 2. åˆå§‹åŒ–æ‘„åƒå¤´å’Œæ˜¾ç¤º ```python cam camera.Camera(320, 240)\t# åˆå§‹åŒ–æ‘„åƒå¤´ï¼Œè¾“å‡ºåˆ†è¾¨ç‡320x240 RGBæ ¼å¼ disp display.Display() ``` 3. ä»æ‘„åƒå¤´è·å–å›¾ç‰‡å¹¶æ˜¾ç¤º ```python while 1: img cam.read() disp.show(img) ``` 4. è°ƒç”¨`get_regression`æ–¹æ³•å¯»æ‰¾æ‘„åƒå¤´å›¾ç‰‡ä¸­çš„ç›´çº¿ï¼Œå¹¶ç”»åˆ°å±å¹•ä¸Š ```python lines img.get_regression(thresholds, area_threshold 100) for a in lines: img.draw_line(a.x1(), a.y1(), a.x2(), a.y2(), image.COLOR_GREEN, 2) theta a.theta() rho a.rho() if theta > 90: theta 270 theta else: theta 90 theta img.draw_string(0, 0, \"theta: \" + str(theta) + \", rho: \" + str(rho), image.COLOR_BLUE) ``` `img`æ˜¯é€šè¿‡`cam.read()`è¯»å–åˆ°çš„æ‘„åƒå¤´å›¾åƒï¼Œå½“åˆå§‹åŒ–çš„æ–¹å¼ä¸º`cam camera.Camera(320, 240)`æ—¶ï¼Œ`img`å¯¹è±¡æ˜¯ä¸€å¼ åˆ†è¾¨ç‡ä¸º320x240çš„RGBå›¾ã€‚ `img.get_regression`ç”¨æ¥å¯»æ‰¾ç›´çº¿ï¼Œ `thresholds` æ˜¯ä¸€ä¸ªé¢œè‰²é˜ˆå€¼åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªé¢œè‰²é˜ˆå€¼ï¼ŒåŒæ—¶æ‰¾åˆ°å¤šä¸ªé˜ˆå€¼å°±ä¼ å…¥å¤šä¸ªï¼Œæ¯ä¸ªé¢œè‰²é˜ˆå€¼çš„æ ¼å¼ä¸º `[L_MIN, L_MAX, A_MIN, A_MAX, B_MIN, B_MAX]`ï¼Œè¿™é‡Œçš„ `L`ã€`A`ã€`B` æ˜¯`LAB`é¢œè‰²ç©ºé—´çš„ä¸‰ä¸ªé€šé“ï¼Œ`L` é€šé“æ˜¯äº®åº¦ï¼Œ`A` é€šé“æ˜¯çº¢ç»¿é€šé“ï¼Œ`B` é€šé“æ˜¯è“é»„é€šé“ã€‚`pixels_threshold`æ˜¯ä¸€ä¸ªåƒç´ é¢ç§¯çš„é˜ˆå€¼ï¼Œç”¨æ¥è¿‡æ»¤ä¸€äº›ä¸éœ€è¦ç›´çº¿ã€‚ `for a in lines`ç”¨æ¥éå†è¿”å›çš„`Line`å¯¹è±¡ï¼Œ å…¶ä¸­`a`å°±æ˜¯å½“å‰çš„`Line`å¯¹è±¡ã€‚é€šå¸¸`get_regression`å‡½æ•°åªä¼šè¿”å›ä¸€ä¸ª`Line`å¯¹è±¡ï¼Œå¦‚æœéœ€è¦å¯»æ‰¾å¤šæ¡ç›´çº¿ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨`find_line`æ–¹æ³• ä½¿ç”¨`img.draw_line`æ¥ç”»å‡ºæ‰¾åˆ°çš„çº¿æ¡ï¼Œ`a.x1(), a.y1(), a.x2(), a.y2()`åˆ†åˆ«ä»£è¡¨ç›´çº¿ä¸¤ç«¯çš„åæ ‡ ä½¿ç”¨`img.draw_string`åœ¨å·¦ä¸Šè§’æ˜¾ç¤ºç›´çº¿ä¸xè½´çš„å¤¹è§’ï¼Œ `a.theta()`æ˜¯ç›´çº¿ä¸yè½´çš„å¤¹è§’ï¼Œ è¿™é‡Œä¸ºäº†æ–¹ä¾¿ç†è§£è½¬æ¢æˆç›´çº¿ä¸xè½´çš„å¤¹è§’`theta`ï¼Œ`a.rho()`æ˜¯åŸç‚¹ä¸ç›´çº¿çš„å‚çº¿çš„é•¿åº¦. 5. é€šè¿‡maixvisionè¿è¡Œä»£ç ï¼Œå°±å¯ä»¥å¯»çº¿å•¦ï¼Œçœ‹çœ‹æ•ˆæœå§ ![image 20240509110204007](../../../static/image/line_tracking_demo.jpg) ### å¸¸ç”¨å‚æ•°è¯´æ˜ åˆ—ä¸¾å¸¸ç”¨å‚æ•°è¯´æ˜ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯ä»¥å®ç°åº”ç”¨çš„å‚æ•°ï¼Œåˆ™éœ€è¦è€ƒè™‘æ˜¯å¦ä½¿ç”¨å…¶ä»–ç®—æ³•å®ç°ï¼Œæˆ–è€…åŸºäºç›®å‰ç®—æ³•çš„ç»“æœæ‰©å±•æ‰€éœ€çš„åŠŸèƒ½ å‚æ•° è¯´æ˜ ç¤ºä¾‹ thresholds åŸºäºlabé¢œè‰²ç©ºé—´çš„é˜ˆå€¼ï¼Œthreshold [[l_min, l_max, a_min, a_max, b_min, b_max]]ï¼Œåˆ†åˆ«è¡¨ç¤ºï¼š<br />äº®åº¦èŒƒå›´ä¸º[l_min, l_max]\\<br />ç»¿è‰²åˆ°çº¢è‰²çš„åˆ†é‡èŒƒå›´ä¸º[a_min, a_max]<br />è“è‰²åˆ°é»„è‰²çš„åˆ†é‡èŒƒå›´ä¸º[b_min, b_max]<br />å¯åŒæ—¶è®¾ç½®å¤šä¸ªé˜ˆå€¼ è®¾ç½®ä¸¤ä¸ªé˜ˆå€¼æ¥æ£€æµ‹çº¢è‰²å’Œç»¿è‰²<br />```img.find_blobs(threshold [[0, 80, 40, 80, 10, 80], [0, 80, 120, 10, 0, 30]])```<br />çº¢è‰²é˜ˆå€¼ä¸º[0, 80, 40, 80, 10, 80]<br />ç»¿è‰²é˜ˆå€¼ä¸º[0, 80, 120, 10, 0, 30] invert ä½¿èƒ½é˜ˆå€¼åè½¬ï¼Œä½¿èƒ½åä¼ å…¥é˜ˆå€¼ä¸å®é™…é˜ˆå€¼ç›¸åï¼Œé»˜è®¤ä¸ºFalse ä½¿èƒ½é˜ˆå€¼åè½¬<br />```img.find_blobs(invert True)``` roi è®¾ç½®ç®—æ³•è®¡ç®—çš„çŸ©å½¢åŒºåŸŸï¼Œroi [x, y, w, h]ï¼Œxï¼Œyè¡¨ç¤ºçŸ©å½¢åŒºåŸŸå·¦ä¸Šè§’åæ ‡ï¼Œwï¼Œhè¡¨ç¤ºçŸ©å½¢åŒºåŸŸçš„å®½åº¦å’Œé«˜åº¦ï¼Œé»˜è®¤ä¸ºæ•´å¼ å›¾ç‰‡ è®¡ç®—åæ ‡ä¸º(50,50)ï¼Œå®½å’Œé«˜ä¸º100çš„åŒºåŸŸ<br />```img.find_blobs(roi [50, 50, 100, 100])``` area_threshold è¿‡æ»¤åƒç´ é¢ç§¯å°äºarea_thresholdçš„ç›´çº¿ï¼Œå•ä½ä¸ºåƒç´ ç‚¹ï¼Œé»˜è®¤ä¸º10ã€‚è¯¥å‚æ•°å¯ç”¨äºè¿‡æ»¤ä¸€äº›æ— ç”¨çš„å°ç›´çº¿ è¿‡æ»¤é¢ç§¯å°äº1000çš„ç›´çº¿<br />```img.find_blobs(area_threshold 1000)``` pixels_threshold è¿‡æ»¤æœ‰æ•ˆåƒç´ ç‚¹å°äºpixels_thresholdçš„ç›´çº¿ï¼Œé»˜è®¤ä¸º10ã€‚è¯¥å‚æ•°å¯ç”¨äºè¿‡æ»¤ä¸€äº›æ— ç”¨çš„å°ç›´çº¿ è¿‡æ»¤æœ‰æ•ˆåƒç´ ç‚¹å°äº1000çš„ç›´çº¿<br />```img.find_blobs(pixels_threshold 1000)``` æœ¬æ–‡ä»‹ç»å¸¸ç”¨æ–¹æ³•ï¼Œæ›´å¤š API è¯·çœ‹ API æ–‡æ¡£çš„ [image](../../../api/maix/image.html) éƒ¨åˆ†ã€‚ ### æå‡å·¡çº¿çš„é€Ÿåº¦ è¿™é‡Œæä¾›å‡ ä¸ªæå‡å·¡çº¿é€Ÿåº¦çš„æ–¹æ³• 1. é€‰æ‹©åˆé€‚çš„åˆ†è¾¨ç‡ è¶Šå¤§çš„åˆ†è¾¨ç‡è®¡ç®—é€Ÿåº¦è¶Šæ…¢ï¼Œå¯ä»¥æ ¹æ®è¯†åˆ«è·ç¦»å’Œç²¾åº¦çš„è¦æ±‚æ¥é€‰æ‹©æ›´åˆé€‚çš„åˆ†è¾¨ç‡ 2. ä½¿ç”¨ç°åº¦å›¾è¯†åˆ« ä½¿ç”¨ç°åº¦å›¾è¯†åˆ«æ—¶ï¼Œç®—æ³•åªä¼šå¤„ç†ä¸€ä¸ªé€šé“ï¼Œæœ‰æ›´å¿«çš„è¯†åˆ«é€Ÿåº¦ï¼Œåœ¨é¢œè‰²å•ä¸€çš„ç¯å¢ƒä¼šå¾ˆæœ‰ç”¨ã€‚æ³¨æ„æ­¤æ—¶å‘`get_regression`ä¼ å…¥`thresholds`æ—¶ï¼Œåªæœ‰`l_min`å’Œ`l_max`æœ‰æ•ˆã€‚ è·å–ç°åº¦å›¾çš„æ–¹æ³•ï¼š ```python # æ–¹æ³•1 cam camera.Camera(320, 240ï¼Œ image.Format.FMT_GRAYSCALE) # MaixPy v4.2.1åæ”¯æŒ gray_img cam.read()\t\t\t\t\t\t\t\t\t\t# è·å–ç°åº¦å›¾ # æ–¹æ³•2 cam camera.Camera(320, 240) img cam.read() gray_img img.to_format(image.Format.FMT_GRAYSCALE)\t\t\t# è·å–ç°åº¦å›¾ ``` ## å¦‚ä½•ä½¿ç”¨MaixCamçš„é»˜è®¤åº”ç”¨ç¨‹åºå¯»æ‰¾ç›´çº¿ ä¸ºäº†å¿«é€ŸéªŒè¯å¯»æ‰¾ç›´çº¿çš„åŠŸèƒ½ï¼Œå¯ä»¥å…ˆä½¿ç”¨MaixCamæä¾›çš„`line_tracking`åº”ç”¨ç¨‹åºæ¥ä½“éªŒå¯»æ‰¾ç›´çº¿çš„æ•ˆæœã€‚ ### ä½¿ç”¨æ–¹æ³• 1. é€‰æ‹©å¹¶æ‰“å¼€`Line tracking`åº”ç”¨ 2. ç‚¹å‡»å±å¹•ä¸­éœ€è¦è¯†åˆ«çš„ç›´çº¿ï¼Œå·¦ä¾§ä¼šæ˜¾ç¤ºè¯¥ç›´çº¿çš„é¢œè‰² 3. ç‚¹å‡»å·¦ä¾§ï¼ˆç•Œé¢ä¸­`L A B`ä¸‹æ–¹çš„é¢œè‰²ï¼‰éœ€è¦æ£€æµ‹çš„é¢œè‰² 4. æ­¤æ—¶å°±å¯ä»¥è¯†åˆ«åˆ°å¯¹åº”çš„ç›´çº¿äº†ï¼ŒåŒæ—¶ä¸²å£ä¹Ÿä¼šè¾“å‡ºç›´çº¿çš„åæ ‡å’Œè§’åº¦ä¿¡æ¯ã€‚ ### æ¼”ç¤º <video src \"/static/video/line_tracking_app.mp4\" controls \"controls\" width \"100%\" height \"auto\"></video> ### è¿›é˜¶æ“ä½œ #### æ‰‹åŠ¨è®¾ç½®LABé˜ˆå€¼å¯»æ‰¾ç›´çº¿ APPæä¾›æ‰‹åŠ¨è®¾ç½®LABé˜ˆå€¼æ¥ç²¾ç¡®çš„å¯»æ‰¾ç›´çº¿ æ“ä½œæ–¹æ³•ï¼š 1. `ç‚¹å‡»`å·¦ä¸‹è§’`é€‰é¡¹å›¾æ ‡`ï¼Œè¿›å…¥é…ç½®æ¨¡å¼ 2. å°†`æ‘„åƒå¤´å¯¹å‡†`éœ€è¦`å¯»æ‰¾çš„ç‰©ä½“`ï¼Œ`ç‚¹å‡»`å±å¹•ä¸Šçš„`ç›®æ ‡ç›´çº¿`ï¼Œæ­¤æ—¶ç•Œé¢ä¸­`L A B`ä¸‹æ–¹ä¼šæ˜¾ç¤ºè¯¥ç‰©ä½“å¯¹åº”é¢œè‰²çš„`çŸ©å½¢æ¡†`ï¼Œå¹¶æ˜¾ç¤ºè¯¥ç‰©ä½“é¢œè‰²çš„`LABå€¼`ã€‚ 3. ç‚¹å‡»ä¸‹æ–¹é€‰é¡¹`L Minï¼ŒL Maxï¼ŒA Minï¼ŒA Maxï¼ŒB Minï¼ŒB Max`ï¼Œç‚¹å‡»åå³ä¾§ä¼šå‡ºç°æ»‘åŠ¨æ¡æ¥è®¾ç½®è¯¥é€‰é¡¹å€¼ã€‚è¿™äº›å€¼åˆ†åˆ«å¯¹åº”LABé¢œè‰²æ ¼å¼çš„Lé€šé“ã€Aé€šé“å’ŒBé€šé“çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ 4. å‚è€ƒæ­¥éª¤2è®¡ç®—çš„ç‰©ä½“é¢œè‰²çš„`LABå€¼`ï¼Œå°†`L Minï¼ŒL Maxï¼ŒA Minï¼ŒA Maxï¼ŒB Minï¼ŒB Max`è°ƒæ•´åˆ°åˆé€‚çš„å€¼ï¼Œå³å¯è¯†åˆ«åˆ°å¯¹åº”çš„ç›´çº¿ã€‚ ä¾‹å¦‚`LAB (20, 50, 80)`ï¼Œç”±äº`L 20`ï¼Œä¸ºäº†é€‚é…ä¸€å®šèŒƒå›´è®©`L Min 10`ï¼Œ`L Max 30`;åŒç†ï¼Œç”±äº`A 50`ï¼Œè®©`A Min 40`ï¼Œ`A Max 60`; ç”±äº`B 80`ï¼Œè®©`B Min 70`ï¼Œ`B Max 90`ã€‚ #### é€šè¿‡ä¸²å£åè®®è·å–æ£€æµ‹æ•°æ® å¯»æ‰¾ç›´çº¿åº”ç”¨æ”¯æŒé€šè¿‡ä¸²å£ï¼ˆé»˜è®¤æ³¢ç‰¹ç‡ä¸º115200ï¼‰ä¸ŠæŠ¥æ£€æµ‹åˆ°çš„ç›´çº¿ä¿¡æ¯ã€‚ ç”±äºä¸ŠæŠ¥ä¿¡æ¯åªæœ‰ä¸€æ¡ï¼Œè¿™é‡Œç›´æ¥ç”¨ç¤ºä¾‹æ¥è¯´æ˜ä¸ŠæŠ¥ä¿¡æ¯çš„å†…å®¹ã€‚ ä¾‹å¦‚ä¸ŠæŠ¥ä¿¡æ¯ä¸ºï¼š ```shell AA CA AC BB 0E 00 00 00 E1 09 FC 01 01 00 E9 01 6F 01 57 00 C1 C6 ``` `AA CA AC BB`ï¼šåè®®å¤´éƒ¨ï¼Œå†…å®¹å›ºå®š `0E 00 00 00`ï¼šæ•°æ®é•¿åº¦ï¼Œé™¤äº†åè®®å¤´éƒ¨å’Œæ•°æ®é•¿åº¦å¤–çš„æ€»é•¿åº¦ï¼Œè¿™é‡Œè¡¨ç¤ºé•¿åº¦ä¸º14 `E1`ï¼šæ ‡å¿—ä½ï¼Œç”¨æ¥æ ‡è¯†ä¸²å£æ¶ˆæ¯æ ‡å¿— `09`ï¼šå‘½ä»¤ç±»å‹ï¼Œå¯¹äºå¯»æ‰¾ç›´çº¿APPåº”ç”¨è¯¥å€¼å›ºå®šä¸º0x09 `FC 01 01 00 E9 01 6F 01 57 00`ï¼šç›´çº¿çš„ä¸¤ç«¯åæ ‡å’Œè§’åº¦ä¿¡æ¯ï¼Œæ¯ä¸ªå€¼ç”¨å°ç«¯æ ¼å¼çš„2å­—èŠ‚è¡¨ç¤ºã€‚`FC 01`å’Œ`01 00`è¡¨ç¤ºç¬¬ä¸€ä¸ªç«¯ç‚¹åæ ‡ä¸º(508, 1)ï¼Œ`E9 01`å’Œ`6F 01`è¡¨ç¤ºç¬¬äºŒä¸ªç«¯ç‚¹åæ ‡ä¸º(489, 367)ï¼Œ`57 00`è¡¨ç¤ºç›´çº¿ä¸xè½´çš„è§’åº¦ä¸º87åº¦ ` C1 C6`ï¼šCRC æ ¡éªŒå€¼ï¼Œç”¨ä»¥æ ¡éªŒå¸§æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºé”™"},"/maixpy/doc/zh/vision/dual_buff.html":{"title":"MaixCAM MaixPy MaixCAM æ¨¡å‹è¿è¡Œ dual_buff æ¨¡å¼ä»‹ç»","content":" title: MaixCAM MaixPy MaixCAM æ¨¡å‹è¿è¡Œ dual_buff æ¨¡å¼ä»‹ç» ## ç®€ä»‹ ç»†å¿ƒçš„ä½ å¯èƒ½æ³¨æ„åˆ°æ¨¡å‹è¿è¡Œç›¸å…³çš„çš„ä»£ç åˆå§‹åŒ–æ—¶æœ‰ä¸€ä¸ªå‚æ•°`dual_buff True`ã€‚ æ¯”å¦‚ `YOLOv5`ï¼š ```python from maix import camera, display, image, nn, app detector nn.YOLOv5(model \"/root/models/yolov5s.mud\", dual_buff True) # detector nn.YOLOv8(model \"/root/models/yolov8n.mud\", dual_buff True) cam camera.Camera(detector.input_width(), detector.input_height(), detector.input_format()) dis display.Display() while not app.need_exit(): img cam.read() objs detector.detect(img, conf_th 0.5, iou_th 0.45) for obj in objs: img.draw_rect(obj.x, obj.y, obj.w, obj.h, color image.COLOR_RED) msg f'{detector.labels[obj.class_id]}: {obj.score:.2f}' img.draw_string(obj.x, obj.y, msg, color image.COLOR_RED) dis.show(img) ``` ä¸€èˆ¬æ¥è¯´è¿™ä¸ªå‚æ•°é»˜è®¤å°±æ˜¯`True`ï¼Œé™¤éæ‰‹åŠ¨è®¾ç½®`dual_buff False`æ‰ä¼šå…³é—­ `dual_buff`åŠŸèƒ½ã€‚ ä½¿èƒ½è¿™ä¸ªåŠŸèƒ½åè¿è¡Œçš„æ•ˆç‡ä¼šæå‡ï¼Œå³å¸§ç‡ä¼šæå‡ï¼ˆä»¥ä¸Šä»£ç å‡è®¾æ‘„åƒå¤´çš„å¸§ç‡æ²¡æœ‰é™åˆ¶çš„æƒ…å†µä¸‹ï¼Œåœ¨ MaixCAM ä¸Šä¼šå‡å°‘å¾ªç¯ä¸€åŠçš„æ—¶é—´å³å¸§ç‡ç¿»å€ï¼‰ã€‚ ä½†æ˜¯ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œ`detect`å‡½æ•°è¿”å›çš„ç»“æœæ˜¯ä¸Šä¸€æ¬¡è°ƒç”¨`detect`å‡½æ•°çš„å›¾çš„ç»“æœï¼Œæ‰€ä»¥ç»“æœå’Œè¾“å…¥ä¼šæœ‰ä¸€å¸§çš„æ—¶é—´å·®ï¼Œå¦‚æœä½ å¸Œæœ›`detect`å‡ºæ¥çš„ç»“æœå°±æ˜¯è¾“å…¥çš„`img`çš„ç»“æœè€Œä¸æ˜¯ä¸Šä¸€å¸§çš„ç»“æœï¼Œè¯·ç¦ç”¨è¿™ä¸ªåŠŸèƒ½ï¼›å¦å¤–ç”±äºå‡†å¤‡äº†åŒä»½ç¼“å†²åŒºï¼Œä¹Ÿä¼šåŠ å¤§å†…å­˜çš„ä½¿ç”¨ï¼Œå¦‚æœä½¿ç”¨æ—¶å‘ç°å†…å­˜ä¸è¶³ï¼Œä¹Ÿéœ€è¦ç¦ç”¨è¿™ä¸ªåŠŸèƒ½ã€‚ ## åŸç† æ¨¡å‹æ£€æµ‹ç‰©ä½“åˆ†ä¸ºäº†å‡ æ­¥ï¼š * è·å–å›¾åƒ * å›¾åƒé¢„å¤„ç† * æ¨¡å‹è¿è¡Œ * ç»“æœåå¤„ç† å…¶ä¸­åªæœ‰ æ¨¡å‹è¿è¡Œè¿™ä¸€æ­¥æ˜¯ç¡¬ä»¶NPU ä¸Šè¿è¡Œçš„ï¼Œå…¶å®ƒæ­¥éª¤éƒ½åœ¨ CPU è¿è¡Œã€‚ å¦‚æœ`dual_buff`è®¾ç½®ä¸º`False`ï¼Œåœ¨`detect`çš„æ—¶å€™ï¼ŒCPU å…ˆé¢„å¤„ç†ï¼ˆæ­¤æ—¶ NPU ç©ºé—²ï¼‰ï¼Œ ç„¶åç»™ NPU è¿ç®—ï¼ˆæ­¤æ—¶ CPU ç©ºé—²ç­‰å¾… NPU è¿ç®—ç»“æŸï¼‰ï¼Œç„¶å CPU åå¤„ç†ï¼ˆNPU ç©ºé—²ï¼‰ï¼Œ æ•´è¿‡è¿‡ç¨‹æ˜¯çº¿æ€§çš„ï¼Œæ¯”è¾ƒç®€å•ã€‚ ä½†æ˜¯è¿™é‡Œå‘ç°äº†é—®é¢˜ï¼Œå°±æ˜¯ CPU å’Œ NPU ä¸¤è€…æ€»æœ‰ä¸€ä¸ªç©ºé—²ç€çš„ï¼Œå½“åŠ äº†`dual_buff True`ï¼Œ CPU é¢„å¤„ç†åäº¤ç»™ NPU è¿ç®—ï¼Œæ­¤æ—¶ CPU ä¸å†ç­‰å¾… NPU å‡ºç»“æœï¼ŒäºŒæ˜¯ç›´æ¥é€€å‡º`detect`å‡½æ•°è¿›è¡Œä¸‹ä¸€æ¬¡æ‘„åƒå¤´è¯»å–å’Œé¢„å¤„ç†ï¼Œç­‰ NPU è¿ç®—å®Œæˆåï¼Œ CPU å·²ç»å‡†å¤‡å¥½äº†ä¸‹ä¸€æ¬¡çš„æ•°æ®ç›´æ¥äº¤ç»™ NPU ç»§ç»­è¿ç®—ï¼Œä¸ç»™ NPU å–˜æ¯çš„æœºä¼šï¼Œè¿™æ ·å°±å……åˆ†åˆ©ç”¨äº† CPU å’Œ NPU é«˜æ•ˆåœ°åŒæ—¶è¿›è¡Œè¿ç®—ã€‚ ä¸è¿‡è¿™é‡Œä¹Ÿéœ€è¦æ³¨æ„ï¼Œæ‘„åƒå¤´å¸§ç‡å¦‚æœä¸å¤Ÿé«˜ä¹Ÿä¼šé™åˆ¶æ•´ä½“å¸§ç‡ã€‚"},"/maixpy/doc/zh/vision/find_blobs.html":{"title":"MaixCAM MaixPy å¯»æ‰¾è‰²å—","content":" title: MaixCAM MaixPy å¯»æ‰¾è‰²å— update: date: 2024 04 03 author: neucrack version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ date: 2024 04 03 author: lxowalle version: 1.0.1 content: æ·»åŠ å¯»æ‰¾è‰²å—çš„è¯¦ç»†ç”¨æ³• é˜…è¯»æœ¬æ–‡å‰ï¼Œç¡®ä¿å·²ç»çŸ¥æ™“å¦‚ä½•å¼€å‘MaixCAMï¼Œè¯¦æƒ…è¯·é˜…è¯»[å¿«é€Ÿå¼€å§‹](../index.html) ## ç®€ä»‹ æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨MaixPyæ¥å¯»æ‰¾è‰²å—ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨MaixCamçš„é»˜è®¤åº”ç”¨ç¨‹åºå¯»æ‰¾è‰²å—ã€‚ åœ¨è§†è§‰åº”ç”¨ä¸­ï¼Œå¯»æ‰¾è‰²å—æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„éœ€æ±‚ï¼Œæ¯”å¦‚æœºå™¨äººæ‰¾è‰²å—ï¼Œè‡ªåŠ¨åŒ–ç”Ÿäº§çº¿æ‰¾è‰²å—ç­‰ç­‰ï¼Œå³éœ€è¦è¯†åˆ«ç”»é¢ä¸­çš„ç‰¹å®šçš„é¢œè‰²åŒºåŸŸï¼Œè·å–è¿™ä¸ªåŒºåŸŸçš„ä½ç½®å’Œå¤§å°ç­‰ä¿¡æ¯ã€‚ ## ä½¿ç”¨ MaixPy å¯»æ‰¾è‰²å— MaixPyçš„ `maix.image.Image`ä¸­æä¾›äº†`find_blobs`æ–¹æ³•ï¼Œå¯ä»¥æ–¹ä¾¿çš„æ‰¾è‰²å—ã€‚ ### å¦‚ä½•å¯»æ‰¾è‰²å— ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå®ç°å¯»æ‰¾è‰²å—å¹¶ç”»æ¡† ```python from maix import image, camera, display cam camera.Camera(320, 240) disp display.Display() # æ ¹æ®è‰²å—é¢œè‰²é€‰æ‹©å¯¹åº”é…ç½® thresholds [[0, 80, 40, 80, 10, 80]] # red # thresholds [[0, 80, 120, 10, 0, 30]] # green # thresholds [[0, 80, 30, 100, 120, 60]] # blue while 1: img cam.read() blobs img.find_blobs(thresholds, pixels_threshold 500) for blob in blobs: img.draw_rect(blob[0], blob[1], blob[2], blob[3], image.COLOR_GREEN) disp.show(img) ``` æ­¥éª¤ï¼š 1. å¯¼å…¥imageã€cameraã€displayæ¨¡å— ```python from maix import image, camera, display ``` 2. åˆå§‹åŒ–æ‘„åƒå¤´å’Œæ˜¾ç¤º ```python cam camera.Camera(320, 240)\t# åˆå§‹åŒ–æ‘„åƒå¤´ï¼Œè¾“å‡ºåˆ†è¾¨ç‡320x240 RGBæ ¼å¼ disp display.Display() ``` 3. ä»æ‘„åƒå¤´è·å–å›¾ç‰‡å¹¶æ˜¾ç¤º ```python while 1: img cam.read() disp.show(img) ``` 4. è°ƒç”¨`find_blobs`æ–¹æ³•å¯»æ‰¾æ‘„åƒå¤´å›¾ç‰‡ä¸­çš„è‰²å—ï¼Œå¹¶ç”»åˆ°å±å¹•ä¸Š ```python blobs img.find_blobs(thresholds, pixels_threshold 500) for blob in blobs: img.draw_rect(blob[0], blob[1], blob[2], blob[3], image.COLOR_GREEN) ``` `img`æ˜¯é€šè¿‡`cam.read()`è¯»å–åˆ°çš„æ‘„åƒå¤´å›¾åƒï¼Œå½“åˆå§‹åŒ–çš„æ–¹å¼ä¸º`cam camera.Camera(320, 240)`æ—¶ï¼Œ`img`å¯¹è±¡æ˜¯ä¸€å¼ åˆ†è¾¨ç‡ä¸º320x240çš„RGBå›¾ã€‚ `img.find_blobs`ç”¨æ¥å¯»æ‰¾è‰²å—ï¼Œ `thresholds` æ˜¯ä¸€ä¸ªé¢œè‰²é˜ˆå€¼åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªé¢œè‰²é˜ˆå€¼ï¼ŒåŒæ—¶æ‰¾åˆ°å¤šä¸ªé˜ˆå€¼å°±ä¼ å…¥å¤šä¸ªï¼Œæ¯ä¸ªé¢œè‰²é˜ˆå€¼çš„æ ¼å¼ä¸º `[L_MIN, L_MAX, A_MIN, A_MAX, B_MIN, B_MAX]`ï¼Œè¿™é‡Œçš„ `L`ã€`A`ã€`B` æ˜¯`LAB`é¢œè‰²ç©ºé—´çš„ä¸‰ä¸ªé€šé“ï¼Œ`L` é€šé“æ˜¯äº®åº¦ï¼Œ`A` é€šé“æ˜¯çº¢ç»¿é€šé“ï¼Œ`B` é€šé“æ˜¯è“é»„é€šé“ã€‚`pixels_threshold`æ˜¯ä¸€ä¸ªåƒç´ ç‚¹æ•°é‡çš„é˜ˆå€¼ï¼Œç”¨æ¥è¿‡æ»¤ä¸€äº›ä¸éœ€è¦çš„å°è‰²å—ã€‚ `img.draw_rect`ç”¨æ¥ç”»è‰²å—æ¡†ï¼Œ`blob[0]`ã€`blob[1]`ã€`blob[1]`ã€`blob[1]`åˆ†åˆ«ä»£è¡¨è‰²å—å·¦ä¸Šè§’åæ ‡xï¼Œè‰²å—å·¦ä¸Šè§’åæ ‡yï¼Œè‰²å—å®½åº¦wå’Œè‰²å—é«˜åº¦h ### å¸¸ç”¨å‚æ•°è¯´æ˜ åˆ—ä¸¾å¸¸ç”¨å‚æ•°è¯´æ˜ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯ä»¥å®ç°åº”ç”¨çš„å‚æ•°ï¼Œåˆ™éœ€è¦è€ƒè™‘æ˜¯å¦ä½¿ç”¨å…¶ä»–ç®—æ³•å®ç°ï¼Œæˆ–è€…åŸºäºç›®å‰ç®—æ³•çš„ç»“æœæ‰©å±•æ‰€éœ€çš„åŠŸèƒ½ å‚æ•° è¯´æ˜ ç¤ºä¾‹ thresholds åŸºäºlabé¢œè‰²ç©ºé—´çš„é˜ˆå€¼ï¼Œthreshold [[l_min, l_max, a_min, a_max, b_min, b_max]]ï¼Œåˆ†åˆ«è¡¨ç¤ºï¼š<br />äº®åº¦èŒƒå›´ä¸º[l_min, l_max]\\<br />ç»¿è‰²åˆ°çº¢è‰²çš„åˆ†é‡èŒƒå›´ä¸º[a_min, a_max]<br />è“è‰²åˆ°é»„è‰²çš„åˆ†é‡èŒƒå›´ä¸º[b_min, b_max]<br />å¯åŒæ—¶è®¾ç½®å¤šä¸ªé˜ˆå€¼ è®¾ç½®ä¸¤ä¸ªé˜ˆå€¼æ¥æ£€æµ‹çº¢è‰²å’Œç»¿è‰²<br />```img.find_blobs(threshold [[0, 80, 40, 80, 10, 80], [0, 80, 120, 10, 0, 30]])```<br />çº¢è‰²é˜ˆå€¼ä¸º[0, 80, 40, 80, 10, 80]<br />ç»¿è‰²é˜ˆå€¼ä¸º[0, 80, 120, 10, 0, 30] invert ä½¿èƒ½é˜ˆå€¼åè½¬ï¼Œä½¿èƒ½åä¼ å…¥é˜ˆå€¼ä¸å®é™…é˜ˆå€¼ç›¸åï¼Œé»˜è®¤ä¸ºFalse ä½¿èƒ½é˜ˆå€¼åè½¬<br />```img.find_blobs(invert True)``` roi è®¾ç½®ç®—æ³•è®¡ç®—çš„çŸ©å½¢åŒºåŸŸï¼Œroi [x, y, w, h]ï¼Œxï¼Œyè¡¨ç¤ºçŸ©å½¢åŒºåŸŸå·¦ä¸Šè§’åæ ‡ï¼Œwï¼Œhè¡¨ç¤ºçŸ©å½¢åŒºåŸŸçš„å®½åº¦å’Œé«˜åº¦ï¼Œé»˜è®¤ä¸ºæ•´å¼ å›¾ç‰‡ è®¡ç®—åæ ‡ä¸º(50,50)ï¼Œå®½å’Œé«˜ä¸º100çš„åŒºåŸŸ<br />```img.find_blobs(roi [50, 50, 100, 100])``` area_threshold è¿‡æ»¤åƒç´ é¢ç§¯å°äºarea_thresholdçš„è‰²å—ï¼Œå•ä½ä¸ºåƒç´ ç‚¹ï¼Œé»˜è®¤ä¸º10ã€‚è¯¥å‚æ•°å¯ç”¨äºè¿‡æ»¤ä¸€äº›æ— ç”¨çš„å°è‰²å— è¿‡æ»¤é¢ç§¯å°äº1000çš„è‰²å—<br />```img.find_blobs(area_threshold 1000)``` pixels_threshold è¿‡æ»¤æœ‰æ•ˆåƒç´ ç‚¹å°äºpixels_thresholdçš„è‰²å—ï¼Œé»˜è®¤ä¸º10ã€‚è¯¥å‚æ•°å¯ç”¨äºè¿‡æ»¤ä¸€äº›æ— ç”¨çš„å°è‰²å— è¿‡æ»¤æœ‰æ•ˆåƒç´ ç‚¹å°äº1000çš„è‰²å—<br />```img.find_blobs(pixels_threshold 1000)``` æœ¬æ–‡ä»‹ç»å¸¸ç”¨æ–¹æ³•ï¼Œæ›´å¤š API è¯·çœ‹ API æ–‡æ¡£çš„ [image](../../../api/maix/image.html) éƒ¨åˆ†ã€‚ ## ç¦»çº¿è®¾ç½®é˜ˆå€¼ ä¸ºäº†å¿«é€ŸéªŒè¯å¯»æ‰¾è‰²å—çš„åŠŸèƒ½ï¼Œå¯ä»¥å…ˆä½¿ç”¨MaixCamæä¾›çš„å¯»æ‰¾è‰²å—åº”ç”¨ç¨‹åºæ¥ä½“éªŒå¯»æ‰¾è‰²å—çš„æ•ˆæœã€‚ ### æ¼”ç¤º æ‰“å¼€è®¾å¤‡ï¼Œé€‰æ‹©`æ‰¾è‰²å—`åº”ç”¨ï¼Œç„¶ååœ¨ä¸‹æ–¹é€‰æ‹©è¦è¯†åˆ«çš„é¢œè‰²ï¼Œæˆ–è€…è‡ªå®šä¹‰é¢œè‰²ï¼Œå³å¯ä»¥è¯†åˆ«åˆ°å¯¹åº”çš„é¢œè‰²äº†ï¼Œåœ¨ä¸‹æ–¹`è®¾ç½®æ `ä¼šæ˜¾ç¤ºå½“å‰è®¾ç½®çš„`é˜ˆå€¼èŒƒå›´`ï¼ŒåŒæ—¶ä¸²å£ä¹Ÿä¼šè¾“å‡ºè¯†åˆ«åˆ°çš„åæ ‡å’Œé¢œè‰²ä¿¡æ¯ã€‚ <video src \"/static/video/find_blobs.mp4\" controls \"controls\" width \"100%\" height \"auto\"></video> [æºç åœ°å€](https://github.com/sipeed/MaixCDK/tree/main/projects/app_find_blobs) ### å¿«é€Ÿä½¿ç”¨ #### ä½¿ç”¨é»˜è®¤é˜ˆå€¼ å¯»æ‰¾è‰²å—APPæä¾›äº†`red`ã€`green`ã€`blue`ã€`user`å››ç§é…ç½®ï¼Œå…¶ä¸­`red`ã€`green`å’Œ`blue`ç”¨æ¥å¯»æ‰¾`çº¢è‰²`ã€`ç»¿è‰²`å’Œ`è“è‰²`çš„è‰²å—ï¼Œ`user`è‡ªå®šä¹‰çš„é˜ˆå€¼åœ¨ç¨‹åºé€€å‡ºæ—¶ä¼šä¿å­˜ä¸‹æ¥ï¼Œä¸‹æ¬¡æ‰“å¼€åº”ç”¨æ—¶ä¼šåŠ è½½ä¸Šä¸€æ¬¡è°ƒè¯•çš„é˜ˆå€¼ã€‚å¿«é€Ÿä½“éªŒæ—¶é€šè¿‡`ç‚¹å‡»`ç•Œé¢ä¸‹æ–¹`æŒ‰é’®`å³å¯åˆ‡æ¢åˆ°å¯¹åº”é…ç½®ï¼ŒAPPç•Œé¢å‚è€ƒå¦‚ä¸‹ï¼š ![](../../../static/image/find_blobs_app.jpg) #### å¿«é€Ÿè°ƒè¯•é˜ˆå€¼ æ“ä½œæ–¹æ³•ï¼š 1. å°†`æ‘„åƒå¤´å¯¹å‡†`éœ€è¦`å¯»æ‰¾çš„ç‰©ä½“`ï¼Œ`ç‚¹å‡»`å±å¹•ä¸Šçš„`ç›®æ ‡ç‰©ä½“`ï¼Œæ­¤æ—¶`å·¦ä¾§`ä¼šæ˜¾ç¤ºè¯¥ç‰©ä½“å¯¹åº”é¢œè‰²çš„`çŸ©å½¢æ¡†`ï¼Œå¹¶æ˜¾ç¤ºè¯¥ç‰©ä½“é¢œè‰²çš„LABå€¼ã€‚ 2. ç‚¹å‡»å‡ºç°çš„`çŸ©å½¢æ¡†`ï¼Œç³»ç»Ÿå°†ä¼š`è‡ªåŠ¨è®¾ç½®`LABé˜ˆå€¼ï¼Œæ­¤æ—¶ç”»é¢å°†ä¼šç”»å‡ºè¯¥ç‰©ä½“è¾¹ç¼˜ã€‚ è¿™ä¸ªæ–¹æ³•ä¼˜ç‚¹æ˜¯æ–¹ä¾¿ï¼Œå¿«æ·ï¼Œå¯ä»¥å¾ˆå¿«çš„è®¾ç½®é˜ˆå€¼å¹¶æ‰¾åˆ°å¯¹åº”çš„è‰²å—ã€‚ç¼ºç‚¹æ˜¯è¿˜ä¸å¤Ÿç²¾ç¡®ï¼Œå¯ä»¥åœ¨ä¸‹ä¸€æ­¥ä¸­æ‰‹åŠ¨å¾®è°ƒã€‚ #### æ‰‹åŠ¨å¾®è°ƒé˜ˆå€¼ æ“ä½œæ–¹æ³•ï¼š 1. `ç‚¹å‡»`å·¦ä¸‹è§’`é€‰é¡¹å›¾æ ‡`ï¼Œè¿›å…¥é…ç½®æ¨¡å¼ 2. å°†`æ‘„åƒå¤´å¯¹å‡†`éœ€è¦`å¯»æ‰¾çš„ç‰©ä½“`ï¼Œ`ç‚¹å‡»`å±å¹•ä¸Šçš„`ç›®æ ‡ç‰©ä½“`ï¼Œæ­¤æ—¶`å·¦ä¾§`ä¼šæ˜¾ç¤ºè¯¥ç‰©ä½“å¯¹åº”é¢œè‰²çš„`çŸ©å½¢æ¡†`ï¼Œå¹¶æ˜¾ç¤ºè¯¥ç‰©ä½“é¢œè‰²çš„`LABå€¼`ã€‚ 3. ç‚¹å‡»ä¸‹æ–¹é€‰é¡¹`L Minï¼ŒL Maxï¼ŒA Minï¼ŒA Maxï¼ŒB Minï¼ŒB Max`ï¼Œç‚¹å‡»åå³ä¾§ä¼šå‡ºç°æ»‘åŠ¨æ¡æ¥è®¾ç½®è¯¥é€‰é¡¹å€¼ã€‚è¿™äº›å€¼åˆ†åˆ«å¯¹åº”LABé¢œè‰²æ ¼å¼çš„Lé€šé“ã€Aé€šé“å’ŒBé€šé“çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ 4. å‚è€ƒæ­¥éª¤2è®¡ç®—çš„ç‰©ä½“é¢œè‰²çš„`LABå€¼`ï¼Œå°†`L Minï¼ŒL Maxï¼ŒA Minï¼ŒA Maxï¼ŒB Minï¼ŒB Max`è°ƒæ•´åˆ°åˆé€‚çš„å€¼ï¼Œå³å¯è¯†åˆ«åˆ°å¯¹åº”çš„è‰²å—ã€‚ ä¾‹å¦‚`LAB (20, 50, 80)`ï¼Œç”±äº`L 20`ï¼Œä¸ºäº†é€‚é…ä¸€å®šèŒƒå›´è®©`L Min 10`ï¼Œ`L Max 30`;åŒç†ï¼Œç”±äº`A 50`ï¼Œè®©`A Min 40`ï¼Œ`A Max 60`; ç”±äº`B 80`ï¼Œè®©`B Min 70`ï¼Œ`B Max 90`ã€‚ è¿™ä¸ªæ–¹æ³•å¯ä»¥æ›´ç²¾ç¡®çš„æ‰¾åˆ°åˆé€‚çš„é˜ˆå€¼ï¼Œæ­é…`å¿«é€Ÿè°ƒè¯•é˜ˆå€¼`çš„æ–¹æ³•ï¼Œè½»æ¾æ‰¾åˆ°æƒ³è¦çš„é˜ˆå€¼ã€‚ #### é€šè¿‡ä¸²å£åè®®è·å–è¯†åˆ«ç»“æœ å¯»æ‰¾è‰²å—APPæ”¯æŒé€šè¿‡ä¸²å£ï¼ˆé»˜è®¤æ³¢ç‰¹ç‡ä¸º115200ï¼‰ä¸ŠæŠ¥æ£€æµ‹åˆ°çš„è‰²å—ä¿¡æ¯ã€‚ ç”±äºä¸ŠæŠ¥ä¿¡æ¯åªæœ‰ä¸€æ¡ï¼Œè¿™é‡Œç›´æ¥ç”¨ç¤ºä¾‹æ¥è¯´æ˜ä¸ŠæŠ¥ä¿¡æ¯çš„å†…å®¹ã€‚ ä¾‹å¦‚ä¸ŠæŠ¥ä¿¡æ¯ä¸ºï¼š ```shell AA CA AC BB 14 00 00 00 E1 08 EE 00 37 00 15 01 F7 FF 4E 01 19 00 27 01 5A 00 A7 20 ``` `AA CA AC BB`ï¼šåè®®å¤´éƒ¨ï¼Œå†…å®¹å›ºå®š `14 00 00 00`ï¼šæ•°æ®é•¿åº¦ï¼Œé™¤äº†åè®®å¤´éƒ¨å’Œæ•°æ®é•¿åº¦å¤–çš„æ€»é•¿åº¦ `E1`ï¼šæ ‡å¿—ä½ï¼Œç”¨æ¥æ ‡è¯†ä¸²å£æ¶ˆæ¯æ ‡å¿— `08`ï¼šå‘½ä»¤ç±»å‹ï¼Œå¯¹äºå¯»æ‰¾è‰²å—APPåº”ç”¨è¯¥å€¼å›ºå®šä¸º0x08 `EE 00 37 00 15 01 F7 FF 4E 01 19 00 27 01 5A 00`ï¼šå·²æ‰¾åˆ°è‰²å—çš„å››ä¸ªé¡¶ç‚¹åæ ‡ï¼Œæ¯ä¸ªå€¼ç”¨å°ç«¯æ ¼å¼çš„2å­—èŠ‚è¡¨ç¤ºã€‚`EE 00`å’Œ`37 00`è¡¨ç¤ºç¬¬ä¸€ä¸ªé¡¶ç‚¹åæ ‡ä¸º(238, 55)ï¼Œ`15 01`å’Œ`F7 FF`è¡¨ç¤ºç¬¬äºŒä¸ªé¡¶ç‚¹åæ ‡ä¸º(277, 9)ï¼Œ`4E 01`å’Œ`19 00`è¡¨ç¤ºç¬¬ä¸‰ä¸ªé¡¶ç‚¹åæ ‡ä¸º(334, 25)ï¼Œ`27 01`å’Œ`5A 00`è¡¨ç¤ºç¬¬å››ä¸ªé¡¶ç‚¹åæ ‡ä¸º(295, 90)ã€‚ `A7 20`ï¼šCRC æ ¡éªŒå€¼ï¼Œç”¨ä»¥æ ¡éªŒå¸§æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºé”™ ## å…³äºLABé¢œè‰²ç©ºé—´ LABé¢œè‰²ç©ºé—´å’ŒRGBé¢œè‰²ç©ºé—´ä¸€æ ·æ˜¯ä¸€ç§è¡¨ç¤ºé¢œè‰²çš„æ–¹æ³•ï¼ŒLABå¯ä»¥è¡¨ç¤ºäººçœ¼èƒ½çœ‹åˆ°çš„æ‰€æœ‰é¢œè‰²ã€‚å¦‚æœéœ€è¦äº†è§£LABå¯ä»¥å»ç½‘ç»œä¸Šæœç´¢ç›¸å…³æ–‡ç« ï¼Œé‚£æ ·æ›´è¯¦ç»†ï¼Œè€Œå¯¹äºä½ åº”è¯¥åªéœ€è¦äº†è§£ä¸ºä»€ä¹ˆé€‰ç”¨LABå¯¹äºMaixPyçš„ä¼˜åŠ¿ã€‚ LABå¯¹äºMaixPyçš„ä¼˜åŠ¿ï¼š 1. LABé¢œè‰²ç©ºé—´çš„è‰²åŸŸæ¯”RGBéƒ½è¦å¤§ï¼Œå› æ­¤å®Œå…¨å¯ä»¥æ›¿æ¢RGBã€‚ 2. LABé¢œè‰²ç©ºé—´ä¸‹ï¼Œç”±äºLé€šé“æ˜¯äº®åº¦é€šé“ï¼Œæˆ‘ä»¬å¸¸å¸¸è®¾ç½®åˆ°è¾ƒå¤§çš„èŒƒå›´å³å¯ï¼ˆå¸¸ç”¨[0,80]ï¼‰ï¼Œè€Œç¼–å†™ä»£ç æ—¶ä¸»è¦å…³æ³¨æ˜¯Aé€šé“å’ŒBé€šé“ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å¤§é‡çš„æ—¶é—´åœ¨çº ç»“é¢œè‰²é˜ˆå€¼å¦‚ä½•é€‰æ‹©çš„é—®é¢˜ä¸Šã€‚ 3. LABé¢œè‰²ç©ºé—´çš„é¢œè‰²æ„ŸçŸ¥æ›´å‡åŒ€ï¼Œæ›´å®¹æ˜“ç”¨ä»£ç è°ƒè¯•ã€‚ä¾‹å¦‚ï¼Œå¯¹äºåªéœ€è¦å¯»æ‰¾çº¢è‰²è‰²å—ï¼Œå¯ä»¥å›ºå®šLé€šé“å’ŒBé€šé“å€¼ï¼Œåªéœ€è¦è°ƒæ•´Aé€šé“çš„å€¼å³å¯ï¼ˆè¿™æ˜¯åœ¨é¢œè‰²ç²¾åº¦è¦æ±‚ä¸é«˜çš„æƒ…å†µä¸‹ï¼‰;å¦‚æœæ˜¯RGBé€šé“åˆ™åŸºæœ¬éœ€è¦Rã€Gã€Bä¸‰ä¸ªé€šé“åŒæ—¶å˜åŠ¨æ‰èƒ½æ‰¾åˆ°åˆé€‚çš„é˜ˆå€¼ã€‚"},"/maixpy/doc/zh/vision/self_learn_detector.html":{"title":"MaixCAM MaixPy è‡ªå­¦ä¹ æ£€æµ‹è·Ÿè¸ªå™¨","content":" title: MaixCAM MaixPy è‡ªå­¦ä¹ æ£€æµ‹è·Ÿè¸ªå™¨ ## MaixPy è‡ªå­¦ä¹ æ£€æµ‹è·Ÿè¸ªå™¨ å’Œè‡ªå­¦ä¹ åˆ†ç±»å™¨ç±»ä¼¼ï¼Œä¸éœ€è¦è®­ç»ƒï¼Œç›´æ¥æ¡†é€‰ç›®æ ‡ç‰©ä½“å³å¯å®ç°æ£€æµ‹å¹¶ä¸”è·Ÿè¸ªç‰©ä½“ï¼Œåœ¨ç®€å•æ£€æµ‹åœºæ™¯ä¸‹ååˆ†å¥½ç”¨ã€‚ å’Œè‡ªå­¦ä¹ åˆ†ç±»å™¨ä¸åŒçš„æ˜¯å› ä¸ºæ˜¯æ£€æµ‹å™¨ï¼Œä¼šæœ‰ç‰©ä½“çš„åæ ‡å’Œå¤§å°ã€‚ <video playsinline controls autoplay loop muted preload src \"/static/video/self_learn_tracker.mp4\" style \"width: 100%; min height: 20em;\"></video> ## MaixPy ä¸­ä½¿ç”¨è‡ªå­¦ä¹ æ£€æµ‹è·Ÿè¸ªå™¨ åœ¨ MaixPy ç›®å‰æä¾›äº†ä¸€ç§å•ç›®æ ‡å­¦ä¹ æ£€æµ‹è·Ÿè¸ªç®—æ³•ï¼Œå³å¼€å§‹æ¡†é€‰ç›®æ ‡ç‰©ä½“ï¼Œåé¢ä¼šä¸€ç›´è·Ÿè¸ªè¿™ä¸ªç‰©ä½“ã€‚ è¿™é‡Œä½¿ç”¨çš„ç®—æ³•æ˜¯[NanoTrack](https://github.com/HonglinChu/SiamTrackers/tree/master/NanoTrack)ï¼Œæœ‰å…´è¶£äº†è§£åŸç†çš„å¯ä»¥è‡ªè¡Œå­¦ä¹ ã€‚ å¯ä»¥çƒ§å½•æœ€æ–°çš„ç³»ç»Ÿé•œåƒï¼ˆ> 2024.9.5_v4.5.0ï¼‰åç›´æ¥ä½¿ç”¨å†…ç½®çš„è‡ªå­¦ä¹ è·Ÿè¸ªåº”ç”¨çœ‹æ•ˆæœã€‚ ä½¿ç”¨`maix.nn.NanoTrack`ç±»å³å¯ï¼Œåˆå§‹åŒ–å¯¹è±¡åï¼Œå…ˆè°ƒç”¨`init`æ–¹æ³•æŒ‡å®šè¦æ£€æµ‹çš„ç›®æ ‡ï¼Œç„¶åè°ƒç”¨`track`æ–¹æ³•è¿ç»­è·Ÿè¸ªç›®æ ‡ï¼Œä»¥ä¸‹ä¸ºç®€åŒ–çš„ä»£ç ï¼š ```python from maix import nn model_path \"/root/models/nanotrack.mud\" tracker nn.NanoTrack(model_path) tracker.init(img, x, y, w, h) pos tracker.track(img) ``` æ³¨æ„è¿™é‡Œä½¿ç”¨äº†å†…ç½®çš„æ¨¡å‹ï¼Œåœ¨ç³»ç»Ÿ`/root/models`ä¸‹å·²ç»å†…ç½®äº†ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨[MaixHub æ¨¡å‹åº“](https://maixhub.com/model/zoo/437)ä¸‹è½½åˆ°æ¨¡å‹ã€‚ å…·ä½“è¯¦ç»†ä»£ç è¯·çœ‹[MaixPy/examples/vision/ai_vision/nn_self_learn_tracker.py](https://github.com/sipeed/MaixPy/blob/main/examples/vision/ai_vision/nn_self_learn_tracker.py) ## å…¶å®ƒè‡ªå­¦ä¹ è·Ÿè¸ªç®—æ³• ç›®å‰å®ç°äº† NanoTrack ç®—æ³•ï¼Œåœ¨ç®€å•åœºæ™¯éå¸¸ç¨³å®šå¯é ï¼Œè€Œä¸”å¸§ç‡è¶³å¤Ÿé«˜ï¼Œç¼ºç‚¹å°±æ˜¯ç‰©ä½“å‡ºè§†é‡å†å›æ¥éœ€è¦å›åˆ°ä¸Šæ¬¡æ¶ˆå¤±çš„é™„è¿‘æ‰èƒ½æ£€æµ‹åˆ°ï¼Œä»¥åŠåªèƒ½æ£€æµ‹ä¸€ä¸ªç›®æ ‡ã€‚ å¦‚æœæœ‰æ›´å¥½çš„ç®—æ³•ï¼Œå¯ä»¥è‡ªè¡Œå‚è€ƒå·²æœ‰çš„ NanoTrack å®ç°æ–¹å¼è¿›è¡Œå®ç°ï¼Œä¹Ÿæ¬¢è¿è®¨è®ºæˆ–è€…æäº¤ä»£ç PRã€‚"},"/maixpy/doc/zh/vision/object_track.html":{"title":"MaixCAM MaixPy ç‰©ä½“è½¨è¿¹è¿½è¸ªå’Œè®¡æ•°ï¼ˆå¦‚äººæµè®¡æ•°ï¼‰","content":" title: MaixCAM MaixPy ç‰©ä½“è½¨è¿¹è¿½è¸ªå’Œè®¡æ•°ï¼ˆå¦‚äººæµè®¡æ•°ï¼‰ ## è½¨è¿¹è¿½è¸ªç®€ä»‹ å‰é¢æˆ‘ä»¬ä½¿ç”¨ YOLOv5 YOLOv8 ç”šè‡³æ˜¯ find_blobs éƒ½å¯ä»¥æ£€æµ‹åˆ°ç‰©ä½“ï¼Œä½†æ˜¯å¦‚æœç”»é¢ä¸­åŒæ—¶å­˜åœ¨å¤šä¸ªç‰©ä½“ï¼Œå½“æˆ‘ä»¬éœ€è¦åŒºåˆ†æ¯ä¸€ä¸ªç‰©ä½“ï¼Œå°±éœ€è¦ç‰©ä½“è¿½è¸ªåŠŸèƒ½äº†ã€‚ æ¯”å¦‚ç”»é¢ä¸­åŒæ—¶æœ‰ 5 ä¸ªäººåœ¨ç§»åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦ç»™æ¯ä¸ªäººç¼–å·ï¼ŒçŸ¥é“ä»–ä»¬çš„è¡ŒåŠ¨è½¨è¿¹ã€‚ åº”ç”¨ï¼š * äººæµè®¡æ•°ï¼Œæ¯”å¦‚é€šè¿‡æŸä¸ªåœ°æ®µçš„äººæ•°é‡ã€‚ * å·¥ä»¶è®¡æ•°ï¼Œæ¯”å¦‚æµæ°´çº¿å¯¹ç”Ÿäº§çš„äº§å“è¿›è¡Œè®¡æ•°ã€‚ * ç‰©ä½“ç§»åŠ¨è½¨è¿¹è®°å½•å’Œè¯†åˆ«ã€‚ ## MaixCAM/MaixPy ç‰©ä½“è¿½è¸ªå’Œäººæµè®¡æ•°æ•ˆæœ æ•ˆæœå¦‚ä¸‹è§†é¢‘ï¼Œå¯ä»¥è·Ÿè¸ªæ¯ä¸ªäººï¼Œä»¥åŠå¯¹ä»ä¸Šå¾€ä¸‹è·¨è¶Šé»„è‰²åŒºåŸŸçš„äººè¿›è¡Œè®¡æ•°ï¼ˆå·¦ä¸‹è§’ï¼‰ï¼š <video playsinline controls autoplay loop muted preload src \"/static/video/tracker.mp4\" style \"width: 100%; min height: 20em;\"></video> ## MaixCAM / MaixPy ä½¿ç”¨ ç‰©ä½“è¿½è¸ªå’Œäººæµè®¡æ•° å¯ä»¥å‚è€ƒç›´æ¥å®‰è£…[åº”ç”¨](https://maixhub.com/app/61) ä½“éªŒã€‚ å¯ä»¥çœ‹[examples/vision/tracker ä¸‹çš„ä¾‹ç¨‹](https://github.com/sipeed/MaixPy/tree/main/examples/vision/tracker)ã€‚ å…¶ä¸­`tracker_bytetrack.py` ä¾‹ç¨‹æ˜¯åŸºæœ¬çš„ç‰©ä½“è·Ÿè¸ªä¾‹ç¨‹ï¼Œåˆ†ä¸ºå‡ ä¸ªæ­¥éª¤ï¼š * ä½¿ç”¨ YOLOv5 æˆ–è€… YOLOv8 æ£€æµ‹ç‰©ä½“ï¼Œè¿™æ ·ä½ å°±å¯ä»¥æ ¹æ®ä½ è‡ªå·±è¦æ£€æµ‹çš„ç‰©ä½“æ›´æ¢æ¨¡å‹å³å¯æ£€æµ‹ä¸åŒç‰©ä½“ã€‚ * ä½¿ç”¨`maix.tracker.ByteTracker` è¿™ä¸ªç®—æ³•è¿›è¡Œç‰©ä½“è¿½è¸ªï¼Œåªéœ€è¦è°ƒç”¨ä¸€ä¸ª`update`å‡½æ•°å³å¯å¾—åˆ°ç»“æœï¼ˆç”»é¢ä¸­çš„æ¯ä¸ªè½¨è¿¹ï¼‰ï¼Œååˆ†ç®€å•ã€‚ å…¶ä¸­æœ‰å‡ ä¸ªå‚æ•°æ ¹æ®è‡ªå·±çš„å®é™…åœºæ™¯è¿›è¡Œè°ƒæ•´ï¼Œå…·ä½“å‚æ•°ä»¥ä¾‹ç¨‹ä»£ç å’Œ API å‚æ•°è¯´æ˜ä¸ºå‡†ï¼š ```python # configs conf_threshold 0.3 # detect threshold iou_threshold 0.45 # detect iou threshold max_lost_buff_time 120 # the frames for keep lost tracks. track_thresh 0.4 # tracking confidence threshold. high_thresh 0.6 # threshold to add to new track. match_thresh 0.8 # matching threshold for tracking, e.g. one object in two frame iou < match_thresh we think they are the same obj. max_history_num 5 # max tack's position history length. show_detect False # show detect valid_class_id [0] # we used classes index in detect modelã€‚ ``` `tracker_bytetrack_count.py` ä¾‹ç¨‹åˆ™å¢åŠ äº†äººæµè®¡æ•°ä¾‹ç¨‹ï¼Œè¿™é‡Œä¸ºäº†è®©ä¾‹ç¨‹æ›´åŠ ç®€å•ï¼Œåªç®€å•åœ°å†™äº†ä¸€ä¸ªåˆ¤æ–­äººä»ä¸Šå¾€ä¸‹èµ°çš„è®¡æ•°ï¼Œå³å½“äººå¤„åœ¨é»„è‰²åŒºåŸŸä»¥ä¸‹ï¼ŒåŒæ—¶è½¨è¿¹åœ¨é»„è‰²åŒºåŸŸå†…å°±è®¤ä¸ºæ˜¯ä»ä¸Šå¾€ä¸‹è·¨è¶Šäº†é»„è‰²åŒºåŸŸã€‚ å®é™…åœ¨ä½ çš„åº”ç”¨åœºæ™¯å¯ä»¥è‡ªå·±ç¼–å†™ç›¸å…³é€»è¾‘ã€‚"},"/maixpy/doc/zh/vision/customize_model_yolov8.html":{"title":"ä¸º MaixCAM MaixPy ç¦»çº¿è®­ç»ƒ YOLO11/YOLOv8 æ¨¡å‹ï¼Œè‡ªå®šä¹‰æ£€æµ‹ç‰©ä½“ã€å…³é”®ç‚¹æ£€æµ‹","content":" title: ä¸º MaixCAM MaixPy ç¦»çº¿è®­ç»ƒ YOLO11/YOLOv8 æ¨¡å‹ï¼Œè‡ªå®šä¹‰æ£€æµ‹ç‰©ä½“ã€å…³é”®ç‚¹æ£€æµ‹ update: date: 2024 06 21 version: v1.0 author: neucrack content: ç¼–å†™æ–‡æ¡£ date: 2024 10 10 version: v2.0 author: neucrack content: å¢åŠ  YOLO11 æ”¯æŒ ## ç®€ä»‹ é»˜è®¤å®˜æ–¹æä¾›äº† 80 ç§ç‰©ä½“æ£€æµ‹ï¼Œå¦‚æœä¸æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œå¯ä»¥è‡ªå·±è®­ç»ƒæ£€æµ‹çš„ç‰©ä½“ï¼Œå¯ä»¥åœ¨è‡ªå·±çš„ç”µè„‘æˆ–è€…æœåŠ¡å™¨æ­å»ºè®­ç»ƒç¯å¢ƒè®­ç»ƒã€‚ YOLOv8 / YOLO11 ä¸å…‰æ”¯æŒæ£€æµ‹ç‰©ä½“ï¼Œè¿˜æœ‰ yolov8 pose / YOLO11 pose æ”¯æŒå…³é”®ç‚¹æ£€æµ‹ï¼Œå‡ºäº†å®˜æ–¹çš„äººä½“å…³é”®ç‚¹ï¼Œä½ è¿˜å¯ä»¥åˆ¶ä½œä½ è‡ªå·±çš„å…³é”®ç‚¹æ•°æ®é›†æ¥è®­ç»ƒæ£€æµ‹æŒ‡å®šçš„ç‰©ä½“å’Œå…³é”®ç‚¹ å› ä¸º YOLOv8 å’Œ YOLO11 ä¸»è¦æ˜¯ä¿®æ”¹äº†å†…éƒ¨ç½‘ç»œï¼Œé¢„å¤„ç†å’Œåå¤„ç†éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ YOLOv8 å’Œ YOLO11 çš„è®­ç»ƒè½¬æ¢æ­¥éª¤ç›¸åŒï¼Œåªæ˜¯è¾“å‡ºèŠ‚ç‚¹çš„åç§°ä¸ä¸€æ ·ã€‚ **æ³¨æ„ï¼š** æœ¬æ–‡è®²äº†å¦‚ä½•è‡ªå®šä¹‰è®­ç»ƒï¼Œä½†æ˜¯æœ‰ä¸€äº›åŸºç¡€çŸ¥è¯†é»˜è®¤ä½ å·²ç»æ‹¥æœ‰ï¼Œå¦‚æœæ²¡æœ‰è¯·è‡ªè¡Œå­¦ä¹ ï¼š * æœ¬æ–‡ä¸ä¼šè®²è§£å¦‚ä½•å®‰è£…è®­ç»ƒç¯å¢ƒï¼Œè¯·è‡ªè¡Œæœç´¢å®‰è£…ï¼ˆPytorch ç¯å¢ƒå®‰è£…ï¼‰æµ‹è¯•ã€‚ * æœ¬æ–‡ä¸ä¼šè®²è§£æœºå™¨å­¦ä¹ çš„åŸºæœ¬æ¦‚å¿µã€linuxç›¸å…³åŸºç¡€ä½¿ç”¨çŸ¥è¯†ã€‚ å¦‚æœä½ è§‰å¾—æœ¬æ–‡å“ªé‡Œéœ€è¦æ”¹è¿›ï¼Œæ¬¢è¿ç‚¹å‡»å³ä¸Šè§’`ç¼–è¾‘æœ¬æ–‡`è´¡çŒ®å¹¶æäº¤ æ–‡æ¡£ PRã€‚ ## æµç¨‹å’Œæœ¬æ–‡ç›®æ ‡ è¦æƒ³æˆ‘ä»¬çš„æ¨¡å‹èƒ½åœ¨ MaixPy (MaixCAM)ä¸Šä½¿ç”¨ï¼Œéœ€è¦ç»å†ä»¥ä¸‹è¿‡ç¨‹ï¼š * æ­å»ºè®­ç»ƒç¯å¢ƒï¼Œæœ¬æ–‡ç•¥è¿‡ï¼Œè¯·è‡ªè¡Œæœç´¢ pytorch è®­ç»ƒç¯å¢ƒæ­å»ºã€‚ * æ‹‰å– [YOLO11/YOLOv8](https://github.com/ultralytics/ultralytics) æºç åˆ°æœ¬åœ°ã€‚ * å‡†å¤‡æ•°æ®é›†ï¼Œå¹¶åšæˆ YOLO11 / YOLOv8 é¡¹ç›®éœ€è¦çš„æ ¼å¼ã€‚ * è®­ç»ƒæ¨¡å‹ï¼Œå¾—åˆ°ä¸€ä¸ª `onnx` æ¨¡å‹æ–‡ä»¶ï¼Œä¹Ÿæ˜¯æœ¬æ–‡çš„æœ€ç»ˆè¾“å‡ºæ–‡ä»¶ã€‚ * å°†`onnx`æ¨¡å‹è½¬æ¢æˆ MaixPy æ”¯æŒçš„ `MUD` æ–‡ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹åœ¨[MaixCAM æ¨¡å‹è½¬æ¢](../ai_model_converter/maixcam.html) ä¸€æ–‡ç§æœ‰è¯¦ç»†ä»‹ç»ã€‚ * ä½¿ç”¨ MaixPy åŠ è½½æ¨¡å‹è¿è¡Œã€‚ ## å‚è€ƒæ–‡ç«  å› ä¸ºæ˜¯æ¯”è¾ƒé€šç”¨çš„æ“ä½œè¿‡ç¨‹ï¼Œæœ¬æ–‡åªç»™ä¸€ä¸ªæµç¨‹ä»‹ç»ï¼Œå…·ä½“ç»†èŠ‚å¯ä»¥è‡ªè¡Œçœ‹ **[YOLO11 / YOLOv8 å®˜æ–¹ä»£ç å’Œæ–‡æ¡£](https://github.com/ultralytics/ultralytics)**(**æ¨è**)ï¼Œä»¥åŠæœç´¢å…¶è®­ç»ƒæ•™ç¨‹ï¼Œæœ€ç»ˆå¯¼å‡º onnx æ–‡ä»¶å³å¯ã€‚ å¦‚æœä½ æœ‰è§‰å¾—è®²å¾—ä¸é”™çš„æ–‡ç« æ¬¢è¿ä¿®æ”¹æœ¬æ–‡å¹¶æäº¤ PRã€‚ ## YOLO11 / YOLOv8 å¯¼å‡º onnx æ¨¡å‹ åœ¨ `ultralytics` ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª`export_onnx.py` æ–‡ä»¶ ```python from ultralytics import YOLO import sys print(sys.path) net_name sys.argv[1] # yolov8n.pt yolov8n pose.pt # https://docs.ultralytics.com/models/yolov8/#supported tasks and modes input_width int(sys.argv[2]) input_height int(sys.argv[3]) # Load a model model YOLO(net_name) # load an official model # model YOLO(\"path/to/best.pt\") # load a custom model # Predict with the model results model(\"https://ultralytics.com/images/bus.jpg\") # predict on an image path model.export(format \"onnx\", imgsz [input_height, input_width]) # export the model to ONNX format print(path) ``` ç„¶åæ‰§è¡Œ`python export_onnx.py yolov8n.pt 320 224` å°±èƒ½å¯¼å‡º `onnx` æ¨¡å‹äº†ï¼Œè¿™é‡Œé‡æ–°æŒ‡å®šäº†è¾“å…¥åˆ†è¾¨ç‡ï¼Œæ¨¡å‹è®­ç»ƒçš„æ—¶å€™ç”¨çš„`640x640`ï¼Œæˆ‘ä»¬é‡æ–°æŒ‡å®šäº†åˆ†è¾¨ç‡æ–¹ä¾¿æå‡è¿è¡Œé€Ÿåº¦ï¼Œè¿™é‡Œä½¿ç”¨`320x224`çš„åŸå› æ˜¯å’Œ MaixCAM çš„å±å¹•æ¯”ä¾‹æ¯”è¾ƒç›¸è¿‘æ–¹ä¾¿æ˜¾ç¤ºï¼Œå…·ä½“å¯ä»¥æ ¹æ®ä½ çš„éœ€æ±‚è®¾ç½®å°±å¥½äº†ã€‚ ## è½¬æ¢ä¸º MaixCAM æ”¯æŒçš„æ¨¡å‹ä»¥åŠ mud æ–‡ä»¶ MaixPy/MaixCDK ç›®å‰æ”¯æŒäº† YOLOv8 / YOLO11 æ£€æµ‹ ä»¥åŠ YOLOv8 pose / YOLO11 pose å…³é”®ç‚¹æ£€æµ‹ ä»¥åŠ YOLOv8 seg / YOLO11 seg ä¸‰ç§æ¨¡å‹ï¼ˆ2024.10.10ï¼‰ã€‚ æŒ‰ç…§[MaixCAM æ¨¡å‹è½¬æ¢](../ai_model_converter/maixcam.html) è¿›è¡Œæ¨¡å‹è½¬æ¢ã€‚ æ³¨æ„æ¨¡å‹è¾“å‡ºèŠ‚ç‚¹çš„é€‰æ‹©ï¼š * æ£€æµ‹æ¨¡å‹ï¼š * YOLOv8 æå– onnx çš„ `/model.22/dfl/conv/Conv_output_0,/model.22/Sigmoid_output_0` è¿™ä¸¤ä¸ªè¾“å‡ºã€‚ * YOLO11 æå–`/model.23/dfl/conv/Conv_output_0,/model.23/Sigmoid_output_0`è¾“å‡ºã€‚ * å…³é”®ç‚¹æ£€æµ‹ï¼š * YOLOv8 pose æå–`/model.22/dfl/conv/Conv_output_0,/model.22/Sigmoid_output_0,/model.22/Concat_output_0`è¿™ä¸‰ä¸ªè¾“å‡ºã€‚ * YOLO11 pose æå–`/model.23/dfl/conv/Conv_output_0,/model.23/Sigmoid_output_0,/model.23/Concat_output_0`è¿™ä¸‰ä¸ªè¾“å‡ºã€‚ * å›¾åƒåˆ†å‰²ï¼š * YOLOv8 seg æå– `/model.22/dfl/conv/Conv_output_0,/model.22/Sigmoid_output_0,/model.22/Concat_output_0,output1` * YOLO11 seg æå– `/model.23/dfl/conv/Conv_output_0,/model.23/Sigmoid_output_0,/model.23/Concat_output_0,output1`å››ä¸ªè¾“å‡ºã€‚ ![](../../assets/yolov8_out1.jpg) ![](../../assets/yolov8_out2.jpg) å¯¹äºç‰©ä½“æ£€æµ‹ï¼Œmud æ–‡ä»¶ä¸ºï¼ˆYOLO11 model_type æ”¹ä¸º yolo11ï¼‰ ```ini [basic] type cvimodel model yolov8n.cvimodel [extra] model_type yolov8 input_type rgb mean 0, 0, 0 scale 0.00392156862745098, 0.00392156862745098, 0.00392156862745098 labels person, bicycle, car, motorcycle, airplane, bus, train, truck, boat, traffic light, fire hydrant, stop sign, parking meter, bench, bird, cat, dog, horse, sheep, cow, elephant, bear, zebra, giraffe, backpack, umbrella, handbag, tie, suitcase, frisbee, skis, snowboard, sports ball, kite, baseball bat, baseball glove, skateboard, surfboard, tennis racket, bottle, wine glass, cup, fork, knife, spoon, bowl, banana, apple, sandwich, orange, broccoli, carrot, hot dog, pizza, donut, cake, chair, couch, potted plant, bed, dining table, toilet, tv, laptop, mouse, remote, keyboard, cell phone, microwave, oven, toaster, sink, refrigerator, book, clock, vase, scissors, teddy bear, hair drier, toothbrush ``` æ ¹æ®ä½ è®­ç»ƒçš„å¯¹è±¡æ›¿æ¢`labels`å³å¯ã€‚ å¯¹äºå…³é”®ç‚¹æ£€æµ‹(yolov8 pose)ï¼Œ mud æ–‡ä»¶ä¸ºï¼ˆYOLO11 model_type æ”¹ä¸º yolo11ï¼‰ï¼š ```ini [basic] type cvimodel model yolov8n_pose.cvimodel [extra] model_type yolov8 type pose input_type rgb mean 0, 0, 0 scale 0.00392156862745098, 0.00392156862745098, 0.00392156862745098 labels person ``` å®˜æ–¹é»˜è®¤çš„æ—¶äººä½“å§¿æ€å…³é”®ç‚¹æ£€æµ‹ï¼Œæ‰€ä»¥`labels`åªæœ‰ä¸€ä¸ª `person`ï¼Œæ ¹æ®ä½ æ£€æµ‹çš„ç‰©ä½“æ›¿æ¢å³å¯ã€‚ å¯¹äºå›¾åƒåˆ†å‰²(yolov8 seg)ï¼Œ mud æ–‡ä»¶ï¼ˆYOLO11 model_type æ”¹ä¸º yolo11ï¼‰ï¼š ```ini [basic] type cvimodel model yolo11n seg_320x224_int8.cvimodel [extra] model_type yolov8 input_type rgb type seg mean 0, 0, 0 scale 0.00392156862745098, 0.00392156862745098, 0.00392156862745098 labels person, bicycle, car, motorcycle, airplane, bus, train, truck, boat, traffic light, fire hydrant, stop sign, parking meter, bench, bird, cat, dog, horse, sheep, cow, elephant, bear, zebra, giraffe, backpack, umbrella, handbag, tie, suitcase, frisbee, skis, snowboard, sports ball, kite, baseball bat, baseball glove, skateboard, surfboard, tennis racket, bottle, wine glass, cup, fork, knife, spoon, bowl, banana, apple, sandwich, orange, broccoli, carrot, hot dog, pizza, donut, cake, chair, couch, potted plant, bed, dining table, toilet, tv, laptop, mouse, remote, keyboard, cell phone, microwave, oven, toaster, sink, refrigerator, book, clock, vase, scissors, teddy bear, hair drier, toothbrush ``` ## ä¸Šä¼ åˆ†äº«åˆ° MaixHub åˆ° [MaixHub æ¨¡å‹åº“](https://maixhub.com/model/zoo?platform maixcam) ä¸Šä¼ å¹¶åˆ†äº«ä½ çš„æ¨¡å‹ï¼Œå¯ä»¥å¤šæä¾›å‡ ä¸ªåˆ†è¾¨ç‡ä¾›å¤§å®¶é€‰æ‹©ã€‚"},"/maixpy/doc/zh/vision/classify.html":{"title":"MaixCAM MaixPy ä½¿ç”¨ AI æ¨¡å‹è¿›è¡Œç‰©ä½“åˆ†ç±»","content":" title: MaixCAM MaixPy ä½¿ç”¨ AI æ¨¡å‹è¿›è¡Œç‰©ä½“åˆ†ç±» ## ç‰©ä½“åˆ†ç±»æ¦‚å¿µ æ¯”å¦‚çœ¼å‰æœ‰ä¸¤å¼ å›¾ç‰‡ï¼Œä¸€å¼ å›¾é‡Œé¢æ˜¯è‹¹æœï¼Œå¦ä¸€å¼ æ˜¯é£æœºï¼Œç‰©ä½“åˆ†ç±»çš„ä»»åŠ¡å°±æ˜¯æŠŠä¸¤å¼ å›¾åˆ†åˆ«ä¾æ¬¡è¾“å…¥ç»™ AI æ¨¡å‹ï¼Œæ¨¡å‹ä¼šä¾æ¬¡è¾“å‡ºä¸¤ä¸ªç»“æœï¼Œä¸€ä¸ªæ˜¯è‹¹æœï¼Œä¸€ä¸ªæ˜¯é£æœºã€‚ ## MaixPy ä¸­ä½¿ç”¨ç‰©ä½“åˆ†ç±» MaixPy é»˜è®¤æä¾›äº† `imagenet` æ•°æ®é›†è®­ç»ƒå¾—åˆ°çš„ `1000`åˆ†ç±»æ¨¡å‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š ```python from maix import camera, display, image, nn classifier nn.Classifier(model \"/root/models/mobilenetv2.mud\", dual_buff True) cam camera.Camera(classifier.input_width(), classifier.input_height(), classifier.input_format()) dis display.Display() while 1: img cam.read() res classifier.classify(img) max_idx, max_prob res[0] msg f\"{max_prob:5.2f}: {classifier.labels[max_idx]}\" img.draw_string(10, 10, msg, image.COLOR_RED) dis.show(img) ``` æ•ˆæœè§†é¢‘: <video playsinline controls autoplay loop muted preload src \"/static/video/classifier.mp4\" type \"video/mp4\"> Classifier Result video </video> è¿™é‡Œä½¿ç”¨äº†æ‘„åƒå¤´æ‹æ‘„å›¾åƒï¼Œç„¶åä¼ ç»™ `classifier`è¿›è¡Œè¯†åˆ«ï¼Œå¾—å‡ºç»“æœåï¼Œå°†ç»“æœæ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ æ›´å¤š API ä½¿ç”¨å‚è€ƒ [maix.nn](/api/maix/nn.html) æ¨¡å—çš„æ–‡æ¡£ã€‚ ## dual_buff åŒç¼“å†²åŒºåŠ é€Ÿ ä½ å¯èƒ½æ³¨æ„åˆ°è¿™é‡Œæ¨¡å‹åˆå§‹åŒ–ä½¿ç”¨äº†`dual_buff`ï¼ˆé»˜è®¤å€¼å°±æ˜¯ `True`ï¼‰ï¼Œä½¿èƒ½ `dual_buff` å‚æ•°å¯ä»¥åŠ å¿«è¿è¡Œæ•ˆç‡ï¼Œæé«˜å¸§ç‡ï¼Œå…·ä½“åŸç†å’Œä½¿ç”¨æ³¨æ„ç‚¹è§ [dual_buff ä»‹ç»](./dual_buff.html)ã€‚ ## ä½¿ç”¨ MaixHub è®­ç»ƒè‡ªå·±çš„åˆ†ç±»æ¨¡å‹ å¦‚æœä½ æƒ³è®­ç»ƒç‰¹å®šå›¾åƒçš„åˆ†ç±»æ¨¡å‹ï¼Œè¯·åˆ°[MaixHub](https://maixhub.com) å­¦ä¹ å¹¶è®­ç»ƒåˆ†ç±»æ¨¡å‹ï¼Œåˆ›å»ºé¡¹ç›®æ—¶é€‰æ‹©`åˆ†ç±»æ¨¡å‹`ï¼Œç„¶åä¸Šä¼ å›¾ç‰‡è®­ç»ƒå³å¯ï¼Œæ— éœ€æ­å»ºè®­ç»ƒç¯å¢ƒä¹Ÿæ— éœ€èŠ±é’±è´­ä¹°æ˜‚è´µçš„GPUï¼Œå¿«é€Ÿä¸€é”®è®­ç»ƒã€‚ ## ç¦»çº¿è®­ç»ƒè‡ªå·±çš„åˆ†ç±»æ¨¡å‹ ç¦»çº¿è®­ç»ƒéœ€è¦è‡ªå·±æ­å»ºç¯å¢ƒï¼Œè¯·è‡ªè¡Œæœç´¢ `PyTorch åˆ†ç±»æ¨¡å‹è®­ç»ƒ` `Mobilenet`ç­‰ç›¸å…³å…³é”®å­—è¿›è¡Œå‚è€ƒã€‚ è®­ç»ƒå¥½æ¨¡å‹åå¯¼å‡º onnx æ ¼å¼çš„æ¨¡å‹ï¼Œç„¶åå‚è€ƒ [MaixCAM æ¨¡å‹è½¬æ¢æ–‡æ¡£](../ai_model_converter/maixcam.html) è½¬æ¢ä¸º MaixCAM æ”¯æŒçš„æ¨¡å‹æ ¼å¼ï¼Œæœ€åä½¿ç”¨ä¸Šé¢çš„`nn.Classifier`ç±»åŠ è½½æ¨¡å‹å³å¯ã€‚ è¿™é‡Œåˆ†ç±»æ¨¡å‹å¯ä»¥æ˜¯ mobilenet ä¹Ÿå¯ä»¥æ˜¯ å…¶å®ƒæ¨¡å‹æ¯”å¦‚ Resnet ç­‰ï¼Œæ¨¡å‹è½¬æ¢æ—¶æœ€å¥½æå– `softmax`å‰ä¸€å±‚ä½œä¸ºæœ€åçš„è¾“å‡ºå±‚ï¼Œå› ä¸º`classifier.classify(img, softmax True)` è¯†åˆ«å‡½æ•°çš„`softmax`å‚æ•°é»˜è®¤ä¸º`True`ï¼Œå³ä¼šå¯¹ç»“æœè®¡ç®—ä¸€æ¬¡`softmax`ï¼Œæ‰€ä»¥æ¨¡å‹å°±ä¸ç”¨`softmax`è¿™ä¸€å±‚äº†ï¼Œå½“ç„¶å¦‚æœæ¨¡å‹åŒ…å«äº†`softmax`å±‚ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸å†æ‰§è¡Œä¸€é`softmax`ï¼š `classifier.classify(img, softmax False)`ã€‚"},"/maixpy/doc/zh/vision/body_key_points.html":{"title":"MaixCAM MaixPy æ£€æµ‹äººä½“å…³é”®ç‚¹å§¿æ€æ£€æµ‹","content":" title: MaixCAM MaixPy æ£€æµ‹äººä½“å…³é”®ç‚¹å§¿æ€æ£€æµ‹ ## ç®€ä»‹ ä½¿ç”¨ MaixPy å¯ä»¥è½»æ¾æ£€æµ‹äººä½“å…³èŠ‚çš„å…³é”®ç‚¹çš„åæ ‡ï¼Œç”¨åœ¨å§¿æ€æ£€æµ‹æ¯”å¦‚åå§¿æ£€æµ‹ï¼Œä½“æ„Ÿæ¸¸æˆè¾“å…¥ç­‰ã€‚ MaixPy å®ç°äº†åŸºäº [YOLOv8 Pose / YOLO11 Pose](https://github.com/ultralytics/ultralytics) çš„äººä½“å§¿æ€æ£€æµ‹ï¼Œå¯ä»¥æ£€æµ‹åˆ°äººä½“`17`ä¸ªå…³é”®ç‚¹ã€‚ ![](../../assets/body_keypoints.jpg) ## ä½¿ç”¨ ä½¿ç”¨ MaixPy çš„ `maix.nn.YOLOv8` æˆ–è€… `maix.nn.YOLO11` ç±»å¯ä»¥è½»æ¾å®ç°ï¼š ```python from maix import camera, display, image, nn, app detector nn.YOLOv8(model \"/root/models/yolov8n_pose.mud\", dual_buff True) # detector nn.YOLO11(model \"/root/models/yolo11n_pose.mud\", dual_buff True) cam camera.Camera(detector.input_width(), detector.input_height(), detector.input_format()) dis display.Display() while not app.need_exit(): img cam.read() objs detector.detect(img, conf_th 0.5, iou_th 0.45, keypoint_th 0.5) for obj in objs: img.draw_rect(obj.x, obj.y, obj.w, obj.h, color image.COLOR_RED) msg f'{detector.labels[obj.class_id]}: {obj.score:.2f}' img.draw_string(obj.x, obj.y, msg, color image.COLOR_RED) detector.draw_pose(img, obj.points, 8 if detector.input_width() > 480 else 4, image.COLOR_RED) dis.show(img) ``` å¦å¤–ä»£ç ä¹Ÿåœ¨[MaixPy/examples/vision](https://github.com/sipeed/MaixPy/tree/main/examples/vision/ai_vision)ç›®å½•ä¸‹å¯ä»¥æ‰¾åˆ°ã€‚ å¯ä»¥çœ‹åˆ°å› ä¸ºç”¨äº†`YOLOv8 Pose` æ‰€ä»¥è¿™é‡Œç›´æ¥ç”¨äº†`YOLOv8`è¿™ä¸ªç±»ï¼Œå’Œ`YOLOv8`ç‰©ä½“æ£€æµ‹æ¨¡å‹åªæ˜¯æ¨¡å‹æ–‡ä»¶ä¸åŒï¼Œ `YOLO11`åŒç†ï¼Œç„¶åå°±æ˜¯`detect`å‡½æ•°è¿”å›çš„ç»“æœå¤šäº†`points`å€¼ï¼Œæ˜¯ä¸€ä¸ª`int`ç±»å‹çš„`list`åˆ—è¡¨ï¼Œä¸€å…±`17`ä¸ªç‚¹ï¼ŒæŒ‰æ¬¡åºä¾æ¬¡æ’åˆ—ï¼Œæ¯”å¦‚ç¬¬ä¸€ä¸ªå€¼æ˜¯é¼»å­çš„ x åæ ‡ï¼Œ ç¬¬äºŒä¸ªå€¼æ˜¯é¼»å­çš„ y åæ ‡ï¼Œä¾æ¬¡ä¸ºï¼š ```python 1. é¼»å­ï¼ˆNoseï¼‰ 2. å·¦çœ¼ï¼ˆLeft Eyeï¼‰ 3. å³çœ¼ï¼ˆRight Eyeï¼‰ 4. å·¦è€³ï¼ˆLeft Earï¼‰ 5. å³è€³ï¼ˆRight Earï¼‰ 6. å·¦è‚©ï¼ˆLeft Shoulderï¼‰ 7. å³è‚©ï¼ˆRight Shoulderï¼‰ 8. å·¦è‚˜ï¼ˆLeft Elbowï¼‰ 9. å³è‚˜ï¼ˆRight Elbowï¼‰ 10. å·¦æ‰‹è…•ï¼ˆLeft Wristï¼‰ 11. å³æ‰‹è…•ï¼ˆRight Wristï¼‰ 12. å·¦é«‹ï¼ˆLeft Hipï¼‰ 13. å³é«‹ï¼ˆRight Hipï¼‰ 14. å·¦è†ï¼ˆLeft Kneeï¼‰ 15. å³è†ï¼ˆRight Kneeï¼‰ 16. å·¦è„šè¸ï¼ˆLeft Ankleï¼‰ 17. å³è„šè¸ï¼ˆRight Ankleï¼‰ ``` å¦‚æœæŸäº›éƒ¨ä½è¢«é®æŒ¡ï¼Œé‚£ä¹ˆå€¼ä¸º` 1`ã€‚ ## æ›´å¤šè¾“å…¥åˆ†è¾¨ç‡æ¨¡å‹ é»˜è®¤çš„æ¨¡å‹æ˜¯è¾“å…¥æ˜¯`320x224`åˆ†è¾¨ç‡ï¼Œå¦‚æœä½ å¸Œæœ›ä½¿ç”¨æ›´å¤§åˆ†è¾¨ç‡çš„æ¨¡å‹ï¼Œå¯ä»¥åˆ° MaixHub æ¨¡å‹åº“ä¸‹è½½å¹¶ä¼ è¾“åˆ°è®¾å¤‡ä½¿ç”¨: * YOLOv8 Pose: [https://maixhub.com/model/zoo/401](https://maixhub.com/model/zoo/401) * YOLO11 Pose: [https://maixhub.com/model/zoo/454](https://maixhub.com/model/zoo/454) åˆ†è¾¨ç‡è¶Šå¤§ç†è®ºä¸Šç²¾åº¦è¶Šé«˜ä½†æ˜¯è¿è¡Œé€Ÿåº¦æ›´ä½ï¼Œæ ¹æ®ä½ çš„ä½¿ç”¨åœºæ™¯é€‰æ‹©ï¼Œå¦å¤–å¦‚æœæä¾›çš„åˆ†è¾¨ç‡ä¸æ»¡è¶³ä½ çš„è¦æ±‚ä½ ä¹Ÿå¯ä»¥è‡ªå·±åˆ° [YOLOv8 Pose / YOLO11 Pose](https://github.com/ultralytics/ultralytics) ä½¿ç”¨æ‘¸æ–°è®­ç»ƒæºç å¯¼å‡ºè‡ªå·±çš„onnxæ¨¡å‹ï¼Œç„¶åè½¬æ¢ä¸º MaixCAM æ”¯æŒçš„æ¨¡å‹ï¼ˆæ–¹æ³•è§åé¢çš„æ–‡ç« ï¼‰ã€‚ ## dual_buff åŒç¼“å†²åŒºåŠ é€Ÿ ä½ å¯èƒ½æ³¨æ„åˆ°è¿™é‡Œæ¨¡å‹åˆå§‹åŒ–ä½¿ç”¨äº†`dual_buff`ï¼ˆé»˜è®¤å€¼å°±æ˜¯ `True`ï¼‰ï¼Œä½¿èƒ½ `dual_buff` å‚æ•°å¯ä»¥åŠ å¿«è¿è¡Œæ•ˆç‡ï¼Œæé«˜å¸§ç‡ï¼Œå…·ä½“åŸç†å’Œä½¿ç”¨æ³¨æ„ç‚¹è§ [dual_buff ä»‹ç»](./dual_buff.html)ã€‚"},"/maixpy/doc/zh/vision/custmize_model.html":{"title":"","content":"è¯·çœ‹ [MaixCAM æ¨¡å‹è½¬æ¢](../ai_model_converter/maixcam.html)ï¼Œä»¥åŠåœ¨å·¦è¾¹ç›®å½•æ‰¾åˆ°ä½ è¦è½¬æ¢çš„æ¨¡å‹æ–‡æ¡£ï¼Œæ¯”å¦‚[è‡ªå®šä¹‰ yolov5 æ¨¡å‹](./customize_model_yolov5.html)ã€‚"},"/maixpy/doc/zh/vision/opencv.html":{"title":"MaixCAM MaixPy ä½¿ç”¨ OpenCV","content":" title: MaixCAM MaixPy ä½¿ç”¨ OpenCV ## ç®€ä»‹ å¯¹äº MaixCAMï¼Œå› ä¸ºä½¿ç”¨äº† Linuxï¼Œ å¹¶ä¸”æ€§èƒ½åŸºæœ¬èƒ½å¤Ÿæ”¯æ’‘ä½¿ç”¨`Python`ç‰ˆæœ¬çš„`OpenCV`ï¼Œæ‰€ä»¥é™¤äº†ä½¿ç”¨`maix`æ¨¡å—ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨`cv2`æ¨¡å—ã€‚ æœ¬æ–‡ä¾‹ç¨‹ä»¥åŠæ›´å¤šå¯ä»¥åœ¨[MaixPy/examples/vision/opencv](https://github.com/sipeed/MaixPy/tree/main/examples/vision/opencv) ä¸­æ‰¾åˆ°ã€‚ **æ³¨æ„ OpenCV çš„å‡½æ•°åŸºæœ¬éƒ½æ˜¯ CPU è®¡ç®—çš„ï¼Œèƒ½ä½¿ç”¨ maix çš„æ¨¡å—å°½é‡ä¸ä½¿ç”¨ OpenCVï¼Œå› ä¸º maix æœ‰å¾ˆå¤šå‡½æ•°éƒ½æ˜¯ç»è¿‡ç¡¬ä»¶åŠ é€Ÿè¿‡çš„ã€‚** ## maix.image.Image å¯¹è±¡å’Œ Numpy/OpenCV æ ¼å¼äº’ç›¸è½¬æ¢ `maix.image.Image`å¯¹è±¡å¯ä»¥è½¬æ¢æˆ`numpy`æ•°ç»„ï¼Œè¿™æ ·å°±èƒ½ç»™`numpy`å’Œ`opencv`ç­‰åº“ä½¿ç”¨ï¼š ```python from maix import image, time, display, app disp display.Display() while not app.need_exit(): img image.Image(320, 240, image.Format.FMT_RGB888) img.draw_rect(0, 0, 100, 100, image.COLOR_RED, thickness 1) t time.ticks_ms() img_bgr image.image2cv(img, ensure_bgr True, copy True) img2 image.cv2image(img_bgr, bgr True, copy True) print(\"time:\", time.ticks_ms() t) print(type(img_bgr), img_bgr.shape) print(type(img2), img2) print(\"\") disp.show(img2) ``` å‰é¢çš„ç¨‹åºå› ä¸ºæ¯æ¬¡è½¬æ¢éƒ½è¦æ‹·è´ä¸€æ¬¡å†…å­˜ï¼Œæ‰€ä»¥é€Ÿåº¦ä¼šæ¯”è¾ƒæ…¢ï¼Œä¸‹é¢ä¸ºä¼˜åŒ–é€Ÿåº¦ç‰ˆæœ¬ï¼Œå¦‚æœä¸æ˜¯æé™è¿½æ±‚é€Ÿåº¦ä¸å»ºè®®ä½¿ç”¨ï¼Œå®¹æ˜“å‡ºé”™ï¼š ```python from maix import image, time, display, app disp display.Display() while not app.need_exit(): img image.Image(320, 240, image.Format.FMT_RGB888) img.draw_rect(0, 0, 100, 100, image.COLOR_RED, thickness 1) t time.ticks_ms() img_rgb image.image2cv(img, ensure_bgr False, copy False) img2 image.cv2image(img_rgb, bgr False, copy False) print(\"time:\", time.ticks_ms() t) print(type(img_rgb), img_rgb.shape) print(type(img2), img2) disp.show(img2) ``` * `img_rgb image.image2cv(img, ensure_bgr False, copy False)`ä¸­`img_rgb` ä¼šç›´æ¥ä½¿ç”¨ `img` çš„æ•°æ®ï¼Œä¸ä¼šäº§ç”Ÿå†…å­˜æ‹·è´ï¼Œæ³¨æ„æ­¤æ—¶å¾—åˆ°çš„`img_rgb` æ˜¯ `RGB` å›¾ï¼Œ`opencv`çš„ API éƒ½æ˜¯è®¤ä¸ºå›¾æ˜¯ `BGR` çš„ï¼Œæ‰€ä»¥ç”¨`opencv`çš„ API æ“ä½œå›¾åƒæ—¶è¦æ³¨æ„ï¼Œå¦‚æœä½ æ— æ³•æŒæ§è¯·è®¾ç½®`ensure_bgr`ä¸º`True`ã€‚ * `img2 image.cv2image(img_rgb, bgr False, copy False)`ä¸­è®¾ç½®äº†`copy`ä¸º`False`ï¼Œå³ç›´æ¥ä½¿ç”¨`img_rgb`çš„å†…å­˜ï¼Œä¸ä¼šæ–°æ‹·è´ä¸€ä»½å†…å­˜ï¼Œæ‰€ä»¥é€Ÿåº¦æ›´å¿«äº†ï¼Œä½†æ˜¯éœ€è¦å°å¿ƒï¼Œåœ¨ `img2` ä½¿ç”¨ç»“æŸå‰`img_bgr`ä¸èƒ½è¢«é”€æ¯ï¼Œå¦åˆ™ç¨‹åºä¼šå´©æºƒã€‚ * æ³¨æ„å› ä¸ºå€Ÿç”¨äº†å†…å­˜ï¼Œæ‰€ä»¥æ›´æ”¹è½¬æ¢åçš„å›¾åƒä¹Ÿä¼šå½±å“åˆ°è½¬æ¢å‰çš„å›¾åƒã€‚ ## åŠ è½½ä¸€å¼ å›¾ç‰‡ ```python import cv2 file_path \"/maixapp/share/icon/detector.png\" img cv2.imread(file_path) print(img) ``` å› ä¸º`cv2`æ¨¡å—æ¯”è¾ƒè‡ƒè‚¿ï¼Œ`import cv2`å¯èƒ½ä¼šéœ€è¦ä¸€ç‚¹æ—¶é—´ã€‚ ## æ˜¾ç¤ºå›¾åƒåˆ°å±å¹• ä½†æ˜¯ç”±äºç›´æ¥ä½¿ç”¨äº†å®˜æ–¹çš„ OpenCVï¼Œæ²¡æœ‰å¯¹æ¥æ˜¾ç¤ºï¼Œæ‰€ä»¥è¦æ˜¾ç¤ºåˆ°å±å¹•ä¸Šéœ€è¦è½¬æ¢æˆ`maix.image.Image`å¯¹è±¡åå†ç”¨`display`æ¥æ˜¾ç¤ºï¼š ```python from maix import display, image, time import cv2 disp display.Display() file_path \"/maixapp/share/icon/detector.png\" img cv2.imread(file_path) img_show image.cv2image(img) disp.show(img_show) while not app.need_exit(): time.sleep(1) ``` ## ä½¿ç”¨ OpenCV å‡½æ•° ä»¥è¾¹ç¼˜æ£€æµ‹ä¸ºä¾‹ï¼š åŸºäºä¸Šé¢çš„ä»£ç ï¼Œä½¿ç”¨`cv2.Canny`å‡½æ•°å³å¯ï¼š ```python from maix import image, display, app, time import cv2 file_path \"/maixapp/share/icon/detector.png\" img0 cv2.imread(file_path) disp display.Display() while not app.need_exit(): img img0.copy() # canny method t time.ticks_ms() edged cv2.Canny(img, 180, 60) t2 time.ticks_ms() t # show by maix.display t time.ticks_ms() img_show image.cv2image(edged) print(f\"edge time: {t2}ms, convert time: {time.ticks_ms() t}ms\") disp.show(img_show) ``` ## ä½¿ç”¨æ‘„åƒå¤´ åœ¨ PC ä¸Šï¼Œ æˆ‘ä»¬ä½¿ç”¨ `OpenCV` çš„`VideoCapture`ç±»æ¥è¯»å–æ‘„åƒå¤´ï¼Œå¯¹äº `MaixCAM`, `OpenCV` æ²¡æœ‰é€‚é…ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨`maix.camera` æ¨¡å—æ¥è¯»å–æ‘„åƒå¤´ï¼Œç„¶åç»™`OpenCV`ä½¿ç”¨ã€‚ é€šè¿‡`image.image2cv`å‡½æ•°å°†`maix.image.Image`å¯¹è±¡è½¬ä¸º`numpy.ndarray`å¯¹è±¡ç»™`OpenCV`ä½¿ç”¨ï¼š ```python from maix import image, display, app, time, camera import cv2 disp display.Display() cam camera.Camera(320, 240) while not app.need_exit(): img cam.read() # convert maix.image.Image object to numpy.ndarray object t time.ticks_ms() img image.image2cv(img) print(\"time: \", time.ticks_ms() t) # canny method edged cv2.Canny(img, 180, 60) # show by maix.display img_show image.cv2image(edged) disp.show(img_show) ```"},"/maixpy/doc/zh/vision/self_learn_classifier.html":{"title":"MaixCAM MaixPy è‡ªå­¦ä¹ åˆ†ç±»å™¨","content":" title: MaixCAM MaixPy è‡ªå­¦ä¹ åˆ†ç±»å™¨ ## MaixPy è‡ªå­¦ä¹ åˆ†ç±»å™¨ä»‹ç» ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬è¦è¯†åˆ«æ–°çš„ç±»åˆ«ï¼Œéœ€è¦åœ¨ç”µè„‘ç«¯é‡æ–°é‡‡é›†æ•°æ®é›†å¹¶è®­ç»ƒï¼Œæ­¥éª¤å¾ˆéº»çƒ¦ï¼Œéš¾åº¦è¾ƒé«˜ï¼Œè¿™é‡Œæä¾›ä¸€ç§ä¸éœ€è¦ç”µè„‘ç«¯è®­ç»ƒï¼Œè€Œæ˜¯ç›´æ¥åœ¨è®¾å¤‡ç«¯å°±èƒ½ç§’å­¦ä¹ æ–°çš„ç‰©ä½“ï¼Œé€‚åˆåœºæ™¯ä¸å¤ªå¤æ‚çš„ä½¿ç”¨åœºæ™¯ã€‚ æ¯”å¦‚çœ¼å‰æœ‰é¥®æ–™ç“¶å’Œæ‰‹æœºï¼Œä½¿ç”¨è®¾å¤‡åˆ†åˆ«æ‹ä¸€å¼ å®ƒä»¬çš„ç…§ç‰‡ä½œä¸ºä¸¤ä¸ªåˆ†ç±»çš„ä¾æ®ï¼Œç„¶åå†é‡‡é›†å‡ å¼ ä»–ä»¬å„ä¸ªè§’åº¦çš„ç…§ç‰‡ï¼Œæå–å®ƒä»¬çš„ç‰¹å¾ä¿å­˜ï¼Œç„¶åè¯†åˆ«æ—¶æ ¹æ®å›¾åƒçš„ç‰¹å¾å€¼åˆ†åˆ«å’Œä¿å­˜çš„ç‰¹å¾å€¼è¿›è¡Œå¯¹æ¯”ï¼Œå’Œä¿å­˜çš„å“ªä¸ªæ›´ç›¸è¿‘å°±è®¤ä¸ºæ˜¯å¯¹åº”çš„åˆ†ç±»ã€‚ ## MaixPy ä¸­ä½¿ç”¨è‡ªå­¦ä¹ åˆ†ç±»å™¨ é»˜è®¤é•œåƒè‡ªå¸¦äº† [è‡ªå­¦ä¹ åˆ†ç±» APP](https://maixhub.com/app/30)ï¼Œå¯ä»¥ç›´æ¥å°è¯•ä½¿ç”¨ç†Ÿæ‚‰ä½¿ç”¨æµç¨‹ã€‚ ![](../../assets/self_learn_classifier.jpg) æ­¥éª¤ï¼š * ç‚¹å‡»`+ Class` æŒ‰é’®ï¼Œ é‡‡é›† n å¼ åˆ†ç±»(class)å›¾ï¼Œé‡‡é›†å›¾æ—¶ç‰©ä½“éœ€è¦åœ¨å±å¹•çš„ç™½è‰²æ¡†ä¸­ã€‚ * ç‚¹å‡»`+ Sample`æŒ‰é’®ï¼Œé‡‡é›† m å¼ æ ·æœ¬å›¾ï¼Œæ¯ä¸ªåˆ†ç±»éƒ½é‡‡é›†ä¸€äº›ï¼Œé¡ºåºæ— æ‰€è°“ï¼Œå¼ æ•°ä¹Ÿæ¯”è¾ƒéšæ„ï¼Œæœ€å¥½æ˜¯åœ¨å„ä¸ªè§’åº¦æ‹ä¸€ç‚¹ï¼Œä¸è¦å·®è·è¿‡å¤§ã€‚ * ç‚¹å‡»`Learn`æŒ‰é’®ï¼Œå¯åŠ¨å­¦ä¹ ï¼Œä¼šè‡ªåŠ¨æ ¹æ®é‡‡é›†çš„åˆ†ç±»å›¾å’Œæ ·æœ¬å›¾è¿›è¡Œåˆ†ç±»å­¦ä¹ ï¼Œå¾—åˆ°åˆ†ç±»çš„ç‰¹å¾ã€‚ * å±å¹•ä¸­å¤®å¯¹å‡†ç‰©ä½“ï¼Œè¯†åˆ«å›¾åƒè¾“å‡ºç»“æœï¼Œå¯ä»¥çœ‹åˆ°å±å¹•æ˜¾ç¤ºäº†æ‰€å±çš„åˆ†ç±»ï¼Œä»¥åŠå’Œè¿™ä¸ªåˆ†ç±»çš„ç›¸ä¼¼è·ç¦»ï¼Œç›¸ä¼¼è·ç¦»è¶Šè¿‘åˆ™è¶Šç›¸ä¼¼ã€‚ * æ­¤ APP å­¦ä¹ åçš„ç‰¹å¾å€¼ä¼šå­˜åˆ°`/root/my_classes.bin`ï¼Œæ‰€ä»¥é€€å‡ºåº”ç”¨æˆ–è€…é‡å¯äº†ä»ç„¶ä¼šè‡ªåŠ¨åŠ è½½ä¸Šä¸€æ¬¡çš„ã€‚ ç®€æ´ç‰ˆæœ¬ä»£ç ï¼Œå®Œæ•´ç‰ˆæœ¬è¯·çœ‹[ä¾‹ç¨‹](https://github.com/sipeed/maixpy/tree/main/examples/vision/ai_vision)é‡Œé¢çš„å®Œæ•´ä»£ç ã€‚ ```python from maix import nn, image classifier nn.SelfLearnClassifier(model \"/root/models/mobilenetv2.mud\", dual_buff True) img1 image.load(\"/root/1.jpg\") img2 image.load(\"/root/2.jpg\") img3 image.load(\"/root/3.jpg\") sample_1 image.load(\"/root/sample_1.jpg\") sample_2 image.load(\"/root/sample_2.jpg\") sample_3 image.load(\"/root/sample_3.jpg\") sample_4 image.load(\"/root/sample_4.jpg\") sample_5 image.load(\"/root/sample_5.jpg\") sample_6 image.load(\"/root/sample_6.jpg\") classifier.add_class(img1) classifier.add_class(img2) classifier.add_class(img3) classifier.add_sample(sample_1) classifier.add_sample(sample_2) classifier.add_sample(sample_3) classifier.add_sample(sample_4) classifier.add_sample(sample_5) classifier.add_sample(sample_6) classifier.learn() img image.load(\"/root/test.jpg\") max_idx, max_score classifier.classify(img) print(maix_idx, max_score) ``` ## å‚¨å­˜å’ŒåŠ è½½å­¦ä¹ åˆ°çš„ç‰¹å¾å€¼ ä½¿ç”¨ `save` å‡½æ•°è¿›è¡Œå‚¨å­˜ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé‡Œé¢å­˜äº†ç‰©ä½“çš„ç‰¹å¾å€¼ã€‚ å†ä½¿ç”¨æ—¶ç”¨`load`å‡½æ•°è¿›è¡ŒåŠ è½½å³å¯ã€‚ ```python classifier.save(\"/root/my_classes.bin\") classifier.load(\"/root/my_classes.bin\") ``` å¦‚æœä½ ç»™æ¯ä¸€ä¸ªåˆ†ç±»å‘½åäº†ï¼Œæ¯”å¦‚å­˜åˆ°äº†`labels`å˜é‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ï¼š ```python classifier.save(\"/root/my_classes.bin\", labels labels) labels classifier.load(\"/root/my_classes.bin\") ``` ## dual_buff åŒç¼“å†²åŒºåŠ é€Ÿ ä½ å¯èƒ½æ³¨æ„åˆ°è¿™é‡Œæ¨¡å‹åˆå§‹åŒ–ä½¿ç”¨äº†`dual_buff`ï¼ˆé»˜è®¤å€¼å°±æ˜¯ `True`ï¼‰ï¼Œä½¿èƒ½ `dual_buff` å‚æ•°å¯ä»¥åŠ å¿«è¿è¡Œæ•ˆç‡ï¼Œæé«˜å¸§ç‡ï¼Œå…·ä½“åŸç†å’Œä½¿ç”¨æ³¨æ„ç‚¹è§ [dual_buff ä»‹ç»](./dual_buff.html)ã€‚"},"/maixpy/doc/zh/vision/camera.html":{"title":"MaixCAM MaixPy æ‘„åƒå¤´ä½¿ç”¨","content":" title: MaixCAM MaixPy æ‘„åƒå¤´ä½¿ç”¨ update: date: 2024 04 03 author: neucrack version: 1.0.0 content: åˆç‰ˆæ–‡æ¡£ date: 2024 08 21 author: YWJ version: 1.0.1 content: ä¿®æ­£æ–‡æ¡£éƒ¨åˆ†bug,å¢åŠ éƒ¨åˆ†å†…å®¹ ## ç®€ä»‹ å¯¹äº MaixCAM é»˜è®¤æ­è½½äº† GC4653 æ‘„åƒå¤´ï¼Œæˆ–è€…å¯é€‰çš„ OS04A10 æ‘„åƒå¤´æˆ–è€…å…¨å±€å¿«é—¨æ‘„åƒå¤´ï¼Œç”šè‡³æ˜¯ HDMI è½¬ MIPI æ¨¡å—ï¼Œéƒ½å¯ä»¥ç›´æ¥ç”¨ç®€å•çš„ API è°ƒç”¨ã€‚ ## API æ–‡æ¡£ æœ¬æ–‡ä»‹ç»å¸¸ç”¨æ–¹æ³•ï¼Œæ›´å¤š API ä½¿ç”¨å‚è€ƒ [maix.camera](/api/maix/camera.html) æ¨¡å—çš„æ–‡æ¡£ã€‚ ## æ‘„åƒå¤´åˆ‡æ¢ ç›®å‰æ”¯æŒçš„æ‘„åƒå¤´ï¼š * **GC4653**ï¼šM12 é€šç”¨é•œå¤´, 1/3\" ä¼ æ„Ÿå™¨ï¼Œç”»è´¨æ¸…æ™°ï¼Œ 4M åƒç´ ã€‚ * **OS04A10**ï¼šM12 é€šç”¨é•œå¤´ï¼Œ1/1.8\" å¤§åº•ä¼ æ„Ÿå™¨ï¼Œç”»è´¨è¶…æ¸…ï¼Œ 4Måƒç´ ã€‚ * **OV2685**ï¼šä¸æ”¯æŒé•œå¤´æ›´æ¢ï¼Œ1/5\"ä¼ æ„Ÿå™¨ï¼Œ2M åƒç´ ï¼Œç”»è´¨æœ€å·®ï¼Œæˆæœ¬æœ€ä½ï¼Œä¸€èˆ¬ä¸å»ºè®®ä½¿ç”¨ã€‚ * **SC035HGS**ï¼šé»‘ç™½å…¨å±€å¿«é—¨æ‘„åƒå¤´ï¼Œ30Wé»‘ç™½åƒç´ ï¼Œé€‚åˆæ‹æ‘„é«˜é€Ÿç‰©ä½“ã€‚ ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ‡æ¢ï¼Œåªæ¥ç¡¬ä»¶æ¢ä¸Šå³å¯ä½¿ç”¨ã€‚ ## è·å–æ‘„åƒå¤´çš„å›¾åƒä¿¡æ¯ ä½¿ç”¨ MaixPy è½»æ¾è·å–ï¼š ```python from maix import camera cam camera.Camera(640, 480) while 1: img cam.read() print(img) ``` è¿™é‡Œæˆ‘ä»¬ä»`maix`æ¨¡å—å¯¼å…¥`camera`æ¨¡å—ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª`Camera`å¯¹è±¡ï¼ŒæŒ‡å®šå›¾åƒçš„å®½åº¦å’Œé«˜åº¦ã€‚ç„¶ååœ¨ä¸€ä¸ªå¾ªç¯ä¸­ä¸æ–­è¯»å–å›¾åƒï¼Œ é»˜è®¤å‡ºçš„å›¾ä¸º`RGB`æ ¼å¼ï¼Œå¦‚æœéœ€è¦`BGR`æ ¼å¼ï¼Œå…¶å®ƒæ ¼å¼è¯·çœ‹ API æ–‡æ¡£ã€‚ ä½ è¿˜å¯ä»¥è·å–ç°åº¦å›¾åƒ ```python from maix import camera, image cam camera.Camera(640, 480, image.Format.FMT_GRAYSCALE)\t# è®¾ç½®è¾“å‡ºç°åº¦å›¾åƒ ``` è¿˜å¯ä»¥è·å–NV21å›¾åƒ ```python from maix import camera, image cam camera.Camera(640, 480, image.Format.FMT_YVU420SP)\t# è®¾ç½®è¾“å‡ºNV21å›¾åƒ ``` æ³¨æ„ï¼šå¦‚æœè®¾ç½®äº†å¾ˆé«˜çš„åˆ†è¾¨ç‡ï¼ˆä¾‹å¦‚`2560x1440`ï¼‰æ—¶éœ€è¦å…³é—­MaixVisionçš„åœ¨çº¿æµè§ˆåŠŸèƒ½ï¼Œå¦åˆ™å¯èƒ½ä¼šå› ä¸ºå†…å­˜ä¸è¶³å¯¼è‡´ä»£ç è¿è¡Œå¼‚å¸¸ã€‚ ## è®¾ç½®æ‘„åƒå¤´çš„å¸§ç‡ ç›®å‰æ‘„åƒå¤´æ”¯æŒ`30fps`ã€`60fps`å’Œ`80fps`ä¸‰ç§é…ç½®ï¼Œç”±åˆ›å»º`Camera`å¯¹è±¡æ—¶ä¼ å…¥çš„`width`ï¼Œ`height`ï¼Œ`fps`å‚æ•°æ¥é€‰æ‹©å¸§ç‡ï¼Œç›®å‰`60/80fps`ä¸‹æœ€å¤§æ”¯æŒåˆ†è¾¨ç‡`1280x720`ï¼Œ `30fps`ä¸‹æœ€å¤§æ”¯æŒåˆ†è¾¨ç‡`2560x1440`ã€‚ ### è®¾ç½®å¸§ç‡ä¸º30å¸§ ```python from maix import camera cam camera.Camera(640, 480, fps 30)\t\t\t# è®¾ç½®å¸§ç‡ä¸º30å¸§ # or cam camera.Camera(1920, 1280) # åˆ†è¾¨ç‡é«˜äº1280x720æ—¶å¸§ç‡ä¼šè®¾ç½®ä¸º30å¸§ ``` ### è®¾ç½®å¸§ç‡ä¸º60å¸§ ```python from maix import camera cam camera.Camera(640, 480, fps 60)\t # è®¾ç½®å¸§ç‡ä¸º60å¸§ # or cam camera.Camera(640, 480) # åˆ†è¾¨ç‡ä½äºæˆ–ç­‰äº1280x720æ—¶å¸§ç‡ä¼šè®¾ç½®ä¸º80fps ``` ### è®¾ç½®å¸§ç‡ä¸º80å¸§ ```python from maix import camera cam camera.Camera(640, 480, fps 80)\t # è®¾ç½®å¸§ç‡ä¸º80å¸§ ``` æ³¨æ„ï¼š 1. å¦‚æœ`Camera`ä¼ å…¥çš„å°ºå¯¸å¤§äº`1280x720`ï¼Œä¾‹å¦‚å†™æˆ`camera.Camera(1920, 1080, fps 60)`ï¼Œæ­¤æ—¶`fps`å‚æ•°å°†ä¼šå¤±æ•ˆï¼Œå¸§ç‡å°†ä¿æŒåœ¨`30fps`ã€‚ 2. `60/80fps`ä¸`30fps`çš„ç”»é¢ç›¸æ¯”ä¼šæœ‰å‡ ä¸ªåƒç´ çš„åç§»ï¼Œåœ¨å¯¹è§†è§’æœ‰ä¸¥æ ¼è¦æ±‚çš„åº”ç”¨ä¸‹éœ€è¦æ³¨æ„ä¿®æ­£åç§»ã€‚ 3. éœ€è¦æ³¨æ„ç”±äº`60/80fps`å’Œ`30fps`å…±ç”¨äº†`isp`é…ç½®ï¼Œåœ¨æŸäº›ç¯å¢ƒä¸‹ä¸¤ç§å¸§ç‡ä¸‹çš„ç”»é¢ç”»è´¨ä¼šå­˜åœ¨ä¸€äº›åå·®ã€‚ 4. æ‘„åƒå¤´éœ€è¦çœ‹ä½“åˆ¶ï¼Œæœ‰äº›ä½“åˆ¶æ— æ³•è®¾ç½®åˆ°80fpsï¼Œä¼šå‡ºç°ç”»é¢æœ‰å¥‡æ€ªçš„çº¹è·¯ï¼Œè¯·æ¢ä¼šæ­£å¸¸çš„ 60fpsä½¿ç”¨ã€‚ ## å›¾åƒçŸ«æ­£ å¯¹äºç”»é¢å­˜åœ¨é±¼çœ¼ç­‰ç•¸å˜çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨`Image`å¯¹è±¡ä¸‹çš„`lens_corr`å‡½æ•°å¯¹å›¾ç‰‡è¿›è¡Œç•¸å˜çŸ«æ­£ã€‚ä¸€èˆ¬æƒ…å†µåªéœ€è¦è°ƒå¤§å’Œè°ƒå°`strength`çš„å€¼æ¥å°†ç”»é¢è°ƒæ•´åˆ°åˆé€‚æ•ˆæœå³å¯ã€‚ ```python from maix import camera, display,app,time cam camera.Camera(320, 240) disp display.Display() while not app.need_exit(): t time.ticks_ms() img cam.read() img img.lens_corr(strength 1.5)\t# è°ƒæ•´strengthçš„å€¼ç›´åˆ°ç”»é¢ä¸å†ç•¸å˜ disp.show(img) ``` æ³¨æ„ç”±äºæ˜¯è½¯ä»¶çŸ«æ­£ï¼Œéœ€è¦è€—è´¹ä¸€å®šæ—¶é—´ï¼Œå¦å¤–ä¹Ÿå¯ä»¥åªæ¥ç”¨æ— ç•¸å˜é•œå¤´ï¼ˆè¯¢é—®å•†å®¶ï¼‰ä»ç¡¬ä»¶å±‚é¢è§£å†³ã€‚ ## è·³è¿‡ å¼€å¤´çš„å¸§ æ‘„åƒå¤´åˆå§‹åŒ–çš„ä¸€å°æ®µæ—¶é—´ï¼Œå¯èƒ½å›¾åƒé‡‡é›†è¿˜æ²¡ç¨³å®šå‡ºç°å¥‡æ€ªçš„ç”»é¢ï¼Œå¯ä»¥é€šè¿‡`skip_frames`å‡½æ•°è·³è¿‡å¼€å¤´çš„å‡ å¸§ï¼š ```python cam camera.Camera(640, 480) cam.skip_frames(30) # è·³è¿‡å¼€å¤´çš„30å¸§ ``` ## æ˜¾ç¤ºæ‘„åƒå¤´è·å–çš„å›¾åƒ MaixPy æä¾›äº†`display`æ¨¡å—ï¼Œå¯ä»¥æ–¹ä¾¿çš„æ˜¾ç¤ºå›¾åƒï¼š ```python from maix import camera, display cam camera.Camera(640, 480) disp display.Display() while 1: img cam.read() disp.show(img) ``` ## è®¾ç½®æ‘„åƒå¤´å‚æ•° ### è®¾ç½®æ›å…‰æ—¶é—´ æ³¨æ„è®¾ç½®æ›å…‰æ—¶é—´åï¼Œæ‘„åƒå¤´ä¼šåˆ‡æ¢åˆ°æ‰‹åŠ¨æ›å…‰æ¨¡å¼ï¼Œå¦‚æœè¦åˆ‡æ¢å›è‡ªåŠ¨æ›å…‰æ¨¡å¼éœ€è¿è¡Œ`cam.exp_mode(0)` ```python cam camera.Camera() cam.exposure(1000) ``` ### è®¾ç½®å¢ç›Š æ³¨æ„è®¾ç½®å¢ç›Šåï¼Œæ‘„åƒå¤´ä¼šåˆ‡æ¢åˆ°æ‰‹åŠ¨æ›å…‰æ¨¡å¼ï¼Œå¦‚æœè¦åˆ‡æ¢å›è‡ªåŠ¨æ›å…‰æ¨¡å¼éœ€è¿è¡Œ`cam.exp_mode(0)`ã€‚è‡ªå®šä¹‰çš„å¢ç›Šå€¼åªèƒ½åœ¨æ‰‹åŠ¨æ›å…‰æ¨¡å¼ä¸‹ç”Ÿæ•ˆã€‚ ```python cam camera.Camera() cam.gain(100) ``` ### è®¾ç½®ç™½å¹³è¡¡ ```python cam camera.Camera() cam.awb_mode(1)\t\t\t# 0,å¼€å¯ç™½å¹³è¡¡;1,å…³é—­ç™½å¹³è¡¡ ``` ### è®¾ç½®äº®åº¦ã€å¯¹æ¯”åº¦å’Œé¥±å’Œåº¦ ```python cam camera.Camera() cam.luma(50)\t\t # è®¾ç½®äº®åº¦ï¼ŒèŒƒå›´[0, 100] cam.constrast(50)\t\t# è®¾ç½®å¯¹æ¯”åº¦ï¼ŒèŒƒå›´[0, 100] cam.saturation(50)\t\t# è®¾ç½®é¥±å’Œåº¦ï¼ŒèŒƒå›´[0, 100] ``` ### æ›´æ”¹å›¾ç‰‡é•¿å®½ ```python cam camera.Camera(width 640, height 480) ``` æˆ– ```python cam camera.Camera() cam.set_resolution(width 640, height 480) ```"}}